(this["webpackJsonplogin-app-reactjs"]=this["webpackJsonplogin-app-reactjs"]||[]).push([[0],{1015:function(e,t,a){},104:function(e,t,a){e.exports=a.p+"static/media/thermometer.34d42075.svg"},105:function(e,t,a){e.exports=a.p+"static/media/Thumb.11938490.svg"},106:function(e,t,a){e.exports=a.p+"static/media/emoji.0d8c3e70.svg"},107:function(e,t,a){e.exports=a.p+"static/media/steps.677f415b.svg"},1070:function(e,t,a){},141:function(e,t,a){e.exports={no_sidebar:"manageEmp_no_sidebar__2uv3-",box_bordered:"manageEmp_box_bordered__20QUh",icon:"manageEmp_icon__3jMQO",box_bordered_active:"manageEmp_box_bordered_active__1eDgI"}},1439:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(24),s=a.n(r),o=(a(662),a(2)),i=(a(663),a(664),a(665),a(33)),c=a(17),m=a(65),u=a(11),d=a(12),p=a(14),g=a(13),h=a(15),f=function(e){return"".concat("AnonyMoose",".").concat(e)},E=function(e,t){return localStorage.setItem(f(e),t)},v=function(e){return localStorage.getItem(f(e))},b=function(e){return localStorage.removeItem(f(e))},y=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.component;return v("user")?l.a.createElement(e,this.props):l.a.createElement(m.a,{to:{pathname:"/login"}})}}]),t}(l.a.Component),O=y,_=a(1458),N=a(1444),j=a(622),w=a(1445),S=a(1443),C=a(290),D=a(563),k=a.n(D),I=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:k.a,alt:"AnonyMoose",className:"pr-4 pt-2 pt-lg-0 logo"}))},x=a(564),T=a.n(x),A=a(34),U=a.n(A),M=a(6),F=a(9),P=a.n(F),R="http://10.0.6.10:8000/api/V1/",Y=a(48),L={headers:{Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},B=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"login",value:function(e,t,a){var n,l,r,s,o,i,c,m,u,d,p,g,h,f,v,b,y,O,_,N,j,w,S,C,D,k,I,x,T,A,F,B,H,z,V,q,Q;return U.a.async((function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,U.a.awrap(P.a.post(R+"authenticate/",{email:e,password:t,page:a},L));case 2:return(n=G.sent).data&&(_=n.data,N=Y.AES.encrypt(null===(l=_.user_details)||void 0===l?void 0:l.first_name,"anonymoose").toString(),j=Y.AES.encrypt(null===(r=_.user_details)||void 0===r?void 0:r.last_name,"anonymoose").toString(),w=Y.AES.encrypt(null===(s=_.user_details)||void 0===s?void 0:s.department_id.toString(),"anonymoose").toString(),S=Y.AES.encrypt(null===(o=_.user_details)||void 0===o?void 0:o.org_user_id.toString(),"anonymoose").toString(),C=Y.AES.encrypt(null===(i=_.user_details)||void 0===i?void 0:i.end_date,"anonymoose").toString(),D=Y.AES.encrypt(null===(c=_.user_details)||void 0===c?void 0:c.start_date,"anonymoose").toString(),k=Y.AES.encrypt(null===(m=_.user_data)||void 0===m?void 0:m.email,"anonymoose").toString(),I=Y.AES.encrypt(null===(u=_.user_data)||void 0===u?void 0:u.mobile_number,"anonymoose").toString(),x=Y.AES.encrypt(null===(d=_.user_data)||void 0===d?void 0:d.organization_id.toString(),"anonymoose").toString(),T=Y.AES.encrypt(null===(p=_.user_data)||void 0===p?void 0:p.user_id.toString(),"anonymoose").toString(),A=Y.AES.encrypt(null===(g=_.user_data)||void 0===g?void 0:g.is_am_web_user.toString(),"anonymoose").toString(),F=Y.AES.encrypt(null===(h=_.user_data)||void 0===h?void 0:h.is_super_user.toString(),"anonymoose").toString(),B=Y.AES.encrypt(null===(f=_.user_data)||void 0===f?void 0:f.is_amcc_user.toString(),"anonymoose").toString(),H=Y.AES.encrypt(null===(v=_.user_data)||void 0===v?void 0:v.is_org_cc_user.toString(),"anonymoose").toString(),z=Y.AES.encrypt(null===(b=_.user_data)||void 0===b?void 0:b.is_idb_user.toString(),"anonymoose").toString(),V=Y.AES.encrypt(null===(y=_.user_data)||void 0===y?void 0:y.is_seeded_user.toString(),"anonymoose").toString(),q=Y.AES.encrypt(null===(O=_.user_data)||void 0===O?void 0:O.is_app_user.toString(),"anonymoose").toString(),Q=Object(M.a)({},_,{user_data:Object(M.a)({},_.user_data,{email:k,mobile_number:I,organization_id:x,user_id:T,is_am_web_user:A,is_amcc_user:B,is_super_user:F,is_app_user:q,is_org_cc_user:H,is_idb_user:z,is_seeded_user:V}),user_details:Object(M.a)({},_.user_details,{first_name:N,last_name:j,department_id:w,org_user_id:S,end_date:C,start_date:D})}),E("user",JSON.stringify(Q)),E("current",Y.AES.encrypt(JSON.stringify(t),"anonymoose").toString())),G.abrupt("return",n.data);case 5:case"end":return G.stop()}}))}},{key:"logout",value:function(){var e=v("userType"),t="/";t="AM CC"!==(e=Y.AES.decrypt(e,"anonymoose").toString(Y.enc.Utf8))?"/org/login":"/amcc/login",localStorage.clear(),window.location=t}}]),e}(),H=new B,z=function(e,t,a){return function(n){return a="admin@anonymoose.co"===e?"is_amcc_user":a,H.login(e,t,a).then((function(e){return n({type:"LOGIN_SUCCESS",payload:{user:e,current:t}}),Promise.resolve()}),(function(e){e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return n({type:"LOGIN_FAIL"}),Promise.reject()}))}},V=a(54),q=a(1457),Q=(a(792),a(621)),G=a(1463),W=a(565),K=a.n(W),J="Control Center",$="All",Z="Info",X="OK",ee="Next",te="Back",ae="Cancel",ne="Edit",le="Delete",re="Status has been set to Active.",se="Status has been set to Scheduled.",oe=a(48),ie=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).handleLogoutClick=a.handleLogoutClick.bind(Object(V.a)(a)),a.handleChangeUserRole=a.handleChangeUserRole.bind(Object(V.a)(a)),a.state={isLoggedIn:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleLogoutClick",value:function(){H.logout()}},{key:"handleChangeUserRole",value:function(e){"amweb"===e?window.location.href="/amweb/hotlinemessages":"amcc"===e?window.location.href="/amcc/manageorganizations":"amorgcc"===e?window.location.href="/orgcc/manageemployees":"idb"===e&&(window.location.href="/idb/hotlinereports")}},{key:"render",value:function(){var e,t=this,a=this.props.userRole,n=a.amWEBUser,r=a.amCCUser,s=a.amORGUser,o=a.amIDBUser;r?E("userType",oe.AES.encrypt("AM CC","anonymoose").toString()):s?E("userType",oe.AES.encrypt("Org CC","anonymoose").toString()):n?E("userType",oe.AES.encrypt("AM WEB","anonymoose").toString()):o&&E("userType",oe.AES.encrypt("IDB","anonymoose").toString());var i=v("userType"),m=i?oe.AES.decrypt(i,"anonymoose").toString(oe.enc.Utf8):"",u=null===(e=this.props.user)||void 0===e?void 0:e.user_data,d=u.email,p=u.is_am_web_user,g=u.is_amcc_user,h=u.is_org_cc_user,f=(u.is_app_user,u.is_idb_user),b=(u.is_seeded_user,this.props.user.user_details),y=b.first_name+" "+b.last_name,O=y.charAt(0).toUpperCase()+y.slice(1),_=O.split(" "),N=_.shift().charAt(0)+_.pop().charAt(0);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{"data-test":"userInfo",className:"test",placement:"bottom",content:l.a.createElement(G.b,{className:"u-info",size:"large",bordered:!0},l.a.createElement(G.b.Item,{className:" d-flex d-lg-none"},l.a.createElement("div",{className:"d-flex flex-column "},l.a.createElement("span",{className:"uname-top"},O),l.a.createElement("span",{className:"u-type"},m.includes("Org")?J:m))),l.a.createElement(G.b.Item,null,l.a.createElement("div",{className:"email"},d,l.a.createElement("br",null),l.a.createElement("a",{href:"#"},"Edit Profile"))),s&&p?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amweb")}},"AM Web"):null,s&&g?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amcc")}},"AM CC"):null,s&&f?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("idb")}},"IDB"):null,n&&h?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amorgcc")}},J):null,n&&g?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amcc")}},"AM CC"):null,n&&f?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("idb")}},"IDB"):null,r&&p?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amweb")}},"AM Web"):null,r&&h?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amorgcc")}},J):null,r&&f?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("idb")}},"IDB"):null,o&&p?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amweb")}},"AM Web"):null,o&&h?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amorgcc")}},J):null,o&&g?l.a.createElement(G.b.Item,{onClick:function(){return t.handleChangeUserRole("amcc")}},"AM CC"):null,l.a.createElement(c.b,{to:"/changepassword"},l.a.createElement(G.b.Item,null,"Change Password")),l.a.createElement(G.b.Item,{onClick:this.handleLogoutClick},"Sign Out")),trigger:"click"},l.a.createElement(q.a,{className:"mr-2"},N),l.a.createElement("span",{className:"d-none d-lg-flex flex-column"},l.a.createElement("span",{className:"uname-top"},O),l.a.createElement("span",{className:"u-type"},m.includes("Org")?J:m)),l.a.createElement("span",{className:"expand-arrow"},l.a.createElement("img",{src:K.a,alt:"Expand Arrow",className:"pr-0 pr-md-4"}))))}}]),t}(l.a.Component);var ce=Object(m.i)(Object(i.b)((function(e){var t=e.auth;return{isLoggedIn:t.isLoggedIn,user:t.user}}))(ie)),me=a(48);var ue=Object(i.b)((function(e){var t=e.auth;return{isLoggedIn:t.isLoggedIn,user:t.user,current:t.current,message:e.message.message}}))((function(e){return Object(n.useEffect)((function(){var t=e.dispatch,a=v("userType"),n=a?me.AES.decrypt(a,"anonymoose").toString(me.enc.Utf8):"",l="";"AM CC"===n?l="is_amcc_user":"AM WEB"===n?l="is_am_web_user":"Org CC"===n?l="is_org_cc_user":"Org CC"===n?l="is_org_cc_user":"IDB"===n&&(l="is_idb_user");var r=e.current.includes('"')?e.current.slice(1,-1):e.current;setInterval((function(){var a;t(z(null===(a=e.user)||void 0===a?void 0:a.user_data.email,r,l))}),6e5)})),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{span:18,md:18,lg:12},l.a.createElement("img",{src:T.a,alt:"Anonymoose Logo",className:"pl-md-0 pr-0 pr-md-4 pt-0 pt-md-0 pt-lg-0 logo"})),l.a.createElement(S.a,{span:6,md:6,lg:12,className:"d-flex justify-content-end av-wrapper"},l.a.createElement(ce,{userRole:e})))})),de=a(131),pe=a(1464),ge=a(1465),he=N.a.Sider,fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("employee")?t="4":this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")?t="2":this.props.data.location.pathname.includes("poll")?t="3":this.props.data.location.pathname.includes("broadcast")?t="5":this.props.data.location.pathname.includes("help")?t="6":this.props.data.location.pathname.includes("info")&&(t="7")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?pe.a:ge.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(he,{className:this.state.collapsed?" d-lg-block w-md-100 sider-width":"d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(de.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(de.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(c.b,{to:"/orgcc/hotlinedirectory"},"Hotlines")),l.a.createElement(de.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(c.b,{to:"/orgcc/openlinedirectory"},"Openlines")),l.a.createElement(de.a.Item,{key:"3",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-polls"}))}," ",l.a.createElement(c.b,{to:"/orgcc/pollsdirectory"},"Polls")),l.a.createElement(de.a.Item,{key:"4",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-manage-emp"}))}," ",l.a.createElement(c.b,{to:"/orgcc/manageemployees"},"Manage Employees")),l.a.createElement(de.a.Item,{key:"5",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-broadcast"}))},l.a.createElement(c.b,{to:"/orgcc/broadcastmessages"},"Broadcast Messages")),l.a.createElement(de.a.Item,{key:"6",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-help"}))},l.a.createElement(c.b,{to:"/orgcc/help"},"Help")),l.a.createElement(de.a.Item,{key:"7",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-info"}))},l.a.createElement(c.b,{to:"/orgcc/info"},Z))),l.a.createElement("div",{className:"btm-div"},l.a.createElement(c.b,{to:"/orgcc/info",className:"px-2"},Z),l.a.createElement(c.b,{to:"/orgcc/help",className:"px-2"},"Help"))))}}]),t}(l.a.Component),Ee=(a(231),N.a.Sider),ve=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?pe.a:ge.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(Ee,{className:this.state.collapsed?"d-lg-block w-md-100 sider-width":" d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(de.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},l.a.createElement(de.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-manage-org"}))},l.a.createElement(c.b,{to:"/amcc/manageorganizations"},"Manage Organizations")))))}}]),t}(l.a.Component),be=function(e){var t=Object(m.g)(),a="/amcc/orgdetails/".concat(e.record.organization_id),n=function(){t.push(a)};return l.a.createElement(l.a.Fragment,null,e.orgName?l.a.createElement("a",{onClick:n},e.record.name):e.orgId?l.a.createElement("a",{onClick:n},e.record.identifier):l.a.createElement(l.a.Fragment,null," "))},ye=a(1449),Oe=a(1466),_e=(a(197),_.a.Search,l.a.createElement(Oe.a,{style:{fontSize:16,color:"#1890ff"}}),function(e){var t=e.columns,a=e.data,n=e.rowKey;return l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(ye.a,{pagination:{pageSize:10},rowKey:n,columns:t,dataSource:a,className:"cf"}))}),Ne=a(72),je=function(e){var t=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{type:"primary"}," ",t))},we=a(577),Se=a.n(we);function Ce(){var e=JSON.parse(v("user"));return e&&e.user_data.tokens.access?"Bearer "+e.user_data.tokens.access:{}}var De=a(8),ke=a.n(De),Ie="Email",xe="Date",Te="Mobile",Ae="Status",Ue="Are you sure you want to delete",Me="Control Center and Insights Dashboard",Fe="Raising Voice Anonymously Made Easy",Pe="Select Date and Time to publish the",Re=" date has been extended successfully.",Ye="Reply to Messages, Add Notes, Status & Urgency level",Le="Status of ",Be=" has been changed successfully.",He=" can't be changed as the end date has been passed.",ze=" can't be changed as this poll is completed.",Ve="You are about to log out. Click Ok to keep yourself logged in.",qe="You are logged out. Click Ok to log in again.",Qe=" to ",Ge="Note : max 5 image/documents can be attached",We=_.a.Search,Ke=(l.a.createElement(Oe.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),Je=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","/");if(new Date<new Date(n)){var l={name:e.name,identifier:e.identifier,organization_id:e.organization_id,start_date:ke()(e.start_date.replaceAll(" / ","-")).format("DD-MM-YYYY"),end_date:ke()(n.replaceAll("/","-")).format("DD-MM-YYYY"),status_id:"Active"===t?2:1},r={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.put(R+"saveOrganization/",l,r).then((function(){j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.name+Be}),a.props.statusOnClicked()}))}else j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.name+He})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n,searchBy:e})},a.state={data:[],searchBy:"",filterData:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.organizations;null===t||void 0===t||t.forEach((function(e){e.start_date=ke()(e.start_date,"DD-MM-YYYY").utc().local().format("MM / DD / YYYY"),e.end_date=ke()(e.end_date,"DD-MM-YYYY").utc().local().format("MM / DD / YYYY")})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.organizations!==e.organizations&&(e.organizations.forEach((function(e){e.start_date=ke()(e.start_date,"DD-MM-YYYY").utc().local().format("MM / DD / YYYY"),e.end_date=ke()(e.end_date,"DD-MM-YYYY").utc().local().format("MM / DD / YYYY")})),this.setState({data:e.organizations},(function(){t.onSearch(t.state.searchBy)})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=[{title:"Organization Name",dataIndex:"",key:"name",width:"22%",render:function(e){return{children:l.a.createElement(be,{record:e,orgName:!0}),props:{"data-title":"Organization Name"}}}},{title:"Organization Id",dataIndex:"",key:"identifier",width:"20%",render:function(e){return{children:l.a.createElement(be,{record:e,orgId:!0}),props:{"data-title":"Organization Id"}}}},{title:"Start Date",dataIndex:"start_date",key:"start_date",width:"20%",render:function(e){return{children:e,props:{"data-title":"Start date"}}}},{title:"End Date",dataIndex:"end_date",key:"end_date",width:"20%",render:function(e){return{children:e,props:{"data-title":"End date"}}}},{title:Ae,dataIndex:"",key:"status_id",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}},{title:"Actions",dataIndex:"",key:"",width:"10%",render:function(e){var t="/amcc/editorg/".concat(e.organization_id);return{children:l.a.createElement(c.b,{to:t},l.a.createElement("img",{src:Se.a,alt:"Actions"})),props:{"data-title":"Actions"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amCCUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ve,null),l.a.createElement(Ke,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Organizations")),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(We,{placeholder:"Search",onSearch:this.onSearch})))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(c.b,{to:"/amcc/createorg"},l.a.createElement(je,{value:"Create Organization"}))))),l.a.createElement(C.a,{spinning:this.props.loader,size:"large"},l.a.createElement(_e,{key:"manageOrg",rowKey:"identifier",columns:e,data:this.state.filterData})))))))}}]),t}(l.a.Component),$e=a(1446),Ze=a(578),Xe=a.n(Ze),et=a(7),tt=a(35),at=a(1452),nt=a(1459),lt=(a(92),a(1454)),rt=a(1448),st=a(1461),ot=a(142),it=a(319),ct=a(244),mt=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=e.children,c=e.label,m=e.value,u=r||m&&0!==m.length?"label label-float":"label";return l.a.createElement("div",{className:"float-label",onBlur:function(){return s(!1)},onFocus:function(){return s(!0)}},i,l.a.createElement("label",{className:u},c))},ut=a(1467),dt="Please fill the fields marked with asterisk(*)",pt="Max Characters limit reached.",gt="Please enter a valid email address.",ht="Please enter a valid mobile number.",ft="Please enter a valid password. It should be atleast 8 characters long with atleast 1 each of Capital letter, small letter, numeric and special character.",Et="Sorry! This hotline already exists in the system. Please use a different name.",vt="Please select date",bt="Past Time can not be selected",yt="Sorry! This openline already exists in the system. Please use a different name.",Ot=function(e){var t=e.next,a=e.stepOneOrganizationInfo,r=e.handleStepOneOnChange,s=e.handleStepOneOnSelect,i=e.handleStepOneDatePickerChange,c=e.orgIdCount,m=e.orgNameCount,u=e.setOrgNameAlreadyExists,d=e.setOrgIDAlreadyExists,p=e.orgIDAlreadyExists,g=e.orgNameAlreadyExists,h=e.setStepOneOrganization,f=3===a.primary?1:4===a.primary?2:a.primary,E=3===a.primary||4===a.primary,v=lt.a.useForm(),b=Object(o.a)(v,1)[0],y=Object(n.useState)(!1),O=Object(o.a)(y,2),N=O[0],j=O[1],C=Object(n.useState)(f),D=Object(o.a)(C,2),k=D[0],I=D[1],x=Object(n.useState)(!1),T=Object(o.a)(x,2),A=T[0],U=T[1],F=rt.a.RangePicker;return l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",form:b},N&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Name",value:a.organizationName},l.a.createElement(lt.a.Item,{className:"required",name:"organizationName"},l.a.createElement(_.a,{className:"input-control",id:"organizationName",htmlFor:"organizationName",defaultValue:a.organizationName,value:a.organizationName,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"checkOrganization/",{organization_name:a.organizationName},t).then((function(e){e.data&&u(e.data[0])}))}()},autoComplete:"off",maxLength:80}),"status: false"===g&&a.organizationName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.organizationName.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==g&&l.a.createElement(st.a,{message:"Sorry! This organization already exists in the system. Please use a different name.",type:"error",showIcon:!0})),m&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Id",value:a.organizationId},l.a.createElement(lt.a.Item,{className:"required",name:"organizationId",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",id:"organizationId",htmlFor:"organizationId",defaultValue:a.organizationId,value:a.organizationId,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"checkOrganizationID/",{orgID:a.organizationId},t).then((function(e){e.data&&d(e.data[0])}))}()},autoComplete:"off",maxLength:20}),"status: false"===p&&a.organizationId.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.organizationId.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==p&&l.a.createElement(st.a,{message:"Sorry! This organization already exists in the system. Please use a different Id.",type:"error",showIcon:!0})),c&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:a.status1},l.a.createElement(lt.a.Item,{className:"required",name:"status1"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,{className:"input-control w-100 w-lg-100",value:a.status1,htmlFor:"status1",onSelect:function(e){return s(e,"status1")}},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:xe,value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(F,{className:"w-100 ",name:"s1Date",value:a.s1Date,onChange:function(e){return i(e,"s1Date")},disabledDate:function(e){return e&&e<ke()().startOf("day")}})))),l.a.createElement(S.a,{span:24,md:16,lg:8,className:"gutter-row"},l.a.createElement(mt,{label:"Primary Key",value:"primarykey"},l.a.createElement(lt.a.Item,{className:""},l.a.createElement("div",{className:"box-wht"},l.a.createElement("span",{className:"pt-3 px-3 d-flex font-weight-md6"},l.a.createElement(it.a.Group,{onChange:function(e){return function(e){var t=0;A?1===e.target.value?(I(1),t=3):(I(2),t=4):1===e.target.value?(I(1),t=1):(I(2),t=2),h(Object(M.a)({},a,{primary:t}))}(e)},value:k},l.a.createElement(it.a,{value:1},Ie),l.a.createElement(it.a,{value:2},Te))),l.a.createElement("span",{className:"p-3 d-flex"},l.a.createElement(ct.a,{className:"font-13",onChange:function(e){return function(e){U(e.target.checked);var t=0;e.target.checked?1===k?t=3:2===k&&(t=4):1===k?t=1:2===k&&(t=2),h(Object(M.a)({},a,{primary:t}))}(e)},checked:E},"Send OTP to Email and Mobile Number")))))))),l.a.createElement(lt.a.Item,null,l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),a.organizationName&&a.organizationId&&a.status1&&a.s1Date?"status: false"===g&&"status: false"===p&&(j(!1),t()):j(!0)}},ee)))},_t=a(619),Nt=(a(67),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,show:!1},a.showModal=function(){a.setState({visible:!0})},a.showBothModals=function(){a.setState({visible:!0,show:!0})},a.handleOnOk=function(){a.setState({show:!1})},a.handleOk=function(){a.setState({visible:!1}),a.props.seededUser?a.props.viaEdit?a.props.handleDelete(a.props.user.email):a.props.handleDelete(a.props.user.userId):a.props.deleteOrg&&a.props.handleDelete(a.props.org)},a.handleCancel=function(){a.setState({visible:!1}),a.props.deleteOrg&&a.props.handleCancel()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.deleteOrg&&this.showModal()}},{key:"deleteHotline",value:function(){var e=this.props.history,t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"hotline/"+this.props.hotlineId,t).then((function(){e.push("/orgcc/hotlinedirectory")})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.props.deleteOrg||this.props.data.manageEmp?this.props.data&&this.props.data.manageEmp?l.a.createElement("a",{onClick:this.showModal},le):l.a.createElement(l.a.Fragment,null):l.a.createElement(Ne.a,{onClick:this.showBothModals},le),this.props.deleteOrg?l.a.createElement(_t.a,{visible:this.state.visible,onOk:this.handleCancel,onCancel:this.handleOk,centered:!0,width:700,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Cancel",cancelText:"Delete"},l.a.createElement("p",null,"You are about to delete the organization"," ",l.a.createElement("strong",null,this.props.org),"."," ","Deleting organization would delete all records associated with it. Are you sure you want to delete organization"," ",l.a.createElement("strong",null,this.props.org),"?")):!this.props.deleteOrg&&this.props.viaEdit&&this.props.seededUsers.length>1?l.a.createElement(_t.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,Ue," ",this.props.user.firstName,"?")):!this.props.viaEdit&&this.props.seededUser?l.a.createElement(_t.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,Ue," ",this.props.user.firstName,"?")):!this.props.deleteOrg&&this.props.viaEdit&&1===this.props.seededUsers.length?l.a.createElement(_t.a,{visible:this.state.show,onOk:this.handleOnOk,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:X},l.a.createElement("p",null,"There should be at least one seeded user.")):l.a.createElement(_t.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:X,cancelText:"Cancel"},l.a.createElement("p",null,Ue)))}}]),t}(n.Component)),jt=a(82),wt=a.n(jt),St=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null," ",e.seededUser?e.viaEdit?l.a.createElement(Ne.a,{onClick:function(){return e.handleEditUser(e.user.email)}},ne):l.a.createElement(Ne.a,{onClick:function(){return e.handleEditUser(e.user.userId)}},ne):l.a.createElement("a",{href:""},ne)),l.a.createElement("li",null,e.seededUser?l.a.createElement(Nt,{user:e.user,handleDelete:e.handleDelete,seededUsers:e.seededUsers,seededUser:!0,data:e,viaEdit:e.viaEdit}):l.a.createElement(Nt,{data:e}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),Ct=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).statusClicked=function(e,t){var n=ke()(e.endDate).isValid()?{first_name:e.firstName,last_name:e.lastName,email:e.email,mobile_number:e.mobile,status_id:"Active"===t?2:1,start_date:e.startDate?ke()(e.startDate).format("DD-MM-YYYY"):"",end_date:e.endDate?ke()(e.endDate).format("DD-MM-YYYY"):"",organization_id:a.props.orgID}:{first_name:e.firstName,last_name:e.lastName,email:e.email,mobile_number:e.mobile,status_id:"Active"===t?2:1,start_date:e.startDate?ke()(e.startDate).format("DD-MM-YYYY"):"",organization_id:a.props.orgID},l={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.put(R+"seededUser/",n,l).then((function(){j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.firstName+Be}),a.props.statusOnClicked()}))},a.state={data:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.seededUsers;this.setState({data:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.seededUsers!==e.seededUsers&&e.seededUsers.length>0&&this.setState({data:e.seededUsers})}},{key:"render",value:function(){var e=this,t=[{title:"First Name",dataIndex:"firstName",key:"firstName",width:"22%",render:function(e){return{children:e,props:{"data-title":"First Name"}}}},{title:"Last Name",dataIndex:"lastName",key:"lastName",width:"22%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}}},{title:Te,dataIndex:"mobile",key:"mobile",width:"22%",render:function(e){return{children:e.includes("+")?e:"+"+e,props:{"data-title":"Mobile"}}}},{title:Ie,dataIndex:"email",key:"email",width:"21%",render:function(e){return{children:e,props:{"data-title":"Email"}}}},{title:Ae,dataIndex:"",key:"status2",width:"10%",render:function(e){return{children:1===e.status2||"1"===e.status2?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(t){return l.a.createElement(St,{handleEditUser:e.props.handleEditUser,handleDelete:e.props.handleDelete,user:t,seededUsers:e.props.seededUsers,seededUser:!0,viaEdit:e.props.viaEdit})}}];return l.a.createElement("div",{className:"w-100","data-test":"addSeededuser"},this.props.fromStepTwo?l.a.createElement(S.a,{className:"d-flex align-items-center justify-content-end"},l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:function(){return e.props.fromStepTwo?e.props.showAddSeededUserForm():e.props.addSeededUser()}},"Add Seeded User")):null,l.a.createElement(_e,{rowKey:"unique_identifier",columns:t,data:this.state.data}))}}]),t}(l.a.Component),Dt=(a(232),a(127)),kt=a.n(Dt),It=function(e){var t,a,r,s=e.next,i=e.prev,c=e.stepTwoOrganizationInfo,m=e.handleStepTwoOnChange,u=e.handleStepTwoOnSelect,d=e.handleMobile,p=e.handleStepTwoDatePickerChange,g=e.addUser,h=e.seededUsers,f=e.showAddUserForm,E=e.showAddSeededUserForm,v=e.showEditUserForm,b=e.showEditSeededUserForm,y=e.cancelAddUser,O=e.cancelEditUser,N=e.editUser,j=e.deleteUser,C=e.fNameCount,D=e.lNameCount,k=Object(n.useState)(!1),I=Object(o.a)(k,2),x=I[0],T=I[1],A=Object(n.useState)(!1),U=Object(o.a)(A,2),M=U[0],F=U[1],P=Object(n.useState)(!1),R=Object(o.a)(P,2),Y=R[0],L=R[1],B=Object(n.useState)(!1),H=Object(o.a)(B,2),z=H[0],V=H[1];Object(n.useEffect)((function(){(f||f)&&(T(!1),F(!1),L(!1),V(!1))}),[f,v]);var q=function(e){e.preventDefault(),i()},Q=function(e){c.firstName&&c.lastName&&c.status2&&c.mobile&&c.startDate&&c.email?(T(!1),M||Y||z||g(e)):T(!0)},G=function(e){return e&&e<ke()().startOf("day")};rt.a.RangePicker;return 0===h.length||f||v?l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other"},x&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"First Name",value:c.firstName},l.a.createElement(lt.a.Item,{name:"firstName",className:"required"},l.a.createElement(_.a,{id:"firstName",className:"input-control",defaultValue:c.firstName,htmlFor:"firstName",value:c.firstName,onChange:function(e){return m(e)},autoComplete:"off",maxLength:50})),C&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Last Name",value:c.lastName},l.a.createElement(lt.a.Item,{name:"lastName",className:"required"},l.a.createElement(_.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(et.a)(t,"className","required"),Object(et.a)(t,"defaultValue",c.lastName),Object(et.a)(t,"value",c.lastName),Object(et.a)(t,"onChange",(function(e){return m(e)})),Object(et.a)(t,"autoComplete","off"),Object(et.a)(t,"maxLength",50),t))),D&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ie,value:c.email},l.a.createElement(lt.a.Item,{name:"email",className:"required"},l.a.createElement(_.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(et.a)(a,"className","required"),Object(et.a)(a,"defaultValue",c.email),Object(et.a)(a,"value",c.email),Object(et.a)(a,"onChange",(function(e){return m(e)})),Object(et.a)(a,"onBlur",(function(e){return function(e){!/\S+@\S+\.\S+/.test(e.target.value)||e.target.value.length<6?F(!0):F(!1)}(e)})),Object(et.a)(a,"autoComplete","off"),a)),M&&l.a.createElement(st.a,{message:gt,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"Start Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(rt.a,{className:"w-100 ",name:"startDate",value:c.startDate,onChange:function(e){return p(e,"startDate")},disabledDate:G})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"End Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(rt.a,{className:"w-100 ",name:"endDate",value:c.endDate,onChange:function(e){return p(e,"endDate")},disabledDate:G})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:c.status2},l.a.createElement(lt.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(r={className:"input-control w-100 w-lg-50",value:c.status2,htmlFor:"status2"},Object(et.a)(r,"className","required"),Object(et.a)(r,"onSelect",(function(e){return u(e,"status2")})),r),l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(mt,{label:"Mobile",value:c.mobile},l.a.createElement(lt.a.Item,{name:"mobile",className:"required"},l.a.createElement(kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:c.mobile,onChange:d,onBlur:function(){c.mobile.length>10?L(!1):L(!0)},autoComplete:"off"}),Y&&l.a.createElement(st.a,{message:ht,type:"error",showIcon:!0})))))),l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},f?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:function(){return y()}},te),l.a.createElement(Ne.a,{type:"primary",onClick:function(){return Q("viaAddUserButton")}},"Add User")):v?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:function(){return O()}},te),l.a.createElement(Ne.a,{type:"primary",onClick:function(){var e;c.firstName&&c.lastName&&c.status2&&c.mobile&&c.startDate&&c.email?(T(!1),M||Y||z||N(e)):T(!0)}},"Update")):null)),l.a.createElement(lt.a.Item,null,f||v?null:l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:q},te),f||v?null:l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(){return Q("viaNext")}},ee))):l.a.createElement(l.a.Fragment,null,l.a.createElement(Ct,{seededUsers:h,showAddSeededUserForm:E,fromStepTwo:!0,handleEditUser:function(e){b(e,"viaStepTwo")},handleDelete:function(e){j(e,"viaStepTwo")}}),l.a.createElement(lt.a,null,l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:q},te),l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),s()}},ee)))))},xt=function(e){var t,a=e.prev,r=e.loader,s=e.apiError,i=e.handleOk,c=e.handleCancel,m=e.stepOneOrganizationInfo,u=e.handleStepOneOnChange,d=e.handleStepOneOnSelect,p=e.handleStepOneDatePickerChange,g=e.createNewOrganization,h=e.seededUsers,f=e.showEditSeededUserForm,E=e.deleteUser,v=e.addSeededUserFromThirdStep,b=lt.a.useForm(),y=Object(o.a)(b,1)[0],O=rt.a.RangePicker,N=Object(n.useState)(!1),j=Object(o.a)(N,2),D=j[0],k=j[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"py-3 mb-0"},"Organization Details"),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(q.a,null,null===(t=m.organizationName)||void 0===t?void 0:t.charAt(0)),l.a.createElement("span",{className:"md-name"},m.organizationName)),l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",form:y},D&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(_t.a,{visible:s,onOk:i,onCancel:c,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:X}," ",l.a.createElement("p",null,"There is some difficulty while creating this organization.")," "),l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Name",value:m.organizationName},l.a.createElement(lt.a.Item,{className:"required",name:"organizationName"},l.a.createElement(_.a,{className:"input-control",htmlFor:"organizationName",id:"organizationName",defaultValue:m.organizationName,onChange:function(e){return u(e)},value:m.organizationName,autoComplete:"off",disabled:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Id",value:m.organizationId},l.a.createElement(lt.a.Item,{className:"required",name:"organizationId",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",htmlFor:"organizationId",id:"organizationId",defaultValue:m.organizationId,onChange:function(e){return u(e)},value:m.organizationId,autoComplete:"off",disabled:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:m.status1},l.a.createElement(lt.a.Item,{className:"required",name:"status1"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,{className:"input-control w-100 w-lg-100",value:m.status1,htmlFor:"status1",onSelect:function(e){return d(e,"status1")},disabled:!0},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:xe,value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(O,{className:"w-100 ",name:"s1Date",defaultValue:m.s1Date,value:m.s1Date,onChange:function(e){return p(e,"s1Date")},disabledDate:function(e){return e&&e<ke()().startOf("day")},disabled:!0})))))),l.a.createElement($e.a,{className:"w-100"}),l.a.createElement(C.a,{spinning:r,size:"large"},l.a.createElement(S.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Seeded Users Details"),l.a.createElement("div",null," ",l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:function(){return v()}},"Add Seeded User"))),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(Ct,{seededUsers:h,handleEditUser:function(e){f(e,"viaStepThree")},handleDelete:function(e){E(e,"viaStepThree")},fromStepThree:!0}))),l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:function(e){e.preventDefault(),a()}},te),l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),h&&m.organizationName&&m.organizationId&&m.status1&&m.s1Date?(k(!1),g()):k(!0)}},"Create and Invite"))))))},Tt=N.a.Content,At=at.a.Step,Ut=[{title:"Organization Details",content:"First-content"},{title:"Seeded Users Details",content:"Second-content"},{title:"Confirm Details",content:"Last-content"}],Mt=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)(!1),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)({organizationName:"",organizationId:"",status1:"",s1Date:"",primary:1}),E=Object(o.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)(""),O=Object(o.a)(y,2),_=O[0],j=O[1],C=Object(n.useState)(""),D=Object(o.a)(C,2),k=D[0],I=D[1],x=Object(n.useState)({firstName:"",lastName:"",userId:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),T=Object(o.a)(x,2),A=T[0],U=T[1],F=Object(n.useState)([]),Y=Object(o.a)(F,2),L=Y[0],B=Y[1],H=Object(n.useState)(!1),z=Object(o.a)(H,2),V=z[0],q=z[1],Q=Object(n.useState)(!1),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=Object(n.useState)(!1),$=Object(o.a)(J,2),Z=$[0],X=$[1],ee=Object(n.useState)(!1),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)(!1),re=Object(o.a)(le,2),se=re[0],oe=re[1],ie=Object(n.useState)(!1),ce=Object(o.a)(ie,2),me=ce[0],de=ce[1],pe=function(){q(!1),K(!1),r(a+1)},ge=function(){q(!1),K(!1),r(a-1)},he=function(e,t){var n=null===L||void 0===L?void 0:L.filter((function(t){return(null===t||void 0===t?void 0:t.userId)!==e}));B(n),0===n.length&&(U({firstName:"",lastName:"",userId:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),"viaStepThree"===t&&r(a-1))},fe=function(){q(!0),oe(!1),de(!1),U({firstName:"",lastName:"",userId:"",status2:"",email:"",mobile:"",startDate:"",endDate:""})},Ee=function(e,t){"viaStepThree"===t&&r(a-1),oe(!1),de(!1),K(!0);var n={};L.forEach((function(t){t.userId===e&&(n=t)})),U(n)},be=function(e){"organizationId"===e.target.id&&20===e.target.value.length?ne(!0):"organizationName"===e.target.id&&80===e.target.value.length?X(!0):(X(!1),ne(!1)),b(Object(M.a)({},v,Object(et.a)({},e.target.id,e.target.value)))},ye=function(e,t){b(Object(M.a)({},v,Object(et.a)({},t,e)))},Oe=function(e,t){b(Object(M.a)({},v,Object(et.a)({},t,e)))},_e=function(e){"firstName"===e.target.id&&50===e.target.value.length?oe(!0):"lastName"===e.target.id&&50===e.target.value.length?de(!0):(oe(!1),de(!1)),U(Object(M.a)({},A,Object(et.a)({},e.target.id,e.target.value)))},Ne=function(e,t){U(Object(M.a)({},A,Object(et.a)({},t,e)))},je=function(e,t){U(Object(M.a)({},A,Object(et.a)({},t,e)))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amCCUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ve,null),l.a.createElement(Tt,{className:""},l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/amcc/manageorganizations"},l.a.createElement(nt.a.Item,null,"Organizations")),l.a.createElement(nt.a.Item,null,"Create Organization"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Organization")),l.a.createElement(at.a,{className:"mt-2",current:a},Ut.map((function(e){return l.a.createElement(At,{key:e.title,title:e.title})}))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"steps-content org-form"},0==a?l.a.createElement(Ot,{next:pe,stepOneOrganizationInfo:v,handleStepOneOnChange:be,handleStepOneOnSelect:ye,handleStepOneDatePickerChange:Oe,orgNameCount:Z,orgIdCount:ae,setOrgNameAlreadyExists:function(e){j(e)},orgNameAlreadyExists:_,setOrgIDAlreadyExists:function(e){I(e)},orgIDAlreadyExists:k,setStepOneOrganization:b}):1==a?l.a.createElement(It,{next:pe,prev:ge,stepTwoOrganizationInfo:A,handleStepTwoOnChange:_e,handleStepTwoOnSelect:Ne,handleStepTwoDatePickerChange:je,handleMobile:function(e){U(Object(M.a)({},A,{mobile:e}))},addUser:function(e){"viaNext"===e&&r(a+1);var t=Math.floor(100*Math.random())+1,n=Object(M.a)({},A,{userId:t});B([].concat(Object(tt.a)(L),[n])),q(!1)},editUser:function(){L.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(A)&&e.userId===A.userId){var t=L.indexOf(e),a=JSON.parse(JSON.stringify(L));a[t]=A,B(a)}})),K(!1)},deleteUser:he,seededUsers:L,showAddUserForm:V,showAddSeededUserForm:fe,showEditUserForm:W,showEditSeededUserForm:Ee,cancelAddUser:function(){q(!1)},cancelEditUser:function(){K(!1)},fNameCount:se,lNameCount:me}):2==a?l.a.createElement(xt,{prev:ge,createNewOrganization:function(){u(!0);var e=Ce(),t=[];L.map((function(e){var a=e.endDate?{first_name:e.firstName,last_name:e.lastName,email:e.email,status_id:parseInt(e.status2),start_date:e.startDate?ke()(e.startDate).format("DD-MM-YYYY"):"",end_date:e.endDate?ke()(e.endDate).format("DD-MM-YYYY"):"",mobile_number:"+"+e.mobile,is_seeded_user:1}:{first_name:e.firstName,last_name:e.lastName,email:e.email,status_id:parseInt(e.status2),start_date:e.startDate?ke()(e.startDate).format("DD-MM-YYYY"):"",mobile_number:"+"+e.mobile,is_seeded_user:1};t.push(a)}));var a={organization:{name:v.organizationName,identifier:v.organizationId,status_id:parseInt(v.status1),start_date:v.s1Date[0]?ke()(v.s1Date[0]).format("DD-MM-YYYY"):"",end_date:v.s1Date[1]?ke()(v.s1Date[1]).format("DD-MM-YYYY"):"",app_authentication_key_id:v.primary},seeded_users:t},n={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"saveOrganization/",a,n).then((function(){u(!1),window.location="/amcc/manageorganizations"})).catch((function(e){e.message.includes("500")&&h(!0)}))},stepOneOrganizationInfo:v,stepTwoOrganizationInfo:A,handleStepOneOnChange:be,handleStepOneOnSelect:ye,handleStepOneDatePickerChange:Oe,handleStepTwoOnChange:_e,handleStepTwoOnSelect:Ne,handleStepTwoDatePickerChange:je,seededUsers:L,showEditUserForm:W,deleteUser:he,showEditSeededUserForm:Ee,addSeededUserFromThirdStep:function(){r(a-1),fe()},handleOk:function(){window.location="/amcc/manageorganizations"},handleCancel:function(){window.location="/amcc/manageorganizations"},loader:m,apiError:g}):l.a.createElement(l.a.Fragment,null)))))))))))},Ft=N.a.Content,Pt=function(){var e=l.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return l.a.createElement(l.a.Fragment,null,!0===!a?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amCCUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ve,null),l.a.createElement(Ft,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Manage Organizations")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Xe.a,alt:"Create Organization",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create a new Org Id for your client's organization"),l.a.createElement(w.a,{className:"d-flex justify-content-center"},l.a.createElement($e.a,{className:"mt-1"})),l.a.createElement(S.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ne.a,{onClick:function(){n(!0)},type:"primary"},"Create Organization")))))))))):l.a.createElement(Mt,null))},Rt=a(48),Yt={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},Lt=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"orgId",value:function(){var e=JSON.parse(v("user"));if(e&&e.user_data.organization_id){var t=Rt.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(Rt.enc.Utf8);return parseInt(t)}return{}}},{key:"getOrganizationData",value:function(){return P.a.get(R+"getOrganization/",Yt)}},{key:"getEmployees",value:function(e,t){var a=this.orgId();return Object.keys(e).length>0&&t.length>0?P.a.get(R+"getEmployees/"+a+"?filter="+JSON.stringify(e)+"&search="+'"'.concat(t,'"'),Yt):Object.keys(e).length>0&&0===t.length?P.a.get(R+"getEmployees/"+a+"?filter="+JSON.stringify(e),Yt):(void 0===Object.keys(e).length||0===Object.keys(e).length)&&t.length>0?P.a.get(R+"getEmployees/"+a+"?search="+'"'.concat(t,'"'),Yt):P.a.get(R+"getEmployees/"+a,Yt)}},{key:"getHotlines",value:function(){return P.a.get(R+"hotline/",Yt)}},{key:"getOpenlines",value:function(){return P.a.get(R+"openline/",Yt)}},{key:"getBroadCastMessages",value:function(e,t,a){var n,l,r,s,o,i,c,m,u,d;return(null===(n=e.status_id)||void 0===n?void 0:n.length)>0&&t.length>0&&a.length>0?P.a.get(R+"broadcast/?filter="+JSON.stringify(e)+"&search="+t+"&sort="+a,Yt):(null===(l=e.status_id)||void 0===l?void 0:l.length)>0&&0===t.length&&0===a.length?P.a.get(R+"broadcast/?filter="+JSON.stringify(e),Yt):(void 0===(null===(r=e.status_id)||void 0===r?void 0:r.length)||0===(null===(s=e.status_id)||void 0===s?void 0:s.length))&&t.length>0&&0===a.length?P.a.get(R+"broadcast/?search="+t,Yt):(void 0===(null===(o=e.status_id)||void 0===o?void 0:o.length)||0===(null===(i=e.status_id)||void 0===i?void 0:i.length))&&0===t.length&&a.length>0?P.a.get(R+"broadcast/?sort="+a,Yt):(void 0===(null===(c=e.status_id)||void 0===c?void 0:c.length)||0===(null===(m=e.status_id)||void 0===m?void 0:m.length))&&t.length>0&&a.length>0?P.a.get(R+"broadcast/?search="+t+"&sort="+a,Yt):(null===(u=e.status_id)||void 0===u?void 0:u.length)>0&&t.length>0&&0===a.length?P.a.get(R+"broadcast?filter="+JSON.stringify(e)+"&search="+t,Yt):(null===(d=e.status_id)||void 0===d?void 0:d.length)>0&&0===t.length&&a.length>0?P.a.get(R+"broadcast/?filter="+JSON.stringify(e)+"&sort="+a,Yt):P.a.get(R+"broadcast/",Yt)}},{key:"getPolls",value:function(e,t){var a,n,l,r;return(null===(a=e.status_id)||void 0===a?void 0:a.length)>0&&t.length>0?P.a.get(R+"poll/?filter="+JSON.stringify(e)+"&search="+t,Yt):(null===(n=e.status_id)||void 0===n?void 0:n.length)>0&&0===t.length?P.a.get(R+"poll/?filter="+JSON.stringify(e),Yt):(void 0===(null===(l=e.status_id)||void 0===l?void 0:l.length)||0===(null===(r=e.status_id)||void 0===r?void 0:r.length))&&t.length>0?P.a.get(R+"poll/?search="+t,Yt):P.a.get(R+"poll/",Yt)}},{key:"getAssignHotlines",value:function(e){return P.a.get(R+"getHotlineAssignEmpl/"+e,Yt)}},{key:"getHelps",value:function(){return P.a.get(R+"gethelps/",Yt)}},{key:"createHelp",value:function(e){return e.help_id?P.a.put(R+"createhelp/",e,Yt):P.a.post(R+"createhelp/",e,Yt)}},{key:"getInfos",value:function(e){return e&&e.length>0?P.a.get(R+"getInfos/?search="+e,Yt):P.a.get(R+"getInfos/",Yt)}},{key:"createInfo",value:function(e){return e.info_id?P.a.put(R+"createinfo/",e,Yt):P.a.post(R+"createinfo/",e,Yt)}}]),e}());var Bt=Object(i.b)((function(e){return{manageOrgData:e.manageOrg.manageOrgData}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return Lt.getOrganizationData().then((function(t){return e({type:"MANAGEORG_SUCCESS",payload:{manageOrgData:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"MANAGEORG_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[r]),Object(n.useEffect)((function(){null===e.manageOrgData?u(!0):null!==e.manageOrgData&&u(!1)}),[e.manageOrgData]);return m||null===e.manageOrgData||0!==e.manageOrgData.length?l.a.createElement(Je,{organizations:e.manageOrgData,statusOnClicked:function(){s(!r)},loader:m}):l.a.createElement(Pt,null)})),Ht=a(157),zt=a.n(Ht),Vt=(a(264),{wrapperCol:{span:24}}),qt={wrapperCol:{span:24}},Qt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onChangeUsername=function(e){a.setState({email:e.target.value})},a.sendEmail=function(e){if(""!==a.state.email){var t={email:a.state.email};a.setState({error:!1,loader:!0}),P.a.post(R+"request-reset-email/",t,{headers:{Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}}).then((function(e){200===e.status&&a.setState({emailSent:!0,loader:!1,incorrectEMail:!1})})).catch((function(){return a.setState({emailSent:!1,loader:!1,incorrectEMail:!0})}))}else a.setState({error:!0,emailSent:!1,incorrectEMail:!1})},a.state={email:"",error:!1,emailSent:!1,incorrectEMail:!1,loader:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(w.a,{className:"content-center mt-0 px-4"},l.a.createElement(S.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(S.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},Me)),l.a.createElement(w.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:zt.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(w.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},Fe))),l.a.createElement(S.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},this.state.emailSent?"Reset Password email has been sent to "+this.state.email:null,l.a.createElement(w.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Forgot Password"),l.a.createElement("p",{className:"mt-3 font-weight-bold"}," Enter your registered email address to request a password reset link.")),l.a.createElement(lt.a,Object.assign({},Vt,{ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(C.a,{spinning:this.state.loader,size:"large"},this.state.error&&l.a.createElement(st.a,{message:gt,type:"error",showIcon:!0}),this.state.incorrectEMail&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"This email address is incorrect. Please enter a valid email address.",type:"error"})),l.a.createElement(mt,{label:Ie,value:this.state.email},l.a.createElement(lt.a.Item,{name:"email",className:"required"},l.a.createElement(_.a,{type:"Email",className:"input-control",placeholder:" ",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(lt.a.Item,qt,l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(t){return e.sendEmail()}},"Request Password Reset Link"))),l.a.createElement("div",{className:"justify-content-center d-flex"},l.a.createElement(Ne.a,{type:"link",className:"link"},l.a.createElement(c.b,{to:"/login"}," ","Back to "," ",l.a.createElement("b",{className:"pl-1"},"Sign In")))))))))}}]),t}(n.Component),Gt={wrapperCol:{span:24}},Wt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onChangePassword=function(e){a.setState({password:e.target.value})},a.onChangeConfirmPassword=function(e){a.setState({confirm_password:e.target.value})},a.resetPassword=function(e){var t=new URLSearchParams(a.props.location.search).get("uidb64"),n=new URLSearchParams(a.props.location.search).get("token"),l={password:a.state.password,token:n,uidb64:t};a.state.password!==a.state.confirm_password||a.state.passwordValidationError||(a.setState({loader:!0}),P.a.put(R+"password-reset-complete/",l,{headers:{Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}}).then((function(){a.setState({resetDone:!0,resetFailed:!1,loader:!1})})).catch((function(){a.setState({resetFailed:!0,resetDone:!1,loader:!1}),setTimeout((function(){a.handleOk()}),5e3)})))},a.validatePassword=function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?a.setState({passwordValidationError:!1}):a.setState({passwordValidationError:!0})},a.handleOk=function(){window.location="/login"},a.handleCancel=function(){window.location="/login"},a.state={password:"",confirm_password:"",error:"false",passwordValidationError:"",resetDone:!1,resetFailed:!1,loader:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(w.a,{className:"content-center mt-0 px-4"},l.a.createElement(S.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(S.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},Me)),l.a.createElement(w.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:zt.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(w.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},Fe))),l.a.createElement(S.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},l.a.createElement(w.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Reset Password"),l.a.createElement("p",{className:"mt-3 font-weight-bold"},"Set a new password for your account.")),l.a.createElement(_t.a,{visible:this.state.resetDone,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:X},l.a.createElement("p",null,"Password has been reset successfully. Please login with your new password")),l.a.createElement(lt.a,null,l.a.createElement(C.a,{spinning:this.state.loader,size:"large"},this.state.resetFailed&&l.a.createElement(st.a,{message:"Password can not be reset at this moment. Please try again",type:"error",showIcon:!0}),l.a.createElement(mt,{label:"Password",value:this.state.password},l.a.createElement(lt.a.Item,{name:"newpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your new password!"}]},l.a.createElement(_.a.Password,{htmlFor:"newpassword",id:"newPwd",value:this.state.password,onChange:this.onChangePassword,onBlur:function(t){return e.validatePassword(t)}})),this.state.passwordValidationError&&l.a.createElement(st.a,{message:ft,type:"error",showIcon:!0})),l.a.createElement(mt,{label:"Confirm Password",value:this.state.confirm_password},l.a.createElement(lt.a.Item,{name:"confirmpassword",className:"pwd confirpwd required",rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newpassword")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],dependencies:["newpassword"],hasFeedback:!0},l.a.createElement(_.a.Password,{htmlFor:"confirmpassword",id:"confirmPwd",value:this.state.confirm_password,onChange:this.onChangeConfirmPassword}))),l.a.createElement(lt.a.Item,Gt,l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(t){return e.resetPassword(t)}},"Reset Password"))))))))}}]),t}(n.Component),Kt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){window.open("https://www.anonymoose.co/platformprivacypolicy.pdf","_blank")},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,"See",l.a.createElement(Ne.a,{type:"link",className:"link pl-1",onClick:this.showModal},"Privacy Policy"),l.a.createElement(_t.a,{title:"Privacy Policy",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,className:"modal-lg privacy-txt",centered:!0},l.a.createElement(w.a,{className:"modal-icon py-4"},l.a.createElement("p",null,"THIS PRIVACY POLICY (\u201cPRIVACY POLICY\u201d) SETS FORTH HOW WE USE AND PROTECT THE PERSONAL INFORMATION COLLECTED WHILE USING OUR SERVICES. PLEASE READ THIS PRIVACY POLICY CAREFULLY. THIS PRIVACY POLICY IS APPLICABLE TO YOU (\u201cYOU\u201d, \u201cYOUR\u201d, \u201cUSER\u201d OR \u201cUSERS\u201d) IF YOU ARE USING, ACCESSING OUR SERVICES OR HAVE DOWNLOADED OR INSTALLED OUR PLATFORM. BY DOWNLOADING, CONTINUING TO USE OR ACCESSING THE PLATFORM OR THE SERVICES, YOU AGREE TO THE TERMS OF THIS PRIVACY POLICY. IF THE YOU DO NOT AGREE TO THIS PRIVACY POLICY, YOU MAY NOT USE, AVAIL OR ACCESS OUR SERVICES.",l.a.createElement("ol",{className:""},l.a.createElement("li",null,l.a.createElement("u",null,"Introduction"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"EarthenLamps Inc, registered in Delaware with principal office located at 12265 Viewoak Drive, Saratoga, CA 95070 (",l.a.createElement("b",null,"\u201cCompany\u201d, \u201cwe\u201d, \u201cus\u201d, \u201cour\u201d"),"), has developed a platform comprising of a mobile application, dashboard and control center under a name \u201cAnonyMoose\u201d (",l.a.createElement("b",null,"\u201cSaaS PlaCorm\u201d or \u201cPlaCorm\u201d"),")and offers services that will enable employees of an organization to provide feedback, ideas, suggesZons, and to report incidents relaZng to harassment or microaggressions, or any other concern, privately and discreetly, to such organizaZon\u2019s leadership, management and designated individuals or departments",l.a.createElement("b",null,"(\u201cServices\u201d)"),"."),l.a.createElement("li",{className:""},"We are committed to data privacy and have made this Privacy Policy to describe the procedures we adhere to for collecting, using, and disclosing the Personal Information (defined below). We recommend Users to read this Privacy Policy carefully so that Users understand our approach towards the use of their Personal Information."))),l.a.createElement("li",null,l.a.createElement("u",null,"What kinds of information do we collect?"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"To provide the Services, we require to process information about you. The type of information that we collect depends on how you use our platform."),l.a.createElement("li",null,l.a.createElement("b",null,"Personal Details:")," We may collect any personal information such as your name, contact number, email address, and designaZon, provided by your organization, or while you create and/or update your respecZve account and/or use of the Services. This information that can identify, or is capable of identifying a person, shall be referred to as ",l.a.createElement("b",null,"\u201cPersonal Information\u201d"),"."),l.a.createElement("li",null,l.a.createElement("b",null,"Device information:")," Whenever you access our Platform through Wi-Fi or the internet, we may also collect your browser name, usage, log related information, the type of electronic device, manufacturer, make, model, unique ID of the electronic device and other technical information about your means of connection to our Platform or Services, such as the operating system and other similar information. The device information will be used solely for the purpose of improving our Services and to provide You with better user experience."),l.a.createElement("li",null,"For the purposes of this Privacy Policy, such information in section 2.3 shall also be considered Personal Information."))),l.a.createElement("li",null,l.a.createElement("u",null,"How we use this information"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"We use the information (which include the Personal Information) provided by you or collected by us in the following cases: (i) to provide User with the Services and to assist the User in the event the User needs any additional support; (ii) for creation or development of business intelligence or data analytics in relation to the Services provided by the Company; (iii) to understand usage patterns of our Platform or the Services; (iv) to improve usability of our Services and for Services maintenance; (v) to maintain and manage account of the organization; (vi) to prevent fraud and abuse (vii) to enhance the security of our the Platform and/ or the Services; (viii) to ensure that our Platform or the Services are not used for illegal purposes ; (ix) for internal record keeping; and (x) to comply with our legal or statutory obligations."),l.a.createElement("li",null,"ANONYMIZED DATA: We will also use your Personal Information collected by us to create aggregate anonymized data. We ensure that such anonymized data doesn\u2019t directly identify you or your Personal Information shared with us. We may use this anonymized data for any purpose including but not limited to, research, understand usage patterns, analytical purposes, and to improve our Services. By agreeing to this Privacy Policy, you provide us the right to use your Personal Information to create anonymized data and use it for our business purposes."))),l.a.createElement("li",null,l.a.createElement("u",null,"How the information is shared"),l.a.createElement("p",{className:"pl-4"},"In the course of providing Services or access of the Platform to you, we may share your information, which may also include your Personal Information, with certain parties, in only the following cases. The Company does not share your Personal Information with any member within your organization/company/enterprise. Accordingly, you expressly give your free consent to us to disclose or share your Personal Information in the following cases:"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,l.a.createElement("b",null,"Administrators:")," We may provide access to your Personal information to any of our authorized administrators for internal technical purpose, who shall be under confidentiality obligations towards the same. For the sake of clarity, such administrators shall not be part of your organization."),l.a.createElement("li",null,l.a.createElement("b",null,"Service Providers:")," We may share User\u2019s Personal Information with the service providers, who are working with us, or may work with us, in connection with the operation of the Services and assisting us in improving the Platform. Examples include service providers who are providing technical infrastructure services, analyzing how our Platform is used, providing customer service, facilitating payments or conducting surveys."),l.a.createElement("li",null,l.a.createElement("b",null,"Merger or Acquisi7on:")," We may transfer User\u2019s Personal Information if we are acquired by/we acquire or merge with another company or transfer a part of our business, to a third party. Any third party or resultant entity that receives the User\u2019s Personal Information pursuant to a merger, demerger, amalgamation reconstruction, change in control or business transfer shall have the right to continue to use User\u2019s Personal Information and such new entity shall abide with this privacy policy."),l.a.createElement("li",null,l.a.createElement("b",null,"Legal and Regulatory Authorities:")," We may be required to disclose User\u2019s information including Personal Information due to legal or regulatory requirements. In such instances, we reserve the right to disclose User\u2019s Personal Information as required in order to comply with our legal obligations, including but not limited to complying with court orders, warrants, or discovery requests. We may also disclose User\u2019s Personal Information to (a) law enforcement officers or others; (b) to comply with a judicial proceeding, court order, or legal process served on us ; (c) to enforce or apply this Privacy Policy or our other policies or agreements; (d) respond to claims that any Personal Information violates the rights of third-parties; or (e) protect the rights, property, or personal safety of Company, or the general public."),l.a.createElement("li",null,"User agrees and acknowledges that we may not be required to inform User prior to or after disclosures made according to this section."))),l.a.createElement("li",null,l.a.createElement("u",null,"How long your information is retained"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"We endeavor to collect only such Information including Personal Information that is necessary for the purposes indicated here. We may retain such information on a case-by-case determination depending on matters such as the nature of the information, why it is collected and processed, and relevant legal or operational retention needs. For example, we may retain such information to pursue legitimate business interests, conduct audits, comply with (and demonstrate compliance with) legal obligations, resolve disputes and enforce our agreements."),l.a.createElement("li",null,"We may retain your non- Personal Information even after you have stopped using our Platform or the Services for the sole purpose of providing better Services and improving usage pattern on the Platform."))),l.a.createElement("li",null,l.a.createElement("u",null," Access to your content on the PlaCorm:"),l.a.createElement("p",{className:"pl-4"},"While you use our Platform, you may provide certain information including but not limited to images, location detail, documents, text, audio clip, video clip, organization\u2019s policies and training material to us (\u201cUser Content\u201d). The Company ensures that the User Content remain private, integral and secure. The Company may access such User Content only to abide by its legal obligations as provided in section 4.4 of this Privacy Policy.")),l.a.createElement("li",null,l.a.createElement("u",null,"Our Security Measures:"),l.a.createElement("p",{className:"pl-4"},"User\u2019s Personal Information is stored on our database which is hosted on the AWS cloud. Although there are appropriate \ufb01rewalls and protections, we cannot warrant the security of any Personal Information transmitted as our systems are not hack proof. Data pilferage due to unauthorized hacking, virus attacks, technical issues is possible, and we take no liability or responsibility for it. Users are required to be careful to avoid \u2018phishing\u2019 scams, where someone may send User an e-mail that looks like it is from the Company asking for User\u2019s Personal Information.")),l.a.createElement("li",null,l.a.createElement("u",null,"Hyperlinks:"),l.a.createElement("p",{className:"pl-4"},"The Platform may from time to time contain hyperlinks to other websites or mobile applications. Such links are provided for convenience only and we take no responsibility for the content and maintenance of or privacy compliance of any linked website. Any hyperlink on our Platform to another website does not imply our endorsement, support, or sponsorship of the operator of that website nor of the information and/or services which it provides. The Company is not a party to any transaction between you and such website.")),l.a.createElement("li",null,l.a.createElement("u",null,"Limitation of Liability:"),l.a.createElement("p",{className:"pl-4"},"NEITHER PARTY SHALL BE LIABLE TO THE OTHER FOR ANY INDIRECT, CONSEQUENTIAL, INCIDENTAL, EXEMPLARY OR SPECIAL DAMAGES, LOSS OF PROFIT, BUSINESS HOWSOEVER CAUSED, EVEN IF THE OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. THE MAXIMUM LIABLITY OF THE COMPANY FOR DIRECT DAMAGE OR LOSS SHALL BE LIMITED TO AN AMOUNT OF USD 1000 (US DOLLARS ONE THOUSAND ONLY). THE FOREGOING LIMITATIONS OF LIABILITY SHALL APPLY NOTWITHSTANDING THE FAILURE OF ESSENTIAL PURPOSE OF ANY LIMITED WARRANTY OR REMEDY HEREIN.")),l.a.createElement("li",null,l.a.createElement("u",null,"Reservation of Rights:"),l.a.createElement("p",{className:"pl-4"},"All rights not expressly granted in this Privacy Policy are reserved by the Company. Nothing contained in this Privacy Policy shall be construed as conferring by implication, estoppels or otherwise, any license or right under any copyright, patent, trademark or other intellectual property right of Company or any other person or to User.")),l.a.createElement("li",null,l.a.createElement("u",null,"Governing Laws and Disputes:"),l.a.createElement("p",{className:"pl-4"},"This Privacy Policy shall in all respects be governed by and construed and enforced in accordance with the laws of Delaware and the courts in Delaware shall have an exclusive jurisdiction to adjudicate any subject matter under this Privacy Policy without any con\ufb02ict of laws. Any dispute or di\ufb00erence arising between you and the Company as to the e\ufb00ect, validity or interpretation or any other matter under this Privacy Policy or as to their rights, duties or liabilities hereunder shall be referred to arbitration in accordance with the rules of the International Chamber of Commerce to the exclusive jurisdiction to venue of the courts of Delaware.")),l.a.createElement("li",null,l.a.createElement("u",null,"Changes to This Policy:"),l.a.createElement("p",{className:"pl-4"},"We may update this Privacy Policy from time to time. Users are encouraged to check this Privacy Policy on a regular basis to be aware of the changes made to it. The Company shall not be liable for any claims arising out of non-intimation of such change in this Privacy Policy. This Privacy Policy was last modi\ufb01ed on"," ",l.a.createElement("b",null,l.a.createElement("span",{className:"border-bottom"}," ")," July, 2020."))),l.a.createElement("li",null,l.a.createElement("u",null,"Contact Us"),l.a.createElement("p",{className:"pl-4"},"If User has any questions, concerns or grievances regarding this Privacy Policy, User can email us at our grievance email-address"," ",l.a.createElement("a",{href:"mailto:info@anonymoose.co"},"info@anonymoose.co"))))))))}}]),t}(n.Component),Jt={wrapperCol:{span:24}},$t={wrapperCol:{span:24}},Zt=a(48),Xt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(V.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(V.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(V.a)(a)),a.state={email:"",password:"",page:"is_app_user",error:"false",loading:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch;t.history;a(z(this.state.email,this.state.password,this.state.page)).then((function(){window.location.reload()})).catch((function(){e.setState({loading:!1,error:"true"})}))}},{key:"canSubmit",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=(t.message,!1),r=!1,s=!1,o=!1,i=v("user");i||(n=!0,r=!0,s=!0,o=!0);var u=JSON.parse(v("user"));i&&u&&"null"!=u.user_data&&(n="true"===Zt.AES.decrypt(u.user_data.is_amcc_user,"anonymoose").toString(Zt.enc.Utf8),r="true"===Zt.AES.decrypt(u.user_data.is_org_cc_user,"anonymoose").toString(Zt.enc.Utf8),s="true"===Zt.AES.decrypt(u.user_data.is_am_web_user,"anonymoose").toString(Zt.enc.Utf8),o="true"===Zt.AES.decrypt(u.user_data.is_idb_user,"anonymoose").toString(Zt.enc.Utf8));var d=this.canSubmit();if(a){if(r)return l.a.createElement(m.a,{to:"/orgcc/manageemployees"});if(n)return l.a.createElement(m.a,{to:"/amcc/manageorganizations"});if(s)return l.a.createElement(m.a,{to:"/amweb/hotlinemessages"});if(o)return l.a.createElement(m.a,{to:"/idb/hotlinereports"})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(w.a,{className:"content-center mt-0 px-4"},l.a.createElement(S.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(S.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},Me)),l.a.createElement(w.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:zt.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(S.a,{span:24,className:"subtext mb-0 d-none d-lg-block"},l.a.createElement(w.a,{className:"pt-4"},l.a.createElement(S.a,{span:8,className:"gutter-row vertical-divider"},l.a.createElement("h6",null,"Control Center (CC)"),l.a.createElement("div",{className:"divider-bottom mb-2"}),l.a.createElement("p",null,"For authorized employees to manage Hotlines and Openlines, Polls and Surveys, Broadcast Messages and to manage employee access permissions.")),l.a.createElement(S.a,{span:8,className:"gutter-row  vertical-divider"},l.a.createElement("h6",null,"Insights Dashboard (IDB)"),l.a.createElement("div",{className:"divider-bottom mb-2"}),l.a.createElement("p",null,"View reports for Hotlines and Openlines, results for Polls and Surveys, and all Broadcast Messages thus far")),l.a.createElement(S.a,{span:8,className:"gutter-row"},l.a.createElement("h6",null,"AnonyMoose Web (AM Web)"),l.a.createElement("div",{className:"divider-bottom mb-2"}),l.a.createElement("p",null,"Manage messages for Hotlines and Openlines assigned to you."))))),l.a.createElement(S.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},l.a.createElement(C.a,{spinning:this.state.loading,size:"large"},"true"==this.state.error&&l.a.createElement(st.a,{message:"Invalid Login! Please try again",type:"error",showIcon:!0}),l.a.createElement(w.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Sign In")),l.a.createElement(lt.a,Object.assign({className:"floating-label"},Jt,{onSubmit:this.handleLogin,ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(mt,{label:Ie,value:this.state.email},l.a.createElement(lt.a.Item,{name:"email",rules:[{required:!0,message:gt,type:"email"}]},l.a.createElement(_.a,{type:"Email",className:"input-control",placeholder:" ",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(mt,{label:"Password",value:this.state.password},l.a.createElement(lt.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your password"}]},l.a.createElement(_.a,{type:"password",className:"input-control",value:this.state.password,onChange:this.onChangePassword}))),l.a.createElement("div",{className:"forgot-pwd"},l.a.createElement(c.b,{to:"/forgotpassword"}," ","Forgot Password")),l.a.createElement(lt.a.Item,$t,l.a.createElement(Ne.a,{disabled:!d,type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(){e.handleLogin()}},"Sign In"))))))),l.a.createElement(w.a,{className:"footer-content position-fixed"},l.a.createElement(Kt,null)))}}]),t}(n.Component);var ea=Object(i.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,message:e.message.message}}))(Xt),ta={wrapperCol:{span:24}},aa={wrapperCol:{span:24}},na=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(V.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(V.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(V.a)(a)),a.state={email:"",password:"",page:"is_amcc_user",error:"false"},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.history;a(z(this.state.email,this.state.password,this.state.page)).then((function(){n.push("/amcc/manageorganizations"),window.location.reload()})).catch((function(){e.setState({loading:!1,error:"true"})}))}},{key:"canSubmit",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){var e=this,t=this.canSubmit(),a=this.props,n=a.isLoggedIn;a.message;return n?l.a.createElement(m.a,{to:"/amcc/manageorganizations"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(w.a,{className:"content-center mt-0 px-4"},l.a.createElement(S.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(S.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},"Control Center and Insights Dashboard")),l.a.createElement(w.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:zt.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(w.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},"Raising Voice Anonymously Made Easy"))),l.a.createElement(S.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center align-items-center"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},"true"==this.state.error&&l.a.createElement(st.a,{message:"Invalid Login! Please try again",type:"error",showIcon:!0}),l.a.createElement(w.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Sign In")),l.a.createElement(lt.a,Object.assign({className:"floating-label"},ta,{onSubmit:this.handleLogin,ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(mt,{label:"Email",value:this.state.email},l.a.createElement(lt.a.Item,{name:"email",rules:[{required:!0,message:"Please enter your email!",type:"email"}]},l.a.createElement(_.a,{type:"Email",className:"input-control",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(mt,{label:"Password",value:this.state.password},l.a.createElement(lt.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your password!"}]},l.a.createElement(_.a,{type:"password",className:"input-control",value:this.state.password,onChange:this.onChangePassword}))),l.a.createElement("div",{className:"forgot-pwd"},l.a.createElement("a",{href:"#"},"Forgot Password")),l.a.createElement(lt.a.Item,aa,l.a.createElement(Ne.a,{disabled:!t,type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(){e.handleLogin()}},"SIGN IN")))))))}}]),t}(n.Component);var la=Object(i.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,message:e.message.message}}))(na),ra=N.a.Sider,sa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")&&(t="2")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?ge.a:pe.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(ra,{className:this.state.collapsed?" d-lg-block w-md-100 sider-width":"d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(de.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(de.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(c.b,{to:"/amweb/hotlinemessages"},"Hotline Messages")),l.a.createElement(de.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(c.b,{to:"/amweb/openlinemessages"},"Openline Messages"))),l.a.createElement("div",{className:"btm-div"},l.a.createElement(c.b,{to:"/orgcc/info",className:"px-2",disabled:!0},Z),l.a.createElement(c.b,{to:"/orgcc/help",className:"px-2",disabled:!0},"Help"))))}}]),t}(l.a.Component),oa=N.a.Sider,ia=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotlinereports")?t="1":this.props.data.location.pathname.includes("openlinereports")&&(t="2")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?pe.a:ge.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(oa,{className:this.state.collapsed?"d-lg-block w-md-100 sider-width":" d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(de.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(de.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-manage-org"}))},l.a.createElement(c.b,{to:"/idb/hotlinereports"},"Hotline Reports")),l.a.createElement(de.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(c.b,{to:"/idb/openlinereports"},"Openline Reports")))))}}]),t}(l.a.Component),ca=N.a.Content,ma=a(48),ua=function(e){var t=v("userType"),a=t?ma.AES.decrypt(t,"anonymoose").toString(ma.enc.Utf8):"",r=Object(n.useState)({currentPwd:"",newPwd:"",confirmPwd:""}),s=Object(o.a)(r,2),i=s[0],c=s[1],m=Object(n.useState)(!1),u=Object(o.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(!1),h=Object(o.a)(g,2),f=h[0],E=h[1],b=Object(n.useState)(""),y=Object(o.a)(b,2),O=y[0],j=y[1],C=Object(n.useState)(!1),D=Object(o.a)(C,2),k=D[0],I=D[1];Object(n.useEffect)((function(){E(!1),I(!1);var e=JSON.parse(v("user")),t=e?ma.AES.decrypt(e.user_details.first_name,"anonymoose").toString(ma.enc.Utf8)+" "+ma.AES.decrypt(e.user_details.last_name,"anonymoose").toString(ma.enc.Utf8):"";j(t)}),[]);var x=function(e){c(Object(M.a)({},i,Object(et.a)({},e.target.id,e.target.value)))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},"AM WEB"===a?l.a.createElement(ue,{amWEBUser:!0}):"AM CC"===a?l.a.createElement(ue,{amCCUser:!0}):"Org CC"===a?l.a.createElement(ue,{amORGUser:!0}):"IDB"===a?l.a.createElement(ue,{amIDBUser:!0}):null),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,"AM WEB"===a?l.a.createElement(sa,{data:e}):"Org CC"===a?l.a.createElement(fe,{data:e}):"AM CC"===a?l.a.createElement(ve,null):"IDB"===a?l.a.createElement(ia,null):null,l.a.createElement(ca,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Change Password for"," ",O)),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(_t.a,{visible:d,onOk:function(){v("user")&&H.logout()},onCancel:function(){v("user")&&H.logout()},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:X},l.a.createElement("p",null,"Your password has been changed successfully. Please login again with your new password.")),l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(lt.a,{className:"input-md floating-label w-100"},l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32},className:"d-block"},l.a.createElement(S.a,{span:24,lg:8,className:"gutter-row"},f&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Old Password is wrong.",type:"error"})),l.a.createElement(mt,{label:"Current Password",value:i.currentPwd},l.a.createElement(lt.a.Item,{name:"currentpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your current password!"}]},l.a.createElement(_.a.Password,{htmlFor:"currentpassword",id:"currentPwd",value:i.currentPwd,onChange:x})))),l.a.createElement(S.a,{span:24,lg:8,className:"gutter-row"},l.a.createElement(mt,{label:"New Password",value:i.newPwd},l.a.createElement(lt.a.Item,{name:"newpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your new password!"}]},l.a.createElement(_.a.Password,{htmlFor:"newpassword",id:"newPwd",value:i.newPwd,onChange:x,onBlur:function(e){return function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?I(!1):I(!0)}(e)}})),k&&l.a.createElement(st.a,{message:ft,type:"error",showIcon:!0}))),l.a.createElement(S.a,{span:24,lg:8,className:"gutter-row"},l.a.createElement(mt,{label:"Confirm Password",value:i.confirmPwd},l.a.createElement(lt.a.Item,{name:"confirmpassword",className:"pwd confirpwd required",rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newpassword")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],dependencies:["newpassword"],hasFeedback:!0},l.a.createElement(_.a.Password,{htmlFor:"confirmpassword",id:"confirmPwd",value:i.confirmPwd,onChange:x})))))),l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(){var e=Ce(),t={old_password:i.currentPwd,new_password:i.newPwd,confirm_password:i.confirmPwd},a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};i.newPwd!==i.confirmPwd||k||P.a.put(R+"changepassword/",t,a).then((function(){E(!1),p(!0)})).catch((function(e){e.message.includes("400")&&E(!0)}))}},"Submit")))))))))))))},da=(a(478),a(86)),pa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,iconContent:"",ImageId:""},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.addIcon(a.state.iconContent,a.state.ImageId)},a.handleCancel=function(){a.setState({visible:!1})},a.onSelectIcon=function(e){a.setState({iconContent:e.currentTarget.innerHTML,ImageId:e.currentTarget.id})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{type:"link",className:"link pl-0",onClick:this.showModal},l.a.createElement("span",{className:"icon icon-add-filled"}),"Add Icon"),l.a.createElement(_t.a,{className:"modal-icon",title:"Add Icon",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Add",cancelText:"Cancel"},l.a.createElement(w.a,{className:"py-4","data-test":"AddIcon"},l.a.createElement("div",{className:"1"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:1,onClick:this.onSelectIcon},l.a.createElement(da.a,{title:"Sexual Harrasment"},l.a.createElement("span",{className:"icon icon-sexual-harassment-1"}))),l.a.createElement("div",{className:"2"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:2,onClick:this.onSelectIcon},l.a.createElement(da.a,{title:"Violence"},l.a.createElement("span",{className:"icon icon-violence"}))),l.a.createElement("div",{className:"3"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:3,onClick:this.onSelectIcon},l.a.createElement(da.a,{title:"Racism"},l.a.createElement("span",{className:"icon icon-racism"}))),l.a.createElement("div",{className:"4"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:4,onClick:this.onSelectIcon},l.a.createElement(da.a,{title:"Cyber Bullying"},l.a.createElement("span",{className:"icon icon-cyber-bullying"}))),l.a.createElement("div",{className:"5"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:5,onClick:this.onSelectIcon},l.a.createElement(da.a,{title:"Fight"},l.a.createElement("span",{className:"icon icon-fight"}))),l.a.createElement("div",{className:"6"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:6,onClick:this.onSelectIcon},l.a.createElement(da.a,{title:"Discrimination"},l.a.createElement("span",{className:"icon icon-discrimination"}))),l.a.createElement("div",{className:"7"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:7,onClick:this.onSelectIcon},l.a.createElement(da.a,{title:"Slap"},l.a.createElement("span",{className:"icon icon-slap"}))))))}}]),t}(n.Component),ga=a(71),ha=a.n(ga),fa=a(130),Ea=a.n(fa),va=function(e){var t=e.next,a=e.stepOneHotLineInfo,r=e.handleStepOneOnChange,s=(e.handleStepOneOnSelect,e.handleStepOneDatePickerChange),i=e.addIcon,c=e.onChangeCheckbox,m=e.getIconText,u=e.setNameValidHandle,d=e.hotlineErrorUpdated,p=Object(n.useState)({iconText:""}),g=Object(o.a)(p,2),h=(g[0],g[1],Object(n.useState)(!1)),f=Object(o.a)(h,2),E=f[0],v=f[1],b=Object(n.useState)(!0),y=Object(o.a)(b,2),O=(y[0],y[1]),_=lt.a.useForm(),N=Object(o.a)(_,1)[0],j=rt.a.RangePicker;return l.a.createElement(lt.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:N},E&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(mt,{label:"Directory Name",value:a.directoryName},l.a.createElement(lt.a.Item,{className:"required",name:"directoryName",rules:[{required:!0,message:{ENTER_DIRECTORY_NAME:"Please enter directory name"}}]},l.a.createElement(Ea.a,{showCount:!0,maxLength:80,value:a.directoryName,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"checkhotline/",{hotline_name:a.directoryName},t).then((function(e){e.data&&u(e.data[0],"hotlineErrorUpdated")}))}()},id:"directoryName",className:"input-control",htmlFor:"directoryName",autoComplete:"off"}),"status: false"===d&&a.directoryName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.directoryName.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==d&&l.a.createElement(st.a,{message:Et,type:"error",showIcon:!0}))),l.a.createElement(mt,{label:"Description",value:a.description},l.a.createElement(lt.a.Item,{className:"required",name:"description",rules:[{required:!0,message:{ENTER_DESCRIPTION:"Please enter description"}}]},l.a.createElement(Ea.a,{className:"input-control",value:a.description,onChange:function(e){return r(e)},id:"description",htmlFor:"description",autoComplete:"off"}))),a.statusMessage.length>0?l.a.createElement(l.a.Fragment,null,a.statusMessage):null,l.a.createElement(mt,{label:xe,value:"sDate"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(j,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"sDate",value:a.sDate,onChange:function(e){return s(e,"sDate")},disabledDate:function(e){return e&&e<ke()().startOf("day")},rules:[{required:!0,message:{SELECT_DATE:vt}}]}))),l.a.createElement(lt.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{className:"font-13",onChange:function(e){return c(e)},checked:a.status},"Save as Draft"))),l.a.createElement(lt.a.Item,{className:""},l.a.createElement(lt.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(pa,{"data-test":"addIconComponent",addIcon:i}),m(a.hotlineIconId)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},ha()(a.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:m(a.hotlineIconId)},m(a.hotlineIconId)))))))),l.a.createElement(lt.a.Item,null,l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),a.directoryName&&a.directoryName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.description&&a.description.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.iconHtml&&a.sDate?"status: false"==d&&(v(!1),O(!1),t()):v(!0)},"data-test":"stepOneNext"},ee)))},ba=function(e,t){return function(a){return Lt.getEmployees(e,t).then((function(e){return a({type:"MANAGEEMP_SUCCESS",payload:{manageEmpData:e.data}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:"MANAGEEMP_FAIL"}),a({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}},ya=a(306),Oa=a.n(ya),_a=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onSearch=function(e){var t=a.state.employeeData,n=a.filterIt(t,e);a.setState({filterData:n})},a.start=function(){a.setState({showAssigntoModal:!0})},a.stepTwoPrev=function(){a.props.prev()},a.stepTwoNext=function(){0!==a.props.stepTwoHotLine.chekedValues.length?a.props.next():a.setState({showAlert:!0})},a.state={employeeData:"",showAssigntoModal:"false",showAlert:!1,loader:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;this.setState({loader:!0}),e(ba({},""))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.manageEmpData;e.manageEmpData!=a&&this.setState({employeeData:a,loader:!1},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.props.stepTwoHotLine.selectedRowKeys,onChange:this.props.handleStepTwoOnSelect},a=[{title:"First Name",dataIndex:"first_name",key:"first_name",width:"22%",render:function(e){return{children:e,props:{"data-title":"First Name"}}}},{title:"Last Name",dataIndex:"last_name",key:"last_name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}}},{title:Te,dataIndex:"mobile_number",key:"mobile_number",width:"21%",render:function(e){return{children:e,props:{"data-title":"Mobile Number"}}}},{title:"Access",dataIndex:"",key:"x",render:function(e){var t="",a="",n=!1;return e.is_am_web_user&&(a="AM Web",n=!0),e.is_org_cc_user&&(a=J,n=!0),e.is_idb_user&&(a="IDB",n=!0),e.is_super_user&&(a="Super User",n=!0),e.is_app_user&&(n||(a="APP")),0===t.length?t+=a:"APP"!==a&&(t.includes("APP")?t=a:t+=", "+a),{children:l.a.createElement("span",null,t),props:{"data-title":"Access"}}},width:"20%"},{title:Ae,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}}];return l.a.createElement("div",null,l.a.createElement(S.a,{"data-test":"createHotlineStepTwo",span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Oa.a,{placeholder:"Search User",onSearch:this.onSearch})))))),this.state.showAlert&&l.a.createElement(st.a,{message:"Please select user(s).",type:"error",showIcon:!0}),l.a.createElement(C.a,{spinning:this.state.loader,size:"large"},l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(ye.a,{rowSelection:t,columns:a,dataSource:this.state.filterData,rowKey:"unique_identifier"})),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",style:{margin:"0 8px"},onClick:function(){return e.stepTwoPrev()},"data-test":"steptwoPrev"},te),l.a.createElement(Ne.a,{className:"md",type:"primary",onClick:function(){return e.stepTwoNext()},"data-test":"steptwoNext"},ee))))}}]),t}(l.a.Component);var Na=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(_a),ja=_.a.TextArea,wa=function(e){var t,a=e.prev,n=e.createNewHotLine,r=e.stepOneHotLine,s=e.stepTwoHotLine,i=e.getIconText,c=lt.a.useForm(),m=Object(o.a)(c,1)[0],u=s.selectedRows.map((function(e){return e.first_name+" "+e.last_name})),d=rt.a.RangePicker;return l.a.createElement(lt.a,{"data-test":"createHotlineStepThree",className:"input-md w-md-100 w-75",name:"validate_other",form:m},l.a.createElement(lt.a.Item,{name:"directoryName"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ja,{showCount:!0,disabled:!0,maxLength:80,value:r.directoryName,id:"directoryName",className:"input-control textarea-input",htmlFor:"directoryName"}))),l.a.createElement(lt.a.Item,{name:"description"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ja,{disabled:!0,className:"input-control textarea-md",value:r.description,id:"description",htmlFor:"description"}))),l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(l.a.Fragment,null,l.a.createElement(d,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"sdate",value:r.sDate,rules:[{readOnly:!0,required:!0,message:{SELECT_DATE:vt}}],disabled:!0}))),l.a.createElement("div",{className:"d-block d-lg-flex"},l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(lt.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{className:"font-13",checked:r.status,disabled:!0},"Save as Draft")))),l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(lt.a.Item,{name:"userNames"},l.a.createElement(l.a.Fragment,null,l.a.createElement(_.a,{className:"input-control",htmlFor:"assigned to",id:u,disabled:!0,value:u.join(", ")}))))),l.a.createElement(lt.a.Item,{className:"w-100 w-lg-50"},l.a.createElement(lt.a.Item,{className:"upload-control"},l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail",href:"#",rel:""},ha()(r.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:""},i(r.hotlineIconId)))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,(t={type:"secondary",className:"mr-4"},Object(et.a)(t,"type","secondary"),Object(et.a)(t,"style",{margin:"0 8px"}),Object(et.a)(t,"htmlType","submit"),Object(et.a)(t,"onClick",(function(e){e.preventDefault(),a()})),Object(et.a)(t,"data-test","stepThreePrev"),t),te),l.a.createElement(Ne.a,{type:"primary",className:"md",htmlType:"submit",onClick:function(e){n()},"data-test":"stepThreeNext"},"Create")))},Sa=N.a.Content,Ca=at.a.Step,Da=[{title:"Add Details",content:"First-content"},{title:"Assign Employee",content:"Second-content"},{title:"Create Directory",content:"Last-content"}],ka=a(48),Ia=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),m=Object(o.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)({directoryName:"",description:"",status:!1,statusMessage:"",sDate:"",tDate:"",hotlineIconId:"",iconHtml:""}),g=Object(o.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)(""),b=Object(o.a)(E,2),y=b[0],O=b[1],_=Object(n.useState)({selectedRows:"",selectedRowKeys:[],chekedValues:[]}),j=Object(o.a)(_,2),D=j[0],k=j[1],I=function(){s(r+1)},x=function(){s(r-1)},T=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"hotlineCreation"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e.noHotlines?e.data:e}),l.a.createElement(Sa,{className:""},l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/hotlinedirectory"},l.a.createElement(nt.a.Item,null,"Hotline Directory")),l.a.createElement(nt.a.Item,null,"Create Hotline Directory"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Hotline Directory Entries")),l.a.createElement(at.a,{className:"mt-2",current:r},Da.map((function(e){return l.a.createElement(Ca,{key:e.title,title:e.title})}))),l.a.createElement(C.a,{spinning:u,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"steps-content"},0==r?l.a.createElement(va,{next:I,stepOneHotLineInfo:h,handleStepOneOnChange:function(e){f(Object(M.a)({},h,Object(et.a)({},e.target.id,e.target.value)))},handleStepOneOnSelect:function(e,t){f(Object(M.a)({},h,Object(et.a)({},t,e)))},handleStepOneDatePickerChange:function(e,t){var a,n,l,r=ke()();if(e&&0===(null===(a=e[0])||void 0===a?void 0:a.diff(r,"days"))&&!h.status)f(Object(M.a)({},h,(l={},Object(et.a)(l,t,e),Object(et.a)(l,"statusMessage",re),l)));else if(e&&(null===(n=e[0])||void 0===n?void 0:n.diff(r,"days"))>0&&!h.status){var s;f(Object(M.a)({},h,(s={},Object(et.a)(s,t,e),Object(et.a)(s,"statusMessage",se),s)))}else{var o;f(Object(M.a)({},h,(o={},Object(et.a)(o,t,e),Object(et.a)(o,"statusMessage",""),o)))}},onChangeCheckbox:function(e){if(e.target.checked)f(Object(M.a)({},h,{status:e.target.checked,statusMessage:""}));else{var t,a,n=ke()(),l=h.sDate;l&&0===(null===(t=l[0])||void 0===t?void 0:t.diff(n,"days"))?f(Object(M.a)({},h,{status:e.target.checked,statusMessage:re})):l&&(null===(a=l[0])||void 0===a?void 0:a.diff(n,"days"))>0&&f(Object(M.a)({},h,{status:e.target.checked,statusMessage:se}))}},setNameValidHandle:function(e,t){O(e)},addIcon:function(e,t){f(Object(M.a)({},h,{hotlineIconId:t,iconHtml:e}))},getIconText:T,hotlineErrorUpdated:y,"data-test":"CreateHotlineStepOne"}):1==r?l.a.createElement(Na,{next:I,prev:x,stepOneHotLine:h,stepTwoHotLine:D,handleStepTwoOnSelect:function(e,t){var a,n=[],l=JSON.parse(v("user")),r=t.filter((function(e){var t,a=e.user_id;return!(null===(t=n)||void 0===t?void 0:t.some((function(e){return e.user_id===a})))})).reduce((function(e,t){return e.push({user_id:t.user_id,can_respond:1,can_view_reports:0,created_by:parseInt(ka.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(ka.enc.Utf8))}),e}),[]);n=null===(a=n)||void 0===a?void 0:a.concat(r),k(Object(M.a)({},D,{selectedRowKeys:e,selectedRows:t,chekedValues:n}))}}):2==r?l.a.createElement(wa,{prev:x,createNewHotLine:function(){var e,t,a,n;return U.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:e=JSON.parse(v("user")),t=Ce(),a={create_hotline:{name:h.directoryName,help_text:h.description,start_date:h.sDate[0]?ke()(h.sDate[0]).format("DD-MM-YYYY"):"",end_date:h.sDate[1]?ke()(h.sDate[1]).format("DD-MM-YYYY"):"",status_id:h.status?4:1,hotline_icon_id:parseInt(h.hotlineIconId),created_by:parseInt(ka.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(ka.enc.Utf8))},permissions:D.chekedValues},n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},d(!0),P.a.post(R+"hotline/",a,n).then((function(){window.location="/orgcc/hotlinedirectory"}));case 6:case"end":return l.stop()}}))},stepOneHotLine:h,stepTwoHotLine:D,getIconText:T}):""))))))))))},xa=(a(506),a(211)),Ta=a.n(xa),Aa=N.a.Content,Ua=function(e){var t=Object(m.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e.data}),l.a.createElement(Aa,{"data-test":"Directory",className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Hotline Directory")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Ta.a,alt:"Create Hotline",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create Hotline entries and assign them to managers,",l.a.createElement("br",null),"head of departments or leadership."),l.a.createElement(w.a,{className:"d-flex justify-content-center"},l.a.createElement($e.a,{className:"mt-1"})),l.a.createElement(S.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ne.a,{"data-test":"createHotline",onClick:function(){t.push("/orgcc/createhotline")},type:"primary"},"Create"))))))))))},Ma=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"deleteHotline",value:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"hotline/"+this.props.hotlineId,e).then((function(){window.location="/orgcc/hotlinedirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},le),l.a.createElement(_t.a,{title:"Delete Hotline",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this hotline?")))}}]),t}(n.Component),Fa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(c.b,{to:{pathname:"/orgcc/edithotline",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/edithotline"},ne)," ")),l.a.createElement("li",null,l.a.createElement(Ma,{hotlineId:e.hotline_id,hotlineName:e.name}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),Pa=function(e){var t=e.data,a=e.deleteRecord,r=e.handleCheck,s=Object(n.useState)(),i=Object(o.a)(s,2),c=i[0],m=i[1];Object(n.useEffect)((function(){u()}),[t]);var u=function(){m(t)},d=[{title:"Name",dataIndex:"first_name",key:"first_name",width:"30%"},{title:"Respond",dataIndex:"can_respond",key:"can_respond",width:"20%",editable:!0,render:function(e,t){return l.a.createElement(S.a,{span:12,className:"d-flex justify-content-end changeColor"},l.a.createElement(ct.a,{value:"reports",checked:e,onChange:function(e){return r(t)},disabled:!0}))}},{title:"Actions",dataIndex:"user_id",key:"user_id",width:"20%",render:function(e,t){return l.a.createElement("span",{onClick:function(e){!function(e,t){t.preventDefault(),a(e)}(t,e)},className:"uploaded-icon icon icon-close d-inline-flex justify-content-end align-items-center"})}}];return l.a.createElement("div",{className:"no-bordered-grid"},l.a.createElement(ye.a,{className:"no-bg-table",locale:{emptyText:"  "},rowClassName:function(){return"editable-row"},columns:d,dataSource:c,rowKey:"rowkey"}))},Ra=a(1447),Ya=(a(507),function(e){var t=e.searchData,a=e.addAssignUser,r=e.data,s=Object(n.useState)(!1),i=Object(o.a)(s,2),c=i[0],m=i[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),p=d[0],g=d[1];return l.a.createElement(l.a.Fragment,null,c&&l.a.createElement(st.a,{"data-test":"alert",message:"".concat(p," is already assigned for this hotline."),type:"error",showIcon:!0}),l.a.createElement(Ra.a,{"data-test":"Searchuser",options:t,placeholder:"Search Employee",filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},onSelect:function(e,t){return function(e,t){r.filter((function(e){return e.user_id===t.user_id})).length>0?(m(!0),g(e)):a(e,t)}(e,t)},onChange:function(){return m(!1),void g("")}}))}),La=a(48),Ba=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,assignedHotLines:"",hotLineName:"",assignedEmp:"",loader:!1},a.showModal=function(){a.setState({visible:!0,employeeData:[],hotLineName:a.props.selectedRows.name,hotlineId:a.props.selectedRows.hotline_id,loader:!0}),(0,a.props.dispatch)(ba({},"")),a.getAssignedEmployee()},a.getAssignedEmployee=function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getHotlineAssignEmpl/"+a.props.selectedRows.hotline_id,e).then((function(e){a.setState({assignedHotLines:e.data,loader:!1})}))},a.handleOk=function(e){a.setState({visible:!1});var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"hotlineAssignEmpl/",a.state.assignedEmp,t).then((function(e){a.getAssignedEmployee(),a.setState({assignedEmp:""})})).catch((function(e){}))},a.handleCheck=function(e){var t=Object(tt.a)(a.state.assignedHotLines),n=t.findIndex((function(t){return t.user_id===e.user_id}));t[n]=Object(M.a)({},t[n],{can_respond:!e.can_respond}),a.setState({assignedHotLines:t});var l=Object(tt.a)(a.state.assignedEmp),r=l.findIndex((function(t){return t.user_id===e.user_id}));l[r]=Object(M.a)({},l[r],{can_respond:!e.can_respond}),a.setState({assignedEmp:l})},a.handleCancel=function(){a.setState({visible:!1})},a.deleteRecord=function(e){e.user_id;var t=a.state.assignedEmp&&a.state.assignedEmp.filter((function(t){return t.user_id!==e.user_id}));a.setState({assignedEmp:t});var n={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({user_id:e.user_id})};P.a.delete(R+"getHotlineAssignEmpl/"+e.hotline_id,n).then((function(){a.getAssignedEmployee()})).catch((function(e){}))},a.addUser=function(e,t){var n=JSON.parse(v("user")),l=a.state,r=l.assignedHotLines,s=l.assignedEmp,o={hotline_id:a.state.hotlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,first_name:t.value},i={hotline_id:a.state.hotlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,created_by:parseInt(La.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(La.enc.Utf8))};a.setState({assignedHotLines:[].concat(Object(tt.a)(r),[o]),assignedEmp:[].concat(Object(tt.a)(s),[i])})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props.manageEmpData,a=[];if(e.manageEmpData!=t){for(var n=0;n<t.length;n++){var l,r,s;a.push({value:null===(l=t[n])||void 0===l?void 0:l.first_name.concat(" ",null===(r=t[n])||void 0===r?void 0:r.last_name),user_id:null===(s=t[n])||void 0===s?void 0:s.user_id})}this.setState({employeeData:a})}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Show"),l.a.createElement(_t.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:ae},l.a.createElement("div",null,"Employees with permissions to "," ",this.state.hotLineName),l.a.createElement(w.a,{className:"mt-2 mt-lg-5 mb-3 thead-outer"},l.a.createElement(S.a,{span:10},Ye)),l.a.createElement(C.a,{spinning:this.state.loader,size:"large"},l.a.createElement(Pa,{data:this.state.assignedHotLines,deleteRecord:this.deleteRecord,handleCheck:this.handleCheck})),l.a.createElement(w.a,{className:"mb-2 autocomplete"},l.a.createElement(S.a,{span:24},l.a.createElement(Ya,{searchData:this.state.employeeData,addAssignUser:this.addUser,data:this.state.assignedHotLines}),l.a.createElement("small",null,"Hit enter to add")))))}}]),t}(n.Component);var Ha=Object(i.b)((function(e){return{assignhotlines:e.assignedHotline.assignhotlines,manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(Ba),za=a(48),Va=_.a.Search,qa=(l.a.createElement(Oe.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),Qa=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","/");if(new Date<new Date(n)){var l=JSON.parse(v("user")),r={help_text:e.help_text,hotline_icon_id:e.hotline_icon_id,hotline_id:e.hotline_id,name:e.name,start_date:ke()(e.start_date.replaceAll(" / ","-")).format("DD-MM-YYYY"),end_date:ke()(n.replaceAll("/","-")).format("DD-MM-YYYY"),status_id:"Active"===t?4:5,updated_by:parseInt(za.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(za.enc.Utf8))},s={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.put(R+"hotline/"+r.hotline_id,r,s).then((function(){j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.name+Be}),a.props.statusOnClicked()}))}else j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.name+He})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n,searchBy:e})},a.state={data:[],filterData:[],searchBy:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.hotlines;null===t||void 0===t||t.forEach((function(e){e.start_date=ke()(e.start_date).utc().local().format("MM / DD / YYYY"),e.end_date=ke()(e.end_date).utc().local().format("MM / DD / YYYY")})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a=this;this.props.hotlines!==e.hotlines&&(null===(t=e.hotlines)||void 0===t||t.forEach((function(e){e.start_date=ke()(e.start_date).utc().local().format("MM / DD / YYYY"),e.end_date=ke()(e.end_date).utc().local().format("MM / DD / YYYY")})),this.setState({data:e.hotlines},(function(){a.onSearch(a.state.searchBy)})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=[{title:"Hotline Name",dataIndex:"name",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Hotline Name"}}}},{title:"Start Date",dataIndex:"start_date",key:"start_date",width:"22%",render:function(e){return{children:e,props:{"data-title":"Start Date"}}}},{title:"End Date",dataIndex:"end_date",key:"end_date",width:"21%",render:function(e){return{children:e,props:{"data-title":"End Date"}}}},{title:"Permissions",dataIndex:"",key:"x",width:"20%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement(Ha,{selectedRows:e})),props:{"data-title":"Permissions"}}}},{title:Ae,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:4===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Draft"):5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):7===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Scheduled"):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Completed"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(Fa,{data:e}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:this.props.data}),l.a.createElement(qa,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Hotline Directory")),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Va,{placeholder:"Search",onSearch:this.onSearch})))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(c.b,{to:"/orgcc/createhotline"},l.a.createElement(je,{value:"Create Hotline"}))))),l.a.createElement(C.a,{spinning:this.props.loader,size:"large"},l.a.createElement(_e,{rowKey:"hotline_id",columns:e,data:this.state.filterData})))))))}}]),t}(l.a.Component);var Ga=Object(i.b)((function(e){return{hotlinesdata:e.hotlinedata.hotlinesdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return Lt.getHotlines().then((function(t){return e({type:"HOTLINE_SUCCESS",payload:{hotlinesdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"HOTLINE_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[r]),Object(n.useEffect)((function(){null===e.hotlinesdata?u(!0):null!==e.hotlinesdata&&u(!1)}),[e.hotlinesdata]);return m||null===e.hotlinesdata||0!==e.hotlinesdata.length?l.a.createElement(Qa,{hotlines:e.hotlinesdata,statusOnClicked:function(){s(!r)},data:e,loader:m}):l.a.createElement(Ua,{data:e})})),Wa=function(e){var t=e.handleCheck,a=e.selectedRow,r=e.stepOneHotLineValues,s=e.permissions,i=e.getCheckValues,c=Object(n.useState)(!1),m=Object(o.a)(c,2),u=m[0],d=m[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{type:"primary",onClick:function(){return U.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}))}},"Assign"),l.a.createElement(_t.a,{className:"modal-checkbox",visible:u,onOk:function(){return d(!1),void i()},onCancel:function(){d(!1)},centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:ae},l.a.createElement("div",null,ASSIGN_HOTLINE_TEXT_PART1," ",l.a.createElement("b",null,r.directoryName)," ","Hotline",l.a.createElement("br",null)," ",l.a.createElement("span",{className:"font-wgt-md"}," ")," "),l.a.createElement("div",null,l.a.createElement(w.a,{className:"mt-2 mt-lg-5"},l.a.createElement(S.a,{span:6}),l.a.createElement(S.a,{span:14,className:"small text-center"},Ye)),a&&a.map((function(e){var a=s.find((function(t){return t.user_id===e.user_id}));return l.a.createElement(w.a,{className:"mt-3 d-flex justify-content-center"},l.a.createElement(S.a,{span:12},"".concat(e.firstname," ").concat(e.lastname)),l.a.createElement(S.a,{span:10},l.a.createElement(ct.a,{checked:!(!a||1!==a.can_respond),disabled:!0,onChange:function(a){return t(e)}})))})))))},Ka=a(1470),Ja=a(110),$a=a(582),Za=a.n($a),Xa=(a(508),a(1455)),en=a(1460),tn=a(623),an=function(e,t){return e.filter((function(e){return e.conversation_id.toLowerCase().includes(t.toLowerCase())||e.responder_conversation_name.toLowerCase().includes(t.toLowerCase())||e.hotline_name.toLowerCase().includes(t.toLowerCase())||e.message.toLowerCase().includes(t.toLowerCase())})).map((function(e){var a=e.conversation_id.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),n=e.responder_conversation_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),l=e.hotline_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),r=e.message.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));return Object(M.a)({},e,{conversation_id:a,responder_conversation_name:n,message:r,hotline:{name:l,hotline_id:e.hotline_id}})}))},nn=(a(1015),a(76)),ln=a(48),rn=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)([]),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)([]),E=Object(o.a)(f,2),b=E[0],y=E[1],O=Object(n.useState)([]),_=Object(o.a)(O,2),N=_[0],j=_[1],C=Object(n.useState)([]),D=Object(o.a)(C,2),k=D[0],I=D[1],x=Object(n.useState)([]),T=Object(o.a)(x,2),A=T[0],U=T[1],F=Object(n.useState)([]),Y=Object(o.a)(F,2),L=Y[0],B=Y[1],H=Object(n.useState)([]),z=Object(o.a)(H,2),V=z[0],q=z[1],Q=Object(n.useState)([]),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=Object(n.useState)([]),$=Object(o.a)(J,2),Z=$[0],X=$[1],ee=Object(n.useState)([]),te=Object(o.a)(ee,2),ne=te[0],le=te[1],re=Object(n.useState)([]),se=Object(o.a)(re,2),oe=se[0],ie=se[1];Object(n.useEffect)((function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getUserallHotlines/"+parseInt(ln.AES.decrypt(t.user_data.user_id,"anonymoose").toString(ln.enc.Utf8)),a).then((function(e){var t=[];e.data.map((function(e){return t.push({label:e.hotline_name,value:e.hotline_id})})),y(t)}))}),[]),Object(n.useEffect)((function(){void 0===e.removeFilter.type||e.visible||de(!1)}),[m,r,g]),Object(n.useEffect)((function(){if("urgencyLevel"===e.removeFilter.type){var t=Z.filter((function(t){return t.value!==e.removeFilter.value})),a=m.filter((function(t){return t!==e.removeFilter.value}));u(a),X(t)}if("urgencyHotline"===e.removeFilter.type){var n=ne.filter((function(t){return t.value!==e.removeFilter.value})),l=g.filter((function(t){return t!==e.removeFilter.value}));h(l),le(n)}if("urgencyStatus"===e.removeFilter.type){var o=oe.filter((function(t){return t.value!==e.removeFilter.value})),i=r.filter((function(t){return t!==e.removeFilter.value}));s(i),ie(o)}}),[e.removeFilter]);var ce=[{label:"Low",value:1},{label:"Medium",value:2},{label:"High",value:3}],me=[{label:"New",value:1},{label:"Open",value:2},{label:"Closed",value:3}],ue=b,de=function(t){var a=Object(M.a)({},r.length>0&&{status_id:r},{},m.length>0&&{urgency_level_id:m},{},g.length>0&&{hotline_id:g});U(r),j(m),I(g),q(ne),K(oe),B(Z);var n=Ce(),l=JSON.parse(v("user")),s=v("searchBy"),o={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},i=R+"hotlineResponderConversation/?user_id="+parseInt(ln.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(ln.enc.Utf8)),c=Object(M.a)({},a,{hotline_id:a.hotline_id&&a.hotline_id.toString(),status_id:a.status_id&&a.status_id.toString(),urgency_level_id:a.urgency_level_id&&a.urgency_level_id.toString()}),u=""===e.searchString?i+"&filter="+JSON.stringify(c):i+"&filter="+JSON.stringify(c)+"&search="+e.searchString,d=[];P.a.get(u,o).then((function(t){d=(null===s||void 0===s?void 0:s.length)>0?an(t.data,s):t.data,e.loadFilteredConversations(d,"apply",Z,oe,ne)})),t&&e.hide()};return l.a.createElement("div",null,l.a.createElement(S.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(w.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(S.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(Ne.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return function(){var t=Ce(),a=JSON.parse(v("user")),n=v("searchBy"),l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r=R+"hotlineResponderConversation/?user_id="+parseInt(ln.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(ln.enc.Utf8)),o=[];P.a.get(r,l).then((function(t){o=(null===n||void 0===n?void 0:n.length)>0?an(t.data,n):t.data,e.loadFilteredConversations(o,"reset",[],[],[]),u([]),X([]),s([]),ie([]),le([]),h([])})),e.hide()}()}},"Reset"))),l.a.createElement($e.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(w.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(S.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Urgency level")),l.a.createElement(S.a,{span:"24"},l.a.createElement(ct.a.Group,{className:"d-flex flex-column flex-gap",name:"urgencyLevel",options:ce,value:m,onChange:function(e){var t=Z;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ce.find((function(t){return t.value===e})))})):t=[],X(t),u(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(S.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,Ae)),l.a.createElement(S.a,{span:"24"},l.a.createElement(ct.a.Group,{className:"d-flex flex-column flex-gap",name:"status",value:r,options:me,onChange:function(e){var t=oe;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(me.find((function(t){return t.value===e})))})):t=[],ie(t),s(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(S.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Hotline")),l.a.createElement(S.a,{span:"24"},l.a.createElement(ct.a.Group,{className:"d-flex flex-column flex-gap",name:"hotline",options:ue,value:g,onChange:function(e){var t=ne;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ue.find((function(t){return t.value===e})))})):t=[],le(t),h(e)}})))))),l.a.createElement(w.a,null,l.a.createElement(S.a,{span:"24",className:"btn-row actions"},l.a.createElement(Ne.a,{type:"primary",className:"mr-2",onClick:function(){return de(!0)}},"Apply"),l.a.createElement(Ne.a,{type:"secondary",onClick:function(t){u(N),s(A),h(k),X(L),ie(W),le(V),e.hide()}},ae)))))},sn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:l.a.createElement(rn,{hide:this.hide,searchString:this.props.searchString,removeFilter:this.props.removeFilter,loadFilteredConversations:this.props.loadFilteredConversations,visible:this.state.visible}),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"icon icon-filter"})))}}]),t}(l.a.Component),on=a(1453),cn=a(1451),mn=a(307),un=a.n(mn),dn=a(1469),pn=a(48),gn=_.a.TextArea,hn=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1});var e=Ce(),t=JSON.parse(v("user")),n={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},l={note_text:a.state.noteText,conversation_id:a.props.convoId,created_by:parseInt(pn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(pn.enc.Utf8))};P.a.post(R+"addNotes/",l,n).then((function(e){200===e.status&&(a.setState({noteText:""}),a.formRef.current.resetFields(),a.props.getNoteData(e.data.conversation_id))}))},a.handleCancel=function(){a.setState({visible:!1,noteText:""}),a.formRef.current.resetFields()},a.handleChange=function(e){a.setState({noteText:e.target.value})},a.formRef=l.a.createRef(),a.state={visible:!1,noteText:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0"},l.a.createElement("span",{className:"icon icon-add-filled"}),"Take a note"),l.a.createElement(_t.a,{className:"note-modal",title:"Take a note",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Add",cancelText:"Cancel"},l.a.createElement(w.a,{className:"pt-2","data-test":"NoteModal"},l.a.createElement(lt.a,{className:"input-md w-100",name:"validate-other",ref:this.formRef},l.a.createElement(lt.a.Item,{className:"mb-0",name:"send message"},l.a.createElement(gn,{className:"input-control",placeholder:"Add note here",htmlFor:"send message",value:this.state.noteText,onChange:function(t){return e.handleChange(t)}}))))))}}]),t}(l.a.Component),fn=Xa.a.Paragraph,En=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={expand:!1,counter:0,notesData:[],conversationId:""},a.typoExpand=function(){a.setState({expand:!0,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a.typoClose=function(){a.setState({expand:!1,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderParagraph",value:function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:this.state.counter},l.a.createElement("span",{className:"note-user"},ke()(e.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A \u2022")," ",e.first_name," ",e.last_name),l.a.createElement(fn,{ellipsis:{rows:3,expandable:!0,symbol:"Show more",onExpand:this.typoExpand}},e.note_text))}},{key:"render",value:function(){var e=this;return this.props.addedNote.map((function(t){return l.a.createElement("div",{className:"show-less","data-test":"addedNotes"},e.renderParagraph(t),e.state.expand&&l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:e.typoClose},"Show less"))}))}}]),t}(n.Component),vn=(Xa.a.Paragraph,function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onChange=function(e){a.setState({rows:e})},a.state={rows:1,notes:[],conversationId:""},a.getNotes=a.getNotes.bind(Object(V.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({conversationId:this.props.conversation_id}),this.getNotes(this.props.conversation_id)}},{key:"getNotes",value:function(e){var t=this,a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},params:{conversation_id:e}};P.a.get(R+"getNotes/",a).then((function(e){t.setState({notes:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.notes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class,"data-test":"Notes"},l.a.createElement("p",null,l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Notes")),l.a.createElement(Ne.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.notesClicked(t)}}))),l.a.createElement($e.a,{className:"my-2 w-100"}),l.a.createElement(S.a,{span:"24",className:"px-3"},l.a.createElement(hn,{convoId:this.props.conversation_id,getNoteData:this.getNotes}),l.a.createElement(w.a,{className:"added-notes"},l.a.createElement(En,{addedNote:t}))))))))}}]),t}(n.Component)),bn=a(1462),yn=[{id:1,name:"Updated the Status to"},{id:2,name:"Updated the Urgency level to"},{id:3,name:"Added new Note"},{id:4,name:"View Hotline Converations"}],On=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],_n=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],Nn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).state={myclass:"",activity:[]},e.divclicked=e.divclicked.bind(Object(V.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAcitivity(this.props.conversation_id)}},{key:"getAcitivity",value:function(e){var t=this,a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getconversationActivity/?conversation_id="+e,a).then((function(e){t.setState({activity:e.data})}))}},{key:"mapAuditLog",value:function(e){var t="";return yn.map((function(a){a.id===e.audit_log_event_id&&(t=a.name,e.status_value&&On.map((function(a){e.status_value==a.id&&(t=t+" <b>"+a.name+"</b>")})),e.urgency_level_value&&_n.map((function(a){e.urgency_level_value==a.id&&(t=t+" <b>"+a.name+"</b>")})))})),t}},{key:"render",value:function(){var e=this,t=this.state.activity;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Activity")),l.a.createElement(Ne.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.activityClicked(t)}}))),l.a.createElement($e.a,{className:"my-2 w-100"}),l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{span:"24",className:"px-3 pt-2"},l.a.createElement(bn.a,null,t.map((function(t){return l.a.createElement(bn.a.Item,null,l.a.createElement("span",{className:"note-user"},ke()(t.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A\u2022")," ",t.name),l.a.createElement("br",null),ha()(e.mapAuditLog(t)))}))))))))))}}]),t}(n.Component),jn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).state={myclass:"",assigneEmp:[]},e.divclicked=e.divclicked.bind(Object(V.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAssigne(this.props.hotline_id)}},{key:"getAssigne",value:function(e){var t=this,a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getHotlineAssignee/"+e,a).then((function(e){t.setState({assigneEmp:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.assigneEmp;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Assigned To")),l.a.createElement(Ne.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.assigneClicked(t)}}))),l.a.createElement($e.a,{className:"my-2 w-100"}),l.a.createElement(S.a,{span:"24",className:"px-3 pt-2 assignees d-flex flex-column flex-gap"},t.map((function(e){return l.a.createElement(tn.a,null,e["Assigned User_name"])}))))))))}}]),t}(n.Component),wn=a(324),Sn=a(1468),Cn={position:"absolute",width:"100%",height:"100%"},Dn=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).props,l=n.lat,r=n.lng;return a.autocomplete=null,a.state={currentLocation:{lat:l,lng:r,address:""}},a.setAutocomplete=a.setAutocomplete.bind(Object(V.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.currentLocation,t=e.lat,a=e.lng;console.log(t,"=====",a),console.log("thisss",this.state.currentLocation),this.loadMap(parseFloat(a),parseFloat(t)),this.recenterMap(t,a),this.initPlaceAPI()}},{key:"componentDidUpdate",value:function(e){var t,a=this;if((null===e||void 0===e?void 0:e.lat)!==(null===(t=this.props)||void 0===t?void 0:t.lat)){this.setState({currentLocation:{lat:this.props.lat,lng:this.props.lng,address:""}});P.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+this.props.lat+","+this.props.lng+"&key=AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI").then((function(e){a.setState({currentLocation:Object(M.a)({},a.state.currentLocation,{address:e})})})),this.loadMap(this.props.lat,this.props.lng),this.recenterMap(this.props.lat,this.props.lng)}}},{key:"loadMap",value:function(e,t){var a=this;if(this.props&&this.props.google){var n=this.props.google.maps,l=this.refs.map,r=s.a.findDOMNode(l),o=this.props.zoom;console.log("in load map",e,"===",t);var i=new n.LatLng(e,t),c=Object.assign({},{center:i,zoom:o});this.map=new n.Map(r,c),this.map.addListener("click",(function(e){P.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.latLng.lat()+","+e.latLng.lng()+"&key=AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI").then((function(t){a.setState({currentLocation:{lat:e.latLng.lat(),lng:e.latLng.lng(),address:t}}),a.props.getMapLocation(e.latLng.lat(),e.latLng.lng(),t)}))}))}}},{key:"recenterMap",value:function(e,t){var a=this.map,n=this.props.google.maps;if(a){var l=new n.LatLng(e,t);a.panTo(l)}}},{key:"initPlaceAPI",value:function(){var e=this.refs.placeInputRef,t=s.a.findDOMNode(e),a=this.map;this.autocomplete=new google.maps.places.Autocomplete(t,{fields:["formatted_address","geometry","name"],types:["geocode"]}),this.autocomplete.setFields(["address_component"]),this.autocomplete.bindTo("bounds",a),this.autocomplete.addListener("place_changed",this.setAutocomplete)}},{key:"setAutocomplete",value:function(){var e=this.map,t=this.autocomplete.getPlace();if(console.log(t.geometry.viewport),t.geometry&&t.geometry.location){var a=new google.maps.Marker({map:e,position:t.geometry.location,title:t.formatted_address}),n=new google.maps.InfoWindow;a.addListener("click",(function(){n.setContent(t.name),n.open(e,a)})),t.geometry.viewport?e.fitBounds(t.geometry.viewport):(e.setCenter(t.geometry.location),e.setZoom(17)),this.setState({currentLocation:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng(),address:t.formatted_address}}),this.props.getMapLocation(t.geometry.location.lat(),t.geometry.location.lng(),t.formatted_address)}else window.alert("No details available for input: '"+t.name+"'")}},{key:"renderChildren",value:function(){var e=this,t=this.props.children;if(t)return l.a.Children.map(t,(function(t){if(t)return l.a.cloneElement(t,{map:e.map,google:e.props.google,mapCenter:e.state.currentLocation})}))}},{key:"render",value:function(){var e=Object.assign({},Cn);return l.a.createElement("div",{className:"search-wrapper"},l.a.createElement(S.a,{span:24,className:"mb-2 search-location"},l.a.createElement("span",{className:"ant-input-group-wrapper ant-input-search"},l.a.createElement("span",{className:"ant-input-wrapper ant-input-group"},l.a.createElement("input",{type:"text",ref:"placeInputRef",className:"ant-input",placeholder:"Enter your address"}),l.a.createElement("span",{className:"ant-input-group-addon"}),l.a.createElement(Sn.a,null)))),l.a.createElement("div",{style:e,ref:"map"},"Loading map..."),this.renderChildren())}}]),t}(l.a.Component),kn=Dn;Dn.defaultProps={zoom:14};var In=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0}),a.props.getCurrenLocationName(e.name)},a.onClose=function(){a.setState({selectedPlace:{},activeMarker:{},showingInfoWindow:!1})},a.state={currentPosition:{lat:0,lng:0},showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};console.log("currentPosition",a),e.setState({currentPosition:a})}))}},{key:"render",value:function(){return l.a.createElement(kn,{lat:this.props.latitude?this.props.latitude:this.state.currentPosition.lat,lng:this.props.longitude?this.props.longitude:this.state.currentPosition.lng,google:this.props.google,getMapLocation:this.props.getMapLocation},l.a.createElement(wn.Marker,{onClick:this.onMarkerClick,name:this.state.selectedPlace.name}),this.state.showingInfoWindow&&l.a.createElement(wn.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onCloseClick:this.onClose},l.a.createElement("div",null,l.a.createElement("h4",null,this.state.selectedPlace.name))))}}]),t}(l.a.Component),xn=Object(wn.GoogleApiWrapper)({apiKey:"AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI"})(In),Tn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!!a.props.viaModal,latitude:"",longitude:"",location:""},a.showModal=function(){a.setState({visible:!0,latitude:a.props.viaModal?a.props.latitude:"",longitude:a.props.viaModal?a.props.longitude:"",locationName:""}),a.props.isEdit&&a.setState({latitude:a.props.latitude,longitude:a.props.longitude,location:a.props.address})},a.handleOk=function(){a.setState({visible:!1}),a.props.viaModal?a.props.setShowMap(!1):a.props.setLocation(a.state.latitude,a.state.longitude,a.state.locationName)},a.getMapLocation=function(e,t,n){var l,r=null===(l=n.data)||void 0===l?void 0:l.results[0].formatted_address;a.setState({latitude:e,longitude:t,locationName:r||n})},a.getCurrenLocationName=function(e){a.setState({locationName:e})},a.handleCancel=function(){a.setState({visible:!1}),a.props.viaModal&&a.props.setShowMap(!1)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t;return l.a.createElement(l.a.Fragment,null,this.props.viaModal?null:l.a.createElement("div",{class:"w-25 w-md-100"}," ",l.a.createElement(Ne.a,{type:"link",className:"upload-list link pl-0",onClick:this.showModal,disabled:(null===(e=this.props.documents)||void 0===e?void 0:e.length)>0||(null===(t=this.props.images)||void 0===t?void 0:t.length)>0||this.props.disabledLocation},l.a.createElement("span",{className:"icon icon-location"}),this.props.viaMessages?"Add Location":"Location"),l.a.createElement("div",{className:"text-truncate w-75"}," ",this.props.locationName)),l.a.createElement(_t.a,{title:this.props.viaModal?"":"Select Location",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:800,okButtonProps:{children:"Custom OK"},cancelButtonProps:this.props.viaModal?{style:{display:"none"}}:{children:"Custom cancel",className:"ant-btn-secondary"},okText:this.props.viaModal?"Close":"Add",cancelText:"Cancel"},l.a.createElement(w.a,{className:"py-4 map-container"},l.a.createElement(xn,{getMapLocation:this.getMapLocation,getCurrenLocationName:this.getCurrenLocationName,longitude:this.props.longitude,latitude:this.props.latitude,viaModal:this.props.viaModal}))))}}]),t}(n.Component),An=a(587),Un=a.n(An),Mn=function(e){var t=e.state,a=e.props,n=e.showImageModal,r=e.showDocumentModal,s=e.handleOk;return l.a.createElement("div",null,l.a.createElement("ul",{className:"mb-0 px-2"},l.a.createElement("li",null,l.a.createElement(Tn,{setLocation:a.setLocation,documents:a.documentFile.document,images:a.imageFile.image,viaMessages:!0})),l.a.createElement("li",null,l.a.createElement(Ne.a,{type:"link",className:"link pl-0",disabled:a.documentFile.document.length>0||""!==a.mapLocation.longitude,onClick:function(){return n()}},l.a.createElement("span",{className:"icon icon-image"}),"Add Image"),l.a.createElement(_t.a,{visible:t.showImageModal,centered:!0,onOk:function(e){return s(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Cancel"},0===a.message.length?l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:[],onChange:function(e){return a.handleUploadImage(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif"},l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},"Add Image")):l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:a.imageFile.image,onChange:function(e){return a.handleUploadImage(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif"},l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},"Add Image")))),l.a.createElement("li",null,l.a.createElement(Ne.a,{type:"link",className:"link pl-0",disabled:a.imageFile.image.length>0||""!==a.mapLocation.longitude,onClick:function(){return r()}},l.a.createElement("span",{className:"icon icon-doc"}),"Add Document"),l.a.createElement(_t.a,{visible:t.showDocumentModal,centered:!0,onOk:function(e){return s(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Cancel"},0===a.message.length?l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:[],onChange:function(e){return a.handleUploadDocument(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel"},l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},"Add Document")):l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:a.documentFile.document,onChange:function(e){return a.handleUploadDocument(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel"},l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},"Add Document"))))))},Fn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={showDocumentModal:!1,showImageModal:!1},a.showDocumentModal=function(){a.setState({showDocumentModal:!a.state.showDocumentModal})},a.showImageModal=function(){a.setState({showImageModal:!a.state.showImageModal})},a.handleOk=function(){a.setState({showDocumentModal:!1,showImageModal:!1})},a.handleCancel=function(){a.setState({showDocumentModal:!1,showImageModal:!1})},a.showHidePopover=function(){a.props.openAttachmentSection()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&(e.documentFile.document.length>0||e.imageFile.image.length>0)&&this.handleOk()}},{key:"render",value:function(){var e={state:this.state,props:this.props,showDocumentModal:this.showDocumentModal,showImageModal:this.showImageModal,handleOk:this.handleOk,handleCancel:this.handleCancel};return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:Mn(e),trigger:"click",visible:this.props.showAttachmentSection,onVisibleChange:this.props.openAttachmentSection},l.a.createElement("span",{className:"add-icon-wrapper"},l.a.createElement("img",{src:Un.a,alt:"add attachment",className:"pr-4"}))))}}]),t}(l.a.Component),Pn=a(308),Rn=a.n(Pn),Yn=a(48),Ln=_.a.TextArea,Bn=ot.a.Option,Hn=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],zn=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],Vn=function(e){var t,a,r=e.conversation,s=e.urgencyLevel,i=e.status,c=e.onChangeUrgencyLevel,m=e.onChangeStatus,u=e.searchString,d=e.newState,p=e.setCounter,g=e.socket,h=e.chatdiv,f=e.handleDeleteConversation,E=lt.a.useForm(),b=Object(o.a)(E,1)[0],y=Object(n.useState)([]),O=Object(o.a)(y,2),_=O[0],N=O[1],j=Object(n.useState)(!1),C=Object(o.a)(j,2),D=C[0],k=C[1],I=Object(n.useState)(""),x=Object(o.a)(I,2),T=x[0],A=x[1],F=Object(n.useState)(!1),Y=Object(o.a)(F,2),L=Y[0],B=Y[1],H=Object(n.useState)({}),z=Object(o.a)(H,2),V=z[0],q=z[1],Q=Object(n.useState)(!1),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=Object(n.useState)({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),$=Object(o.a)(J,2),Z=$[0],X=$[1],ee=Object(n.useState)({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)(""),re=Object(o.a)(le,2),se=re[0],oe=re[1],ie=Object(n.useState)({noteDivClicked:!1,myClass:""}),ce=Object(o.a)(ie,2),me=ce[0],ue=ce[1],de=Object(n.useState)(!0),pe=Object(o.a)(de,2),ge=(pe[0],pe[1]),he=Object(n.useState)(!1),fe=Object(o.a)(he,2),Ee=(fe[0],fe[1],Object(n.useState)({latitude:"",longitude:"",address:""})),ve=Object(o.a)(Ee,2),be=ve[0],ye=ve[1],Oe=Object(n.useState)(""),_e=Object(o.a)(Oe,2),Ne=(_e[0],_e[1],Object(n.useState)({activityDivClicked:!1,myClass:""})),je=Object(o.a)(Ne,2),we=je[0],Se=je[1],De=Object(n.useState)({assigneDivClicked:!1,myClass:""}),Ie=Object(o.a)(De,2),xe=Ie[0],Te=Ie[1],Ue=Object(n.useState)(!1),Me=Object(o.a)(Ue,2),Fe=Me[0],Pe=Me[1],Re=Object(n.useState)(""),Ye=Object(o.a)(Re,2),Le=Ye[0],Be=Ye[1];Object(n.useEffect)((function(){Be(u)}),[u,r.conversation_id]),Object(n.useEffect)((function(){He(),at();var e=document.getElementById("activityId"),t=document.getElementById("noteId"),a=document.getElementById("assigneId");""!=xe.myClass&&(Te({myClass:"",assigneDivClicked:!1}),a.classList.remove("selected")),""!=me.myClass&&(ue({myClass:"",noteDivClicked:!1}),t.classList.remove("selected")),""!=we.myClass&&(Se({myClass:"",activityDivClicked:!1}),e.classList.remove("selected"))}),[r.conversation_id,d]),Object(n.useEffect)((function(){if(_.length>0)if(Le.length>1){var e=0;_.map((function(t){return t.message.includes("</mark>")&&(e+=1),e}));var t=document.getElementsByTagName("mark")[e-1];t&&t.scrollIntoView(!1,{block:"end"})}else{var a=document.getElementsByClassName("hotline_message")[document.getElementsByClassName("hotline_message").length-1];a&&a.scrollIntoView(!1,{block:"end"})}}),[_,u]),Object(n.useEffect)((function(){var e=void 0!==V[r.conversation_id]?V[r.conversation_id]:"";A(e)}),[r.conversation_id]);var He=function(){var e,t,a,n,l,s;return U.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n="",n=r.conversation_id.includes("<mark")?null===(l=r.conversation_id)||void 0===l?void 0:l.toString().replace(/(<([^>]+)>)/gi,""):r.conversation_id,s={conversation_id:n,user_id:parseInt(Yn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Yn.enc.Utf8))},P.a.post(R+"hotlineConvoMessages/",s,a).then((function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:N(e.data);case 1:case"end":return t.stop()}}))}));case 7:case"end":return o.stop()}}))},ze=function(e,t,a){var n={latitude:e,longitude:t,address:a};A("$$$L#o#c#a#t#i#o#n$$$"),ye(n)},Ve=function(e){"removed"===e.file.status&&ge(!0);var t=e.fileList.slice(-5);Qe(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),oe(e.file.name),"removed"!==e.file.status&&A("$$$D#o#c#u#m#e#n#t$$$"),0===t.length&&A(""),X(Object(M.a)({},Z,{document:t}))},qe=function(e){"removed"===e.file.status&&ge(!0);var t=e.fileList.slice(-5);Qe(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),oe(e.file.name),"removed"!==e.file.status&&A("$$$I#m#a#g#e$$$"),0===t.length&&A(""),ne(Object(M.a)({},ae,{image:t}))},Qe=function(e){var t=e.includes("image");K(!!t)},Ge=function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.awrap(We(e.originFileObj));case 2:e.preview=t.sent,W?ne(Object(M.a)({},ae,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})):X(Object(M.a)({},Z,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},We=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},Ke=function(){W?ne(Object(M.a)({},ae,{imageValidation:!0})):X(Object(M.a)({},Z,{documentValidation:!0}))},Je=function(e){var t=e.name.includes(".xls"),a=e.name.includes(".pptx"),n=e.name.includes(".doc"),l=e.name.includes(".csv"),r="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||t||a||n||l;r?ge(!0):(ge(!1),T.error("".concat(e.name," is not a supported format file type.")));var s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,o="application/pdf"===e.type||t||a||n||l,i=e.size/1024/1024<5,c=e.size/1024/1024<10;return s&&(!i&&s?(ge(!1),T.error("Image must smaller than 5MB!")):ge(!0)),o&&(!c&&o?(ge(!1),T.error("Document must smaller than 10MB!")):ge(!0)),r&&i||c},Ze=function(){var e,t=Ce(),a="";r.conversation_id.includes("<mark")?a=null===(e=r.conversation_id)||void 0===e?void 0:e.toString().replace(/(<([^>]+)>)/gi,""):a=r.conversation_id;var n=JSON.parse(v("user"));if(T.length>0){var l,s,o,i,c,u={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},d=[],h={};if((null===(l=Z.document)||void 0===l?void 0:l.length)>0)null===(c=Z.document)||void 0===c||c.map((function(e){h={name:se,attach:e.base64},d.push(h)}));else if((null===(s=ae.image)||void 0===s?void 0:s.length)>0){var f;null===(f=ae.image)||void 0===f||f.map((function(e){h={name:se,attach:e.base64},d.push(h)}))}else d.push({name:"",attach:""},{name:"",attach:""});var E={user_id:parseInt(Yn.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Yn.enc.Utf8)),hotline_id:r.hotline_id,conversation_id:a,message:T,created_by:parseInt(Yn.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Yn.enc.Utf8)),attachment_type:(null===(o=Z.document)||void 0===o?void 0:o.length)>0?"document":(null===(i=ae.image)||void 0===i?void 0:i.length)>0?"image":""!==be.latitude?"location":"",latitude:be.latitude,longitude:be.longitude,address:be.address,attachments:d};P.a.post(R+"receiveHotlineMessage/",E,u).then((function(e){201===e.status&&(1!==e.data.status_id&&3!==e.data.status_id||m(2,a),(Z.document.length>0||ae.image.length>0||""!==be.latitude)&&(X({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),ne({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),ye({latitude:"",longitude:"",address:""})),Be(""),p(e),A(""),q(Object(M.a)({},V,Object(et.a)({},a,""))),g.send(JSON.stringify(e.data)))}))}b.setFieldsValue({chatArea:""})},Xe=function(){k(!0)},at=function(){N((function(e){var t,a,n=[];if(e&&e.length&&(null===(t=d.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=e[0].conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))){var l=e.filter((function(e){var t,a;return(null===(t=e.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=d.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))}));n=[].concat(Object(tt.a)(l),[d])}else n=Object(tt.a)(e);return n}))},nt=function(e){var t=document.getElementById("noteId");Ja.isMobile&&Pe(!0),""!=we.myClass&&Se({myClass:"",activityDivClicked:!1}),""!=xe.myClass&&Te({myClass:"",assigneDivClicked:!1}),""===me.myClass?(t.classList.add("selected"),ue({myClass:"rgt-panel",noteDivClicked:!0})):(t.classList.remove("selected"),ue({myClass:"",noteDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},rt=function(e){var t=document.getElementById("activityId");Ja.isMobile&&Pe(!0),""!=me.myClass&&ue({myClass:"",noteDivClicked:!1}),""!=xe.myClass&&Te({myClass:"",assigneDivClicked:!1}),""===we.myClass?(t.classList.add("selected"),Se({myClass:"rgt-panel",activityDivClicked:!0})):(t.classList.remove("selected"),Se({myClass:"",activityDivClicked:!1})),document.getElementById("noteId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},st=function(e){var t=document.getElementById("assigneId");Ja.isMobile&&Pe(!0),""!=me.myClass&&ue({myClass:"",noteDivClicked:!1}),""!=we.myClass&&Se({myClass:"",activityDivClicked:!1}),""===xe.myClass?(t.classList.add("selected"),Te({myClass:"rgt-panel",assigneDivClicked:!0})):(t.classList.remove("selected"),Te({myClass:"",assigneDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("noteId").classList.remove("selected")},it=function(e){return{__html:e}};if(u){var ct,mt,ut,dt,pt;if(r.responder_conversation_name.includes("</mark>"))r.responder_conversation_name=null===(mt=r.responder_conversation_name)||void 0===mt?void 0:mt.toString().replace(/(<([^>]+)>)/gi,""),r.responder_conversation_name=r.responder_conversation_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(r.hotline_name.includes("</mark>"))r.hotline_name=null===(ut=r.hotline_name)||void 0===ut?void 0:ut.toString().replace(/(<([^>]+)>)/gi,""),r.hotline_name=r.hotline_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(null===(ct=r.conversation_id)||void 0===ct?void 0:ct.toString().includes("</mark>"))r.conversation_id=null===(dt=r.conversation_id)||void 0===dt?void 0:dt.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(pt=r.conversation_id)||void 0===pt?void 0:pt.toString().replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));_.map((function(e){var t;e.message.includes("</mark>")?(e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}))):(e.message=e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})));return Object(M.a)({},e,{message:e.message})}))}else{var gt,ht,ft;r.responder_conversation_name=null===(gt=r.responder_conversation_name)||void 0===gt?void 0:gt.toString().replace(/(<([^>]+)>)/gi,""),r.hotline_name=null===(ht=r.hotline_name)||void 0===ht?void 0:ht.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(ft=r.conversation_id)||void 0===ft?void 0:ft.toString().replace(/(<([^>]+)>)/gi,""),_.map((function(e){var t;return e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(?:\r\n|\r|\n)/g,"<br />"),Object(M.a)({},e,{message:e.message})}))}var Et=_.length-r.unread_messages_count;return l.a.createElement(S.a,{span:24,lg:18,className:h?"chat-section d-lg-flex":"chat-section d-lg-flex d-none","data-test":"messages"},l.a.createElement(S.a,{span:24,className:"h-100"},l.a.createElement(w.a,{className:"top-filter-pan p-2 p-lg-4 d-flex align-items-center"},l.a.createElement(S.a,{span:24,lg:10},l.a.createElement("div",{className:""},l.a.createElement("h6",{dangerouslySetInnerHTML:it(r.responder_conversation_name)}),l.a.createElement("p",{style:{margin:0,display:"inline",float:"left"},dangerouslySetInnerHTML:it(r.hotline_name)}),"\xa0|\xa0",l.a.createElement("p",{style:{margin:0,display:"inline",float:"center"},dangerouslySetInnerHTML:it(r.conversation_id)}))),l.a.createElement(S.a,{span:24,lg:14},l.a.createElement("div",{className:"d-flex justify-content-start justify-content-lg-end pt-3 pt-sm-1 pt-md-0"},l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Urgency level"),l.a.createElement(ot.a,{bordered:!1,value:s,onChange:function(e){var t;return c(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},zn.map((function(e){return l.a.createElement(Bn,{value:e.id},e.name)})))),l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,Ae),l.a.createElement(ot.a,{bordered:!1,value:i,onChange:function(e){var t;return m(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},Hn.map((function(e){return 2!==i&&3!==i||1!==e.id?l.a.createElement(Bn,{value:e.id},e.name):l.a.createElement(Bn,{value:e.id,disabled:!0},e.name)})))),l.a.createElement("div",{className:"icon-row d-flex align-items-center"},l.a.createElement(S.a,{span:8},l.a.createElement("span",{id:"noteId",className:"icon icon-create",onClick:function(e){return nt()}})),l.a.createElement(S.a,{span:8},l.a.createElement("span",{id:"activityId",className:"icon icon-activity",onClick:function(e){return rt()}})),l.a.createElement(S.a,{span:8},l.a.createElement("span",{id:"assigneId",className:"icon icon-assign",onClick:function(e){return st()}}))),l.a.createElement(S.a,null,l.a.createElement("span",{id:"deleteConversation",className:"icon icon-delete",onClick:function(){return function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={user_hotline_message_id:[r.hotline_id],type:"delete_by_user_id",user_id:parseInt(Yn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Yn.enc.Utf8))};P.a.post(R+"deleteHotlineMessage/",n,a).then((function(){f()}))}()}})),l.a.createElement(S.a,null,l.a.createElement("span",{id:"clearConversation",className:"icon icon-close",onClick:function(e){return function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={user_id:parseInt(Yn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Yn.enc.Utf8))};P.a.post(R+"clearHotlineConversation/",n,a).then((function(){N([])}))}()}}))))),l.a.createElement(w.a,{className:"row-hgt"},l.a.createElement("div",{className:me.noteDivClicked||we.activityDivClicked||xe.assigneDivClicked?Fe?"w-75 d-none":"w-75":"w-100"},l.a.createElement("div",{className:"msg_main"},l.a.createElement(nn.Scrollbars,{autoHeightMax:450,universal:!0},l.a.createElement(S.a,{span:24,className:"msg-history p-4"},_.map((function(e,t){var a,n;return l.a.createElement("div",null,Et===t?l.a.createElement($e.a,{plain:!0},"Last Read"):null,e.message.includes("Urgency Level has been changed to")||e.message.includes("Status has been changed to")?l.a.createElement($e.a,{plain:!0},e.message):null,e.message.includes("Urgency Level has been changed to")||e.message.includes("Status has been changed to")?null:l.a.createElement("div",{className:e.is_responder_message?"outgoing-msg hotline_message mb-3":"incoming-msg hotline_message mb-2"},l.a.createElement("div",{className:e.is_responder_message?"sent-msg":"received-msg"},(null===(a=e.image_url)||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(on.a,{width:100,src:e.image_url,className:"pr-3",placeholder:e.image_name,alt:e.image_name}),e.image_name):(null===(n=e.document_url)||void 0===n?void 0:n.length)>0?l.a.createElement("a",{href:e.document_url,target:"_blank"},"pdf"===e.document_url.substring(e.document_url.length-3)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("img",{src:Rn.a}),e.document_name):l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-doc"}),e.document_name)):null!==e.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Xe()}},e.address),D?l.a.createElement(Tn,{setLocation:ze,viaMessages:!0,viaModal:!0,setShowMap:k,latitude:e.latitude,longitude:e.longitude}):null):l.a.createElement("p",{ellipsis:!0,dangerouslySetInnerHTML:it(e.message)}),l.a.createElement("span",{className:"time-date"}," ",ke()(e.created_on).isSame(ke()(),"day")?ke()(e.created_on).utc().local().format("hh:mm A"):ke()(e.created_on).utc().local().format("MM:DD:YY | hh:mm A "),e.is_responder_message&&" | ".concat(e.first_name," ").concat(e.last_name)))))}))))),l.a.createElement(S.a,{span:24,className:me.noteDivClicked||we.activityDivClicked||xe.assigneDivClicked?"send-msg w-75":"send-msg w-100"},l.a.createElement("div",{className:"type-msg"},l.a.createElement(Fn,{openAttachmentSection:function(){B(!L)},closeAttachmentSection:function(){B(!1)},showAttachmentSection:L,setLocation:ze,handleUploadImage:qe,handleUploadDocument:Ve,handleBeforeUpload:Je,handleOnRemove:Ke,handlePreview:Ge,documentFile:Z,imageFile:ae,message:T,mapLocation:be}),l.a.createElement(lt.a,{className:"input-md w-100",name:"validate-other",form:b},Z.document.length>0?l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:Z.document,onPreview:function(e){return Ge(e)},onRemove:function(){return Ke()},onChange:function(e){return Ve(e)},beforeUpload:function(e){return Je(e)}}):ae.image.length>0?l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:ae.image,onPreview:function(e){return Ge(e)},onRemove:function(){return Ke()},onChange:function(e){return qe(e)},beforeUpload:function(e){return Je(e)}}):""!==be.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Xe()}}),be.address," ",l.a.createElement(dn.a,{onClick:function(){return A(""),void ye({latitude:"",longitude:"",address:""})}})):l.a.createElement(Ln,{className:"input-control",id:"chatArea",name:r.conversation_id,placeholder:"Replying as Hotline representative",onChange:function(e){return function(e){A(e.target.value),q(Object(M.a)({},V,Object(et.a)({},e.target.name,e.target.value)))}(e)},value:T,onKeyDown:function(e){if(e.altKey&&13===e.keyCode||e.ctrlKey&&13===e.keyCode){var t=document.querySelector(".input-control");t.value=t.value+"\r\n"}e.altKey||e.shiftKey||e.ctrlKey||13!==e.keyCode||(e.preventDefault(),Ze())},maxLength:1e4,disabled:3===i})),l.a.createElement("span",{className:"ml-3 send",onClick:function(){return Ze()}},l.a.createElement("img",{src:un.a,alt:"send message"}))))),l.a.createElement("div",{className:"w-25 d-flex justify-content-end width-sm-100"},me.noteDivClicked?l.a.createElement(vn,{class:me.myClass,conversation_id:null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),notesClicked:function(){return nt()}}):null,we.activityDivClicked?l.a.createElement(Nn,{class:we.myClass,conversation_id:null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""),activityClicked:function(){return rt()}}):null,xe.assigneDivClicked?l.a.createElement(jn,{class:xe.myClass,hotline_id:r.hotline_id,assigneClicked:function(){return st()}}):null))))},qn=a(48),Qn=_.a.Search,Gn=function(e){var t=Object(n.useRef)(""),a=function(a){var n=a.trim();t.current=n;var l=e.statusFilterData.map((function(e){return e=e.value})),r=Object(M.a)({},l.length>0&&{status_id:l},{},e.urgencyFilterData.length>0&&{urgency_level_id:e.urgencyFilterData.map((function(e){return e.value}))},{},e.hotlineFilterData.length>0&&{hotline_id:e.hotlineFilterData.map((function(e){return e.value}))}),s=Object(M.a)({},r,{hotline_id:r.hotline_id&&r.hotline_id.toString(),status_id:r.status_id&&r.status_id.toString(),urgency_level_id:r.urgency_level_id&&r.urgency_level_id.toString()}),o=Ce(),i=JSON.parse(v("user")),c={headers:{Authorization:o,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},m=R+"hotlineResponderConversation/?user_id="+parseInt(qn.AES.decrypt(i.user_details.org_user_id,"anonymoose").toString(qn.enc.Utf8)),u=""===n?m+"&filter="+JSON.stringify(s):m+"&filter="+JSON.stringify(s)+"&search="+n.toString();P.a.get(u,c).then((function(a){e.setSearchString(t.current),E("searchBy",t.current);var n=[];n=t.current.length>0?an(a.data,t.current):a.data,e.setConversations(n)}))};return l.a.createElement(Qn,{name:"search",id:"search",placeholder:"Search",onChange:function(e){return a(e.target.value)},onSearch:a,autoComplete:"off"})},Wn=Xa.a.Paragraph,Kn=a(48),Jn=function(e){return l.a.createElement("div",{className:"mid-content p-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:6,className:e.showdiv?"message-section py-4 d-none":"message-section py-4"},l.a.createElement(S.a,{span:24,className:" d-flex justify-content-between px-3"},l.a.createElement("h6",null,"Conversations"," ",l.a.createElement(en.a,{className:"pl-1",count:e.unreadCount})),l.a.createElement(sn,{searchString:e.searchString,removeFilter:e.removeFilter,loadFilteredConversations:e.loadFilteredConversations})),l.a.createElement(S.a,{span:24,className:"mt-4 px-3 d-block"},l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:150,thumbMinSize:30,universal:!0},l.a.createElement(l.a.Fragment,null,e.urgencyFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(tn.a,{visible:!0,key:a,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyLevel",t.value)},className:"mb-2"},"Urgency",": ",l.a.createElement("span",null,t.label)))})),e.hotlineFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(tn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyHotline",t.value)},className:"mb-2",key:a},"Hotline",": ",l.a.createElement("span",null,t.label," ")))})),e.statusFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(tn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyStatus",t.value)},className:"mb-2",key:a},Ae,": ",l.a.createElement("span",null,t.label," ")))}))))),l.a.createElement(S.a,{span:24,className:"search-box mt-3 px-3"},l.a.createElement(lt.a,{form:e.form},l.a.createElement(lt.a.Item,{name:"search",id:"search"},l.a.createElement(Gn,{statusFilterData:e.statusFilterData,urgencyFilterData:e.urgencyFilterData,hotlineFilterData:e.hotlineFilterData,setSearchString:e.setSearchString,setConversations:e.setConversations})))),l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{span:24,className:" inbox-messages"},e.conversations.length>0?e.conversations.map((function(t){var a,n;return l.a.createElement("div",{className:(null===(a=e.conversation.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))?"msg-wrapper active":"msg-wrapper",onClick:function(){return e.onConversationClick(t)}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{ellipsis:!0,style:{fontWeight:"bold"},className:"w-75 pr-2 mb-1",dangerouslySetInnerHTML:e.createMarkup(t.responder_conversation_name)}),l.a.createElement("span",{className:"small"}," ",ke()(t.created_on).isSame(ke()(),"day")?ke()(t.created_on).utc().local().format("hh:mm"):ke()(t.created_on).utc().local().format("MM:DD:YY"))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(Wn,{ellipsis:!0,className:"font-weight-normal mb-1 sm para_wrapper"},l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.hotline_name)}),"\xa0 |\xa0",l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.conversation_id)})),l.a.createElement("span",{className:"small"}," ",l.a.createElement(en.a,{count:t.unread_messages_count}))))})):l.a.createElement("div",{className:"msg-wrapper"},"No messages found")))),e.conversation?l.a.createElement(Vn,{conversation:e.conversation,urgencyLevel:e.urgencyLevel,status:e.status,onChangeUrgencyLevel:function(t,a){var n=Ce(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(Kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Kn.enc.Utf8)),urgency_level_id:t},o={user_id:parseInt(Kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Kn.enc.Utf8)),hotline_id:e.conversation.hotline_id,conversation_id:a,message:"".concat("Urgency Level has been changed to"," ").concat(1===t?"Low":2===t?"Medium":"High"),created_by:parseInt(Kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Kn.enc.Utf8)),address:"",attachment_type:"",latitude:"",longitude:"",attachments:[{name:"",attach:""},{name:"",attach:""}]};P.a.put(R+"hotlineConvoMessagesUrgencyLevel/ ",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setUrgencyLevel(t),P.a.post(R+"receiveHotlineMessage/",o,r).then((function(t){201===t.status&&e.socket.send(JSON.stringify(t.data))})))}))},onChangeStatus:function(t,a){var n=Ce(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(Kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Kn.enc.Utf8)),status_id:t},o={user_id:parseInt(Kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Kn.enc.Utf8)),hotline_id:e.conversation.hotline_id,conversation_id:a,message:"".concat("Status has been changed to"," ").concat(1===t?"New":2===t?"Open":"Closed"),created_by:parseInt(Kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Kn.enc.Utf8)),address:"",attachment_type:"",latitude:"",longitude:"",attachments:[{name:"",attach:""},{name:"",attach:""}]};P.a.put(R+"hotlineConvoMessagesStatus/",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setStatus(t),P.a.post(R+"receiveHotlineMessage/",o,r).then((function(t){201===t.status&&e.socket.send(JSON.stringify(t.data))})))}))},searchString:e.searchString,newState:e.newState,socket:e.socket,setCounter:e.setCounter,"data-test":"Messages",chatdiv:e.chatdiv,handleDeleteConversation:e.handleDeleteConversation}):l.a.createElement(S.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(w.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.NoHotlines,alt:"No Hotlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No Conversation Selected"),l.a.createElement("small",null,"Select a Conversation to view"))))},$n=function(e){return l.a.createElement(S.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(w.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.CreateHotline,alt:"No Hotlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No conversations are initiated for the hotlines assigned to you"))},Zn=function(e){return l.a.createElement(S.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(w.a,{className:"justify-content-center my-3"},l.a.createElement(C.a,{size:"large",tip:"Loading...",spinning:e})))},Xn=a(48),el=function(e,t,a){var n=0,l=e;return e.map((function(a){if((null===a||void 0===a?void 0:a.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===t||void 0===t?void 0:t.conversation_id))return n=e.indexOf(a)})),l.splice(n,1),[a].concat(Object(tt.a)(l))},tl=function(e,t,a,n){for(var l=JSON.parse(v("user")),r=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(Xn.AES.decrypt(l.user_data.user_id,"anonymoose").toString(Xn.enc.Utf8))&&e.conversation_id!==a})),s=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),o=0;o<r.length;o++){var i,c;(null===(i=s[0])||void 0===i?void 0:i.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===(c=r[o])||void 0===c?void 0:c.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))&&0===s[0].unread_messages_count&&n((function(e){return e+1}))}},al=function(e,t,a,n,l,r,s,o,i,c){if(a.length>0||n.length>0||l.length>0||r.length>0)for(var m=JSON.parse(v("user")),u=null===t||void 0===t?void 0:t.filter((function(t){var a;return(null===t||void 0===t?void 0:null===(a=t.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(Xn.AES.decrypt(m.user_data.user_id,"anonymoose").toString(Xn.enc.Utf8))&&(null===e||void 0===e?void 0:e.conversation_id)!==c.conversation_id})),d=null===t||void 0===t?void 0:t.filter((function(t){var a;return(null===t||void 0===t?void 0:null===(a=t.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),p=0;p<u.length;p++){var g,h,f,E,b;if((null===(g=d[0])||void 0===g?void 0:null===(h=g.conversation_id)||void 0===h?void 0:h.toString().replace(/(<([^>]+)>)/gi,""))===(null===(f=u[p])||void 0===f?void 0:null===(E=f.conversation_id)||void 0===E?void 0:E.toString().replace(/(<([^>]+)>)/gi,""))&&0===(null===(b=d[0])||void 0===b?void 0:b.unread_messages_count))s.current||o((function(e){return e+1})),i(t.map((function(t){return t.conversation_id===(null===e||void 0===e?void 0:e.conversation_id)?Object(M.a)({},t,{unread_messages_count:t.unread_messages_count+1}):t})))}},nl=function(e){b("urgencyLevels"),b("status"),b("hotline"===e?"hotline":"openline"),b("searchBy"),b("ConvID")},ll=function(e,t,a,n,l){var r,s,o,i,c,m,u,d="hotline"===l?e.hotline:e.openline,p="hotline"===l?t.hotline_id:t.openline_id,g="hotline"===l?t.hotline_name:t.openline_name,h=[];if((null===(r=e.status)||void 0===r?void 0:r.includes(t.status_id.toString()))&&(null===(s=e.urgency)||void 0===s?void 0:s.includes(t.urgency_level_id.toString()))&&(null===d||void 0===d?void 0:d.includes(p.toString()))&&(null===(o=e.searchBy)||void 0===o?void 0:o.length)>0&&t.conversation_id.toLowerCase().includes(null===(i=e.searchBy)||void 0===i?void 0:i.toLowerCase())||t.responder_conversation_name.toLowerCase().includes(null===(c=e.searchBy)||void 0===c?void 0:c.toLowerCase())||g.toLowerCase().includes(null===(m=e.searchBy)||void 0===m?void 0:m.toLowerCase())||t.message.toLowerCase().includes(null===(u=e.searchBy)||void 0===u?void 0:u.toLowerCase())){var f,E=t.conversation_id.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),v=t.responder_conversation_name.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),b=g.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),y=t.message.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),O="hotline"===l?Object(M.a)({},t,{conversation_id:E,responder_conversation_name:v,message:y,hotline:{name:b,hotline_id:p}}):Object(M.a)({},t,{conversation_id:E,responder_conversation_name:v,message:y,openline:{name:b,openline_id:p}});h=n.includes(null===(f=O.conversation_id)||void 0===f?void 0:f.toString().replace(/(<([^>]+)>)/gi,""))?a:[].concat(Object(tt.a)(a),[O])}else h=a;return h};function rl(e,t,a,n,l,r,s){var o,i,c,m;(n(e),l(t),r(a),E("urgencyLevels",null===(o=Object.values(e))||void 0===o?void 0:o.map((function(e){return e.value}))),"hotline"===s)?E("hotline",null===(c=Object.values(a))||void 0===c?void 0:c.map((function(e){return e.value}))):E("openline",null===(m=Object.values(a))||void 0===m?void 0:m.map((function(e){return e.value})));E("status",null===(i=Object.values(t))||void 0===i?void 0:i.map((function(e){return e.value})))}var sl=function(e){return{__html:e}},ol=N.a.Content,il=a(48),cl=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)([]),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)([]),b=Object(o.a)(f,2),y=b[0],O=b[1],_=Object(n.useState)([]),j=Object(o.a)(_,2),S=j[0],C=j[1],D=Object(n.useState)({}),k=Object(o.a)(D,2),I=k[0],x=k[1],T=Object(n.useState)(""),A=Object(o.a)(T,2),U=A[0],F=A[1],Y=Object(n.useState)(""),L=Object(o.a)(Y,2),B=L[0],H=L[1],z=Object(n.useState)(""),V=Object(o.a)(z,2),q=V[0],Q=V[1],G=Object(n.useState)(""),W=Object(o.a)(G,2),K=W[0],J=W[1],$=Object(n.useState)(null),Z=Object(o.a)($,2),X=Z[0],ee=Z[1],te=Object(n.useState)({}),ae=Object(o.a)(te,2),ne=ae[0],le=ae[1],re=Object(n.useState)(0),se=Object(o.a)(re,2),oe=se[0],ie=se[1],ce=Object(n.useState)([]),me=Object(o.a)(ce,2),de=me[0],pe=me[1],ge=Object(n.useState)(!1),he=Object(o.a)(ge,2),fe=he[0],Ee=he[1],ve=Object(n.useState)(!1),be=Object(o.a)(ve,2),ye=be[0],Oe=be[1],_e=Object(n.useState)(!1),Ne=Object(o.a)(_e,2),je=Ne[0],we=Ne[1],Se=Object(n.useRef)(null),De=Object(n.useRef)(!1),ke=lt.a.useForm(),Ie=Object(o.a)(ke,1)[0],xe=Object(n.useState)(!0),Te=Object(o.a)(xe,2),Ae=Te[0],Ue=Te[1];Object(n.useEffect)((function(){return Pe(),Me(),nl("hotline"),function(){Se.current.close()}}),[]),Object(n.useEffect)((function(){var e=v("searchBy")&&v("searchBy").toString(),t=[],a=[];null===de||void 0===de||de.map((function(e){var a=e.conversation_id,n="";n=(null===a||void 0===a?void 0:a.includes("</mark>"))?null===a||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""):a,t.push(n)})),a=t.includes(null===ne||void 0===ne?void 0:ne.conversation_id)?de:[].concat(Object(tt.a)(de),[ne]),pe(a),al(ne,a,g,S,y,K,De,ie,pe,U),(null===e||void 0===e?void 0:e.length)>0&&De.current&&(De.current=!1)}),[ne,de]);var Me=function(){var e=JSON.parse(v("user"));Se.current=new WebSocket("ws://10.0.6.10:8000/ws/hotlineMessages/"+parseInt(il.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(il.enc.Utf8))+"/"),Se.current.onopen=function(){ee(Se.current),console.log("WEBSOCKET Connected")},Se.current.onmessage=function(e){console.log("WEBSOCKET Event Received!",e);var t=JSON.parse(e.data);if(le(t),Fe(t),t.message.includes("Urgency Level has been changed to")){var a=(l=t.message.split(" "))[l.length-1],n="Low"===a.trim()?1:"Medium"===a.trim()?2:3;H(n)}else if(t.message.includes("Status has been changed to")){var l,r=(l=t.message.split(" "))[l.length-1],s="New"===r.trim()?1:"Open"===r.trim()?2:3;Q(s)}},Se.current.onclose=function(){console.log("WEBSOCKET Closed!")},Se.current.onerror=function(e){console.log("WEBSOCKET Error!",e)}},Fe=function(e){var t=JSON.parse(v("user"));e.accessed_users.includes(parseInt(il.AES.decrypt(t.user_data.user_id,"anonymoose").toString(il.enc.Utf8)))&&s((function(a){var n=v("ConvID")&&v("ConvID"),l=v("urgencyLevels")&&v("urgencyLevels").split(","),r=v("status")&&v("status").split(","),s=v("hotline")&&v("hotline").split(","),o=v("searchBy")&&v("searchBy").toString(),i=[];a.map((function(e){var t=e.conversation_id,a="";a=t.includes("</mark>")?t.toString().replace(/(<([^>]+)>)/gi,""):t,i.push(a)}));var c=e,m=a,u=!1,d=!1,p=!1,g=!1,h=[],f={urgency:"",status:"",hotline:"",searchBy:""};null!==l&&(null===l||void 0===l?void 0:l.length)>0&&(u=!0,f=Object(M.a)({},f,{urgency:l})),null!==r&&(null===r||void 0===r?void 0:r.length)>0&&(d=!0,f=Object(M.a)({},f,{status:r})),null!==s&&(null===s||void 0===s?void 0:s.length)>0&&(p=!0,f=Object(M.a)({},f,{hotline:s})),null!==o&&(null===o||void 0===o?void 0:o.length)>0&&(g=!0,f=Object(M.a)({},f,{searchBy:o})),(u||d||p||g)&&(m=ll(f,e,m,i,"hotline")),g&&(h=[e.conversation_id,e.responder_conversation_name,e.hotline_name,e.message].map((function(e){return e.toLowerCase().includes(o.toLowerCase())}))),g||u||d||p||i.includes(e.conversation_id)||(m=[].concat(Object(tt.a)(m),[e]),De.current=!0);var E=m.map((function(a){return a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by!==parseInt(il.AES.decrypt(t.user_data.user_id,"anonymoose").toString(il.enc.Utf8))&&e.conversation_id!==n?(a.responder_conversation_name.includes("</mark>")&&(c=Object(M.a)({},c,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(c=Object(M.a)({},c,{conversation_id:a.conversation_id})),a.hotline_name.includes("</mark>")&&(c=Object(M.a)({},c,{hotline:{name:a.hotline_name}})),c=Object(M.a)({},c,{unread_messages_count:a.unread_messages_count+1})):a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by===parseInt(il.AES.decrypt(t.user_data.user_id,"anonymoose").toString(il.enc.Utf8))?(a.responder_conversation_name.includes("</mark>")&&(c=Object(M.a)({},c,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(c=Object(M.a)({},c,{conversation_id:a.conversation_id})),a.hotline_name.includes("</mark>")&&(c=Object(M.a)({},c,{hotline:{name:a.hotline_name}})),c):a}));u||d||p||g||tl(e,m,n,ie);return u&&!l.includes(e.urgency_level_id.toString())?E:d&&!r.includes(e.status_id.toString())?E:p&&!s.includes(e.hotline_id.toString())?E:g&&!h.includes(!0)?E:el(E,e,c)}))};var Pe=function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=v("urgencyLevels")&&v("urgencyLevels").split(","),l=v("status")&&v("status").split(","),r=v("hotline")&&v("hotline").split(","),o=Object(M.a)({},n&&n.length>0&&{urgency_level_id:n},{},l&&l.length>0&&{status_id:l},{},r&&r.length>0&&{hotline_id:r}),i=R+"hotlineResponderConversation/?user_id="+parseInt(il.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(il.enc.Utf8)),c=K.length>0&&0===g.length&&0===S.length&&0===y.length?i+"&search="+K:K.length>0&&(g.length>0||S.length>0||y.length>0)?i+"&filter="+JSON.stringify(o)+"&search="+K:0===K.length&&(g.length>0||S.length>0||y.length>0)?i+"&filter="+JSON.stringify(o):"";t&&(c.length>0?P.a.get(c,a).then((function(e){s(e.data)})):P.a.get(i,a).then((function(e){var t=0;u(e.data),s(e.data),Ue(!1),pe(e.data);e.data.reduce((function(e,a,n){0!=a.unread_messages_count&&t++}),[]);ie(t)})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amWEBUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"hotlinemsg"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(sa,{amWEBUser:!0,data:e}),l.a.createElement(ol,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},je?l.a.createElement("span",null,l.a.createElement(Ka.a,{className:"d-inline-flex d-lg-none pr-3 back-arrow ",title:"Back to Messages",onClick:function(){return Ee(!1),Oe(!1),void we(!1)}})):null,"Hotline Messages")),Ae?l.a.createElement(Zn,{loader:Ae}):!Ae&&(null===m||void 0===m?void 0:m.length)>0?l.a.createElement(Jn,{conversation:U,conversations:r,chatdiv:ye,urgencyLevel:B,status:q,searchString:K,newState:ne,socket:X,setCounter:function(e){for(var t=e.data,a=0;a<r.length-1;a++)r[a].conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.data.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")&&(t=Object(M.a)({},t,{unread_messages_count:r[a].unread_messages_count}));t.unread_messages_count&&t.unread_messages_count>0&&oe>0&&ie(oe-1)},NoHotlines:Za.a,createMarkup:sl,setSearchString:J,setConversations:s,onConversationClick:function(e){Ja.isMobile&&(Ee(!0),Oe(!0),we(!0));(s((function(t){return t.map((function(t){return t.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")?Object(M.a)({},e,{unread_messages_count:0}):t}))})),e.unread_messages_count>0&&oe>0)&&ie(oe-1);E("ConvID",e.conversation_id),F(e),H(e.urgency_level_id),Q(e.status_id)},removeFilter:I,removeFilterLevel:function(e,t){x({type:e,value:t})},statusFilterData:S,hotlineFilterData:y,urgencyFilterData:g,loadFilteredConversations:function(e,t,a,n,l){rl(a,n,l,h,C,O,"hotline"),s(e),"reset"===t&&Ie.setFieldsValue({search:""})},getConversations:Pe,setStatus:Q,setUrgencyLevel:H,unreadCount:oe,showdiv:fe,handleDeleteConversation:function(){F(""),Pe()}}):l.a.createElement($n,{CreateHotline:Ta.a}))))))},ml=(a(510),N.a.Sider),ul=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")&&(t="2")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?ge.a:pe.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(ml,{className:this.state.collapsed?" d-lg-block w-md-100 sider-width":"d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(de.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(de.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(c.b,{to:"/amweb/hotlinemessages"},"Hotline Messages")),l.a.createElement(de.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-polls"}))}," ",l.a.createElement(c.b,{to:"/amweb/openlinemessages"},"Openline Messages"))),l.a.createElement("div",{className:"btm-div"},l.a.createElement(c.b,{to:"/orgcc/info",className:"px-2",disabled:!0},Z),l.a.createElement(c.b,{to:"/orgcc/help",className:"px-2",disabled:!0},"Help"))))}}]),t}(l.a.Component),dl=a(597),pl=a.n(dl),gl=a(598),hl=a.n(gl),fl=function(e,t){return e.filter((function(e){return e.conversation_id.toLowerCase().includes(t.toLowerCase())||e.responder_conversation_name.toLowerCase().includes(t.toLowerCase())||e.openline_name.toLowerCase().includes(t.toLowerCase())||e.message.toLowerCase().includes(t.toLowerCase())})).map((function(e){var a=e.conversation_id.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),n=e.responder_conversation_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),l=e.openline_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),r=e.message.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));return Object(M.a)({},e,{conversation_id:a,responder_conversation_name:n,message:r,openline:{name:l,openline_id:e.openline_id}})}))},El=(a(1070),a(48)),vl=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)([]),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)([]),E=Object(o.a)(f,2),b=E[0],y=E[1],O=Object(n.useState)([]),_=Object(o.a)(O,2),N=_[0],j=_[1],C=Object(n.useState)([]),D=Object(o.a)(C,2),k=D[0],I=D[1],x=Object(n.useState)([]),T=Object(o.a)(x,2),A=T[0],U=T[1],F=Object(n.useState)([]),Y=Object(o.a)(F,2),L=Y[0],B=Y[1],H=Object(n.useState)([]),z=Object(o.a)(H,2),V=z[0],q=z[1],Q=Object(n.useState)([]),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=Object(n.useState)([]),$=Object(o.a)(J,2),Z=$[0],X=$[1],ee=Object(n.useState)([]),te=Object(o.a)(ee,2),ne=te[0],le=te[1],re=Object(n.useState)([]),se=Object(o.a)(re,2),oe=se[0],ie=se[1];Object(n.useEffect)((function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getUserAllOpenlines/"+parseInt(El.AES.decrypt(t.user_data.user_id,"anonymoose").toString(El.enc.Utf8)),a).then((function(e){var t=[];e.data.map((function(e){return t.push({label:e.openline.name,value:e.openline.openline_id})})),y(t)}))}),[]),Object(n.useEffect)((function(){void 0===e.removeFilter.type||e.visible||de(!1)}),[m,r,g]),Object(n.useEffect)((function(){if("urgencyLevel"===e.removeFilter.type){var t=Z.filter((function(t){return t.value!==e.removeFilter.value})),a=m.filter((function(t){return t!==e.removeFilter.value}));u(a),X(t)}if("urgencyOpenline"===e.removeFilter.type){var n=ne.filter((function(t){return t.value!==e.removeFilter.value})),l=g.filter((function(t){return t!==e.removeFilter.value}));h(l),le(n)}if("urgencyStatus"===e.removeFilter.type){var o=oe.filter((function(t){return t.value!==e.removeFilter.value})),i=r.filter((function(t){return t!==e.removeFilter.value}));s(i),ie(o)}}),[e.removeFilter]);var ce=[{label:"Low",value:1},{label:"Medium",value:2},{label:"High",value:3}],me=[{label:"New",value:1},{label:"Open",value:2},{label:"Closed",value:3}],ue=b,de=function(t){var a=Object(M.a)({},r.length>0&&{status_id:r},{},m.length>0&&{urgency_level_id:m},{},g.length>0&&{openline_id:g});U(r),j(m),I(g),q(ne),K(oe),B(Z);var n=Ce(),l=JSON.parse(v("user")),s=v("searchBy"),o={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},i=R+"openlineResponderConversation/?user_id="+parseInt(El.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(El.enc.Utf8)),c=Object(M.a)({},a,{openline_id:a.openline_id&&a.openline_id.toString(),status_id:a.status_id&&a.status_id.toString(),urgency_level_id:a.urgency_level_id&&a.urgency_level_id.toString()}),u=""===e.searchString?i+"&filter="+JSON.stringify(c):i+"&filter="+JSON.stringify(c)+"&search="+e.searchString,d=[];P.a.get(u,o).then((function(t){d=(null===s||void 0===s?void 0:s.length)>0?fl(t.data,s):t.data,e.loadFilteredConversations(d,"apply",Z,oe,ne)})),t&&e.hide()};return l.a.createElement("div",null,l.a.createElement(S.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(w.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(S.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(Ne.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return function(){var t=Ce(),a=JSON.parse(v("user")),n=v("searchBy"),l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r=R+"openlineResponderConversation/?user_id="+parseInt(El.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(El.enc.Utf8)),o=[];P.a.get(r,l).then((function(t){o=(null===n||void 0===n?void 0:n.length)>0?fl(t.data,n):t.data,e.loadFilteredConversations(o,"reset",[],[],[]),u([]),X([]),s([]),ie([]),le([]),h([])})),e.hide()}()}},"Reset"))),l.a.createElement($e.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(w.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(S.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Urgency level")),l.a.createElement(S.a,{span:"24"},l.a.createElement(ct.a.Group,{className:"d-flex flex-column flex-gap",name:"urgencyLevel",options:ce,value:m,onChange:function(e){var t=Z;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ce.find((function(t){return t.value===e})))})):t=[],X(t),u(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(S.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,Ae)),l.a.createElement(S.a,{span:"24"},l.a.createElement(ct.a.Group,{className:"d-flex flex-column flex-gap",name:"status",value:r,options:me,onChange:function(e){var t=oe;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(me.find((function(t){return t.value===e})))})):t=[],ie(t),s(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(S.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Openline")),l.a.createElement(S.a,{span:"24"},l.a.createElement(ct.a.Group,{className:"d-flex flex-column flex-gap",name:"openline",options:ue,value:g,onChange:function(e){var t=ne;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ue.find((function(t){return t.value===e})))})):t=[],le(t),h(e)}})))))),l.a.createElement(w.a,null,l.a.createElement(S.a,{span:"24",className:"btn-row actions"},l.a.createElement(Ne.a,{type:"primary",className:"mr-2",onClick:function(){return de(!0)}},"Apply"),l.a.createElement(Ne.a,{type:"secondary",onClick:function(t){u(N),s(A),h(k),X(L),ie(W),le(V),e.hide()}},ae)))))},bl=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:l.a.createElement(vl,{hide:this.hide,searchString:this.props.searchString,removeFilter:this.props.removeFilter,loadFilteredConversations:this.props.loadFilteredConversations,visible:this.state.visible}),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"icon icon-filter"})))}}]),t}(l.a.Component),yl=Xa.a.Paragraph,Ol=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={expand:!1,counter:0,notesData:[],conversationId:""},a.typoExpand=function(){a.setState({expand:!0,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a.typoClose=function(){a.setState({expand:!1,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderParagraph",value:function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:this.state.counter},l.a.createElement("span",{className:"note-user"},ke()(e.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A \u2022")," ",e.first_name," ",e.last_name),l.a.createElement(yl,{ellipsis:{rows:3,expandable:!0,symbol:"Show more",onExpand:this.typoExpand}},e.note_text))}},{key:"render",value:function(){var e=this;return this.props.addedNote.map((function(t){return l.a.createElement("div",{className:"show-less","data-test":"addedNotes"},e.renderParagraph(t),e.state.expand&&l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:e.typoClose},"Show less"))}))}}]),t}(n.Component),_l=(Xa.a.Paragraph,function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onChange=function(e){a.setState({rows:e})},a.state={rows:1,notes:[],conversationId:""},a.getNotes=a.getNotes.bind(Object(V.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({conversationId:this.props.conversation_id}),this.getNotes(this.props.conversation_id)}},{key:"getNotes",value:function(e){var t=this,a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},params:{conversation_id:e}};P.a.get(R+"getNotes/",a).then((function(e){t.setState({notes:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.notes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class,"data-test":"Notes"},l.a.createElement("p",null,l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Notes")),l.a.createElement(Ne.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.notesClicked(t)}}))),l.a.createElement($e.a,{className:"my-2 w-100"}),l.a.createElement(S.a,{span:"24",className:"px-3"},l.a.createElement(hn,{convoId:this.props.conversation_id,getNoteData:this.getNotes}),l.a.createElement(w.a,{className:"added-notes"},l.a.createElement(Ol,{addedNote:t}))))))))}}]),t}(n.Component)),Nl=[{id:5,name:"Updated the Status to"},{id:6,name:"Updated the Urgency level to"},{id:7,name:"Added new Note"},{id:8,name:"View Openline Converations"}],jl=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],wl=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],Sl=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).state={myclass:"",activity:[]},e.divclicked=e.divclicked.bind(Object(V.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAcitivity(this.props.conversation_id)}},{key:"getAcitivity",value:function(e){var t=this,a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getOpenlineConversationActivity/?conversation_id="+e,a).then((function(e){t.setState({activity:e.data})}))}},{key:"mapAuditLog",value:function(e){var t="";return Nl.map((function(a){a.id===e.audit_log_event_id&&(t=a.name,e.status_value&&jl.map((function(a){e.status_value==a.id&&(t=t+" <b>"+a.name+"</b>")})),e.urgency_level_value&&wl.map((function(a){e.urgency_level_value==a.id&&(t=t+" <b>"+a.name+"</b>")})))})),t}},{key:"render",value:function(){var e=this,t=this.state.activity;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Activity")),l.a.createElement(Ne.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.activityClicked(t)}}))),l.a.createElement($e.a,{className:"my-2 w-100"}),l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{span:"24",className:"px-3 pt-2"},l.a.createElement(bn.a,null,t.map((function(t){return l.a.createElement(bn.a.Item,null,l.a.createElement("span",{className:"note-user"},ke()(t.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A\u2022")," ",t.name),l.a.createElement("br",null),ha()(e.mapAuditLog(t)))}))))))))))}}]),t}(n.Component),Cl=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).state={myclass:"",assigneEmp:[]},e.divclicked=e.divclicked.bind(Object(V.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAssigne(this.props.openline_id)}},{key:"getAssigne",value:function(e){var t=this,a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getOpenlineAssignEmpl/"+e,a).then((function(e){var a=[];e.data.map((function(e){var t=e.user.first_name+" "+e.user.last_name;return a.push({"Assigned User_name":t}),a})),t.setState({assigneEmp:a})}))}},{key:"render",value:function(){var e=this,t=this.state.assigneEmp;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(S.a,{span:"12"},l.a.createElement("h6",null,"Assigned To")),l.a.createElement(Ne.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.assigneClicked(t)}}))),l.a.createElement($e.a,{className:"my-2 w-100"}),l.a.createElement(S.a,{span:"24",className:"px-3 pt-2 assignees d-flex flex-column flex-gap"},t.map((function(e){return l.a.createElement(tn.a,null,e["Assigned User_name"])}))))))))}}]),t}(n.Component),Dl=_.a.TextArea,kl=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],Il=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],xl=a(48),Tl=function(e){var t,a,r=e.conversation,s=e.urgencyLevel,i=e.status,c=e.onChangeUrgencyLevel,m=e.onChangeStatus,u=e.searchString,d=e.newState,p=e.setCounter,g=e.socket,h=e.chatdiv,f=e.handleDeleteConversation,E=lt.a.useForm(),b=Object(o.a)(E,1)[0],y=Object(n.useState)([]),O=Object(o.a)(y,2),_=O[0],N=O[1],j=Object(n.useState)(!1),C=Object(o.a)(j,2),D=C[0],k=C[1],I=Object(n.useState)(""),x=Object(o.a)(I,2),T=x[0],A=x[1],F=Object(n.useState)({}),Y=Object(o.a)(F,2),L=Y[0],B=Y[1],H=Object(n.useState)(!1),z=Object(o.a)(H,2),V=z[0],q=z[1],Q=Object(n.useState)({latitude:"",longitude:"",address:""}),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=Object(n.useState)(!1),$=Object(o.a)(J,2),Z=$[0],X=$[1],ee=Object(n.useState)({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),re=Object(o.a)(le,2),se=re[0],oe=re[1],ie=Object(n.useState)(""),ce=Object(o.a)(ie,2),me=ce[0],ue=ce[1],de=Object(n.useState)(!0),pe=Object(o.a)(de,2),ge=(pe[0],pe[1]),he=Object(n.useState)(!1),fe=Object(o.a)(he,2),Ee=(fe[0],fe[1],Object(n.useState)("")),ve=Object(o.a)(Ee,2),be=(ve[0],ve[1],Object(n.useState)({noteDivClicked:!1,myClass:""})),ye=Object(o.a)(be,2),Oe=ye[0],_e=ye[1],Ne=Object(n.useState)({activityDivClicked:!1,myClass:""}),je=Object(o.a)(Ne,2),we=je[0],Se=je[1],De=Object(n.useState)({assigneDivClicked:!1,myClass:""}),Ie=Object(o.a)(De,2),xe=Ie[0],Te=Ie[1],Ue=Object(n.useState)(!1),Me=Object(o.a)(Ue,2),Fe=Me[0],Pe=Me[1],Re=Object(n.useState)(""),Ye=Object(o.a)(Re,2),Le=Ye[0],Be=Ye[1];Object(n.useEffect)((function(){Be(u)}),[u,r.conversation_id]),Object(n.useEffect)((function(){Je(),at();var e=document.getElementById("activityId"),t=document.getElementById("noteId"),a=document.getElementById("assigneId");""!=xe.myClass&&(Te({myClass:"",assigneDivClicked:!1}),a.classList.remove("selected")),""!=Oe.myClass&&(_e({myClass:"",noteDivClicked:!1}),t.classList.remove("selected")),""!=we.myClass&&(Se({myClass:"",activityDivClicked:!1}),e.classList.remove("selected"))}),[r.conversation_id,d]),Object(n.useEffect)((function(){if(_.length>0)if(Le.length>1){var e=0;_.map((function(t){return t.message.includes("</mark>")&&(e+=1),e}));var t=document.getElementsByTagName("mark")[e-1];t&&t.scrollIntoView(!1,{block:"end"})}else{var a=document.getElementsByClassName("openline_message")[document.getElementsByClassName("openline_message").length-1];a&&a.scrollIntoView(!1,{block:"end"})}}),[_,u]),Object(n.useEffect)((function(){var e=void 0!==L[r.conversation_id]?L[r.conversation_id]:"";A(e)}),[r.conversation_id]);var He=function(e,t,a){var n={latitude:e,longitude:t,address:a};A("$$$L#o#c#a#t#i#o#n$$$"),K(n)},ze=function(e){"removed"===e.file.status&&ge(!0);var t=e.fileList.slice(-5);qe(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),ue(e.file.name),"removed"!==e.file.status&&A("$$$D#o#c#u#m#e#n#t$$$"),0===t.length&&A(""),ne(Object(M.a)({},ae,{document:t}))},Ve=function(e){"removed"===e.file.status&&ge(!0);var t=e.fileList.slice(-5);qe(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),ue(e.file.name),"removed"!==e.file.status&&A("$$$I#m#a#g#e$$$"),0===t.length&&A(""),oe(Object(M.a)({},se,{image:t}))},qe=function(e){var t=e.includes("image");X(!!t)},Qe=function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.awrap(Ge(e.originFileObj));case 2:e.preview=t.sent,Z?oe(Object(M.a)({},se,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})):ne(Object(M.a)({},ae,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},Ge=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},We=function(){Z?oe(Object(M.a)({},se,{imageValidation:!0})):ne(Object(M.a)({},ae,{documentValidation:!0}))},Ke=function(e){var t=e.name.includes(".xls"),a=e.name.includes(".pptx"),n=e.name.includes(".doc"),l=e.name.includes(".csv"),r="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||t||a||n||l;r?ge(!0):(ge(!1),T.error("".concat(e.name," is not a supported format file type.")));var s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,o="application/pdf"===e.type||t||a||n||l,i=e.size/1024/1024<5,c=e.size/1024/1024<10;return s&&(!i&&s?(ge(!1),T.error("Image must smaller than 5MB!")):ge(!0)),o&&(!c&&o?(ge(!1),T.error("Document must smaller than 10MB!")):ge(!0)),r&&i||c},Je=function(){var e,t,a,n,l,s;return U.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n="",n=r.conversation_id.includes("<mark")?null===(l=r.conversation_id)||void 0===l?void 0:l.toString().replace(/(<([^>]+)>)/gi,""):r.conversation_id,s={conversation_id:n,user_id:parseInt(xl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(xl.enc.Utf8))},P.a.post(R+"openlineConvoMessages/",s,a).then((function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:N(e.data);case 1:case"end":return t.stop()}}))}));case 7:case"end":return o.stop()}}))},Ze=function(){var e=Ce(),t=JSON.parse(v("user"));if(T){var a,n,l,s,o,i={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},c="";if(r.conversation_id.includes("<mark"))c=null===(o=r.conversation_id)||void 0===o?void 0:o.toString().replace(/(<([^>]+)>)/gi,"");else c=r.conversation_id;var u,d=[],h={};if((null===(a=ae.document)||void 0===a?void 0:a.length)>0)null===(u=ae.document)||void 0===u||u.map((function(e){h={name:me,attach:e.base64},d.push(h)}));else if((null===(n=se.image)||void 0===n?void 0:n.length)>0){var f;null===(f=se.image)||void 0===f||f.map((function(e){h={name:me,attach:e.base64},d.push(h)}))}else d.push({name:"",attach:""},{name:"",attach:""});var E={user_id:parseInt(xl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(xl.enc.Utf8)),openline_id:r.openline_id,conversation_id:c,message:T,created_by:parseInt(xl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(xl.enc.Utf8)),attachment_type:(null===(l=ae.document)||void 0===l?void 0:l.length)>0?"document":(null===(s=se.image)||void 0===s?void 0:s.length)>0?"image":""!==W.latitude?"location":"",latitude:W.latitude,longitude:W.longitude,address:W.address,attachments:d};P.a.post(R+"receiveOpenlineMessage/",E,i).then((function(e){201===e.status&&(1!==e.data.status_id&&3!==e.data.status_id||m(2,c),(ae.document.length>0||se.image.length>0||""!==W.latitude)&&(ne({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),oe({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),K({latitude:"",longitude:"",address:""})),Be(""),p(e),A(""),B(Object(M.a)({},L,Object(et.a)({},c,""))),g.send(JSON.stringify(e.data)))}))}b.setFieldsValue({chatArea:""})},Xe=function(){q(!0)},at=function(){N((function(e){var t,a,n=[];if(e&&e.length&&(null===(t=d.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=e[0].conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))){var l=e.filter((function(e){var t,a;return(null===(t=e.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=d.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))}));n=[].concat(Object(tt.a)(l),[d])}else n=Object(tt.a)(e);return n}))},nt=function(e){var t=document.getElementById("noteId");Ja.isMobile&&Pe(!0),""!=we.myClass&&Se({myClass:"",activityDivClicked:!1}),""!=xe.myClass&&Te({myClass:"",assigneDivClicked:!1}),""===Oe.myClass?(t.classList.add("selected"),_e({myClass:"rgt-panel",noteDivClicked:!0})):(t.classList.remove("selected"),_e({myClass:"",noteDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},rt=function(e){var t=document.getElementById("activityId");Ja.isMobile&&Pe(!0),""!=Oe.myClass&&_e({myClass:"",noteDivClicked:!1}),""!=xe.myClass&&Te({myClass:"",assigneDivClicked:!1}),""===we.myClass?(t.classList.add("selected"),Se({myClass:"rgt-panel",activityDivClicked:!0})):(t.classList.remove("selected"),Se({myClass:"",activityDivClicked:!1})),document.getElementById("noteId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},st=function(e){var t=document.getElementById("assigneId");Ja.isMobile&&Pe(!0),""!=Oe.myClass&&_e({myClass:"",noteDivClicked:!1}),""!=we.myClass&&Se({myClass:"",activityDivClicked:!1}),""===xe.myClass?(t.classList.add("selected"),Te({myClass:"rgt-panel",assigneDivClicked:!0})):(t.classList.remove("selected"),Te({myClass:"",assigneDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("noteId").classList.remove("selected")},it=function(e){return{__html:e}};if(u){var ct,mt,ut,dt,pt;if(r.responder_conversation_name.includes("</mark>"))r.responder_conversation_name=null===(mt=r.responder_conversation_name)||void 0===mt?void 0:mt.toString().replace(/(<([^>]+)>)/gi,""),r.responder_conversation_name=r.responder_conversation_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(r.openline_name.includes("</mark>"))r.openline_name=null===(ut=r.openline_name)||void 0===ut?void 0:ut.toString().replace(/(<([^>]+)>)/gi,""),r.openline_name=r.openline_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(null===(ct=r.conversation_id)||void 0===ct?void 0:ct.toString().includes("</mark>"))r.conversation_id=null===(dt=r.conversation_id)||void 0===dt?void 0:dt.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(pt=r.conversation_id)||void 0===pt?void 0:pt.toString().replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));_.map((function(e){var t;e.message.includes("</mark>")?(e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}))):(e.message=e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})));return Object(M.a)({},e,{message:e.message})}))}else{var gt,ht,ft;r.responder_conversation_name=null===(gt=r.responder_conversation_name)||void 0===gt?void 0:gt.toString().replace(/(<([^>]+)>)/gi,""),r.openline_name=null===(ht=r.openline_name)||void 0===ht?void 0:ht.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(ft=r.conversation_id)||void 0===ft?void 0:ft.toString().replace(/(<([^>]+)>)/gi,""),_.map((function(e){var t;return e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(?:\r\n|\r|\n)/g,"<br />"),Object(M.a)({},e,{message:e.message})}))}var Et=_.length-r.unread_messages_count;return l.a.createElement(S.a,{span:24,lg:18,className:h?"chat-section d-lg-flex":"chat-section d-lg-flex d-none","data-test":"messages"},l.a.createElement(S.a,{span:24,className:"h-100"},l.a.createElement(w.a,{className:"top-filter-pan p-2 p-lg-4 d-flex align-items-center"},l.a.createElement(S.a,{span:24,lg:10},l.a.createElement("div",{className:""},l.a.createElement("h6",{dangerouslySetInnerHTML:it(r.responder_conversation_name)}),l.a.createElement("p",{style:{margin:0,display:"inline",float:"left"},dangerouslySetInnerHTML:it(r.openline_name)}),"\xa0|\xa0",l.a.createElement("p",{style:{margin:0,display:"inline",float:"center"},dangerouslySetInnerHTML:it(r.conversation_id)}))),l.a.createElement(S.a,{span:24,lg:14},l.a.createElement("div",{className:"d-flex justify-content-end pt-3 pt-sm-1 pt-md-0"},l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Urgency level"),l.a.createElement(ot.a,{bordered:!1,value:s,onChange:function(e){var t;return c(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},Il.map((function(e){return l.a.createElement(Option,{value:e.id},e.name)})))),l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,Ae),l.a.createElement(ot.a,{bordered:!1,value:i,onChange:function(e){var t;return m(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},kl.map((function(e){return 2!==i&&3!==i||1!==e.id?l.a.createElement(Option,{value:e.id},e.name):l.a.createElement(Option,{value:e.id,disabled:!0},e.name)})))),l.a.createElement("div",{className:"icon-row d-flex align-items-center"},l.a.createElement(S.a,{span:24,md:8},l.a.createElement("span",{id:"noteId",className:"icon icon-create",onClick:function(e){return nt()}})),l.a.createElement(S.a,{span:24,md:8},l.a.createElement("span",{id:"activityId",className:"icon icon-activity",onClick:function(e){return rt()}})),l.a.createElement(S.a,{span:24,md:8},l.a.createElement("span",{id:"assigneId",className:"icon icon-assign",onClick:function(e){return st()}}))),l.a.createElement(S.a,null,l.a.createElement("span",{id:"deleteConversation",className:"icon icon-delete",onClick:function(){return function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={user_hotline_message_id:[r.hotline_id],type:"delete_by_user_id",user_id:parseInt(xl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(xl.enc.Utf8))};P.a.post(R+"deleteOpenlineMessage/",n,a).then((function(){f()}))}()}})),l.a.createElement(S.a,null,l.a.createElement("span",{id:"clearConversation",className:"icon icon-close",onClick:function(e){return function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={user_id:parseInt(xl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(xl.enc.Utf8))};P.a.post(R+"clearOpenlineConversation/",n,a).then((function(){N([])}))}()}}))))),l.a.createElement(w.a,{className:"row-hgt"},l.a.createElement("div",{className:Oe.noteDivClicked||we.activityDivClicked||xe.assigneDivClicked?Fe?"w-75 d-none":"w-75":"w-100"},l.a.createElement("div",{className:"msg_main"},l.a.createElement(nn.Scrollbars,{autoHeightMax:450,universal:!0},l.a.createElement(S.a,{span:24,className:"msg-history p-4"},_.map((function(e,t){var a,n;return l.a.createElement("div",null,Et===t?l.a.createElement($e.a,{plain:!0},"Last Read"):null,l.a.createElement("div",{className:e.is_responder_message?"outgoing-msg openline_message mb-3":"incoming-msg openline_message mb-2"},l.a.createElement("div",{className:e.is_responder_message?"sent-msg":"received-msg"},(null===(a=e.image_url)||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(on.a,{width:100,src:e.image_url,className:"pr-3",placeholder:e.image_name,alt:e.image_name}),e.image_name," "):(null===(n=e.document_url)||void 0===n?void 0:n.length)>0?l.a.createElement("a",{href:e.document_url,target:"_blank"},"pdf"===e.document_url.substring(e.document_url.length-3)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("img",{src:Rn.a}),e.document_name):l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-doc"}),e.document_name)):null!==e.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Xe()}},e.address),V?l.a.createElement(Tn,{setLocation:He,viaMessages:!0,viaModal:!0,setShowMap:q,latitude:e.latitude,longitude:e.longitude}):null):l.a.createElement("p",{ellipsis:!0,dangerouslySetInnerHTML:it(e.message)}),l.a.createElement("span",{className:"time-date"}," ",ke()(e.created_on).isSame(ke()(),"day")?ke()(e.created_on).utc().local().format("hh:mm A"):ke()(e.created_on).utc().local().format("MM:DD:YY | hh:mm A "),e.is_responder_message&&" | ".concat(e.first_name," ").concat(e.last_name)))))}))))),l.a.createElement(S.a,{span:24,className:Oe.noteDivClicked||we.activityDivClicked||xe.assigneDivClicked?"send-msg w-75":"send-msg w-100"},l.a.createElement("div",{className:"type-msg"},l.a.createElement(Fn,{openAttachmentSection:function(){k(!D)},closeAttachmentSection:function(){k(!1)},showAttachmentSection:D,setLocation:He,handleUploadImage:Ve,handleUploadDocument:ze,handleBeforeUpload:Ke,handleOnRemove:We,handlePreview:Qe,documentFile:ae,imageFile:se,message:T,mapLocation:W}),l.a.createElement(lt.a,{className:"input-md w-100",name:"validate-other",form:b},ae.document.length>0?l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:ae.document,onPreview:function(e){return Qe(e)},onRemove:function(){return We()},onChange:function(e){return ze(e)},beforeUpload:function(e){return Ke(e)}}):se.image.length>0?l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:se.image,onPreview:function(e){return Qe(e)},onRemove:function(){return We()},onChange:function(e){return Ve(e)},beforeUpload:function(e){return Ke(e)}}):""!==W.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Xe()}}),W.address," ",l.a.createElement(dn.a,{onClick:function(){return A(""),void K({latitude:"",longitude:"",address:""})}})):l.a.createElement(Dl,{className:"input-control",id:"chatArea",placeholder:"Replying as Hotline representative",onChange:function(e){return function(e){A(e.target.value),B(Object(M.a)({},L,Object(et.a)({},e.target.name,e.target.value)))}(e)},value:T,onKeyDown:function(e){if(e.altKey&&13===e.keyCode||e.ctrlKey&&13===e.keyCode){var t=document.querySelector(".input-control");t.value=t.value+"\r\n"}e.altKey||e.shiftKey||e.ctrlKey||13!==e.keyCode||(e.preventDefault(),Ze())},maxLength:1e4,disabled:3===i})),l.a.createElement("span",{className:"ml-3 send",onClick:function(){return Ze()}},l.a.createElement("img",{src:un.a,alt:"send message"}))))),l.a.createElement("div",{className:"w-25 d-flex justify-content-end width-sm-100"},Oe.noteDivClicked?l.a.createElement(_l,{class:Oe.myClass,conversation_id:null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),notesClicked:function(){return nt()}}):null,we.activityDivClicked?l.a.createElement(Sl,{class:we.myClass,conversation_id:null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""),activityClicked:function(){return rt()}}):null,xe.assigneDivClicked?l.a.createElement(Cl,{class:xe.myClass,openline_id:r.openline_id,assigneClicked:function(){return st()}}):null))))},Al=a(48),Ul=_.a.Search,Ml=function(e){var t=Object(n.useRef)(""),a=function(a){var n=a.trim();t.current=n;var l=e.statusFilterData.map((function(e){return e=e.value})),r=Object(M.a)({},l.length>0&&{status_id:l},{},e.urgencyFilterData.length>0&&{urgency_level_id:e.urgencyFilterData.map((function(e){return e.value}))},{},e.openlineFilterData.length>0&&{openline_id:e.openlineFilterData.map((function(e){return e.value}))}),s=Object(M.a)({},r,{openline_id:r.openline_id&&r.openline_id.toString(),status_id:r.status_id&&r.status_id.toString(),urgency_level_id:r.urgency_level_id&&r.urgency_level_id.toString()}),o=Ce(),i=JSON.parse(v("user")),c={headers:{Authorization:o,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},m=R+"openlineResponderConversation/?user_id="+parseInt(Al.AES.decrypt(i.user_details.org_user_id,"anonymoose").toString(Al.enc.Utf8)),u=""===n?m+"&filter="+JSON.stringify(s):m+"&filter="+JSON.stringify(s)+"&search="+n.toString();P.a.get(u,c).then((function(a){e.setSearchString(t.current),E("searchBy",t.current);var n=[];n=t.current.length>0?fl(a.data,t.current):a.data,e.setConversations(n)}))};return l.a.createElement(Ul,{name:"search",id:"search",placeholder:"Search",onChange:function(e){return a(e.target.value)},onSearch:a,autoComplete:"off"})},Fl=Xa.a.Paragraph,Pl=a(48),Rl=function(e){return l.a.createElement("div",{className:"mid-content p-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:6,className:e.showdiv?"message-section py-4 d-none":"message-section py-4"},l.a.createElement(S.a,{span:24,className:" d-flex justify-content-between px-3"},l.a.createElement("h6",null,"Conversations"," ",l.a.createElement(en.a,{className:"pl-1",count:e.unreadCount})),l.a.createElement(bl,{searchString:e.searchString,removeFilter:e.removeFilter,loadFilteredConversations:e.loadFilteredConversations})),l.a.createElement(S.a,{span:24,className:"mt-4 px-3 d-block"},l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:150,thumbMinSize:30,universal:!0},l.a.createElement(l.a.Fragment,null,e.urgencyFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(tn.a,{visible:!0,key:a,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyLevel",t.value)},className:"mb-2"},"Urgency",": ",l.a.createElement("span",null,t.label)))})),e.openlineFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(tn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyOpenline",t.value)},className:"mb-2",key:a},"Openline",": ",l.a.createElement("span",null,t.label," ")))})),e.statusFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(tn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyStatus",t.value)},className:"mb-2",key:a},Ae,": ",l.a.createElement("span",null,t.label," ")))}))))),l.a.createElement(S.a,{span:24,className:"search-box mt-3 px-3"},l.a.createElement(lt.a,{form:e.form},l.a.createElement(lt.a.Item,{name:"search",id:"search"},l.a.createElement(Ml,{statusFilterData:e.statusFilterData,urgencyFilterData:e.urgencyFilterData,openlineFilterData:e.openlineFilterData,setSearchString:e.setSearchString,setConversations:e.setConversations})))),l.a.createElement(nn.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{span:24,className:" inbox-messages"},e.conversations.length>0?e.conversations.map((function(t){var a,n;return l.a.createElement("div",{className:(null===(a=e.conversation.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))?"msg-wrapper active":"msg-wrapper",onClick:function(){return e.onConversationClick(t)}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{ellipsis:!0,style:{fontWeight:"bold"},className:"w-75 pr-2 mb-1",dangerouslySetInnerHTML:e.createMarkup(t.responder_conversation_name)}),l.a.createElement("span",{className:"small"}," ",ke()(t.created_on).isSame(ke()(),"day")?ke()(t.created_on).utc().local().format("hh:mm"):ke()(t.created_on).utc().local().format("MM:DD:YY"))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(Fl,{ellipsis:!0,className:"font-weight-normal mb-1 sm para_wrapper"},l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.openline_name)}),"\xa0 |\xa0",l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.conversation_id)})),l.a.createElement("span",{className:"small"}," ",l.a.createElement(en.a,{count:t.unread_messages_count}))))})):l.a.createElement("div",{className:"msg-wrapper"},"No messages found")))),e.conversation?l.a.createElement(Tl,{conversation:e.conversation,urgencyLevel:e.urgencyLevel,status:e.status,onChangeUrgencyLevel:function(t,a){var n=Ce(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(Pl.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Pl.enc.Utf8)),urgency_level_id:t};P.a.put(R+"openlineConvoMessagesUrgencyLevel/ ",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setUrgencyLevel(t))}))},onChangeStatus:function(t,a){var n=Ce(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(Pl.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Pl.enc.Utf8)),status_id:t};P.a.put(R+"openlineConvoMessagesStatus/",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setStatus(t))}))},searchString:e.searchString,newState:e.newState,socket:e.socket,setCounter:e.setCounter,"data-test":"Messages",chatdiv:e.chatdiv,handleDeleteConversation:e.handleDeleteConversation}):l.a.createElement(S.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(w.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.NoOpenlines,alt:"No Openlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No Conversation Selected"),l.a.createElement("small",null,"Select a Conversation to view"))))},Yl=function(e){return l.a.createElement(S.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(w.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.CreateOpenline,alt:"No Openlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No conversations are initiated for the openlines assigned to you"))},Ll=N.a.Content,Bl=a(48),Hl=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)(!0),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)([]),b=Object(o.a)(f,2),y=b[0],O=b[1],_=Object(n.useState)([]),j=Object(o.a)(_,2),D=j[0],k=j[1],I=Object(n.useState)([]),x=Object(o.a)(I,2),T=x[0],A=x[1],U=Object(n.useState)({}),F=Object(o.a)(U,2),Y=F[0],L=F[1],B=Object(n.useState)(""),H=Object(o.a)(B,2),z=H[0],V=H[1],q=Object(n.useState)(""),Q=Object(o.a)(q,2),G=Q[0],W=Q[1],K=Object(n.useState)(""),J=Object(o.a)(K,2),$=J[0],Z=J[1],X=Object(n.useState)(""),ee=Object(o.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(null),le=Object(o.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)({}),ie=Object(o.a)(oe,2),ce=ie[0],me=ie[1],de=Object(n.useState)(0),pe=Object(o.a)(de,2),ge=pe[0],he=pe[1],fe=Object(n.useState)([]),Ee=Object(o.a)(fe,2),ve=Ee[0],be=Ee[1],ye=Object(n.useState)(!1),Oe=Object(o.a)(ye,2),_e=Oe[0],Ne=Oe[1],je=Object(n.useState)(!1),we=Object(o.a)(je,2),Se=we[0],De=we[1],ke=Object(n.useRef)(null),Ie=Object(n.useRef)(!1),xe=lt.a.useForm(),Te=Object(o.a)(xe,1)[0];Object(n.useEffect)((function(){return Me(),Ae(),nl("openline"),function(){ke.current.close()}}),[]),Object(n.useEffect)((function(){var e=v("searchBy")&&v("searchBy").toString(),t=[],a=[];null===ve||void 0===ve||ve.map((function(e){var a=e.conversation_id,n="";n=(null===a||void 0===a?void 0:a.includes("</mark>"))?null===a||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""):a,t.push(n)})),a=t.includes(null===ce||void 0===ce?void 0:ce.conversation_id)?ve:[].concat(Object(tt.a)(ve),[ce]),be(a),al(ce,a,y,T,D,te,Ie,he,be,z),(null===e||void 0===e?void 0:e.length)>0&&Ie.current&&(Ie.current=!1)}),[ce,ve]);var Ae=function(){var e=JSON.parse(v("user"));ke.current=new WebSocket("ws://10.0.6.10:8000/ws/openlineMessages/"+parseInt(Bl.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(Bl.enc.Utf8))+"/"),ke.current.onopen=function(){se(ke.current),console.log("WEBSOCKET Connected")},ke.current.onmessage=function(e){console.log("WEBSOCKET Event Received!",e);var t=JSON.parse(e.data);me(t),Ue(t)},ke.current.onclose=function(){console.log("WEBSOCKET Closed!")},ke.current.onerror=function(e){console.log("WEBSOCKET Error!",e)}},Ue=function(e){var t=JSON.parse(v("user"));e.accessed_users.includes(parseInt(Bl.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Bl.enc.Utf8)))&&s((function(a){var n=v("ConvID")&&v("ConvID"),l=v("urgencyLevels")&&v("urgencyLevels").split(","),r=v("status")&&v("status").split(","),s=v("openline")&&v("openline").split(","),o=v("searchBy")&&v("searchBy").toString(),i=[];a.map((function(e){var t=e.conversation_id,a="";a=t.includes("</mark>")?t.toString().replace(/(<([^>]+)>)/gi,""):t,i.push(a)}));var c=e,m=a,u=!1,d=!1,p=!1,g=!1,h=[],f={urgency:"",status:"",openline:"",searchBy:""};null!==l&&(null===l||void 0===l?void 0:l.length)>0&&(u=!0,f=Object(M.a)({},f,{urgency:l})),null!==r&&(null===r||void 0===r?void 0:r.length)>0&&(d=!0,f=Object(M.a)({},f,{status:r})),null!==s&&(null===s||void 0===s?void 0:s.length)>0&&(p=!0,f=Object(M.a)({},f,{openline:s})),null!==o&&(null===o||void 0===o?void 0:o.length)>0&&(g=!0,f=Object(M.a)({},f,{searchBy:o})),(u||d||p||g)&&(m=ll(f,e,m,i,"openline")),g&&(h=[e.conversation_id,e.responder_conversation_name,e.openline_name,e.message].map((function(e){return e.toLowerCase().includes(o.toLowerCase())}))),g||u||d||p||i.includes(e.conversation_id)||(m=[].concat(Object(tt.a)(m),[e]),Ie.current=!0);var E=m.map((function(a){return a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by!==parseInt(Bl.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Bl.enc.Utf8))&&e.conversation_id!==n?(a.responder_conversation_name.includes("</mark>")&&(c=Object(M.a)({},c,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(c=Object(M.a)({},c,{conversation_id:a.conversation_id})),a.openline_name.includes("</mark>")&&(c=Object(M.a)({},c,{openline:{name:a.openline_name}})),c=Object(M.a)({},c,{unread_messages_count:a.unread_messages_count+1})):a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by===parseInt(Bl.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Bl.enc.Utf8))?(a.responder_conversation_name.includes("</mark>")&&(c=Object(M.a)({},c,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(c=Object(M.a)({},c,{conversation_id:a.conversation_id})),a.openline_name.includes("</mark>")&&(c=Object(M.a)({},c,{openline:{name:a.openline_name}})),c):a}));u||d||p||g||tl(e,m,n,he);return u&&!l.includes(e.urgency_level_id.toString())?E:d&&!r.includes(e.status_id.toString())?E:p&&!s.includes(e.openline_id.toString())?E:g&&!h.includes(!0)?E:el(E,e,c)}))};var Me=function(){var e=Ce(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=v("urgencyLevels")&&v("urgencyLevels").split(","),l=v("status")&&v("status").split(","),r=v("openline")&&v("openline").split(","),o=Object(M.a)({},n&&n.length>0&&{urgency_level_id:n},{},l&&l.length>0&&{status_id:l},{},r&&r.length>0&&{openline_id:r}),i=R+"openlineResponderConversation/?user_id="+parseInt(Bl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Bl.enc.Utf8)),c=te.length>0&&0===y.length&&0===T.length&&0===D.length?i+"&search="+te:te.length>0&&(y.length>0||T.length>0||D.length>0)?i+"&filter="+JSON.stringify(o)+"&search="+te:0===te.length&&(y.length>0||T.length>0||D.length>0)?i+"&filter="+JSON.stringify(o):"";t&&(c.length>0?P.a.get(c,a).then((function(e){s(e.data)})):P.a.get(i,a).then((function(e){var t=0;u(e.data),s(e.data),h(!1),be(e.data);e.data.reduce((function(e,a,n){0!=a.unread_messages_count&&t++}),[]);he(t)})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amWEBUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"openlinemsg"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ul,{amWEBUser:!0,data:e}),l.a.createElement(Ll,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},l.a.createElement("span",null,l.a.createElement(Ka.a,{className:"d-inline-flex d-lg-none pr-3 back-arrow ",title:"Back to Messages",onClick:function(){return Ne(!1),void De(!1)}})),"Openline Messages")),g?l.a.createElement(S.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(w.a,{className:"justify-content-center my-3"},l.a.createElement(C.a,{size:"large",tip:"Loading...",spinning:g}))):!g&&(null===m||void 0===m?void 0:m.length)>0?l.a.createElement(Rl,{conversation:z,conversations:r,chatdiv:Se,urgencyLevel:G,status:$,searchString:te,newState:ce,socket:re,setCounter:function(e){for(var t=e.data,a=0;a<r.length-1;a++)r[a].conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.data.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")&&(t=Object(M.a)({},t,{unread_messages_count:r[a].unread_messages_count}));t.unread_messages_count&&t.unread_messages_count>0&&ge>0&&he(ge-1)},NoOpenlines:pl.a,createMarkup:sl,setSearchString:ae,setConversations:s,onConversationClick:function(e){Ja.isMobile&&(Ne(!0),De(!0));(s((function(t){return t.map((function(t){return t.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")?Object(M.a)({},e,{unread_messages_count:0}):t}))})),e.unread_messages_count>0&&ge>0)&&he(ge-1);E("ConvID",e.conversation_id),V(e),W(e.urgency_level_id),Z(e.status_id)},removeFilter:Y,removeFilterLevel:function(e,t){L({type:e,value:t})},statusFilterData:T,openlineFilterData:D,urgencyFilterData:y,loadFilteredConversations:function(e,t,a,n,l){rl(a,n,l,O,A,k,"openline"),s(e),"reset"===t&&Te.setFieldsValue({search:""})},getConversations:Me,setStatus:Z,setUrgencyLevel:W,unreadCount:ge,showdiv:_e,handleDeleteConversation:function(){V(""),Me()}}):l.a.createElement(Yl,{CreateOpenline:hl.a}))))))},zl=a(48),Vl=N.a.Content,ql=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=v("userType"),t=e?zl.AES.decrypt(e,"anonymoose").toString(zl.enc.Utf8):"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},"AM WEB"===t?l.a.createElement(ue,{amWEBUser:!0}):"AM CC"===t?l.a.createElement(ue,{amCCUser:!0}):"Org CC"===t?l.a.createElement(ue,{amORGUser:!0}):"IDB"===t?l.a.createElement(ue,{amIDBUser:!0}):null),l.a.createElement(w.a,{className:"content-center"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,"AM WEB"===t?l.a.createElement(sa,{data:this.props}):"Org CC"===t?l.a.createElement(fe,{data:this.props}):"AM CC"===t?l.a.createElement(ve,null):"IDB"===t?l.a.createElement(ia,null):null,l.a.createElement(Vl,{className:""},l.a.createElement(w.a,{className:"py-3",style:{justifyContent:"center"}},l.a.createElement("h1",{className:"mb-0"},"You don't have access rights! Please contact your administrator.")))))))}}]),t}(l.a.Component),Ql=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.handleResetPasswordOk()},a.handleCancel=function(){a.setState({visible:!1}),a.props.handleResetPasswordCancel()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{type:"link",className:"link pl-0 mt-4",onClick:this.showModal},l.a.createElement("span",null,"Reset password for this user")),l.a.createElement(_t.a,{title:"Reset Password",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Reset and Invite",cancelText:"Cancel"},l.a.createElement(lt.a,{className:"input-md floating-label w-100"},l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement("div",{className:"mb-4 subtext-md"},"Reset password for "," ",l.a.createElement("span",{className:"font-weight-md"},this.props.user)),l.a.createElement(mt,{label:"New Password",value:""},l.a.createElement(lt.a.Item,{name:"newpwd",className:"pwd",rules:[{required:!0,message:{ENTER_NEW_PASSWORD:"Please enter your new password!"}}]},l.a.createElement(_.a.Password,(e={className:"input-control",htmlFor:"newpwd"},Object(et.a)(e,"className","required"),Object(et.a)(e,"value",""),e)))),l.a.createElement(mt,{label:"Confirm Password",value:""},l.a.createElement(lt.a.Item,{name:"confirmpwd",className:"pwd",rules:[{required:!0,message:{CONFIRM_YOUR_PASSWORD:"Please confirm your password!"}}]},l.a.createElement(_.a.Password,(t={className:"input-control",htmlFor:"confirmpwd"},Object(et.a)(t,"className","required"),Object(et.a)(t,"value",""),t))))))))}}]),t}(n.Component),Gl=(rt.a.RangePicker,function(e){var t,a,n;return l.a.createElement(_t.a,{visible:!0,onOk:e.handleEditOk,onCancel:e.handleEditCancel,centered:!0,width:900,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Update",cancelText:"Cancel"},l.a.createElement(C.a,{spinning:e.loader,size:"large"},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement("div",null,"Edit Seeded User"),l.a.createElement("br",null),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(q.a,null,e.seededUserName.charAt(0)),l.a.createElement("span",{className:"md-name"},e.seededUserName)),e.error&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"First Name",value:e.seededUserDetails.firstName},l.a.createElement(lt.a.Item,{name:"firstName",className:"required"},l.a.createElement(_.a,{id:"firstName",className:"input-control",defaultValue:e.seededUserDetails.firstName,htmlFor:"firstName",value:e.seededUserDetails.firstName,onChange:function(t){return e.handleSeededUserOnChange(t)},autoComplete:"off",maxLength:50})),e.fNameCount&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Last Name",value:e.seededUserDetails.lastName},l.a.createElement(lt.a.Item,{name:"lastName",className:"required"},l.a.createElement(_.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(et.a)(t,"className","required"),Object(et.a)(t,"defaultValue",e.seededUserDetails.lastName),Object(et.a)(t,"value",e.seededUserDetails.lastName),Object(et.a)(t,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(et.a)(t,"autoComplete","off"),Object(et.a)(t,"maxLength",50),t))),e.lNameCount&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ie,value:e.seededUserDetails.email},l.a.createElement(lt.a.Item,{name:"email",className:"required"},l.a.createElement(_.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(et.a)(a,"className","required"),Object(et.a)(a,"defaultValue",e.seededUserDetails.email),Object(et.a)(a,"value",e.seededUserDetails.email),Object(et.a)(a,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(et.a)(a,"onBlur",(function(t){return e.validateEmailAddress(t)})),Object(et.a)(a,"autoComplete","off"),Object(et.a)(a,"disabled",!0),a)),e.emailValidationError&&l.a.createElement(st.a,{message:gt,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"Start Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(rt.a,{className:"w-100 ",name:"startDate",value:e.seededUserDetails.startDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"startDate")},disabledDate:e.disabledDate})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"End Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(rt.a,{className:"w-100 ",name:"endDate",value:e.seededUserDetails.endDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"endDate")},disabledDate:e.disabledDate})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(mt,{label:Te,value:e.seededUserDetails.mobile},l.a.createElement(lt.a.Item,{name:"mobile",className:"required"},l.a.createElement(kt.a,{country:"us",id:"mobile",htmlFor:"mobile",defaultValue:e.seededUserDetails.mobile,value:e.seededUserDetails.mobile,onChange:e.handleMobile,onBlur:function(t){return e.validateMobile(t)},autoComplete:"off"}),e.mobileValidationError&&l.a.createElement(st.a,{message:ht,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:e.seededUserDetails.status2},l.a.createElement(lt.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(n={className:"input-control w-100 w-lg-50",value:e.seededUserDetails.status2,htmlFor:"status2"},Object(et.a)(n,"className","required"),Object(et.a)(n,"onSelect",(function(t){return e.handleSeededUserOnSelect(t,"status2")})),n),l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))))))),l.a.createElement(Ql,{user:e.seededUserDetails.firstName,handleResetPasswordOk:e.handleResetPasswordOk,handleResetPasswordCancel:e.handleResetPasswordCancel}))}),Wl=(rt.a.RangePicker,function(e){var t,a,n;return l.a.createElement(_t.a,{visible:!0,onOk:e.handleAddSeededUser,onCancel:e.handleAddSeededUserCancel,centered:!0,width:1200,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Add",cancelText:"Cancel"},l.a.createElement(C.a,{spinning:e.loader,size:"large"},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other"},e.error&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement("div",null,"Add Seeded User"),l.a.createElement("br",null),l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"First Name",value:e.seededUserDetails.firstName},l.a.createElement(lt.a.Item,{name:"firstName",className:"required"},l.a.createElement(_.a,{id:"firstName",className:"input-control",defaultValue:e.seededUserDetails.firstName,htmlFor:"firstName",value:e.seededUserDetails.firstName,onChange:function(t){return e.handleSeededUserOnChange(t)},autoComplete:"off",maxLength:50})),e.fNameCount&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Last Name",value:e.seededUserDetails.lastName},l.a.createElement(lt.a.Item,{name:"lastName",className:"required"},l.a.createElement(_.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(et.a)(t,"className","required"),Object(et.a)(t,"defaultValue",e.seededUserDetails.lastName),Object(et.a)(t,"value",e.seededUserDetails.lastName),Object(et.a)(t,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(et.a)(t,"autoComplete","off"),Object(et.a)(t,"maxLength",50),t))),e.lNameCount&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ie,value:e.seededUserDetails.email},l.a.createElement(lt.a.Item,{name:"email",className:"required"},l.a.createElement(_.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(et.a)(a,"className","required"),Object(et.a)(a,"defaultValue",e.seededUserDetails.email),Object(et.a)(a,"value",e.seededUserDetails.email),Object(et.a)(a,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(et.a)(a,"onBlur",(function(t){return e.validateEmailAddress(t)})),Object(et.a)(a,"autoComplete","off"),a)),e.emailValidationError&&l.a.createElement(st.a,{message:gt,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"Start Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(rt.a,{className:"w-100 ",name:"startDate",value:e.seededUserDetails.startDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"startDate")},disabledDate:e.disabledDate})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"End Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(rt.a,{className:"w-100 ",name:"endDate",value:e.seededUserDetails.endDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"endDate")},disabledDate:e.disabledDate})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(mt,{label:Te,value:e.seededUserDetails.mobile},l.a.createElement(lt.a.Item,{name:"mobile",className:"required"},l.a.createElement(kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:e.seededUserDetails.mobile,onChange:e.handleMobile,onBlur:e.validateMobile,autoComplete:"off"}),e.mobileValidationError&&l.a.createElement(st.a,{message:ht,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:e.seededUserDetails.status2},l.a.createElement(lt.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(n={className:"input-control w-100 w-lg-50",value:e.seededUserDetails.status2,htmlFor:"status2"},Object(et.a)(n,"className","required"),Object(et.a)(n,"onSelect",(function(t){return e.handleSeededUserOnSelect(t,"status2")})),n),l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))))))))}),Kl=N.a.Content,Jl=function(e){var t,a=Object(m.g)(),r=Object(n.useState)(!1),s=Object(o.a)(r,2),i=s[0],c=s[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(!1),f=Object(o.a)(h,2),E=f[0],v=f[1],b=Object(n.useState)(!1),y=Object(o.a)(b,2),O=y[0],D=y[1],k=Object(n.useState)(!1),I=Object(o.a)(k,2),x=I[0],T=I[1],A=Object(n.useState)(!1),U=Object(o.a)(A,2),F=U[0],Y=U[1],L=Object(n.useState)(!1),B=Object(o.a)(L,2),H=B[0],z=B[1],V=Object(n.useState)(!1),Q=Object(o.a)(V,2),G=Q[0],W=Q[1],K=Object(n.useState)(""),J=Object(o.a)(K,2),$=J[0],Z=J[1],X=Object(n.useState)(""),ee=Object(o.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),le=Object(o.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)(!1),ie=Object(o.a)(oe,2),ce=ie[0],me=ie[1],de=Object(n.useState)(!1),pe=Object(o.a)(de,2),ge=pe[0],he=pe[1],fe=Object(n.useState)({name:"",identifier:"",org_id:"",status:"",date1:""}),Ee=Object(o.a)(fe,2),be=Ee[0],ye=Ee[1],Oe=Object(n.useState)([]),_e=Object(o.a)(Oe,2),je=_e[0],we=_e[1],Se=j.a.useNotification(),De=Object(o.a)(Se,2),Ie=De[0],Te=De[1],Ue=lt.a.useForm(),Me=Object(o.a)(Ue,1)[0],Fe=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};g(!0),P.a.get(R+"getOrganization/".concat(Fe,"/"),e).then((function(e){var t=null===e||void 0===e?void 0:e.data;ye({name:t.organization.name,identifier:t.organization.identifier,status:t.organization.status_id.toString(),date1:[ke()(t.organization.start_date,"YYYY-MM-DD"),ke()(t.organization.end_date,"YYYY-MM-DD")]}),Me.setFieldsValue({name:t.organization.name,identifier:t.organization.identifier});var a=[];t.seeded_user.map((function(e){e.soft_delete||(a=[].concat(Object(tt.a)(a),[{firstName:e.first_name,lastName:e.last_name,status2:e.status_id.toString(),email:e.email,startDate:ke()(e.start_date,"YYYY-MM-DD"),endDate:ke()(e.end_date).isValid()&&ke()(e.end_date,"YYYY-MM-DD"),mobile:e.mobile_number}]))})),we(a),g(!1)}))}),[i]);var Pe=function(){je.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(re)&&e.email===re.email){var t=je.indexOf(e),a=JSON.parse(JSON.stringify(je));a[t]=re;var n=[];a.map((function(e){e=Object(M.a)({},e,{startDate:ke()(e.startDate,"YYYY-MM-DD"),endDate:ke()(e.endDate).isValid()&&ke()(e.endDate,"YYYY-MM-DD")}),n.push(e)})),we(n)}})),Ve()},Re=function(e){"firstName"===e.target.id&&50===e.target.value.length?z(!0):"lastName"===e.target.id&&50===e.target.value.length?W(!0):(z(!1),W(!1)),se(Object(M.a)({},re,Object(et.a)({},e.target.id,e.target.value)))},Ye=function(e){se(Object(M.a)({},re,{mobile:e}))},Le=function(e,t){se(Object(M.a)({},re,Object(et.a)({},t,e)))},Be=function(e,t){se(Object(M.a)({},re,Object(et.a)({},t,e)))},He=function(e){/\S+@\S+\.\S+/.test(e.target.value)?D(!1):D(!0)},ze=function(e){re.mobile.length>10||/^\+\d$/.test(e.target.value)?T(!1):T(!0)},Ve=function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t=re.endDate?{first_name:re.firstName,last_name:re.lastName,email:te,mobile_number:re.mobile,status_id:parseInt(re.status2),start_date:re.startDate?ke()(re.startDate).format("DD-MM-YYYY"):"",end_date:re.endDate?ke()(re.endDate).format("DD-MM-YYYY"):"",organization_id:parseInt(Fe)}:{first_name:re.firstName,last_name:re.lastName,email:te,mobile_number:re.mobile,status_id:parseInt(re.status2),start_date:re.startDate?ke()(re.startDate).format("DD-MM-YYYY"):"",organization_id:parseInt(Fe)};g(!0),P.a.put(R+"seededUser/",t,e).then((function(){Ie.info({description:"Details for"+$+" have been changed successfully.",placement:"bottomLeft"}),g(!1),me(!1)}))},qe=function(e){return e&&e<ke()().startOf("day")},Qe=function(){se({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),v(!1),z(!1),W(!1),he(!0)},Ge=rt.a.RangePicker;return l.a.createElement(l.a.Fragment,null,Te,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amCCUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ve,null),l.a.createElement(Kl,null,l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Organization Details")),l.a.createElement(C.a,{spinning:p,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(S.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Organization Details"),l.a.createElement("div",null,l.a.createElement(Ne.a,{type:"link",className:"link pl-0 btn-link-primary ml-3",onClick:function(){return function(){var e="/amcc/editorg/".concat(Fe);a.push(e,"viaOrgDetails")}()}},l.a.createElement("span",{className:"icon icon-pencil"}),l.a.createElement("span",{className:"pl-2 d-none d-block-md"},"Edit Details")))),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(q.a,null,be.name.charAt(0)),l.a.createElement("span",{className:"md-name"},be.name)),l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",onFinish:function(e){},form:Me},l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Name",value:be.name},l.a.createElement(lt.a.Item,{className:"required",name:"name",id:"name"},l.a.createElement(_.a,{className:"input-control",id:"name",name:"name",htmlFor:"organization name",defaultValue:be.name,value:be.name,disabled:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Id",value:be.identifier},l.a.createElement(lt.a.Item,{className:"required",name:"identifier",id:"identifier",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",id:"identifier",name:"identifier",htmlFor:"organization name",defaultValue:be.identifier,value:be.identifier,disabled:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:be.status},l.a.createElement(lt.a.Item,{className:"required",name:"status1"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,{className:"input-control w-100 w-lg-100",value:be.status,htmlFor:"status",onSelect:function(e){return handleOrganizationOnSelect(e,"status")},disabled:!0},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:xe,value:"date1"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(Ge,{className:"w-100 ",name:"date1",value:be.date1,disabled:!0})))))))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement(w.a,{className:"w-100"},l.a.createElement(S.a,{span:24,md:12},l.a.createElement("h6",{className:"py-3 mb-0"},"Seeded Users Details")),l.a.createElement(S.a,{span:24,md:12,className:"d-flex justify-content-left justify-content-md-end align-items-center my-3 my-md-0"},l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:function(){return Qe()}},"Add Seeded User")))),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},je.length>0?l.a.createElement(Ct,{seededUsers:je,orgID:parseInt(Fe),statusOnClicked:function(){c(!i)},handleEditUser:function(e){me(!0),v(!1),z(!1),W(!1),D(!1),T(!1);var t={};je.forEach((function(a){a.email===e&&(t=a)})),se(t),Z(t.firstName),ae(t.email)},handleDelete:function(e){var t=null===je||void 0===je?void 0:je.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e})),a="";je.map((function(t){e===t.email&&(a=t.firstName)})),we(t);var n={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"seededUser/".concat(e),n).then((function(){Ie.info({description:a+" has been deleted successfully.",placement:"bottomLeft"})}))},addSeededUser:Qe,viaEdit:!0,orgDetails:!0,seededUser:!0}):l.a.createElement(S.a,{span:24,lg:18},l.a.createElement(w.a,{className:"justify-content-center"},"No Seeded User")),ce?l.a.createElement(Gl,{error:E,handleEditOk:function(){re.firstName&&re.lastName&&re.status2&&re.mobile&&re.startDate&&re.email?(v(!1),O||x||Pe()):v(!0)},handleEditCancel:function(){me(!1)},seededUsers:je,fNameCount:H,lNameCount:G,seededUserName:$,seededUserDetails:re,disabledDate:qe,handleSeededUserOnChange:Re,handleSeededUserDatePickerChange:Be,handleMobile:Ye,handleSeededUserOnSelect:Le,validateEmailAddress:He,emailValidationError:O,validateMobile:ze,mobileValidationError:x,handleResetPasswordOk:function(){},handleResetPasswordCancel:function(){},loader:p}):ge?l.a.createElement(Wl,{error:E,handleAddSeededUser:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={email:re.email,mobile_number:"+"+re.mobile,is_seeded_user:1,first_name:re.firstName,last_name:re.lastName,start_date:re.startDate?ke()(re.startDate).format("DD-MM-YYYY"):"",end_date:re.endDate?ke()(re.endDate).format("DD-MM-YYYY"):"",status_id:parseInt(re.status2),organization_id:parseInt(Fe)},a={seeded_users:[t]},n=[].concat(Object(tt.a)(je),[{firstName:t.first_name,lastName:t.last_name,status2:t.status_id.toString(),email:t.email,startDate:ke()(t.start_date,"YYYY-MM-DD"),endDate:ke()(t.end_date).isValid()&&ke()(t.end_date,"YYYY-MM-DD"),mobile:t.mobile_number}]);re.firstName&&re.lastName&&re.status2&&re.mobile&&re.startDate&&re.email?(v(!1),O||x||F||(we(n),g(!0),P.a.post(R+"seededUser/",a,e).then((function(e){Ie.info({description:re.firstName+" has been added successfully.",placement:"bottomLeft"}),g(!1),he(!1)})))):v(!0)},handleAddSeededUserCancel:function(){he(!1)},seededUsers:je,fNameCount:H,lNameCount:G,seededUserDetails:re,disabledDate:qe,handleSeededUserOnChange:Re,handleSeededUserDatePickerChange:Be,handleMobile:Ye,handleSeededUserOnSelect:Le,validateEmailAddress:He,emailValidationError:O,validateMobile:ze,mobileValidationError:x,validatePassword:function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?Y(!1):Y(!0)},passwordValidationError:F,loader:p}):l.a.createElement(l.a.Fragment,null)))))))))))},$l=N.a.Content,Zl=function(e){var t,a,r,s=j.a.useNotification(),i=Object(o.a)(s,2),c=i[0],u=i[1],d=Object(m.g)(),p=lt.a.useForm(),g=Object(o.a)(p,1)[0],h=Object(n.useState)(!1),f=Object(o.a)(h,2),E=f[0],v=f[1],b=Object(n.useState)(!1),y=Object(o.a)(b,2),O=y[0],D=y[1],k=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id,I=Object(n.useState)(!1),x=Object(o.a)(I,2),T=x[0],A=x[1],U=Object(n.useState)(!1),F=Object(o.a)(U,2),Y=F[0],L=F[1],B=Object(n.useState)(!1),H=Object(o.a)(B,2),z=H[0],V=H[1],Q=Object(n.useState)(!1),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=Object(n.useState)(!1),$=Object(o.a)(J,2),Z=$[0],X=$[1],ee=Object(n.useState)(""),te=Object(o.a)(ee,2),ne=te[0],re=te[1],se=Object(n.useState)(""),oe=Object(o.a)(se,2),ie=oe[0],ce=oe[1],me=Object(n.useState)(""),de=Object(o.a)(me,2),pe=de[0],ge=de[1],he=Object(n.useState)(""),fe=Object(o.a)(he,2),Ee=fe[0],be=fe[1],ye=Object(n.useState)(""),Oe=Object(o.a)(ye,2),_e=Oe[0],je=Oe[1],we=Object(n.useState)(""),Se=Object(o.a)(we,2),De=Se[0],Ie=Se[1],Te=Object(n.useState)({name:"",identifier:"",org_id:"",status:"",date1:""}),Ue=Object(o.a)(Te,2),Me=Ue[0],Fe=Ue[1],Pe=Object(n.useState)({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),Re=Object(o.a)(Pe,2),Ye=Re[0],Le=Re[1],Be=Object(n.useState)([]),He=Object(o.a)(Be,2),ze=He[0],Ve=He[1],qe=Object(n.useState)(!1),Qe=Object(o.a)(qe,2),Ge=Qe[0],We=Qe[1],Ke=Object(n.useState)(!1),Je=Object(o.a)(Ke,2),$e=Je[0],Ze=Je[1],Xe=Object(n.useState)(!1),at=Object(o.a)(Xe,2),nt=at[0],it=at[1],ct=Object(n.useState)(!1),gt=Object(o.a)(ct,2),ht=gt[0],ft=gt[1],Et=Object(n.useState)(!1),vt=Object(o.a)(Et,2),bt=vt[0],yt=vt[1],Ot=Object(n.useState)(!1),_t=Object(o.a)(Ot,2),jt=_t[0],wt=_t[1],St=Object(n.useState)(!1),Dt=Object(o.a)(St,2),kt=Dt[0],It=Dt[1],xt=Object(n.useState)(""),Tt=Object(o.a)(xt,2),At=Tt[0],Ut=Tt[1];Object(n.useEffect)((function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};v(!0),P.a.get(R+"getOrganization/".concat(k,"/"),e).then((function(e){var t=null===e||void 0===e?void 0:e.data;Fe({name:t.organization.name,identifier:t.organization.identifier,status:t.organization.status_id.toString(),date1:[ke()(t.organization.start_date,"YYYY-MM-DD"),ke()(t.organization.end_date,"YYYY-MM-DD")]}),ge(t.organization.name),be(t.organization.identifier),Ut(t.organization.status_id.toString()),g.setFieldsValue({name:t.organization.name,identifier:t.organization.identifier});var a=[];t.seeded_user.map((function(e){e.soft_delete||(a=[].concat(Object(tt.a)(a),[{firstName:e.first_name,lastName:e.last_name,status2:e.status_id.toString(),email:e.email,startDate:ke()(e.start_date,"YYYY-MM-DD"),endDate:ke()(e.end_date).isValid()&&ke()(e.end_date,"YYYY-MM-DD"),mobile:e.mobile_number}]))})),v(!1),Ve(a)}))}),[O]);var Mt=function(){ze.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(Ye)&&e.email===Ye.email){var t=ze.indexOf(e),a=JSON.parse(JSON.stringify(ze));a[t]=Ye;var n=[];a.map((function(e){e=Object(M.a)({},e,{startDate:ke()(e.startDate,"YYYY-MM-DD"),endDate:ke()(e.endDate).isValid()&&ke()(e.endDate,"YYYY-MM-DD")}),n.push(e)})),Ve(n)}})),zt()},Ft=function(e){"identifier"===e.target.id&&20===e.target.value.length?yt(!0):"name"===e.target.id&&80===e.target.value.length?ft(!0):(ft(!1),yt(!1)),Fe(Object(M.a)({},Me,Object(et.a)({},e.target.id,e.target.value)))},Pt=function(e){"firstName"===e.target.id&&50===e.target.value.length?wt(!0):"lastName"===e.target.id&&50===e.target.value.length?It(!0):(wt(!1),It(!1)),Le(Object(M.a)({},Ye,Object(et.a)({},e.target.id,e.target.value)))},Rt=function(e){Le(Object(M.a)({},Ye,{mobile:e}))},Yt=function(e,t){Le(Object(M.a)({},Ye,Object(et.a)({},t,e)))},Lt=function(e,t){Le(Object(M.a)({},Ye,Object(et.a)({},t,e)))},Bt=function(e){/\S+@\S+\.\S+/.test(e.target.value)?V(!1):V(!0)},Ht=function(e){Ye.mobile.length>10||/^\+\d$/.test(e.target.value)?K(!1):K(!0)},zt=function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t=Ye.endDate?{first_name:Ye.firstName,last_name:Ye.lastName,email:De,mobile_number:Ye.mobile,status_id:parseInt(Ye.status2),start_date:Ye.startDate?ke()(Ye.startDate).format("DD-MM-YYYY"):"",end_date:Ye.endDate?ke()(Ye.endDate).format("DD-MM-YYYY"):"",organization_id:parseInt(k)}:{first_name:Ye.firstName,last_name:Ye.lastName,email:De,mobile_number:Ye.mobile,status_id:parseInt(Ye.status2),start_date:Ye.startDate?ke()(Ye.startDate).format("DD-MM-YYYY"):"",organization_id:parseInt(k)};v(!0),P.a.put(R+"seededUser/",t,e).then((function(){c.info({description:"Details for"+_e+" have been changed successfully.",placement:"bottomLeft"}),v(!1),We(!1)}))},Vt=function(e){return e&&e<ke()().startOf("day")},qt=function(){Le({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),L(!1),wt(!1),It(!1),Ze(!0)},Qt=rt.a.RangePicker;return l.a.createElement(l.a.Fragment,null,u,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amCCUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ve,null),l.a.createElement($l,null,l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Organization")),l.a.createElement(C.a,{spinning:E,size:"large"},l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(S.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Edit Organization"),l.a.createElement("div",null,l.a.createElement(Ne.a,{type:"link",className:"link pl-0 btn-link-primary ml-3 deleteOrg",onClick:function(){it(!0)}},l.a.createElement("span",{className:"icon icon-delete"}),l.a.createElement("span",{className:"d-none d-md-inline-flex deleteOrg"},le)),nt?l.a.createElement(Nt,{org:pe,handleDelete:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"deleteOrganization/".concat(k,"/"),e).then((function(){window.location="/amcc/manageorganizations"}))},handleCancel:function(){it(!1)},deleteOrg:!0}):l.a.createElement(l.a.Fragment,null))),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(q.a,null,pe.charAt(0)),l.a.createElement("span",{className:"md-name"},pe)),l.a.createElement(lt.a,{className:"input-md floating-label w-100",form:g},T&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Name",value:Me.name},l.a.createElement(lt.a.Item,{className:"required edit-input",name:"name",id:"name"},l.a.createElement(_.a,(a={className:"input-control",id:"name",name:"name"},Object(et.a)(a,"className","required"),Object(et.a)(a,"defaultValue",Me.name),Object(et.a)(a,"value",Me.name),Object(et.a)(a,"onChange",(function(e){return Ft(e)})),Object(et.a)(a,"onBlur",(function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==pe?P.a.post(R+"checkOrganization/",{organization_name:Me.name},t).then((function(e){e.data&&re(e.data[0])})):re(!1)}(e)})),Object(et.a)(a,"htmlFor","name"),Object(et.a)(a,"autoComplete","off"),Object(et.a)(a,"maxLength",80),a)),"status: false"===ne&&Me.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&Me.name.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==ne&&l.a.createElement(st.a,{message:"Sorry! This organization already exists in the system. Please use a different name.",type:"error",showIcon:!0})),ht&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Organization Id",value:Me.identifier},l.a.createElement(lt.a.Item,{className:"required edit-input",name:"identifier",id:"identifier"},l.a.createElement(_.a,(r={className:"input-control edit-input",name:"identifier",id:"identifier",htmlFor:"identifier"},Object(et.a)(r,"className","required"),Object(et.a)(r,"defaultValue",Me.identifier),Object(et.a)(r,"value",Me.identifier),Object(et.a)(r,"onChange",(function(e){return Ft(e)})),Object(et.a)(r,"onBlur",(function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==Ee?P.a.post(R+"checkOrganizationID/",{orgId:Me.identifier},t).then((function(e){e.data&&ce(e.data[0])})):ce(!1)}(e)})),Object(et.a)(r,"autoComplete","off"),Object(et.a)(r,"maxLength",20),r)),"status: false"===ie&&Me.identifier.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&Me.identifier.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==ie&&l.a.createElement(st.a,{message:"Sorry! This organization already exists in the system. Please use a different Id.",type:"error",showIcon:!0})),bt&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:pt,type:"error"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:Me.status},l.a.createElement(lt.a.Item,{className:"required edit-input",name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,{className:"input-control w-100 w-lg-100",value:Me.status,htmlFor:"status",onSelect:function(e){return function(e,t){Fe(Object(M.a)({},Me,Object(et.a)({},t,e)))}(e,"status")}},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:xe,value:"date1"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(Qt,{className:"w-100 ",name:"date1",value:Me.date1,onChange:function(e){return function(e,t){Fe(Object(M.a)({},Me,Object(et.a)({},t,e)))}(e,"date1")},disabledDate:Vt})))))),l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={organization_id:k,name:Me.name,identifier:Me.identifier,start_date:Me.date1[0]?ke()(Me.date1[0]).format("DD-MM-YYYY"):"",end_date:Me.date1[1]?ke()(Me.date1[1]).format("DD-MM-YYYY"):"",status_id:parseInt(Me.status)},a=ke()(Me.date1[1]).format("MM-DD-YYYY");if(Me.status!==At)if(new Date<new Date(a))Me.name&&Me.identifier?"status: false"!==ne&&Me.name!==pe||"status: false"!==ie&&Me.identifier!==Ee||(A(!1),P.a.put(R+"saveOrganization/",t,e).then((function(){window.location="/amcc/manageorganizations"}))):A(!0);else{c.info({description:"Status can't be changed as the end date has been passed.",placement:"bottomLeft"})}else Me.name&&Me.identifier?(A(!1),v(!0),P.a.put(R+"saveOrganization/",t,e).then((function(){window.location="/amcc/manageorganizations"}))):A(!0)}},"Update"),l.a.createElement(Ne.a,{className:"ml-4",type:"secondary",onClick:function(){if(e.location.state){var t="/amcc/orgdetails/".concat(k);d.push(t)}else window.location="/amcc/manageorganizations"}},ae))))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:12,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Edit Seeded Users")),l.a.createElement(S.a,{span:24,md:12,className:"d-flex justify-content-left justify-content-md-end align-items-center my-3 my-md-0"},l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",onClick:function(){return qt()}},"Add Seeded User")),ze.length>0?l.a.createElement(Ct,{seededUsers:ze,statusOnClicked:function(){D(!O)},orgID:parseInt(k),handleEditUser:function(e){We(!0),L(!1),wt(!1),It(!1),V(!1),K(!1);var t={};ze.forEach((function(a){a.email===e&&(t=a)})),Le(t),je(t.firstName),Ie(t.email)},handleDelete:function(e){var t=null===ze||void 0===ze?void 0:ze.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e})),a="";ze.map((function(t){e===t.email&&(a=t.firstName)})),Ve(t);var n={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"seededUser/".concat(e),n).then((function(){c.info({description:a+" has been deleted successfully.",placement:"bottomLeft"})}))},addSeededUser:qt,viaEdit:!0,seededUser:!0}):l.a.createElement(S.a,{span:24,lg:18},l.a.createElement(w.a,{className:"justify-content-center"},"No Seeded User")),Ge?l.a.createElement(Gl,{error:Y,handleEditOk:function(){Ye.firstName&&Ye.lastName&&Ye.status2&&Ye.mobile&&Ye.startDate&&Ye.email?(L(!1),z||W||Mt()):L(!0)},handleEditCancel:function(){We(!1)},seededUsers:ze,seededUserName:_e,fNameCount:jt,lNameCount:kt,seededUserDetails:Ye,disabledDate:Vt,handleSeededUserOnChange:Pt,handleSeededUserDatePickerChange:Lt,handleMobile:Rt,handleSeededUserOnSelect:Yt,validateEmailAddress:Bt,emailValidationError:z,validateMobile:Ht,mobileValidationError:W,handleResetPasswordOk:function(){},handleResetPasswordCancel:function(){},loader:E}):$e?l.a.createElement(Wl,{error:Y,handleAddSeededUser:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t=Ye.endDate?{email:Ye.email,mobile_number:"+"+Ye.mobile,is_seeded_user:1,first_name:Ye.firstName,last_name:Ye.lastName,start_date:Ye.startDate?ke()(Ye.startDate).format("DD-MM-YYYY"):"",end_date:Ye.endDate?ke()(Ye.endDate).format("DD-MM-YYYY"):"",status_id:parseInt(Ye.status2),organization_id:parseInt(k)}:{email:Ye.email,mobile_number:"+"+Ye.mobile,is_seeded_user:1,first_name:Ye.firstName,last_name:Ye.lastName,start_date:Ye.startDate?ke()(Ye.startDate).format("DD-MM-YYYY"):"",status_id:parseInt(Ye.status2),organization_id:parseInt(k)},a={seeded_users:[t]},n=[].concat(Object(tt.a)(ze),[{firstName:t.first_name,lastName:t.last_name,status2:t.status_id.toString(),email:t.email,startDate:ke()(t.start_date,"YYYY-MM-DD"),endDate:ke()(t.end_date).isValid()&&ke()(t.end_date,"YYYY-MM-DD"),mobile:t.mobile_number}]);Ye.firstName&&Ye.lastName&&Ye.status2&&Ye.mobile&&Ye.startDate&&Ye.email?(L(!1),z||W||Z||(Ve(n),v(!0),P.a.post(R+"seededUser/",a,e).then((function(e){c.info({description:Ye.firstName+" has been added successfully.",placement:"bottomLeft"}),v(!1),Ze(!1)})))):L(!0)},handleAddSeededUserCancel:function(){Ze(!1)},seededUsers:ze,fNameCount:jt,lNameCount:kt,seededUserDetails:Ye,disabledDate:Vt,handleSeededUserOnChange:Pt,handleSeededUserDatePickerChange:Lt,handleMobile:Rt,handleSeededUserOnSelect:Yt,validateEmailAddress:Bt,emailValidationError:z,validatePassword:function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?X(!1):X(!0)},passwordValidationError:Z,validateMobile:Ht,mobileValidationError:W,loader:E}):l.a.createElement(l.a.Fragment,null)))))))))},Xl=N.a.Content,er=function(){var e=rt.a.RangePicker;return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amCCUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ve,null),l.a.createElement(Xl,null,l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Profile")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(q.a,null,"W"),l.a.createElement("span",{className:"md-name"},"Alan Charles")),l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"",onFinish:function(e){}},l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"User Name"},l.a.createElement(lt.a.Item,{className:"required",name:"organization name",rules:[{required:!0,message:"Please enter user name "}]},l.a.createElement(_.a,{className:"input-control",htmlFor:"user name"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"User Id"},l.a.createElement(lt.a.Item,{className:"required",name:"user id",validateStatus:"success",rules:[{required:!0,message:"Please enter user id "}]},l.a.createElement(_.a,{className:"input-control",htmlFor:"user name"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Email Id"},l.a.createElement(lt.a.Item,{className:"required",name:"email id",rules:[{required:!0,message:"Please enter email id ",type:"email"}]},l.a.createElement(_.a,{className:"input-control",htmlFor:"email id"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Status"},l.a.createElement(lt.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please enter status "}]},l.a.createElement(_.a,{className:"input-control",htmlFor:"status"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Select Date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(e,{className:"w-100 "})))))),l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{type:"primary",htmlType:"submit"},"Update"),l.a.createElement(Ne.a,{className:"ml-4",type:"secondary"},"Cancel"))))))))))))},tr=a(48),ar=_.a.TextArea,nr=N.a.Content,lr=function(e){var t,a=Object(n.useState)({end_date:"",help_text:"",hotline_icon_id:"",hotline_id:"",name:"",statusMessage:"",start_date:"",status:!1}),r=Object(o.a)(a,2),s=r[0],i=r[1],c=Object(n.useState)(""),u=Object(o.a)(c,2),d=u[0],p=u[1],g=Object(n.useState)(!1),h=Object(o.a)(g,2),f=h[0],E=h[1],b=Object(n.useState)(""),y=Object(o.a)(b,2),O=y[0],_=y[1],S=j.a.useNotification(),D=Object(o.a)(S,2),k=D[0],I=D[1],x=Object(n.useState)(!1),T=Object(o.a)(x,2),A=T[0],U=T[1],F=Object(n.useState)(!0),Y=Object(o.a)(F,2),L=(Y[0],Y[1],lt.a.useForm()),B=Object(o.a)(L,1)[0],H=Object(m.h)(),z=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}};Object(n.useEffect)((function(){var e=ke()(H.state.start_date,"MM / DD / YYYY").format("YYYY-MM-DD"),t=ke()(H.state.end_date,"MM / DD / YYYY").format("YYYY-MM-DD"),a=[ke()(e,"YYYY/MM/DD"),ke()(t,"YYYY/MM/DD")];i({end_date:"",help_text:H.state.help_text,hotline_icon_id:H.state.hotline_icon_id,hotline_id:H.state.hotline_id,name:H.state.name,start_date:a,status:4===H.state.status_id});var n=function(e){switch(e){case"1":return'<span class="icon icon-sexual-harassment-1 ant-tooltip-open"></span>';case"2":return'<span class="icon icon-violence ant-tooltip-open"></span>';case"3":return'<span class="icon icon-racism ant-tooltip-open"></span>';case"4":return'<span class="icon icon-cyber-bullying ant-tooltip-open"></span>';case"5":return'<span class="icon icon-fight ant-tooltip-open"></span>';case"6":return'<span class="icon icon-discrimination ant-tooltip-open"></span>';case"7":return'<span class="icon icon-slap ant-tooltip-open"></span>';default:return""}}(H.state.hotline_icon_id.toString());p(n),B.setFieldsValue({name:H.state.name,help_text:H.state.help_text})}),[]);var V=function(e){i(Object(M.a)({},s,Object(et.a)({},e.target.id,e.target.value)))},q=function(e){var t=Ce(),a=s.hotline_id;delete s.hotline_id;var n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};E(!0),P.a.put(R+"hotline/"+a,e,n).then((function(e){if(200===e.status){k.info({description:"Hotline details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/hotlinedirectory"}}))},Q=rt.a.RangePicker;return l.a.createElement(l.a.Fragment,null,I,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(nr,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Edit Hotline")),l.a.createElement(C.a,{spinning:f,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(lt.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:B},A&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(mt,{label:"Directory Name",value:s.name},l.a.createElement(lt.a.Item,{className:"required",name:"name",id:"name",rules:[{required:!0,message:{ENTER_DIRECTORY_NAME:"Please enter directory name"}}]},l.a.createElement(ar,{showCount:!0,maxLength:80,value:s.name,onChange:function(e){return V(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==H.state.name?P.a.post(R+"checkhotline/",{hotline_name:e.target.value},t).then((function(e){e.data&&_(e.data[0])})):_(!1)}(e)},id:"name",name:"name",className:"input-control textarea-input",htmlFor:"name",autoComplete:"off"}),"status: false"==O&&s.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.name.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==O&&l.a.createElement(st.a,{message:Et,type:"error",showIcon:!0}))),l.a.createElement(mt,{label:"Description",value:s.help_text},l.a.createElement(lt.a.Item,{className:"required",name:"help_text",id:"help_text",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(ar,{className:"input-control textarea-input",value:s.help_text,onChange:function(e){return V(e)},id:"help_text",name:"help_text",htmlFor:"help_text",autoComplete:"off"})))),(null===(t=s.statusMessage)||void 0===t?void 0:t.length)>0?l.a.createElement(l.a.Fragment,null,s.statusMessage):null,l.a.createElement(mt,{label:xe,value:"start_date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(Q,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"start_date",disabledDate:function(e){return e&&e<ke()().startOf("day")},value:s.start_date,onChange:function(e){return function(e,t){var a,n,l,r=ke()();if(e&&0===(null===(a=e[0])||void 0===a?void 0:a.diff(r,"days"))&&!s.status)i(Object(M.a)({},s,(l={},Object(et.a)(l,t,e),Object(et.a)(l,"statusMessage",re),l)));else if(e&&(null===(n=e[0])||void 0===n?void 0:n.diff(r,"days"))>0&&!s.status){var o;i(Object(M.a)({},s,(o={},Object(et.a)(o,t,e),Object(et.a)(o,"statusMessage",se),o)))}else{var c;i(Object(M.a)({},s,(c={},Object(et.a)(c,t,e),Object(et.a)(c,"statusMessage",""),c)))}}(e,"start_date")},rules:[{required:!0,message:{SELECT_DATE:vt}}]}))),l.a.createElement(lt.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{className:"font-13",onChange:function(e){return function(e){if(e.target.checked)i(Object(M.a)({},s,{status:e.target.checked,statusMessage:""}));else{var t,a,n=ke()(),l=s.start_date;l&&0===(null===(t=l[0])||void 0===t?void 0:t.diff(n,"days"))?i(Object(M.a)({},s,{status:e.target.checked,statusMessage:re})):l&&(null===(a=l[0])||void 0===a?void 0:a.diff(n,"days"))>0&&i(Object(M.a)({},s,{status:e.target.checked,statusMessage:se}))}}(e)},checked:s.status},"Save as Draft"))),l.a.createElement(lt.a.Item,{className:""},l.a.createElement(lt.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(pa,{"data-test":"addIconComponent",addIcon:function(e,t){i(Object(M.a)({},s,{hotline_icon_id:t})),p(e)}}),z(s.hotline_icon_id.toString())&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},ha()(d)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:z(s.hotline_icon_id.toString())},z(s.hotline_icon_id.toString())))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){if(s.name&&s.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.help_text&&s.help_text.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.hotline_icon_id&&s.start_date){U(!1),e.preventDefault();var t=JSON.parse(v("user")),a=(ke()(s.start_date[1]).format("MM-DD-YYYY"),{end_date:ke()(s.start_date[1]).format("DD-MM-YYYY"),help_text:s.help_text,hotline_icon_id:s.hotline_icon_id,hotline_id:s.hotline_id,status_id:s.status?4:1,name:s.name,start_date:ke()(s.start_date[0]).format("DD-MM-YYYY"),updated_by:parseInt(tr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(tr.enc.Utf8))});q(a)}else U(!0)},"data-test":"stepOneNext",style:{margin:"0 8px"}},"Update"),l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){window.location="/orgcc/hotlinedirectory"},"data-test":"stepOneNext"},ae))))))))))},rr=a(141),sr=a.n(rr),or=N.a.Content,ir=function(e){var t=Object(m.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(or,{className:"w-100"},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Add Employee"),l.a.createElement("div",{className:"d-block w-100 pl-3 pl-lg-0 pt-1"},"Please create all employees for your organization who are eligible to use the app. You can either integrate with existing system, import through CSV or add each employee manually.")),l.a.createElement("div",{className:"mid-content mt-0 mt-md-4 no-bg px-3 px-md-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,className:"mt-5"},l.a.createElement(w.a,{className:"d-flex justify-content-center",gutter:{xs:8,sm:32,md:32,lg:100}},l.a.createElement(S.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement("div",{className:"d-flex flex-column ".concat(sr.a.box_bordered)},l.a.createElement("span",{className:"icon-integrate ".concat(sr.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Integrate with existing system"))),l.a.createElement(S.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement(c.b,{to:"/orgcc/importemployee"},l.a.createElement("div",{className:"d-flex flex-column ".concat(sr.a.box_bordered)},l.a.createElement("span",{className:"icon-csv ".concat(sr.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Import through CSV")))),l.a.createElement(S.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement(c.b,{to:"/orgcc/createemployee"},l.a.createElement("div",{className:"d-flex flex-column ".concat(sr.a.box_bordered)},l.a.createElement("span",{className:"icon-add-user ".concat(sr.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Create Manually")))))))),l.a.createElement(Ne.a,{type:"primary",onClick:function(){t.push("/orgcc/manageemployees")}},te)))))))},cr=cn.a.Dragger,mr=function(e){return l.a.createElement(cr,{accept:".csv",name:"file",fileList:e.file,onChange:function(t){return e.onChange(t)}},l.a.createElement("p",{className:"ant-upload-drag-icon"},l.a.createElement("span",{className:"icon icon-upload"})),l.a.createElement("p",{className:"ant-upload-text"},"Drop files to upload or Browse"))},ur=N.a.Content,dr=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),d=u[0],p=u[1],g=Object(n.useState)(!1),h=Object(o.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(""),b=Object(o.a)(v,2),y=b[0],O=b[1],_=Object(n.useState)(""),j=Object(o.a)(_,2),D=j[0],k=j[1],I=Object(n.useState)(""),x=Object(o.a)(I,2),T=x[0],A=x[1],U=Object(m.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(ur,{className:"w-100"},l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/addemployee"},l.a.createElement(nt.a.Item,null,"Add Employee")),l.a.createElement(nt.a.Item,null,"Import CSV file"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Import CSV file"," ")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(C.a,{spinning:d,size:"large"},r&&l.a.createElement(st.a,{message:"Please upload a csv file.",type:"error",showIcon:!0}),D&&l.a.createElement(st.a,{message:y,type:"error",showIcon:!0}),l.a.createElement(w.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(S.a,{span:20,className:"mt-3 dragdrop"},l.a.createElement(mr,{onChange:function(e){var t=e.fileList.slice(-1);t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),A(t)},file:T})),l.a.createElement(S.a,{span:24,className:"justify-content-center d-flex mt-5"},l.a.createElement(Ne.a,{type:"link",href:"https://amstagingresources.s3-us-west-1.amazonaws.com/Sample_Employees.csv",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-download-icon"}),"Download Sample File"))),l.a.createElement("div",{className:"mt-3 btn-row"},l.a.createElement(Ne.a,{type:"primary",className:"mr-4 mb-4",onClick:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"multipart/form-data"}};if(T){var t=new FormData;t.append("file",T[0].originFileObj),s(!1),p(!0),P.a.post(R+"uploadCsv/",t,e).then((function(){E(!0)})).catch((function(e){p(!1),E(!1),e.message.includes("400")&&(k(!0),O(e.response.data))}))}else s(!0)}},"Upload"),l.a.createElement(Ne.a,{type:"secondary",className:"md",onClick:function(){U.push("/orgcc/addemployee")}},ae)),l.a.createElement(_t.a,{visible:f,onOk:function(){window.location="/orgcc/manageemployees"},onCancel:function(){window.location="/orgcc/manageemployees"},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:X},l.a.createElement("p",null,"Your file has been uploaded successfully. You will soon receive an email on the status of imported employee(s)."))))))))))},pr=a(1450),gr=pr.a.SHOW_PARENT,hr=[{title:"App User",value:"0",key:"0",disabled:!0},{title:"Super User",value:"1",key:"1"},{title:"Control Center",value:"2",key:"2"},{title:"IDB",value:"3",key:"3"}],fr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e={value:this.props.roles,treeData:hr,onChange:this.props.handleRoleOnSelect,treeCheckable:!0,showCheckedStrategy:gr,placeholder:"Select Role",style:{width:"100%"}};return l.a.createElement(pr.a,e)}}]),t}(l.a.Component),Er=a(1471),vr=(a(1079),N.a.Content),br=(rt.a.RangePicker,function(e){var t=Object(n.useState)({firstName:"",lastName:"",status:"",email:"",mobile:"",empId:"",department:"",role:["0"],startDate:"",endDate:""}),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(m.g)(),u=Object(n.useState)(!1),d=Object(o.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(!1),f=Object(o.a)(h,2),E=f[0],v=f[1],b=Object(n.useState)(!1),y=Object(o.a)(b,2),O=y[0],j=y[1],D=Object(n.useState)(!1),k=Object(o.a)(D,2),I=k[0],x=k[1],T=function(e){s(Object(M.a)({},r,Object(et.a)({},e.target.id,e.target.value)))},A=function(e,t){s(Object(M.a)({},r,Object(et.a)({},t,e)))},U=function(e){return e&&e<ke()().startOf("day")};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(vr,{className:"w-100"},l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/addemployee"},l.a.createElement(nt.a.Item,null,"Add Employee")),l.a.createElement(nt.a.Item,null,"Create Manually"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Manually")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(C.a,{spinning:E,size:"large"},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:""},p&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"First Name",value:r.firstName},l.a.createElement(lt.a.Item,{className:"required",name:"firstName"},l.a.createElement(_.a,{className:"input-control",id:"firstName",htmlFor:"firstName",onChange:function(e){return T(e)},autoComplete:"off"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Last Name",value:r.lastName},l.a.createElement(lt.a.Item,{className:"required",name:"lastName",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",id:"lastName",htmlFor:"lastName",onChange:function(e){return T(e)},autoComplete:"off"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ie,value:r.email},l.a.createElement(lt.a.Item,{className:"required",name:"email",validateStatus:"success"},l.a.createElement(_.a,{type:"email",className:"input-control",id:"email",htmlFor:"email",value:r.email,onChange:function(e){return T(e)},onBlur:function(e){return function(e){/\S+@\S+\.\S+/.test(e.target.value)?j(!1):j(!0)}(e)},autoComplete:"off"}),O&&l.a.createElement(st.a,{message:gt,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(mt,{label:Te,value:r.mobile},l.a.createElement(lt.a.Item,{className:"required",name:"mobile",validateStatus:"success"},l.a.createElement(kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:r.mobile,onChange:function(e){s(Object(M.a)({},r,{mobile:e}))},onBlur:function(e){r.mobile.length>10||/^\+\d$/.test(e.target.value)?x(!1):x(!0)},autoComplete:"off"}),I&&l.a.createElement(st.a,{message:ht,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:r.status},l.a.createElement(lt.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please select status"}]},l.a.createElement(ot.a,{className:"input-control w-100",htmlFor:"status",onSelect:function(e){return function(e,t){s(Object(M.a)({},r,Object(et.a)({},t,e)))}(e,"status")}},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive"))))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"Start Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required",rules:[{required:!0,message:vt}]},l.a.createElement(rt.a,{className:"w-100 ",name:"startDate",value:r.startDate,onChange:function(e){return A(e,"startDate")},disabledDate:U})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"End Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(rt.a,{className:"w-100 ",name:"endDate",value:r.endDate,onChange:function(e){return A(e,"endDate")},disabledDate:U})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(fr,{handleRoleOnSelect:function(e,t,a){"1"===a.triggerValue&&a.checked?s(Object(M.a)({},r,{role:["0","1","2","3"]})):"2"!==a.triggerValue||a.checked?"3"!==a.triggerValue||a.checked?s(Object(M.a)({},r,{role:e})):s(Object(M.a)({},r,{role:e.filter((function(e){return"1"!==e&&"3"!==e}))})):s(Object(M.a)({},r,{role:e.filter((function(e){return"1"!==e&&"2"!==e}))}))},roles:r.role}),l.a.createElement(Er.a,{className:"down-arrow-ico multiselect-arrow"})))),l.a.createElement(lt.a.Item,{className:"mt-5"},l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",className:"mr-4",onClick:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(r.firstName&&r.lastName&&r.email&&r.mobile&&r.status&&r.startDate){var t=r.endDate?{first_name:r.firstName,last_name:r.lastName,email:r.email,mobile_number:"+"+r.mobile,is_org_cc_user:r.role.includes("2")?1:0,is_idb_user:r.role.includes("3")?1:0,is_super_user:r.role.includes("1")?1:0,start_date:r.startDate?ke()(r.startDate).format("DD-MM-YYYY"):"",end_date:r.endDate?ke()(r.endDate).format("DD-MM-YYYY"):"",status_id:parseInt(r.status)}:{first_name:r.firstName,last_name:r.lastName,email:r.email,mobile_number:"+"+r.mobile,is_org_cc_user:r.role.includes("2")?1:0,is_idb_user:r.role.includes("3")?1:0,is_super_user:r.role.includes("1")?1:0,start_date:r.startDate?ke()(r.startDate).format("DD-MM-YYYY"):"",status_id:parseInt(r.status)};g(!1),v(!0),P.a.post(R+"createUser/",t,e).then((function(){window.location="/orgcc/manageemployees"}))}else g(!0)}},"Save"),l.a.createElement(Ne.a,{type:"secondary",onClick:function(){i.push("/orgcc/addemployee")}},ae))))))))))))}),yr=a(624),Or=a(1456),_r=a(59),Nr=a.n(_r),jr=function(e){var t=e.file,a=e.handleStepOneUpload,n=e.handleBeforeUpload,r=e.handleOnRemove,s=e.handlePollImagePreview,o=e.handleCancel,i=e.poll;return l.a.createElement(l.a.Fragment,null,l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:t,onChange:function(e){return a(e,"pollDocument")},beforeUpload:function(e){return n(e,"pollDocument")},onRemove:function(e){return r(e,"pollImageValidation")},onPreview:function(e){return s(e)},className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif, application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel, .csv "},l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"})," Document Or Image")),l.a.createElement(_t.a,{className:"modal-openline",visible:i.previewVisible,title:i.previewTitle,centered:!0,onOk:function(e){return o(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:i.previewImage})))},wr=a(103),Sr=a.n(wr),Cr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={tags:[],inputVisible:!1,inputValue:"",editInputIndex:-1,editInputValue:""},a.handleClose=function(e){var t=a.state.tags.filter((function(t){return t!==e}));a.props.setSingleChoiceResponse(t),a.setState({tags:t})},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue,t=a.state.tags;e&&-1===t.indexOf(e)&&(t=[].concat(Object(tt.a)(t),[e])),a.setState({tags:t,inputVisible:!1,inputValue:""}),a.props.setSingleChoiceResponse(t)},a.handleEditInputChange=function(e){a.setState({editInputValue:e.target.value})},a.handleEditInputConfirm=function(){a.setState((function(e){var t=e.tags,a=e.editInputIndex,n=e.editInputValue,l=Object(tt.a)(t);return l[a]=n,{tags:l,editInputIndex:-1,editInputValue:""}}))},a.saveInputRef=function(e){a.input=e},a.saveEditInputRef=function(e){a.editInput=e},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pollResponse;this.setState({tags:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tags,n=t.inputVisible,r=t.inputValue,s=t.editInputIndex,o=t.editInputValue;return l.a.createElement(l.a.Fragment,null,a.map((function(t,a){if(s===a)return l.a.createElement(_.a,{ref:e.saveEditInputRef,key:t,size:"small",className:"tag-input",value:o,onChange:e.handleEditInputChange,onBlur:e.handleEditInputConfirm,onPressEnter:e.handleEditInputConfirm});var n=t.length>20,r=l.a.createElement(tn.a,{className:"".concat(Nr.a.edit_tag),key:t,closable:!e.props.disabled,onClose:function(){return e.handleClose(t)}},l.a.createElement("span",{onDoubleClick:function(n){e.setState({editInputIndex:a,editInputValue:t},(function(){e.editInput.focus()})),n.preventDefault()}},n?"".concat(t.slice(0,20),"..."):t));return n?l.a.createElement(da.a,{title:t,key:t},r):r})),n&&l.a.createElement(_.a,{ref:this.saveInputRef,type:"text",size:"small",className:"tag-input",value:r,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),l.a.createElement(S.a,{span:12,className:"mb-4"},l.a.createElement(tn.a,{onClick:this.showInput,className:"".concat(Nr.a.add_tag)},l.a.createElement(Ne.a,{type:"link",className:"link pl-0",onClick:this.showModal,disabled:this.props.disabled},l.a.createElement("span",{className:"icon icon-add-filled"}),"Add Option"))))}}]),t}(n.Component),Dr=a(87),kr=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.props.pollData.pollStartDate&&a.props.pollData.pollEndDate?(a.props.showError(!1),a.setState({visible:!1}),a.props.onPublish()):a.props.showError(!0)},a.handleCancel=function(){a.setState({visible:!1})},a.disabledStartDate=function(e){return e&&e<ke()().startOf("day")},a.disabledEndDate=function(e){return a.props.pollData.pollStartDate?e&&e<ke()(a.props.pollData.pollStartDate):e&&e<ke()().startOf("day")},a.range=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a},a.onChangeStartDate=function(e){a.props.handlePollStartDatePickerChange(e,"pollStartDate")},a.onChangeEndDate=function(e){a.props.handlePollEndDatePickerChange(e,"pollEndDate")},a.onChangeStartTime=function(e){var t=e.target.value;a.setState({startTimeError:!1,startTime:t})},a.onBlurStartTime=function(e){new Date>a.state.startTime?a.setState({startTimeError:!0,startTime:a.props.pollData.pollStartTime}):(a.setState({startTimeError:!1}),a.props.handlePollStartTimePickerChange(a.state.startTime,"pollStartTime"))},a.onChangeEndTime=function(e){var t=e.target.value;a.setState({endTimeError:!1,endTime:t})},a.onBlurEndTime=function(e){new Date>a.state.endTime?a.setState({endTimeError:!0,endTime:a.props.pollData.pollEndTime}):(a.setState({endTimeError:!1}),a.props.handlePollEndTimePickerChange(a.state.endTime,"pollEndTime"))},a.state={visible:!1,startTimeError:!1,endTimeError:!1,startTime:new Date,endTime:new Date},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{type:"primary",className:"md mr-4",onClick:this.showModal},"Schedule"),l.a.createElement(_t.a,{title:"Publish Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Publish",cancelText:"Cancel"},l.a.createElement(lt.a,{className:"input-md floating-label w-100"},l.a.createElement(S.a,{span:24,className:"gutter-row"}," ",this.props.error&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:vt,type:"error",showIcon:!0})),l.a.createElement("div",{className:"mb-4 subtext-md"},Pe,l.a.createElement("span",{className:"pr-1 pr-1 font-weight-md6"}," ",this.props.pollData.pollName),"Poll"),l.a.createElement(mt,{label:"Select Start Date",value:"sDate"},l.a.createElement(lt.a.Item,{name:"sDate",rules:[{required:!0,message:vt}]},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:"24",lg:12,className:"gutter-row"},l.a.createElement(rt.a,Object(et.a)({value:this.props.pollData.pollStartDate,disabledDate:this.disabledStartDate,onChange:function(t){return e.onChangeStartDate(t)},className:"w-100",name:"sDate"},"className","required mb-3")),this.state.startTimeError&&l.a.createElement(st.a,{message:bt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:"24",lg:12},l.a.createElement(Dr.a,{value:this.state.startTime,onChange:this.onChangeStartTime}))))),l.a.createElement(mt,{label:"Select End Date",value:"eDate"},l.a.createElement(lt.a.Item,{name:"eDate",rules:[{required:!0,message:vt}]},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:"24",lg:12,className:"gutter-row"},l.a.createElement(rt.a,Object(et.a)({value:this.props.pollData.pollEndDate,disabledDate:this.disabledEndDate,onChange:function(t){return e.onChangeEndDate(t)},className:"w-100",name:"eDate"},"className","required mb-3")),this.state.endTimeError&&l.a.createElement(st.a,{message:bt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:"24",lg:12},l.a.createElement(Dr.a,{value:this.state.endTime,onChange:this.onChangeEndTime})))))))))}}]),t}(n.Component),Ir=a(1472),xr=a(164),Tr=a.n(xr),Ar={formatAsYYYYMMDDHHmmss:function(e){return Tr()(e,"MM/DD/YYYY").format("YYYY-MM-DD[T]HH:mm:ss")},formatAsHHmmss:function(e){return Tr()(e).format("HH:mm:ss")},formatAsMMMDDYYYY:function(e){return Tr()(e).format("MM-DD-YYYY")},formatAsHHmm:function(e){return Tr()(e).format("HH:mm")},formatAsYYYYMMDD:function(e){return Tr()(e).format("YYYY-MM-DD")},formatAsDDMMYYYY:function(e){return Tr()(e).format("DD-MM-YYYY")},format:function(e){return Tr()(e).format()}},Ur=a(104),Mr=a.n(Ur),Fr=a(105),Pr=a.n(Fr),Rr=a(106),Yr=a.n(Rr),Lr=a(107),Br=a.n(Lr),Hr={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){}},zr=N.a.Content,Vr=a(48),qr=function(e){var t,a=e.poll,r=e.setPollsDate,s=e.backtoEdit,i=e.isImage,m=e.data,u=e.attachmentName,d=e.showError,p=e.error,g=Object(n.useState)(!1),h=Object(o.a)(g,2),f=h[0],E=h[1],b=Object(n.useState)({pollName:a.pollName,pollHelpText:a.pollHelpText,pollDocument:a.pollDocument,showResult:a.showResult,pollChartType:a.pollChartType,pollQuestion:a.pollQuestion,pollQuestionType:a.pollQuestionType,pollRatingResponse:a.pollRatingResponse,pollStartDate:a.pollStartDate,pollEndDate:a.pollEndDate,attachmentName:a.attachmentName,pollStartTime:a.pollStartTime,pollEndTime:a.pollEndTime,pollResponse:a.pollResponse,pollImageValidation:a.pollImageValidation,previewVisible:a.previewVisible,previewImage:a.previewImage,previewTitle:a.previewTitle,pollRatingType:a.pollRatingType}),y=Object(o.a)(b,2),O=y[0],_=y[1],j=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:m}),l.a.createElement(zr,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(nt.a.Item,null,"Polls")),l.a.createElement(nt.a.Item,null,"Preview Poll"))),l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Preview Poll"),l.a.createElement(S.a,{span:24,lg:18,className:"d-flex align-items-center justify-content-end"})),l.a.createElement(C.a,{spinning:f,size:"large"},l.a.createElement(S.a,{span:24,className:"mb-3 px-3 px-md-0 ".concat(Nr.a.poll_info)},l.a.createElement("h6",null,a.pollName,l.a.createElement(da.a,{placement:"top",title:a.pollHelpText},l.a.createElement("span",{className:"pl-2 icon icon-info-circle"})))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},a.pollQuestion),l.a.createElement(w.a,{className:"preview-que",disabled:!0},l.a.createElement("div",{className:"d-flex flex-column flex-gap chk-opt ".concat(Nr.a.rating_img_wrapper)},"1"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(it.a,null,e)})):"2"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(ct.a,null,e)})):"3"===a.pollQuestionType?"1"===a.pollRatingType?l.a.createElement(Sr.a,Object.assign({},Hr,{value:a.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return handlePollOnSelect(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===a.pollRatingType?l.a.createElement("img",{src:Yr.a,alt:"send message"}):"3"===a.pollRatingType?l.a.createElement("img",{src:Mr.a,alt:"send message"}):"4"===a.pollRatingType?l.a.createElement("img",{src:Pr.a,alt:"send message"}):"5"===a.pollRatingType?l.a.createElement("img",{className:"".concat(Nr.a.steps_img),src:Br.a,alt:"send message"}):null:null)),l.a.createElement(w.a,{className:"mt-2"},l.a.createElement("div",{class:"ant-upload-list-item"},l.a.createElement("div",{class:"ant-upload-list-item-info"},l.a.createElement("span",{class:"ant-upload-span"},l.a.createElement("div",{class:"ant-upload-text-icon"},l.a.createElement(Ir.a,null)),l.a.createElement("span",{class:"ant-upload-list-item-name",title:"add-user-doc"},l.a.createElement(cn.a,{listType:"picture",fileList:O.pollDocument,onPreview:function(e){return function(e){var t,a,n,l,r,s;return U.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!((null===(t=e.name)||void 0===t?void 0:t.includes("jpeg"))||(null===(a=e.name)||void 0===a?void 0:a.includes("jpg"))||(null===(n=e.name)||void 0===n?void 0:n.includes("png"))||(null===(l=e.name)||void 0===l?void 0:l.includes("gif"))||(null===(r=e.name)||void 0===r?void 0:r.includes("jfif"))||(null===(s=e.name)||void 0===s?void 0:s.includes("tiff")))){o.next=7;break}return o.next=3,U.a.awrap(j(e.originFileObj));case 3:e.preview=o.sent,_(Object(M.a)({},O,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})),o.next=8;break;case 7:return o.abrupt("return",!1);case 8:case"end":return o.stop()}}))}(e)}}),l.a.createElement(_t.a,{visible:O.previewVisible,title:O.previewTitle,centered:!0,onOk:function(e){return _(Object(M.a)({},O,{previewVisible:!1}))},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:O.previewImage}))),l.a.createElement("span",{class:"ant-upload-list-item-card-actions"},l.a.createElement("button",{type:"button",class:"ant-btn"}))))))))),l.a.createElement("div",{className:"mt-5 px-3"},l.a.createElement(Ne.a,(t={type:"secondary"},Object(et.a)(t,"type","secondary"),Object(et.a)(t,"htmlType","submit"),Object(et.a)(t,"className","mr-4"),Object(et.a)(t,"onClick",(function(){s(a)})),t),te),l.a.createElement(kr,{pollData:a,handlePollStartDatePickerChange:function(e,t){r(e,t)},handlePollEndDatePickerChange:function(e,t){r(e,t)},handlePollStartTimePickerChange:function(e,t){r(e,t)},handlePollEndTimePickerChange:function(e,t){r(e,t)},onPublish:function(){var e,t=JSON.parse(v("user")),n=Ce();E(!0);var l=[],r={};a.pollResponse.map((function(e){l.push({option_text:e})})),r=i?{create_poll:{title:a.pollName,help_text:a.pollHelpText,image:a.pollDocument&&a.pollDocument[0]?a.pollDocument[0].base64:"",show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,image_name:u,poll_question_type:parseInt(a.pollQuestionType),question:a.pollQuestion,poll_question_rating_type:a.pollRatingType?parseInt(a.pollRatingType):"",start_date:Ar.formatAsDDMMYYYY(a.pollStartDate),start_time:Ar.formatAsHHmmss(a.pollStartTime),end_date:Ar.formatAsDDMMYYYY(a.pollEndDate),end_time:Ar.formatAsHHmmss(a.pollEndTime),created_by:parseInt(Vr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Vr.enc.Utf8))},option:l}:0===(null===(e=a.pollDocument)||void 0===e?void 0:e.length)?{create_poll:{title:a.pollName,help_text:a.pollHelpText,show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,poll_question_type:parseInt(a.pollQuestionType),poll_question_rating_type:a.pollRatingType?parseInt(a.pollRatingType):"",question:a.pollQuestion,start_date:Ar.formatAsDDMMYYYY(a.pollStartDate),start_time:Ar.formatAsHHmmss(a.pollStartTime),end_date:Ar.formatAsDDMMYYYY(a.pollEndDate),end_time:Ar.formatAsHHmmss(a.pollEndTime),created_by:parseInt(Vr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Vr.enc.Utf8))},option:l}:{create_poll:{title:a.pollName,help_text:a.pollHelpText,document:a.pollDocument&&a.pollDocument[0]?a.pollDocument[0].base64:"",document_name:u,show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,poll_question_type:parseInt(a.pollQuestionType),poll_question_rating_type:a.pollRatingType?parseInt(a.pollRatingType):"",question:a.pollQuestion,start_date:Ar.formatAsDDMMYYYY(a.pollStartDate),start_time:Ar.formatAsHHmmss(a.pollStartTime),end_date:Ar.formatAsDDMMYYYY(a.pollEndDate),end_time:Ar.formatAsHHmmss(a.pollEndTime),created_by:parseInt(Vr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Vr.enc.Utf8))},option:l};var s={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"poll/",r,s).then((function(){E(!1),window.location="/orgcc/pollsdirectory"})).catch((function(e){E(!1)}))},showError:d,error:p}))))))))))},Qr={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",emptyIcon:l.a.createElement("i",{class:"far fa-smile"}),fullIcon:l.a.createElement("i",{class:"fa fa-smile"}),onChange:function(e){}},Gr=_.a.TextArea,Wr=N.a.Content,Kr=function(e){var t,a,r,s=Object(m.g)(),i=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:"",showResult:!1,pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingResponse:0,pollStartDate:"",pollEndDate:"",attachmentName:"",pollStartTime:new Date,pollEndTime:new Date,pollResponse:[],pollImageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:"",pollRatingType:""}),u=Object(o.a)(i,2),d=u[0],p=u[1],g=Object(n.useState)(""),h=Object(o.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(!1),b=Object(o.a)(v,2),y=b[0],O=b[1],j=Object(n.useState)(!1),C=Object(o.a)(j,2),D=C[0],k=C[1],I=Object(n.useState)(!1),x=Object(o.a)(I,2),T=x[0],A=x[1],F=Object(n.useState)(!0),Y=Object(o.a)(F,2),L=Y[0],B=Y[1],H=Object(n.useState)(!1),z=Object(o.a)(H,2),V=z[0],q=z[1],Q=Object(n.useState)(""),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=lt.a.useForm(),$=Object(o.a)(J,1)[0],Z=Object(n.useState)(!1),X=Object(o.a)(Z,2),ee=X[0],te=X[1],ne=function(e){p(Object(M.a)({},d,Object(et.a)({},e.target.id,e.target.value)))},le=function(e,t){var a;("3"===e&&"pollQuestionType"===t?function(e){showResult&&"3"===e&&"4"!=d.pollChartType&&A(!0)}(e):A(!1),"pollRatingType"===t)?p(Object(M.a)({},d,(a={},Object(et.a)(a,t,e),Object(et.a)(a,"pollResponse",["1","2","3","4","5"]),a))):p(Object(M.a)({},d,Object(et.a)({},t,e)))},re=function(e){p(Object(M.a)({},d,Object(et.a)({},"pollResponse",e)))},se=function(e){var t=e.includes("image");q(!!t)},oe=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))};return l.a.createElement(l.a.Fragment,null,D?l.a.createElement(qr,{poll:d,setPollsDate:function(e,t){p(Object(M.a)({},d,Object(et.a)({},t,e)))},backtoEdit:function(e){k(!1),p(Object(M.a)({},d,{pollName:e.pollName,pollHelpText:e.pollHelpText,pollDocument:e.pollDocument,showResult:e.showResult,pollChartType:e.pollChartType,pollQuestion:e.pollQuestion,pollQuestionType:e.pollQuestionType,pollRatingResponse:e.pollRatingResponse,pollStartDate:e.pollStartDate,pollEndDate:e.pollEndDate,pollResponse:e.pollResponse})),$.setFieldsValue({pollHelpText:e.pollHelpText,pollQuestion:e.pollQuestion})},showError:O,isImage:V,attachmentName:W,data:e,error:y}):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(Wr,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(nt.a.Item,null,"Polls")),l.a.createElement(nt.a.Item,null,"Create Poll"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Poll")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",form:$},y&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),ee&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please add options",type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Poll Title",value:d.pollName},l.a.createElement(Gr,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:d.pollName,id:"pollName",onChange:function(e){return ne(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"checkpoll/",{title:e.target.value},t).then((function(e){e.data&&E(e.data[0])}))}(e)},autoComplete:"off",className:"required ".concat(Nr.a.sm_textarea)}),"status: false"===f&&d.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&d.pollName.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==f&&l.a.createElement(st.a,{message:"Sorry! This Poll title already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Description",value:d.pollHelpText},l.a.createElement(lt.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",htmlFor:"helptext",id:"pollHelpText",name:"pollHelpText",value:d.pollHelpText,autoComplete:"off",maxLength:500,onChange:function(e){return ne(e)}})))),l.a.createElement(S.a,{span:24,className:"gutter-row mt-3"},l.a.createElement("h6",null,"Upload"),l.a.createElement(lt.a.Item,{name:"upload",className:"upload-list"},l.a.createElement(jr,{file:d.pollDocument,handleStepOneUpload:function(e,t){"removed"===e.file.status&&B(!0);var a=e.fileList.slice(-1);se(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),K(e.file.name),p(Object(M.a)({},d,Object(et.a)({},t,a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;s?B(!0):(B(!1),yr.b.error("".concat(e.name," is not a supported format file type.")));var o="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,i="application/pdf"===e.type||a||n||l||r,c=e.size/1024/1024<5,m=e.size/1024/1024<10;return o&&(!c&&o?(B(!1),yr.b.error("Image must smaller than 5MB!")):B(!0)),i&&(!m&&i?(B(!1),yr.b.error("Document must smaller than 10MB!")):B(!0)),s&&c||m},handleOnRemove:function(e,t){p(Object(M.a)({},d,{pollImageValidation:!0}))},handlePollImagePreview:function(e){var t,a,n,l,r,s;return U.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!((null===(t=e.name)||void 0===t?void 0:t.includes("jpeg"))||(null===(a=e.name)||void 0===a?void 0:a.includes("jpg"))||(null===(n=e.name)||void 0===n?void 0:n.includes("png"))||(null===(l=e.name)||void 0===l?void 0:l.includes("gif"))||(null===(r=e.name)||void 0===r?void 0:r.includes("jfif"))||(null===(s=e.name)||void 0===s?void 0:s.includes("tiff")))){o.next=7;break}return o.next=3,U.a.awrap(oe(e.originFileObj));case 3:e.preview=o.sent,p(Object(M.a)({},d,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})),o.next=8;break;case 7:return o.abrupt("return",!1);case 8:case"end":return o.stop()}}))},handleCancel:function(e){return p(Object(M.a)({},d,{previewVisible:!1}))},poll:d}))))),l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:8,lg:8,xl:6,className:"mb-3 t-2 mb-y-0"},l.a.createElement(lt.a.Item,{name:"showresult",label:"Show result to users",className:"mb-0"},l.a.createElement(Or.a,{id:"showResult",checked:d.showResult,onChange:function(e,t){return function(e,t){p(Object(M.a)({},d,Object(et.a)({},t.target.id,e)))}(e,t)}}))),d.showResult?l.a.createElement(S.a,{span:24,md:10,lg:8},l.a.createElement(mt,{label:"Display final results as",value:d.pollChartType},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"result"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(t={className:"input-control",htmlFor:"result"},Object(et.a)(t,"className","required"),Object(et.a)(t,"value",d.pollChartType),Object(et.a)(t,"onSelect",(function(e){return le(e,"pollChartType")})),t),l.a.createElement(ot.a.Option,{value:"1"},"Pie Chart"),l.a.createElement(ot.a.Option,{value:"3"},"Bar Chart"),l.a.createElement(ot.a.Option,{value:"4"},"Star Format"))))),T&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please select the Chart type as Star",type:"error",showIcon:!0}))):l.a.createElement(S.a,null))))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"d-block"},l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,lg:8,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(mt,{label:"Question Type",value:d.pollQuestionType},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(a={className:"",htmlFor:"questiontype"},Object(et.a)(a,"className","required"),Object(et.a)(a,"id","pollQuestionType"),Object(et.a)(a,"value",d.pollQuestionType),Object(et.a)(a,"onSelect",(function(e){return le(e,"pollQuestionType")})),a),l.a.createElement(ot.a.Option,{value:"1",disabled:""!==d.pollChartType&&"4"===d.pollChartType},"Select Single"),l.a.createElement(ot.a.Option,{value:"2",disabled:""!==d.pollChartType&&"4"===d.pollChartType},"Select Multiple"),l.a.createElement(ot.a.Option,{value:"3",disabled:""!==d.pollChartType&&"4"!==d.pollChartType},"Rating Type")))))),"3"===d.pollQuestionType?l.a.createElement(S.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(mt,{label:"Rating Type",value:d.pollRatingType},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(r={className:"",htmlFor:"ratingtype"},Object(et.a)(r,"className","required"),Object(et.a)(r,"id","pollRatingType"),Object(et.a)(r,"value",d.pollRatingType),Object(et.a)(r,"onSelect",(function(e){return le(e,"pollRatingType")})),r),l.a.createElement(ot.a.Option,{value:"1"},"Stars"),l.a.createElement(ot.a.Option,{value:"2"},"Smiley"),l.a.createElement(ot.a.Option,{value:"3"},"Thermometer"),l.a.createElement(ot.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(ot.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Question",value:d.pollQuestion},l.a.createElement(lt.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:d.pollQuestion,value:d.pollQuestion,autoComplete:"off",maxLength:500,onChange:function(e){return ne(e)}})))),l.a.createElement(S.a,{span:24,md:12,className:"mt-4 ".concat(Nr.a.rating_img_wrapper)},"3"===d.pollQuestionType&&d.pollRatingType?"1"===d.pollRatingType?l.a.createElement(Sr.a,Object.assign({},Qr,{value:d.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return le(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===d.pollRatingType?l.a.createElement("img",{className:"font-size",src:Yr.a,alt:"send message"}):"3"===d.pollRatingType?l.a.createElement("img",{className:"font-size",src:Mr.a,alt:"send message"}):"4"===d.pollRatingType?l.a.createElement("img",{className:"font-size",src:Pr.a,alt:"send message"}):"5"===d.pollRatingType?l.a.createElement("img",{className:"font-size ".concat(Nr.a.steps_img),src:Br.a,alt:"send message"}):null:"1"===d.pollQuestionType?l.a.createElement("div",null,l.a.createElement(Cr,{setSingleChoiceResponse:re,pollResponse:d.pollResponse})):"2"===d.pollQuestionType?l.a.createElement(Cr,{pollResponse:d.pollResponse,setSingleChoiceResponse:re}):null))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ne.a,{type:"secondary",htmlType:"submit",onClick:function(){s.push("/orgcc/pollsdirectory")},className:"mr-4"},ae),l.a.createElement(Ne.a,{type:"primary",className:"md",onClick:function(e){e.preventDefault(),L&&d.pollName&&d.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&d.pollHelpText&&d.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&d.pollQuestionType&&d.pollQuestionType.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&d.pollQuestion?0===d.pollResponse.length?(te(!0),k(!1),O(!1)):d.showResult||"3"===d.pollQuestionType?!d.pollChartType&&d.showResult?(O(!0),k(!1),te(!1)):"3"!==d.pollQuestionType||d.pollRatingType?(O(!1),k(!0),te(!1)):(O(!0),k(!1),te(!1)):(O(!1),k(!0),te(!1)):(O(!0),k(!1),te(!1))}},"Preview"))))))))))))},Jr=a(608),$r=a.n(Jr),Zr=N.a.Content,Xr=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0}),l.a.createElement(Zr,{"data-test":"Broadcast",className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Manage Broadcast")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"c-vector-area d-flex justify-content-center"},l.a.createElement("img",{src:$r.a,alt:"Create Broadcast"})),l.a.createElement("p",{className:"text-center pt-3"},"Create broadcasts and publish them for all employees from here."),l.a.createElement(w.a,{className:"d-flex justify-content-center"},l.a.createElement($e.a,{className:"mt-1"})),l.a.createElement(S.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ne.a,{type:"primary"},"Create Broadcast")))))))))))},es=a(609),ts=a.n(es),as=(a(1324),a(151)),ns=a.n(as);a(1325),a(1326),a(1327);window.jQuery=ns.a,window.jquery=ns.a,window.$=ns.a;var ls=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"onChange",value:function(e){}},{key:"render",value:function(){return l.a.createElement("div",{className:"editor"},l.a.createElement(ts.a,{value:this.props.value,options:{height:350,dialogsInBody:!0,toolbar:[["style",["bold","italic","underline"]],["font",["strikethrough","superscript","subscript"]],["insert",["link"]],["para",["ul"]]]},onChange:this.props.onChange}))}}]),t}(n.Component),rs=function(e){var t=e.file,a=e.handleStepOneUpload,n=e.handleBeforeUpload,r=e.handleOnRemove,s=e.handlePollImagePreview,o=e.handleCancel,i=e.broadcast,c=e.uploadtitle,m=e.disabledbutton;return l.a.createElement(l.a.Fragment,null,l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:t,maxCount:4,onChange:function(e){return a(e,"Image"===c?"broadCastImage":"broadCastDocument")},beforeUpload:function(e){return n(e,"Image"===c?"broadCastImage":"broadCastDocument")},onRemove:function(e){return r(e,"pollImageValidation")},onPreview:function(e){return s(e)},className:"upload-list-inline c-upload upload-list-block",accept:"Image"===c?"image/png, image/jpeg, image/gif":"application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel, .csv "},l.a.createElement(Ne.a,{type:"link",className:"link pl-0",disabled:m},"Image"===c?l.a.createElement("span",{className:"icon icon-image pr-2"}):l.a.createElement("span",{className:"icon icon-doc pr-2"}),c)),l.a.createElement($e.a,{type:"vertical"}),l.a.createElement(_t.a,{className:"modal-openline",visible:i.previewVisible,title:i.previewTitle,centered:!0,onOk:function(e){return o(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:i.previewImage})))},ss=N.a.Content,os=_.a.TextArea,is=function(e){var t,a=Object(n.useState)({messageTittle:"",meesage:"",startDate:"",startTime:new Date,attachmentType:"",attachments:[],broadCastImage:[],broadCastDocument:[],previewVisible:!1,previewImage:"",previewTitle:"",mapLoction:""}),r=Object(o.a)(a,2),s=r[0],i=r[1],m=Object(n.useState)(!0),u=Object(o.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(!1),h=Object(o.a)(g,2),f=(h[0],h[1]),E=Object(n.useState)(!1),v=Object(o.a)(E,2),b=v[0],y=v[1],O=Object(n.useState)(!1),_=Object(o.a)(O,2),j=_[0],D=_[1],k=Object(n.useState)(!1),I=Object(o.a)(k,2),x=I[0],T=I[1],A=Object(n.useState)(""),F=Object(o.a)(A,2),Y=F[0],L=F[1],B=Object(n.useState)(!1),H=Object(o.a)(B,2),z=H[0],V=H[1],q=function(){T(!0);var e,t,a,n,l={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r={};s.mapLoction?r={documents:null===(e=s.broadCastDocument)||void 0===e?void 0:e.map((function(e){return{url:e.base64,name:e.name}})),images:null===(t=s.broadCastImage)||void 0===t?void 0:t.map((function(e){return{url:e.base64,name:e.name}})),location:s.mapLoction}:r={documents:null===(a=s.broadCastDocument)||void 0===a?void 0:a.map((function(e){return{url:e.base64,name:e.name}})),images:null===(n=s.broadCastImage)||void 0===n?void 0:n.map((function(e){return{url:e.base64,name:e.name}}))};var o={};o=0!==s.broadCastDocument.length||0!==s.broadCastImage.length||s.mapLoction?{title:s.messageTittle,message:s.meesage,attachments:r,scheduled_date:Ar.formatAsDDMMYYYY(s.startDate),scheduled_time:Ar.formatAsHHmmss(s.startTime)}:{title:s.messageTittle,message:s.meesage,scheduled_date:Ar.formatAsDDMMYYYY(s.startDate),scheduled_time:Ar.formatAsHHmmss(s.startTime)},P.a.post(R+"broadcast/",o,l).then((function(){T(!1),window.location="/orgcc/broadcastmessages"})).catch((function(e){e.message.includes("400")&&(V(!0),L(e.response.data.title)),T(!1)}))},Q=function(e){var t=e.includes("image");f(!!t)},G=function(e){var t=s.broadCastDocument.length,a=s.broadCastImage.length+t;D("removed"===e?a-1===5:4===a)},W=function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.awrap(J(e.originFileObj));case 2:e.preview=t.sent,i(Object(M.a)({},s,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},K=function(e){return i(Object(M.a)({},s,{previewVisible:!1}))},J=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},$=function(e,t){};return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(ss,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/broadcastmessages"},l.a.createElement(nt.a.Item,null,"Manage Broadcast Messages")),l.a.createElement(nt.a.Item,null,"Create Broadcast Message"))),l.a.createElement(C.a,{spinning:x,size:"large"},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Broadcast Message")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other"},b&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),z&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:Y,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message Title",value:s.messageTittle},l.a.createElement(lt.a.Item,{className:"required",name:"message title",validateStatus:"success"},l.a.createElement(os,{showCount:!0,className:"input-control",id:"messageTittle",name:"messageTittle",htmlFor:"helptext",maxLength:80,value:s.messageTittle,autoComplete:"off",onChange:function(e){!function(e){i(Object(M.a)({},s,Object(et.a)({},e.target.id,e.target.value)))}(e)}})))))),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message",value:s.message},l.a.createElement(lt.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(ls,{value:s.meesage,onChange:function(e){return function(e,t){i((function(a){return Object(M.a)({},a,Object(et.a)({},t,e))}))}(e,"meesage")},id:"message"})))))),l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,{className:"align-items-center d-flex",gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(mt,{label:"Schedule Date",value:"date"},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"date"},l.a.createElement(rt.a,{value:s.startDate,disabledDate:function(e){return e&&e<ke()().startOf("day")},onChange:function(e){return function(e,t){i(Object(M.a)({},s,Object(et.a)({},t,e)))}(e,"startDate")}})))),l.a.createElement(S.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(mt,{label:"Schedule Time",value:"date"},l.a.createElement(lt.a.Item,{className:"required timepicker mb-0",name:"time"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Dr.a,{value:s.startTime,onChange:function(e){return function(e,t){var a=e.target.value;i(Object(M.a)({},s,Object(et.a)({},t,a)))}(e,"startTime")}}))))),l.a.createElement(S.a,{span:24,className:"6gutter-row mt-3"},!d&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please uplaod correct file format",type:"error",showIcon:!0})),l.a.createElement("h6",null,"Upload"),l.a.createElement("span",null,Ge," "),l.a.createElement(lt.a.Item,{name:"help text",className:"upload-list mt-3"},l.a.createElement(w.a,null,l.a.createElement(rs,{file:s.broadCastImage,handleStepOneUpload:function(e,t){G(),"removed"===e.file.status&&(p(!0),G(e.file.status));var a=e.fileList;Q(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),i(Object(M.a)({},s,Object(et.a)({},t,a)))},handleBeforeUpload:function(e,t){var a="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,n=e.size/1024/1024<10;e.size;return a?p(!0):(p(!1),yr.b.error("".concat(e.name," is not a supported format file type."))),a&&(!n&&a?(p(!1),yr.b.error("Image must smaller than 5MB!")):p(!0)),a&&n},handleOnRemove:$,handlePollImagePreview:W,handleCancel:K,broadcast:s,uploadtitle:"Image",disabledbutton:j}),l.a.createElement(rs,{file:s.broadCastDocument,handleStepOneUpload:function(e,t){G(),"removed"===e.file.status&&(p(!0),G(e.file.status));var a=e.fileList;Q(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)}));i(Object(M.a)({},s,Object(et.a)({},"broadCastDocument",a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".ppt"),r=e.name.includes(".doc"),s=e.name.includes(".csv"),o="application/pdf"===e.type||a||n||l||r||s;o?p(!0):(p(!1),yr.b.error("".concat(e.name," is not a supported format file type.")));var i=e.size/1024/1024<10;return o&&(!i&&o?(p(!1),yr.b.error("Document must smaller than 10MB!")):p(!0)),o&&i},handleOnRemove:$,handlePollImagePreview:W,handleCancel:K,broadcast:s,uploadtitle:"Document",disabledbutton:j}),l.a.createElement(Tn,{setLocation:function(e,t,a){var n=t.toString().substring(0,9),l=e.toString().substring(0,9),r={location_latitude:parseFloat(l),location_longitude:parseFloat(n),address:a};i(Object(M.a)({},s,{mapLoction:r}))},disabledLocation:!!j,locationName:s.mapLoction.address}))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ne.a,(t={type:"secondary"},Object(et.a)(t,"type","secondary"),Object(et.a)(t,"htmlType","submit"),Object(et.a)(t,"className","md mr-4"),Object(et.a)(t,"onClick",(function(e){window.location="/orgcc/broadcastmessages"})),t),ae),l.a.createElement(Ne.a,{type:"primary",onClick:function(e){e.preventDefault(),d&&s.messageTittle&&s.messageTittle.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.meesage&&s.startTime&&s.startDate?(q(),y(!1)):y(!0)}},"Schedule")))))))))))))},cs=N.a.Content,ms=_.a.TextArea,us=function(e){var t,a,r,s,i,c,m,u,d,p,g,h,f,E,v,b,y,O,_,D,k=Object(n.useState)(!1),I=Object(o.a)(k,2),x=I[0],T=I[1],A=Object(n.useState)([]),F=Object(o.a)(A,2),Y=F[0],L=F[1],B=Object(n.useState)([]),H=Object(o.a)(B,2),z=H[0],V=(H[1],lt.a.useForm()),q=Object(o.a)(V,1)[0],Q=Object(n.useState)(!1),G=Object(o.a)(Q,2),W=G[0],K=G[1],J=Object(n.useState)(!0),$=Object(o.a)(J,2),Z=$[0],X=$[1],ee=Object(n.useState)(!1),te=Object(o.a)(ee,2),ne=(te[0],te[1],Object(n.useState)(!1)),le=Object(o.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)(ke()(Ar.formatAsDDMMYYYY(null===e||void 0===e?void 0:null===(t=e.location)||void 0===t?void 0:null===(a=t.state)||void 0===a?void 0:a.scheduled_date),"DD_MM_YYYY")),ie=Object(o.a)(oe,2),ce=ie[0],me=ie[1],de=Object(n.useState)(new Date((null===e||void 0===e?void 0:null===(r=e.location)||void 0===r?void 0:null===(s=r.state)||void 0===s?void 0:s.scheduled_date.split("-")[0])+"-"+(null===e||void 0===e?void 0:null===(i=e.location)||void 0===i?void 0:null===(c=i.state)||void 0===c?void 0:c.scheduled_date.split("-")[1])+"-"+(null===e||void 0===e?void 0:null===(m=e.location)||void 0===m?void 0:null===(u=m.state)||void 0===u?void 0:u.scheduled_date.split("-")[2])+"T"+(null===e||void 0===e?void 0:null===(d=e.location)||void 0===d?void 0:null===(p=d.state)||void 0===p?void 0:p.scheduled_time))),pe=Object(o.a)(de,2),ge=pe[0],he=pe[1],Ee=Object(n.useState)(new Date((null===e||void 0===e?void 0:null===(g=e.location)||void 0===g?void 0:null===(h=g.state)||void 0===h?void 0:h.scheduled_date.split("-")[0])+"-"+(null===e||void 0===e?void 0:null===(f=e.location)||void 0===f?void 0:null===(E=f.state)||void 0===E?void 0:E.scheduled_date.split("-")[1])+"-"+(null===e||void 0===e?void 0:null===(v=e.location)||void 0===v?void 0:null===(b=v.state)||void 0===b?void 0:b.scheduled_date.split("-")[2])+"T"+(null===e||void 0===e?void 0:null===(y=e.location)||void 0===y?void 0:null===(O=y.state)||void 0===O?void 0:O.scheduled_time))),ve=Object(o.a)(Ee,2),be=ve[0],ye=(ve[1],Object(n.useState)({messageTittle:"",meesage:"",attachmentType:"",location_latitude:"",location_longitude:"",broadCastImage:"",broadCastDocument:"",previewVisible:!1,previewImage:"",previewTitle:"",statusId:"",mapLoction:"",brodcastId:"",address:"",pastStartTimeError:!1})),Oe=Object(o.a)(ye,2),_e=Oe[0],je=Oe[1],we=Object(n.useState)(""),Se=Object(o.a)(we,2),De=Se[0],Ie=Se[1],xe=Object(n.useState)(!1),Te=Object(o.a)(xe,2),Ae=Te[0],Ue=Te[1],Me=j.a.useNotification(),Fe=Object(o.a)(Me,2),Pe=Fe[0],Re=Fe[1],Ye=null===(_=e.computedMatch)||void 0===_?void 0:_.params.id;Object(n.useEffect)((function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};T(!0),P.a.get(R+"getBroadcast/".concat(Ye),e).then((function(e){var t,a,n=e.data,l={location_latitude:n.location_latitude?parseFloat(n.location_latitude):n.location_latitude,location_longitude:n.location_longitude?parseFloat(n.location_longitude):n.location_longitude,address:n.address},r=[],s=[];null===(t=n.broadcast_images)||void 0===t||t.map((function(e){var t="broadcastimg"+Math.floor(100*Math.random());r.push({uid:t,name:e.name,status:"done",url:e.url})})),null===(a=n.broadcast_documents)||void 0===a||a.map((function(e){var t="broadcastdoc"+Math.floor(100*Math.random());s.push({uid:t,name:e.name,status:"done",url:e.url})})),je(Object(M.a)({},_e,{brodcastId:n.broadcast_id,messageTittle:n.title,meesage:n.message,location_longitude:n.location_longitude,location_latitude:n.location_latitude,statusId:n.status_id,address:n.address,mapLoction:l,broadCastImage:r,broadCastDocument:s})),n.broadcast_images.length+n.broadcast_documents.length==4&&K(!0),q.setFieldsValue({messageTittle:n.title,message:n.message});var o=[];!function(e){var t=btoa(e),a=new Blob([t]);new Promise((function(e,t){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){return e(n.result)},n.onerror=function(e){return t(e)}}))}(s[0].url),null===r||void 0===r||r.forEach((function(e){He(e.url,(function(t){console.log("base64Img: ",t),o.push({name:e.name,url:t}),console.log("imgArray: ",o),L([].concat(Object(tt.a)(Y),[o]))}))})),T(!1)})).catch((function(e){T(!1)}))}),[]),Object(n.useEffect)((function(){var t,a,n,l,r,s,o,i,c=new Date((null===e||void 0===e?void 0:null===(t=e.location)||void 0===t?void 0:null===(a=t.state)||void 0===a?void 0:a.scheduled_date.split("-")[0])+"-"+(null===e||void 0===e?void 0:null===(n=e.location)||void 0===n?void 0:null===(l=n.state)||void 0===l?void 0:l.scheduled_date.split("-")[1])+"-"+(null===e||void 0===e?void 0:null===(r=e.location)||void 0===r?void 0:null===(s=r.state)||void 0===s?void 0:s.scheduled_date.split("-")[2])+"T"+(null===e||void 0===e?void 0:null===(o=e.location)||void 0===o?void 0:null===(i=o.state)||void 0===i?void 0:i.scheduled_time));he(c)}),[e.location.state.scheduled_time]);var Le=function(){var e=_e.broadCastDocument.length,t=_e.broadCastImage.length+e;"removed"===status?K(t-1===5):K(4===t)},Be=function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.uid.includes("broadcast")){t.next=4;break}He(e.url,(function(t){je(Object(M.a)({},_e,{previewImage:t,previewVisible:!0,previewTitle:e.name}))})),t.next=8;break;case 4:return t.next=6,U.a.awrap(Ve(e.originFileObj));case 6:e.preview=t.sent,je(Object(M.a)({},_e,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 8:case"end":return t.stop()}}))};function He(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}var ze=function(e){return je(Object(M.a)({},_e,{previewVisible:!1}))},Ve=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},qe=function(e,t){};var Qe=function(e,t){var a,n,l,r,s,o,i,c,m,u,d,p,g,h,f,E,v,b,y={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},O={},_=null!==(null===(a=_e.mapLoction)||void 0===a?void 0:a.location_latitude)&&null!==(null===(n=_e.mapLoction)||void 0===n?void 0:n.location_longitude)&&null!==(null===(l=_e.mapLoction)||void 0===l?void 0:l.address),N={};N=(null===(E=(O=0===(null===(r=_e.broadCastDocument)||void 0===r?void 0:r.length)&&0===(null===(s=_e.broadCastImage)||void 0===s?void 0:s.length)&&_?{location:_e.mapLoction}:(null===(o=_e.broadCastDocument)||void 0===o?void 0:o.length)>0&&(null===(i=_e.broadCastImage)||void 0===i?void 0:i.length)>0&&!_?{documents:e,images:t}:(null===(c=_e.broadCastDocument)||void 0===c?void 0:c.length)>0&&0===(null===(m=_e.broadCastImage)||void 0===m?void 0:m.length)&&!_?{documents:e}:0===(null===(u=_e.broadCastDocument)||void 0===u?void 0:u.length)&&(null===(d=_e.broadCastImage)||void 0===d?void 0:d.length)>0&&!_?{images:t}:0===(null===(p=_e.broadCastDocument)||void 0===p?void 0:p.length)&&(null===(g=_e.broadCastImage)||void 0===g?void 0:g.length)>0&&_?{images:t,location:_e.mapLoction}:(null===(h=_e.broadCastDocument)||void 0===h?void 0:h.length)>0&&0===(null===(f=_e.broadCastImage)||void 0===f?void 0:f.length)&&_?{documents:e,location:_e.mapLoction}:{documents:e,images:t,location:_e.mapLoction}).documents)||void 0===E?void 0:E.length)>0||(null===(v=O.images)||void 0===v?void 0:v.length)>0||(null===(b=O.location)||void 0===b?void 0:b.location_latitude)?{title:_e.messageTittle,message:_e.meesage,attachments:O,scheduled_date:Ar.formatAsDDMMYYYY(ce),scheduled_time:Ar.formatAsHHmmss(ge),status_id:_e.statusId}:{title:_e.messageTittle,message:_e.meesage,scheduled_date:Ar.formatAsDDMMYYYY(ce),scheduled_time:Ar.formatAsHHmmss(ge),status_id:_e.statusId},console.log("data",N),P.a.put(R+"broadcast/"+_e.brodcastId+"/",N,y).then((function(){Pe.info({description:"Broadcast message has been updated successfully",placement:"bottomLeft"}),T(!1),window.location="/orgcc/broadcastmessages"})).catch((function(e){e.message.includes("400")&&(Ue(!0),Ie(e.response.data.title)),T(!1)}))},We=function(){T(!0);var e,t=[],a=[];if(_e.broadCastDocument.length>0&&_e.broadCastImage.length>0)_e.broadCastDocument.forEach((function(e){e.uid.includes("broadcastdoc")?z.forEach((function(a){a.uid===e.uid&&t.push(a)})):t.push({name:e.name,url:e.base64})})),null===(e=_e.broadCastImage)||void 0===e||e.forEach((function(e){e.uid.includes("broadcastimg")?Y.forEach((function(t){t.uid===e.uid&&a.push(t)})):a.push({name:e.name,url:e.base64})})),Qe(t,a);else if(0===_e.broadCastDocument.length&&_e.broadCastImage.length>0){var n;null===(n=_e.broadCastImage)||void 0===n||n.forEach((function(e){e.uid.includes("broadcastimg")?Y.forEach((function(t){t.uid===e.uid&&a.push(t)})):a.push({name:e.name,url:e.base64})})),Qe(t,a)}else _e.broadCastDocument.length>0&&0===_e.broadCastImage.length?_e.broadCastDocument.forEach((function(e){e.uid.includes("broadcastdoc")?z.forEach((function(a){a.uid===e.uid&&t.push(a)})):t.push({name:e.name,url:e.base64}),Qe(t,a)})):Qe(t,a)};return l.a.createElement(l.a.Fragment,null,Re,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(cs,null,l.a.createElement(C.a,{spinning:x,size:"large"},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Broadcast Message")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",form:q},re&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),Ae&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:De,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message Title",value:_e.messageTittle},l.a.createElement(lt.a.Item,{className:"required",name:"messageTittle",id:"messageTittle",validateStatus:"success"},l.a.createElement(ms,{showCount:!0,className:"input-control",id:"messageTittle",name:"messageTittle",htmlFor:"helptext",autoComplete:"off",value:_e.messageTittle,maxLength:80,onChange:function(e){!function(e){je(Object(M.a)({},_e,Object(et.a)({},e.target.id,e.target.value)))}(e)}})))))),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message",value:_e.meesage},l.a.createElement(lt.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(ls,{value:_e.meesage,onChange:function(e){return function(e,t){je((function(a){return Object(M.a)({},a,Object(et.a)({},t,e))}))}(e,"meesage")},id:"message"})))))),l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,{className:"align-items-center d-flex",gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(mt,{label:"Select Date",value:ce},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"startDate"},l.a.createElement(rt.a,{defaultValue:ce,disabledDate:function(e){return e&&e<ke()().startOf("day")},name:"startDate",onChange:function(e){return function(e){me(e)}(e)}})))),_e.pastStartTimeError&&l.a.createElement(st.a,{message:PAST_TIME,type:"error",showIcon:!0}),l.a.createElement(S.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(mt,{label:"Select Time",value:ge},l.a.createElement(lt.a.Item,{className:"required timepicker mb-0",name:"time"},l.a.createElement(l.a.Fragment,null),l.a.createElement(Dr.a,{value:ge,onChange:function(e){return function(e){var t=e.target.value,a=Ar.formatAsDDMMYYYY(ce),n=a.split("-")[0],l=a.split("-")[1],r=a.split("-")[2],s=t.getMinutes(),o=t.getHours();1===s.toString().length&&(s="0"+s),1===o.toString().length&&(o="0"+o),"0"===o.toString()&&(o="00");var i=new Date(r+"-"+l+"-"+n+"T"+(o+":"+s+":00"));je(Object(M.a)({},_e,{pastStartTimeError:!1})),he(i)}(e)},onBlurStartTime:function(e){new Date>ge&&ge.getTime()!==be.getTime()?(he(be),je({pastStartTimeError:!0})):(je(Object(M.a)({},_e,{pastStartTimeError:!1})),he(ge))}})))),l.a.createElement(S.a,{span:24,className:"6gutter-row mt-3"},!Z&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please uplaod correct file format",type:"error",showIcon:!0})),l.a.createElement("h6",null,"Upload"),l.a.createElement("span",null,Ge),l.a.createElement(lt.a.Item,{name:"help text",className:"upload-list mt-3"},l.a.createElement(w.a,null,l.a.createElement(rs,{file:_e.broadCastImage,handleStepOneUpload:function(e,t){Le(),"removed"===e.file.status&&(X(!0),Le(e.file.status));var a=e.fileList;a.forEach((function(e,t){if(!e.uid.includes("broadcastimg")){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)}})),je(Object(M.a)({},_e,Object(et.a)({},t,a)))},handleBeforeUpload:function(e,t){var a="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,n=e.size/1024/1024<10;return a?X(!0):(X(!1),message.error("".concat(e.name," is not a supported format file type."))),a&&(!n&&a?(X(!1),message.error("Image must smaller than 5MB!")):X(!0)),a&&n},handleOnRemove:qe,handlePollImagePreview:Be,handleCancel:ze,broadcast:_e,uploadtitle:"Image",disabledbutton:W}),l.a.createElement(rs,{file:_e.broadCastDocument,handleStepOneUpload:function(e,t){Le(),"removed"===e.file.status&&(X(!0),Le(e.file.status));var a=e.fileList;a.forEach((function(e,t){if(!e.uid.includes("broadcastdoc")){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)}}));je(Object(M.a)({},_e,Object(et.a)({},"broadCastDocument",a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=(e.name.includes(".ppt"),e.name.includes(".doc")),r=e.name.includes(".csv"),s="application/pdf"===e.type||a||n||l||r;s?X(!0):(X(!1),message.error("".concat(e.name," is not a supported format file type.")));var o=e.size/1024/1024<10;return s&&(!o&&s?(X(!1),message.error("Document must smaller than 10MB!")):X(!0)),s&&o},handleOnRemove:qe,handlePollImagePreview:Be,handleCancel:ze,broadcast:_e,uploadtitle:"Document",disabledbutton:W}),l.a.createElement(Tn,{setLocation:function(e,t,a){var n=t.toString().substring(0,9),l=e.toString().substring(0,9),r={location_latitude:parseFloat(l),location_longitude:parseFloat(n),address:a};je(Object(M.a)({},_e,{address:a})),je(Object(M.a)({},_e,{mapLoction:r}))},longitude:_e.location_longitude,latitude:_e.location_latitude,locationName:_e.mapLoction.address,isEdit:!0}))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ne.a,{type:"primary",className:"md mr-4",onClick:function(e){e.preventDefault(),Z&&_e.messageTittle&&_e.messageTittle.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&ge&&_e.meesage&&ce?(We(),se(!1)):se(!0)}},"Update"),l.a.createElement(Ne.a,(D={type:"secondary"},Object(et.a)(D,"type","secondary"),Object(et.a)(D,"htmlType","submit"),Object(et.a)(D,"onClick",(function(){window.location="/orgcc/broadcastmessages"})),D),ae))))))))))))))},ds=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"deleteHotline",value:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"broadcast/"+this.props.broadcastId,e).then((function(){window.location="/orgcc/broadcastmessages"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},le),l.a.createElement(_t.a,{title:"Delete Broadcast",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this broadcast message?")))}}]),t}(n.Component),ps=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,"7"===e.status_id?l.a.createElement(c.b,{to:{pathname:"/orgcc/editbroadcast/".concat(e.broadcast_id),state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editbroadcast/".concat(e.broadcast_id)},ne)," ")):null,l.a.createElement("li",null,l.a.createElement(ds,{broadcastId:e.broadcast_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),gs=N.a.Content,hs=Xa.a.Paragraph,fs=_.a.Search,Es=function(e){var t=e.setFilterOptions,a=e.setSearchValue,r=e.setSortOptions,s=e.data,i=e.broadcastmessages,m=e.loader,u=Object(n.useState)(!1),d=Object(o.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(""),f=Object(o.a)(h,2),E=f[0],v=f[1],b=function(e){g(!0)},y=function(e){g(!1)};return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:s}),l.a.createElement(gs,null,l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Broadcast Messages")),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(fs,{placeholder:"Search",onSearch:function(e){a(e),v(e)}})),l.a.createElement(S.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(ot.a,{className:"w-100 w-md-75",defaultValue:"Filter",onSelect:function(e){return function(e){var a=[];e&&(a=[parseInt(e)]),t({status_id:a})}(e)}},l.a.createElement(Option,{value:""},"All"),l.a.createElement(Option,{value:"7"},"Scheduled"),l.a.createElement(Option,{value:"9"},"Published"))),l.a.createElement(S.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(ot.a,{className:"w-100 w-md-75",defaultValue:"Sort",onSelect:function(e){return function(e){r(e)}(e)}},l.a.createElement(Option,{value:"DESC"},"Newest at top"),l.a.createElement(Option,{value:"ASC"},"Oldest at top"))))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(c.b,{to:"/orgcc/createbroadcast"},l.a.createElement(Ne.a,{type:"primary"},"Create Broadcast"))))),l.a.createElement(C.a,{spinning:m,size:"large"},l.a.createElement("div",{className:"mid-content"},null===i||void 0===i?void 0:i.map((function(e){var t,a;return l.a.createElement(w.a,null,l.a.createElement(S.a,{span:22},l.a.createElement("h6",{className:"font-weight-md mb-1"},ha()(function(e,t){return t?e.replace(new RegExp(t,"gi"),(function(e){return"<mark>".concat(e,"</mark>")})):e}(e.title,E))),"7"===e.status_id?l.a.createElement("small",null,"Scheduled on: ",ke()(e.scheduled_date).utc().local().format("MM/DD/YYYY")):l.a.createElement("small",null,"Published on: ",ke()(e.scheduled_date).utc().local().format("MM/DD/YYYY")),l.a.createElement(hs,{ellipsis:{rows:5,expandable:!0,symbol:"Show more",onExpand:{typoExpand:b}}},ha()(e.message)),p&&l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:y},"Show less"),null!=e.broadcast_images?null===(t=e.broadcast_images)||void 0===t?void 0:t.map((function(e){return l.a.createElement(on.a,{width:100,src:e.url,className:"pr-3",placeholder:e.name,alt:e.name})})):null,null!=e.broadcast_documents?null===(a=e.broadcast_documents)||void 0===a?void 0:a.map((function(e){return l.a.createElement("div",{className:"attachment-wrapper"},l.a.createElement("span",{className:"icon icon-doc pr-2"}),l.a.createElement("a",{href:e.url,target:"_blank"},e.name))})):null),l.a.createElement(S.a,{span:2,className:"d-flex justify-content-end align-items-start"},l.a.createElement(ps,{data:e})),l.a.createElement($e.a,{className:"w-100 mt-2"}))})))))))))};var vs=Object(i.b)((function(e){return{broadcastmessagedata:e.broadcastMessages.broadcastmessagedata}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)("DESC"),E=Object(o.a)(f,2),v=E[0],b=E[1];Object(n.useEffect)((function(){(0,e.dispatch)(function(e,t,a){return function(n){return Lt.getBroadCastMessages(e,t,a).then((function(e){return n({type:"BROADCAST_SUCCESS",payload:{broadcast:e.data}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return n({type:"BROADCAST_FAIL"}),n({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}}(m,g,v))}),[m,g,v]),Object(n.useEffect)((function(){null===e.broadcastmessagedata?s(!0):null!==e.broadcastmessagedata&&s(!1)}),[e.broadcastmessagedata]);return l.a.createElement(Es,{broadcastmessages:e.broadcastmessagedata,statusOnClicked:function(){setStatusClicked(!statusClicked)},setFilterOptions:function(e){u(e),s(!0)},setSearchValue:function(e){h(e)},setSortOptions:function(e){b(e),s(!0)},data:e,loader:r})})),bs=(a(540),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){if(a.state.endDate&&null!==a.state.endDate&&a.state.endTime){a.setState({error:!1,visible:!1});var e={poll_id:a.props.pollsData.poll_id,pollName:a.props.pollsData.title};a.props.extendPollDate(e,a.state)}else a.setState({error:!0})},a.handleCancel=function(){a.setState({visible:!1}),window.location="/orgcc/pollsdirectory"},a.onChangeEndDate=function(e){a.setState({endDate:e})},a.onChangeEndTime=function(e){var t=e.target.value,n=Ar.formatAsDDMMYYYY(a.state.endDate),l=n.split("-")[0],r=n.split("-")[1],s=n.split("-")[2],o=t.getMinutes(),i=t.getHours();1===o.toString().length&&(o="0"+o),1===i.toString().length&&(i="0"+i),"0"===i.toString()&&(i="00");var c=new Date(s+"-"+r+"-"+l+"T"+(i+":"+o+":00"));a.setState({endTimeError:!1,endTime:c})},a.onBlurEndTime=function(e){new Date>a.state.endTime&&a.state.endTime.getTime()!==a.state.end_time.getTime()?a.setState({endTimeError:!0,endTime:a.state.end_time}):a.setState({endTimeError:!1})},a.disabledDate=function(e){return e&&e<ke()().startOf("day")},a.range=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a},a.state={visible:!1,endDate:"",error:!1,endTime:new Date,end_time:new Date,endTimeError:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pollsData,t=e.end_date,a=e.end_time,n=t.split("/")[1],l=t.split("/")[0],r=t.split("/")[2],s=Ar.formatAsDDMMYYYY(t);this.setState({endDate:ke()(s,"DD-MM-YYYY"),endTime:new Date(r+"-"+l+"-"+n+"T"+a),end_time:new Date(r+"-"+l+"-"+n+"T"+a)})}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Extend End Date"),l.a.createElement(_t.a,{title:"Extend End Date",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Extend Date",cancelText:ae},l.a.createElement(lt.a,{className:"input-md floating-label w-100"},l.a.createElement(S.a,{span:24,className:"gutter-row"},this.state.error&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:vt,type:"error",showIcon:!0})),l.a.createElement("div",{className:"mb-4 subtext-md font-weight-md6"},"Select Date and Time to "," ",l.a.createElement("span",{className:"pr-1"}," ","extend the"),this.props.pollsData.title," ","Poll"),l.a.createElement(mt,{label:"Select End Date",value:"eDate"},l.a.createElement(lt.a.Item,{name:"eDate",rules:[{required:!0,message:vt}]},l.a.createElement(rt.a,Object(et.a)({defaultValue:this.state.endDate,disabledDate:this.disabledDate,onChange:function(t){return e.onChangeEndDate(t)},className:"w-100",name:"eDate"},"className","required")),this.state.endTimeError&&l.a.createElement(st.a,{message:bt,type:"error",showIcon:!0}),l.a.createElement(Dr.a,{value:this.state.endTime,onChange:this.onChangeEndTime,onBlur:this.onBlurEndTime})))))))}}]),t}(n.Component)),ys=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deletePoll()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"deletePoll",value:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"poll/"+this.props.pollId,e).then((function(){window.location="/orgcc/pollsdirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},le),l.a.createElement(_t.a,{title:"Delete Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this Poll?")))}}]),t}(n.Component),Os=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props.data,t=this.props.extendPollDate,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(c.b,{to:{pathname:"/orgcc/duplicatepoll/".concat(e.poll_id),state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/duplicatepoll/".concat(e.poll_id)},"Create Duplicate")," ")," "),1!=e.poll_id&&2!=e.poll_id?l.a.createElement(c.b,{to:{pathname:"/orgcc/editpoll/".concat(e.poll_id),state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editpoll/".concat(e.poll_id)},8===e.status_id||5===e.status_id?"View":ne)," ")):null,8===e.status_id?l.a.createElement(c.b,{to:{pathname:"/orgcc/pollresponse",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/pollresponse"},"Show Final Results")," ")," "):null,5===e.status_id?l.a.createElement(c.b,{to:{pathname:"/orgcc/pollresponse",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/pollresponse"},"Show Intrim Results")," ")," "):null,5!==e.status_id&&4!==e.status_id&&7!==e.status_id||1==e.poll_id||2==e.poll_id?null:l.a.createElement("li",null,l.a.createElement(bs,{extendPollDate:t,pollsData:e})),1==e.poll_id||2==e.poll_id||4!==e.status_id&&7!==e.status_id?null:l.a.createElement("li",null,l.a.createElement(ys,{pollId:e.poll_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon"}))));var e,t}}]),t}(l.a.Component),_s=pr.a.SHOW_PARENT,Ns=[{title:"Active",value:"5",key:"1"},{title:"Inactive",value:"4",key:"2"},{title:"Scheduled",value:"7",key:"3"},{title:"Completed",value:"8",key:"4"}],js=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={value:""},a.onChange=function(e){a.setState({value:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e={treeData:Ns,onChange:this.props.handlePollStatusOnSelect,treeCheckable:!0,showCheckedStrategy:_s,placeholder:"Apply Filter",style:{width:"100%"}};return l.a.createElement(pr.a,e)}}]),t}(l.a.Component),ws=_.a.Search,Ss=(l.a.createElement(Oe.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),Cs=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).extendPollDate=function(e,t){var a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={end_date:Ar.formatAsDDMMYYYY(t.endDate),end_time:Ar.formatAsHHmmss(t.endTime)};P.a.put(R+"extendEndDate/"+e.poll_id+"/",n,a).then((function(){j.a.config({placement:"bottomLeft"}),j.a.open({description:e.pollName+Re}),window.location="/orgcc/pollsdirectory"}))},a.onSearch=function(e){a.props.setSearchValue(e)},a.handlePollStatusOnSelect=function(e){var t={status_id:e.map((function(e){return parseInt(e)}))};a.props.setFilterOptions(t)},a.handleCheck=function(e){var t={};t=e.target.checked?{status_id:[5,4,7,8]}:{status_id:[5,7]},a.props.handleCheck(t)},a.statusClicked=function(e,t){var n={};if(0===t.length)j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.title+ze});else if("Scheduled"===t||"Active"===t)n={status_id:4};else if("inActive"===t){var l=e.start_date,r=l.split("/")[1],s=l.split("/")[0],o=l.split("/")[2],i=new Date(s+"-"+r+"-"+o),c=new Date;if(i>c)n={status_id:7};else if(i<c)n={status_id:5};else if(i===c){var m=e.start_time,u=new Date(s+"-"+r+"-"+o+m);u>new Date?n={status_id:7}:u<=new Date&&(n={status_id:5})}}var d={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.put(R+"changePollStatus/"+e.poll_id+"/",n,d).then((function(){j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.title+Be}),a.props.statusOnClicked()}))},a.state={data:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.polls;null===e||void 0===e||e.forEach((function(e){e.start_date=ke()(e.start_date).utc().local().format("MM/DD/YYYY"),e.end_date=ke()(e.start_date).isValid()?ke()(e.end_date).utc().local().format("MM/DD/YYYY"):""})),this.setState({data:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t;this.props.polls!==e.polls&&(null===(t=e.polls)||void 0===t||t.forEach((function(e){e.start_date=ke()(e.start_date).utc().local().format("MM/DD/YYYY"),e.end_date=ke()(e.end_date).utc().local().format("MM/DD/YYYY")})),this.setState({data:e.polls}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t=this.props,a=(t.polls,t.loader),n=[{title:"",dataIndex:"",key:"name",width:"5%",render:function(e){return{children:e.image||e.document?l.a.createElement(Ir.a,null):null,props:{"data-title":""}}}},{title:"Poll Name",dataIndex:"title",key:"name",width:"22%",render:function(e,t){return{children:2!=t.poll_id&&1!=t.poll_id?l.a.createElement(c.b,{to:{pathname:"/orgcc/editpoll/".concat(t.poll_id),state:t}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editpoll/".concat(t.poll_id)},e)," ")):e,props:{"data-title":"Poll Name"}}}},{title:"Start Date & Time",dataIndex:"",key:"start_date",width:"22%",render:function(e){return{children:e.start_date+" "+e.start_time.slice(0,-3),props:{"data-title":"Start Date & Time"}}}},{title:"End Date & Time",dataIndex:"",key:"end_date",width:"21%",render:function(e){return{children:e.end_date+" "+e.end_time.slice(0,-3),props:{"data-title":"Start Date & Time"}}}},{title:"Status",dataIndex:"",key:"x",width:"10%",render:function(e){return{children:1!=e.poll_id&&2!=e.poll_id?4===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"):5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):7===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Scheduled"):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Completed"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Sample"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(t){return{children:l.a.createElement(Os,{extendPollDate:e.extendPollDate,data:t}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:this.props.data}),l.a.createElement(Ss,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Manage Polls")),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(ws,{placeholder:"Search",onSearch:this.onSearch})),l.a.createElement(S.a,{span:24,lg:9,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(js,{handlePollStatusOnSelect:this.handlePollStatusOnSelect}),l.a.createElement(Er.a,{className:"down-arrow-ico"})))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(c.b,{to:"/orgcc/createpoll"},l.a.createElement(je,{value:"Create Poll"}))))),l.a.createElement(C.a,{spinning:a,size:"large"},l.a.createElement(_e,{rowKey:"poll_id",columns:n,data:this.state.data})))))))}}]),t}(l.a.Component),Ds=[{title:"Impact of Microaggressions",help_text:"Description of what a Harbinger is",start_date:ke()().utc().local().format("MM/DD/YYYY"),end_date:ke()().utc().local().format("MM/DD/YYYY"),start_time:ke()().utc().local().format("hh:mm:ss"),created_by:12,created_on:"2021-02-09T07:39:50.743345Z",document:null,document_name:null,end_time:ke()().utc().local().format("hh:mm:ss"),image:null,image_name:null,is_out_of_the_box:!1,option_text:[],poll_id:1,poll_question_rating_type:null,poll_question_type:3,poll_result_chart_type:2,question:"1. The technique for selecting a new point depends upon",show_result_to_users:!1,status_id:4,update_on:null},{created_by:12,created_on:"2021-02-09T07:39:50.743345Z",document:null,document_name:null,end_date:ke()().utc().local().format("MM/DD/YYYY"),end_time:ke()().utc().local().format("hh:mm:ss"),help_text:"Description of what a Harbinger is",image:null,image_name:null,is_out_of_the_box:!1,option_text:[],poll_id:2,poll_question_rating_type:null,poll_question_type:3,poll_result_chart_type:2,question:"1. The technique for selecting a new point depends upon",show_result_to_users:!1,start_date:ke()().utc().local().format("MM/DD/YYYY"),start_time:ke()().utc().local().format("hh:mm:ss"),status_id:4,title:"Experience of Work From Home (WFH)",update_on:null}],ks=function(e,t){return function(a){return Lt.getPolls(e,t).then((function(e){return a({type:"POLL_SUCCESS",payload:{pollsdata:e.data}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:"POLL_FAIL"}),a({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}};var Is=Object(i.b)((function(e){return{pollsdata:e.poll.pollsdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)([]),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(""),E=Object(o.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)(!1),O=Object(o.a)(y,2),_=O[0],N=O[1],j=Object(n.useState)([]),w=Object(o.a)(j,2),S=w[0],C=w[1];Object(n.useEffect)((function(){(0,e.dispatch)(ks(g,v))}),[m,g,v]),Object(n.useEffect)((function(){var t,a;null===e.pollsdata?s(!0):null!==e.pollsdata&&s(!1);var n=null!==e.pollsdata?e.pollsdata:[],l=null===g||void 0===g?void 0:null===(t=g.status_id)||void 0===t?void 0:t.includes(4);v.length>0||(null===g||void 0===g?void 0:null===(a=g.status_id)||void 0===a?void 0:a.length)>0&&!l?C(n):C(function(e){var t=[];t=e;for(var a=0;a<Ds.length;a++)t.push(Ds[a]);return t}(n))}),[e.pollsdata]);return l.a.createElement(Cs,{polls:S,data:e,loader:r,checked:_,setLoader:s,statusOnClicked:function(){u(!m)},setFilterOptions:function(e){h(e)},setSearchValue:function(e){b(e)},handleCheck:function(e){N(!_),h(e)}})})),xs=a(128),Ts=function(e){var t=Object(n.useState)({labels:[],datasets:[]}),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)({title:{display:!0,text:e.chartTitle}}),c=Object(o.a)(i,2),m=c[0],u=c[1];Object(n.useEffect)((function(){var t,a;u({title:{display:!0,text:e.chartTitle},legend:{onClick:null},scales:{xAxes:[{title:{display:!0,text:e.chartTitle}}],yAxes:[{title:{display:!0,text:e.chartTitle}}]}});var n,l=[],o=[],i=[],c=[],m=["rgba(234, 80, 55)","rgba(32, 50, 92)","rgba(96,110,141,1)","rgba(236,131,123,1)"];null===(t=e.data)||void 0===t||t.forEach((function(e){i.push(Object(et.a)({},e.poll_option_id.toString(),0)),c.push(e.count)})),null===(a=e.data)||void 0===a||a.map((function(e,t){var a=[];i.map((function(t,n){JSON.parse(Object.keys(t))===e.poll_option_id?(i[n]=Object(et.a)({},e.poll_option_id,e.count),a.push(e.count)):a.push(0)}));var n={label:e.option_text,data:a,backgroundColor:m[t],borderWidth:0};o.push(e.option_text),l.push(n),a})),n=Object(M.a)({},r,{labels:o,datasets:l}),s(n),e.sendBackData(o,c)}),[e.data]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(xs.a,{id:"barChart",data:r,options:m}))},As=function(e){var t=Object(n.useState)({labels:[],datasets:[]}),a=Object(o.a)(t,2),r=a[0],s=a[1],i={title:{display:!0,text:e.chartTitle},legend:{onClick:null}};Object(n.useEffect)((function(){var t,a,n=[],l=[],o=[],i=[];e.data.map((function(e){n.push(e.option_text),l.push(parseInt(e.percentage.substring(0,e.percentage.length-1))),o.push("rgba(255, 255, 255)"),i.push(e.percentage)})),a=[{label:"",data:l,backgroundColor:["rgba(234, 80, 55)","rgba(32, 50, 92)","rgba(96,110,141,1)","rgba(236,131,123,1)"],borderColor:o,borderWidth:0}],t=Object(M.a)({},r,{labels:n,datasets:a}),s(t),e.sendBackData(n,i)}),[e.data]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(xs.c,{id:"pieChart",data:r,options:i}))},Us=a(183),Ms=a.n(Us),Fs=a(243),Ps=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(Ne.a,{onClick:function(){return e.showDownloadOptions("pdf")}},"Download PDF")),l.a.createElement("li",null,l.a.createElement(Ne.a,{onClick:function(){return e.showDownloadOptions("csv")}},"Download CSV"))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement(Ne.a,{type:"primary",className:"w-md-100 mt-3 mt-lg-0"},"Download"),l.a.createElement(Er.a,{className:"down-arrow-ico white btn-arrow"})));var e}}]),t}(l.a.Component),Rs=N.a.Content,Ys=function(e){var t,a,r=Object(m.h)(),s=Object(n.useState)(!1),i=Object(o.a)(s,2),u=i[0],d=i[1],p=Object(n.useState)({}),g=Object(o.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)("1"),v=Object(o.a)(E,2),b=v[0],y=v[1],O=Object(n.useState)([]),_=Object(o.a)(O,2),j=_[0],D=_[1];Object(n.useEffect)((function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};d(!0);var t={poll_id:r.state.poll_id};P.a.post(R+"pollResult/",t,e).then((function(e){var t={},a=[];e.data.map((function(e){t=Object(M.a)({},e,{option_text:"1"===e.option_text?"Definitely Not":"2"===e.option_text?"Better If Not":"3"===e.option_text?"Does Not Matter":"4"===e.option_text?"I am Ok":"5"===e.option_text?"Excited":e.option_text}),a.push(t)})),f(a),d(!1)}))}),[]);var k=function(){var e,t,a,n=[],l="";j[0].forEach((function(e,t){j[1].forEach((function(a,r){var s;t===r&&(l="1"===b?"Count":"Percentage",n.push((s={},Object(et.a)(s,"Poll Option Text",e),Object(et.a)(s,l,a),s)))}))}));var s="".concat("Poll Results"," for,").concat(r.state.title,"\n");s+='"",""\n',null!=(s+=function(e){var t,a,n;return null!=(e=e||null)&&e.length?(",","\n",n=Object.keys(e[0]),t="",t+=n.join(","),t+="\n",e.forEach((function(e){a=0,n.forEach((function(n){a>0&&(t+=","),t+=e[n],a++})),t+="\n"})),t):null}(n))&&(t=r.state.title+".csv",s.match(/^data:text\/csv/i)||(s="data:text/csv;charset=utf-8,"+s),e=encodeURI(s),(a=document.createElement("a")).setAttribute("href",e),a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a))},I=function(e,t){D([e,t])};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(Rs,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(nt.a.Item,null,"Polls")),l.a.createElement(nt.a.Item,null,"Poll Results"))),l.a.createElement(C.a,{spinning:u,size:"large"},l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},r.state.title),l.a.createElement(S.a,{span:24,md:24,lg:12,className:"search-row column d-block d-lg-flex align-items-center justify-content-start justify-content-lg-end px-3 px-lg-0 my-4 my-lg-0"},h&&h.length>0?l.a.createElement("span",{className:"pr-3 w-md-100"},"Total audience",": ",null===(t=h[0])||void 0===t?void 0:t.total_employee_count):null,h&&h.length>0?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0 mr-3"},l.a.createElement(ot.a,{className:"w-100",defaultValue:"1",onSelect:function(e){y(e)}},l.a.createElement(Option,{value:"1",defaultValue:!0},"Bar Chart"),l.a.createElement(Option,{value:"2"},"Pie Chart"))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(Ps,{showDownloadOptions:function(e){"pdf"===e?function(){var e="1"===b?document.getElementById("barChart"):document.getElementById("pieChart");Ms()(e).then((function(e){var t=e.toDataURL("image/png"),a="";(a=e.width>e.height?new Fs.a("l","mm",[e.width,e.height]):new Fs.a("p","mm",[e.height,e.width])).addImage(t,"JPEG",0,0,e.width,e.height);var n=r.state.title+".pdf";a.save(n)}))}():k()}}))):null)),l.a.createElement("div",{className:""},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},r.state.question),h&&h.length>0?l.a.createElement("span",{className:"font-weight-md6 pt-3 d-flex"},null===(a=h[0])||void 0===a?void 0:a.total_response," ","Response(s)"):null,l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement("h1",{className:"text-center pt-3"},h&&0===h.length&&"Results for this poll are not available at this moment."),h&&h.length>0?"1"===b?l.a.createElement(Ts,{data:h,chartTitle:"Poll Results for "+r.state.title,sendBackData:I}):l.a.createElement(As,{data:h,chartTitle:"Poll Results for "+r.state.title,sendBackData:I}):null)))))))))))},Ls=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.props.pollData.pollStartDate&&a.props.pollData.pollEndDate?(a.props.showError(!1),a.setState({visible:!1}),a.props.onPublish()):a.props.showError(!0)},a.handleCancel=function(){a.setState({visible:!1})},a.disabledStartDate=function(e){return e&&e<ke()().startOf("day")},a.disabledEndDate=function(e){return a.props.pollData.pollStartDate?e&&e<ke()(a.props.pollData.pollStartDate,"DD-MM-YYYY"):e&&e<ke()().startOf("day")},a.range=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a},a.onChangeStartDate=function(e){a.props.handlePollStartDatePickerChange(e,"pollStartDate")},a.onChangeEndDate=function(e){a.props.handlePollEndDatePickerChange(e,"pollEndDate")},a.onChangeStartTime=function(e){var t=e.target.value,n=Ar.formatAsDDMMYYYY(a.state.startDate),l=n.split("-")[0],r=n.split("-")[1],s=n.split("-")[2],o=t.getMinutes(),i=t.getHours();1===o.toString().length&&(o="0"+o),1===i.toString().length&&(i="0"+i),"0"===i.toString()&&(i="00");var c=new Date(s+"-"+r+"-"+l+"T"+(i+":"+o+":00"));a.setState({pastStartTimeError:!1,startTime:c})},a.onBlurStartTime=function(e){new Date>a.state.startTime&&a.state.startTime.getTime()!==a.state.start_time.getTime()?a.setState({pastStartTimeError:!0,startTime:a.state.start_time}):(a.setState({pastStartTimeError:!1}),a.props.handlePollStartTimePickerChange(a.state.startTime,"pollStartTime"))},a.onChangeEndTime=function(e){var t=e.target.value,n=Ar.formatAsDDMMYYYY(a.state.endDate),l=n.split("-")[0],r=n.split("-")[1],s=n.split("-")[2],o=t.getMinutes(),i=t.getHours();1===o.toString().length&&(o="0"+o),1===i.toString().length&&(i="0"+i),"0"===i.toString()&&(i="00");var c=new Date(s+"-"+r+"-"+l+"T"+(i+":"+o+":00"));a.setState({pastEndTimeError:!1,endTime:c})},a.onBlurEndTime=function(e){new Date>a.state.endTime&&a.state.endTime.getTime()!==a.state.end_time.getTime()?a.setState({pastEndTimeError:!0,endTime:a.state.end_time}):a.state.endTime<a.state.startTime?a.setState({endTimeError:!0,endTime:a.state.end_time}):(a.setState({pastEndTimeError:!1}),a.props.handlePollEndTimePickerChange(a.state.endTime,"pollEndTime"))},a.state={visible:!1,startDate:"",startTime:new Date,start_time:new Date,endDate:"",endTime:new Date,end_time:new Date,pastStartTimeError:!1,pastEndTimeError:!1,endTimeError:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pollData,t=e.pollStartDate,a=e.pollStartTime,n=e.pollEndDate,l=e.pollEndTime,r=t.split("-")[0],s=t.split("-")[1],o=t.split("-")[2],i=n.split("-")[0],c=n.split("-")[1],m=n.split("-")[2];this.setState({startDate:ke()(t,"DD-MM-YYYY"),endDate:ke()(n,"DD-MM-YYYY"),startTime:new Date(o+"-"+s+"-"+r+"T"+a),start_time:new Date(o+"-"+s+"-"+r+"T"+a),endTime:new Date(m+"-"+c+"-"+i+"T"+l),end_time:new Date(m+"-"+c+"-"+i+"T"+l)})}},{key:"render",value:function(){var e,t,a,n=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{type:"primary",className:"md mr-4",onClick:this.showModal},this.props.viaEdit?"Reschedule":"Schedule"),l.a.createElement(_t.a,{title:"Publish Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:8===this.props.pollData.status_id||5===this.props.pollData.status_id?{style:{display:"none"}}:{children:"Custom OK"},cancelButtonProps:8===this.props.pollData.status_id||5===this.props.pollData.status_id?{className:"ant-btn-primary",children:"Custom cancel"}:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Publish",cancelText:"Cancel"},l.a.createElement(lt.a,{className:"input-md floating-label w-100"},l.a.createElement(S.a,{span:24,className:"gutter-row"},this.props.error&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:vt,type:"error",showIcon:!0})),l.a.createElement("div",{className:"mb-4 subtext-md"},Pe,l.a.createElement("span",{className:"pr-1 pr-1 font-weight-md6"}," ",this.props.pollData.pollName),"Poll"),l.a.createElement(mt,{label:"Select Start Date",value:"sDate"},l.a.createElement(lt.a.Item,{name:"sDate",rules:[{required:!0,message:vt}]},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:"24",lg:12,className:"gutter-row"},l.a.createElement(rt.a,(e={defaultValue:this.state.startDate,disabledDate:this.disabledStartDate,onChange:function(e){return n.onChangeStartDate(e)},className:"w-100",name:"sDate"},Object(et.a)(e,"className","required"),Object(et.a)(e,"disabled",8===this.props.pollData.status_id||5===this.props.pollData.status_id),e)),this.state.pastStartTimeError&&l.a.createElement(st.a,{message:bt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:"24",lg:12},l.a.createElement(Dr.a,{value:this.state.startTime,onChange:this.onChangeStartTime,onBlur:this.onBlurStartTime}))))),l.a.createElement(mt,{label:"Select End Date",value:"eDate"},l.a.createElement(lt.a.Item,{name:"eDate",rules:[{required:!0,message:vt}]},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:"24",lg:12,className:"gutter-row"},""!==this.state.endDate?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(rt.a,(t={defaultValue:this.state.endDate,disabledDate:this.disabledEndDate,onChange:function(e){return n.onChangeEndDate(e)},className:"w-100",name:"eDate"},Object(et.a)(t,"className","required"),Object(et.a)(t,"disabled",8===this.props.pollData.status_id||5===this.props.pollData.status_id),t))):l.a.createElement(rt.a,(a={defaultValue:this.state.endDate,disabledDate:this.disabledEndDate,onChange:function(e){return n.onChangeEndDate(e)},className:"w-100",name:"eDate"},Object(et.a)(a,"className","required"),Object(et.a)(a,"disabled",8===this.props.pollData.status_id||5===this.props.pollData.status_id),a)),this.state.pastEndTimeError&&l.a.createElement(st.a,{message:bt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:"24",lg:12},l.a.createElement(Dr.a,{value:this.state.endTime,onChange:this.onChangeEndTime,onBlur:this.onBlurEndTime})))))))))}}]),t}(n.Component),Bs={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){}},Hs=N.a.Content,zs=function(e){var t,a=e.poll,n=e.setPollsDate,r=e.backtoEdit,s=e.editPoll,o=e.showError,i=e.error,c=e.data,m=e.loader,u=e.attachmentName;return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:c}),l.a.createElement(Hs,null,l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Preview Poll"),l.a.createElement(S.a,{span:24,lg:18,className:"d-flex align-items-center justify-content-end"})),l.a.createElement(S.a,{span:24,className:"mb-3 px-3 px-md-0 ".concat(Nr.a.poll_info)},l.a.createElement("h6",null,a.pollName,l.a.createElement(da.a,{placement:"top",title:a.pollHelpText},l.a.createElement("span",{className:"pl-2 icon icon-info-circle"})))),l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{spinning:m,size:"large"},l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},a.pollQuestion),l.a.createElement(w.a,{className:"preview-que",disabled:!0},l.a.createElement("div",{className:"d-flex flex-column flex-gap chk-opt ".concat(Nr.a.rating_img_wrapper)},"1"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(it.a,null,e)})):"2"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(ct.a,null,e)})):"3"===a.pollQuestionType?"1"===a.pollRatingType?l.a.createElement(Sr.a,Object.assign({},Bs,{value:a.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return handlePollOnSelect(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===a.pollRatingType?l.a.createElement("img",{src:Yr.a,alt:"send message"}):"3"===a.pollRatingType?l.a.createElement("img",{src:Mr.a,alt:"send message"}):"4"===a.pollRatingType?l.a.createElement("img",{src:Pr.a,alt:"send message"}):"5"===a.pollRatingType?l.a.createElement("img",{className:"".concat(Nr.a.steps_img),src:Br.a,alt:"send message"}):null:null)),l.a.createElement(w.a,{className:"mt-2"},l.a.createElement("div",{class:"ant-upload-list-item"},l.a.createElement("div",{class:"ant-upload-list-item-info"},l.a.createElement("span",{class:"ant-upload-span"},l.a.createElement("div",{class:"ant-upload-text-icon"},l.a.createElement(Ir.a,null)),l.a.createElement("span",{class:"ant-upload-list-item-name",title:"add-user-doc"},a.pollDocument?l.a.createElement("a",{href:a.pollDocument,download:a.pollDocument},u):null),l.a.createElement("span",{class:"ant-upload-list-item-card-actions"},l.a.createElement("button",{type:"button",class:"ant-btn"}))))))))),l.a.createElement("div",{className:"mt-5 px-3"},l.a.createElement(Ne.a,(t={type:"secondary"},Object(et.a)(t,"type","secondary"),Object(et.a)(t,"htmlType","submit"),Object(et.a)(t,"className","mr-4"),Object(et.a)(t,"onClick",(function(){r(a)})),t),te),l.a.createElement(Ls,{pollData:a,handlePollStartDatePickerChange:function(e,t){n(e,t)},handlePollEndDatePickerChange:function(e,t){n(e,t)},handlePollStartTimePickerChange:function(e,t){n(e,t)},handlePollEndTimePickerChange:function(e,t){n(e,t)},onPublish:function(){s()},showError:o,error:i,viaEdit:!0})))))))))))},Vs={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){}},qs=_.a.TextArea,Qs=N.a.Content,Gs=a(48),Ws=function(e){var t,a,r,s,i,c,u,d=Object(m.g)(),p=Object(n.useState)(""),g=Object(o.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:[],showResult:!1,pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingType:"",pollRatingResponse:0,pollStartDate:"",pollEndDate:"",pollStartTime:"",pollEndTime:"",pollResponse:[],pollOptionText:[],pollId:"",status_id:""}),b=Object(o.a)(E,2),y=b[0],O=b[1],D=Object(n.useState)(!1),k=Object(o.a)(D,2),I=k[0],x=k[1],T=Object(n.useState)(""),A=Object(o.a)(T,2),F=A[0],Y=A[1],L=Object(n.useState)(!1),B=Object(o.a)(L,2),H=B[0],z=B[1],V=Object(n.useState)(!1),q=Object(o.a)(V,2),Q=q[0],G=q[1],W=Object(n.useState)(!1),K=Object(o.a)(W,2),J=K[0],$=K[1],Z=Object(n.useState)(!0),X=Object(o.a)(Z,2),ee=X[0],te=X[1],ne=Object(n.useState)(!1),le=Object(o.a)(ne,2),re=le[0],se=le[1],oe=lt.a.useForm(),ie=Object(o.a)(oe,1)[0],ce=Object(m.h)(),me=j.a.useNotification(),de=Object(o.a)(me,2),pe=de[0],ge=de[1],he=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};x(!0),P.a.get(R+"getPoll/".concat(he,"/"),e).then((function(e){var t,a,n,l=e.data;O(Object(M.a)({},y,{pollId:l.poll_id,pollName:l.title,pollHelpText:l.help_text,pollDocument:null!==l.image||null!==l.document?[{uid:"1",name:null!==l.image_name?l.image_name:null!==l.document_name?l.document_name:"",status:"done",url:l.image?l.image:l.document}]:"",showResult:l.show_result_to_users,pollChartType:l.poll_result_chart_type.toString(),pollQuestion:l.question,pollQuestionType:l.poll_question_type.toString(),pollRatingType:l.poll_question_rating_type?l.poll_question_rating_type.toString():"",pollRatingResponse:l.poll_question_rating_type,pollStartDate:Ar.formatAsDDMMYYYY(l.start_date),pollEndDate:Ar.formatAsDDMMYYYY(l.end_date),pollStartTime:l.start_time,pollEndTime:l.end_time,status_id:l.status_id,pollResponse:l.option_text.map((function(e){return e.option_text})),pollOptionText:l.option_text})),f(null!==l.image_name?l.image_name:null!==l.document_name?l.document_name:"");var r=(null===(t=l.image)||void 0===t?void 0:t.slice(l.image.lastIndexOf("."),l.image.length).includes("jpg"))||(null===(a=l.image)||void 0===a?void 0:a.slice(l.image.lastIndexOf("."),l.image.length).includes("jpeg"))||(null===(n=l.image)||void 0===n?void 0:n.slice(l.image.lastIndexOf("."),l.image.length).includes("png"));se(!!r),x(!1),ie.setFieldsValue({pollName:l.title,pollHelpText:l.help_text,pollQuestion:l.question})}))}),[]);function Ee(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}var ve=function(e){O(Object(M.a)({},y,Object(et.a)({},e.target.id,e.target.value)))},be=function(e,t){var a;("3"===e&&"pollQuestionType"===t?function(e){showResult&&"3"===e&&"4"!=y.pollChartType&&G(!0)}(e):G(!1),"pollRatingType"===t)?O(Object(M.a)({},y,(a={},Object(et.a)(a,t,e),Object(et.a)(a,"pollResponse",["1","2","3","4","5"]),a))):O(Object(M.a)({},y,Object(et.a)({},t,e)))},ye=function(e){O(Object(M.a)({},y,Object(et.a)({},"pollResponse",e)))},Oe=function(e){var t=null===e||void 0===e?void 0:e.includes("image");se(!!t)};return l.a.createElement(l.a.Fragment,null,ge,l.a.createElement(l.a.Fragment,null,J?l.a.createElement(zs,{poll:y,setPollsDate:function(e,t){O(Object(M.a)({},y,Object(et.a)({},t,e)))},backtoEdit:function(e){$(!1),O(Object(M.a)({},y,{pollName:e.pollName,pollHelpText:e.pollHelpText,pollDocument:e.pollDocument,showResult:e.showResult,pollChartType:e.pollChartType,pollQuestion:e.pollQuestion,pollQuestionType:e.pollQuestionType,pollRatingResponse:e.pollRatingResponse,pollStartDate:e.pollStartDate,pollEndDate:e.pollEndDate,pollResponse:e.pollResponse})),ie.setFieldsValue({pollHelpText:e.pollHelpText,pollQuestion:e.pollQuestion})},editPoll:function(){var e,t;x(!0);var a=JSON.parse(v("user")),n={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},l=[];y.pollResponse.map((function(e){return l.push({option_text:e})}));var r,s,o,i=l.map((function(e){var t=Object.assign({},e);return y.pollOptionText.map((function(a){a.option_text===e.option_text?(t.poll_option_id=a.poll_option_id,t.poll=y.pollId):a.option_text===e.option_text||t.poll_option_id||(t.poll_option_id="",t.poll=y.pollId)})),t})),c={},m=ke.a.isMoment(y.pollStartDate)?Ar.formatAsDDMMYYYY(y.pollStartDate):y.pollStartDate,u=ke.a.isMoment(y.pollEndDate)?Ar.formatAsDDMMYYYY(y.pollEndDate):y.pollEndDate,d=y.pollStartTime instanceof Date?Ar.formatAsHHmmss(y.pollStartTime):y.pollStartTime,p=y.pollEndTime instanceof Date?Ar.formatAsHHmmss(y.pollEndTime):y.pollEndTime;0===(null===(e=y.pollDocument)||void 0===e?void 0:e.length)||0===(null===(t=y.pollDocument[0].url)||void 0===t?void 0:t.length)?(c={update_poll:{title:y.pollName,help_text:y.pollHelpText,show_result_to_users:y.showResult?1:0,poll_result_chart_type:y.pollChartType?parseInt(y.pollChartType):2,poll_question_type:parseInt(y.pollQuestionType),poll_question_rating_type:y.pollRatingType?parseInt(y.pollRatingType):"",question:y.pollQuestion,start_date:m,start_time:d,end_date:u,end_time:p,status_id:y.status_id,poll_id:y.pollId,created_by:parseInt(Gs.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Gs.enc.Utf8))},option:i},P.a.put(R+"poll/"+y.pollId+"/",c,n).then((function(){x(!1);pe.info({description:"Poll details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"}))):(null===(r=y.pollDocument[0])||void 0===r?void 0:r.url)?re?Ee(null===(s=y.pollDocument[0])||void 0===s?void 0:s.url,(function(e){c={update_poll:{title:y.pollName,help_text:y.pollHelpText,image:e,image_name:h,show_result_to_users:y.showResult?1:0,poll_result_chart_type:y.pollChartType?parseInt(y.pollChartType):2,poll_question_type:parseInt(y.pollQuestionType),poll_question_rating_type:y.pollRatingType?parseInt(y.pollRatingType):"",question:y.pollQuestion,start_date:m,start_time:d,end_date:u,end_time:p,status_id:y.status_id,poll_id:y.pollId,created_by:parseInt(Gs.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Gs.enc.Utf8))},option:i},P.a.put(R+"poll/"+y.pollId+"/",c,n).then((function(){x(!1);pe.info({description:"Poll details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"}))})):function(e){var t=btoa(e),a=new Blob([t]);return new Promise((function(e,t){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){return e(n.result)},n.onerror=function(e){return t(e)}}))}(null===(o=y.pollDocument[0])||void 0===o?void 0:o.url).then((function(e){c={update_poll:{title:y.pollName,help_text:y.pollHelpText,document:e,document_name:h,show_result_to_users:y.showResult?1:0,poll_result_chart_type:y.pollChartType?parseInt(y.pollChartType):2,poll_question_type:parseInt(y.pollQuestionType),poll_question_rating_type:y.pollRatingType?parseInt(y.pollRatingType):"",question:y.pollQuestion,start_date:m,start_time:d,end_date:u,end_time:p,status_id:y.status_id,poll_id:y.pollId,created_by:parseInt(Gs.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Gs.enc.Utf8))},option:i},P.a.put(R+"poll/"+y.pollId+"/",c,n).then((function(){x(!1);pe.info({description:"Poll details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"}))})):(c=re?{update_poll:{title:y.pollName,help_text:y.pollHelpText,image:y.pollDocument.base64,image_name:h,show_result_to_users:y.showResult?1:0,poll_result_chart_type:y.pollChartType?parseInt(y.pollChartType):2,poll_question_type:parseInt(y.pollQuestionType),poll_question_rating_type:y.pollRatingType?parseInt(y.pollRatingType):"",question:y.pollQuestion,start_date:m,start_time:d,end_date:u,end_time:p,status_id:y.status_id,poll_id:y.pollId,created_by:parseInt(Gs.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Gs.enc.Utf8))},option:i}:{update_poll:{title:y.pollName,help_text:y.pollHelpText,document:y.pollDocument.base64,document_name:h,show_result_to_users:y.showResult?1:0,poll_result_chart_type:y.pollChartType?parseInt(y.pollChartType):2,poll_question_type:parseInt(y.pollQuestionType),poll_question_rating_type:y.pollRatingType?parseInt(y.pollRatingType):"",question:y.pollQuestion,start_date:m,start_time:d,end_date:u,end_time:p,status_id:y.status_id,poll_id:y.pollId,created_by:parseInt(Gs.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Gs.enc.Utf8))},option:i},P.a.put(R+"poll/"+y.pollId+"/",c,n).then((function(){x(!1);pe.info({description:"Poll details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"})))},showError:z,attachmentName:h,data:e,error:H,loader:I}):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(Qs,null,l.a.createElement(C.a,{spinning:I,size:"large"},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",initialValues:{remember:!0},form:ie},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},8===y.status_id||5===y.status_id?"View Poll":"Edit Poll")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},H&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Poll Title",value:y.pollName},l.a.createElement(qs,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:y.pollName,id:"pollName",onChange:function(e){return ve(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==ce.state.title&&P.a.post(R+"checkpoll/",{title:e.target.value},t).then((function(e){e.data&&Y(e.data[0])}))}(e)},autoComplete:"off",disabled:8===y.status_id||5===y.status_id,className:"required ".concat(Nr.a.sm_textarea)}),"status: false"===F&&y.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&y.pollName.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==F&&l.a.createElement(st.a,{message:POLL_ALREADY_EXISTS,type:"error",showIcon:!0}))),l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Description",value:y.pollHelpText},l.a.createElement(lt.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",htmlFor:"helptext",id:"pollHelpText",name:"pollHelpText",value:y.pollHelpText,disabled:8===y.status_id||5===y.status_id,autoComplete:"off",maxLength:500,onChange:function(e){return ve(e)}})))),l.a.createElement(S.a,{span:24,className:"gutter-row mt-3"},0===(null===(a=y.pollDocument)||void 0===a?void 0:a.length)&&l.a.createElement("h6",null,"Upload"),l.a.createElement(lt.a.Item,{name:"upload",className:"upload-list",valuePropName:"fileList"},l.a.createElement(l.a.Fragment,null,l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:y.pollDocument,onChange:function(e){return function(e,t){if(8===y.status_id||5===y.status_id)return null;"removed"===e.file.status&&te(!0);var a=e.fileList.slice(-1);Oe(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),f(e.file.name),O(Object(M.a)({},y,Object(et.a)({},t,a)))}(e,"pollDocument")},beforeUpload:function(e){return function(e,t){if(8===y.status_id||5===y.status_id)return null;var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;s?te(!1):(te(!0),yr.b.error("".concat(e.name," is not a supported format file type.")));var o="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,i="application/pdf"===e.type||a||n||l||r,c=e.size/1024/1024<5,m=e.size/1024/1024<10;return o&&(!c&&o?(te(!1),yr.b.error("Image must smaller than 5MB!")):te(!0)),i&&(!m&&i?(te(!1),yr.b.error("Document must smaller than 10MB!")):te(!0)),s&&c||m}(e)},onRemove:function(){return function(){if(8===y.status_id||5===y.status_id)return null}()},onPreview:function(e){return t=e,U.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:"1"===t.uid?Ee(t.url,(function(e){O(Object(M.a)({},y,{previewImage:e,previewVisible:!0,previewTitle:t.name}))})):O(Object(M.a)({},y,{previewImage:t.base64,previewVisible:!0,previewTitle:t.name}));case 1:case"end":return e.stop()}}));var t},className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif, application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel, .csv "},0===y.pollDocument.length?l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"})," "," Document Or Image"):null),l.a.createElement(_t.a,{visible:y.previewVisible,title:y.previewTitle,centered:!0,onOk:function(e){return O(Object(M.a)({},y,{previewVisible:!1}))},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:y.previewImage}))))))),l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,{className:"align-items-center d-flex"},l.a.createElement(S.a,{span:24,md:8,lg:8,xl:6},l.a.createElement(lt.a.Item,{name:"showresult",label:"Show result to users",className:"mb-0"},l.a.createElement(Or.a,{id:"showResult",checked:y.showResult,disabled:8===y.status_id||5===y.status_id,onChange:function(e,t){return function(e,t){O(Object(M.a)({},y,Object(et.a)({},t.target.id,e)))}(e,t)}}))),y.showResult?l.a.createElement(S.a,{span:24,lg:6},l.a.createElement(mt,{label:"Display final results as",value:y.pollChartType},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"result"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(r={className:"input-control",htmlFor:"result"},Object(et.a)(r,"className","required"),Object(et.a)(r,"disabled",8===y.status_id||5===y.status_id),Object(et.a)(r,"value","2"===y.pollChartType?"":y.pollChartType),Object(et.a)(r,"onSelect",(function(e){return be(e,"pollChartType")})),r),l.a.createElement(ot.a.Option,{value:"1"},"Pie Chart"),l.a.createElement(ot.a.Option,{value:"3"},"Bar Chart"),l.a.createElement(ot.a.Option,{value:"4"},"Star Format"))))),Q&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please select the Chart type as Star",type:"error",showIcon:!0}))):l.a.createElement(S.a,null)))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"d-block"},l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,lg:8,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(mt,{label:"Question Type",value:y.pollQuestionType},l.a.createElement(lt.a.Item,{className:"required",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(s={className:"",htmlFor:"questiontype"},Object(et.a)(s,"className","required"),Object(et.a)(s,"id","pollQuestionType"),Object(et.a)(s,"disabled",8===y.status_id||5===y.status_id),Object(et.a)(s,"value",y.pollQuestionType),Object(et.a)(s,"onSelect",(function(e){return be(e,"pollQuestionType")})),s),l.a.createElement(ot.a.Option,{value:"1",disabled:""!==y.pollChartType&&"4"===y.pollChartType},"Select Single"),l.a.createElement(ot.a.Option,{value:"2",disabled:""!==y.pollChartType&&"4"===y.pollChartType},"Select Multiple"),l.a.createElement(ot.a.Option,{value:"3",disabled:""!==y.pollChartType&&"4"!==y.pollChartType},"Rating Type")))))),"3"===y.pollQuestionType?l.a.createElement(S.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(mt,{label:"Rating Type",value:y.pollRatingType},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(i={className:"",htmlFor:"ratingtype"},Object(et.a)(i,"className","required"),Object(et.a)(i,"id","pollRatingType"),Object(et.a)(i,"value",y.pollRatingType),Object(et.a)(i,"onSelect",(function(e){return be(e,"pollRatingType")})),i),l.a.createElement(ot.a.Option,{value:"1"},"Stars"),l.a.createElement(ot.a.Option,{value:"2"},"Smiley"),l.a.createElement(ot.a.Option,{value:"3"},"Thermometer"),l.a.createElement(ot.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(ot.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Question",value:y.pollQuestion},l.a.createElement(lt.a.Item,{className:"required edit-input",name:"pollQuestion",id:"pollQuestion"},l.a.createElement(_.a,(c={className:"input-control edit-input",name:"pollQuestion",id:"pollQuestion",htmlFor:"pollQuestion"},Object(et.a)(c,"className","required"),Object(et.a)(c,"disabled",8===y.status_id||5===y.status_id),Object(et.a)(c,"defaultValue",y.pollQuestion),Object(et.a)(c,"value",y.pollQuestion),Object(et.a)(c,"onChange",(function(e){return ve(e)})),Object(et.a)(c,"autoComplete","off"),Object(et.a)(c,"maxLength",500),c))))),l.a.createElement(S.a,{span:24,className:"mt-4 ".concat(Nr.a.rating_img_wrapper)},"3"===y.pollQuestionType&&y.pollRatingType?"1"===y.pollRatingType?l.a.createElement(Sr.a,Object.assign({},Vs,{value:y.pollRatingResponse,name:"pollRatingResponse",disabled:8===y.status_id,onChange:function(e){return be(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===y.pollRatingType?l.a.createElement("img",{src:Yr.a,alt:"send message"}):"3"===y.pollRatingType?l.a.createElement("img",{src:Mr.a,alt:"send message"}):"4"===y.pollRatingType?l.a.createElement("img",{src:Pr.a,alt:"send message"}):"5"===y.pollRatingType?l.a.createElement("img",{className:"".concat(Nr.a.steps_img),src:Br.a,alt:"send message"}):null:"1"===y.pollQuestionType?l.a.createElement("div",null,l.a.createElement(Cr,{setSingleChoiceResponse:ye,pollResponse:y.pollResponse,disabled:8===y.status_id||5===y.status_id})):"2"===y.pollQuestionType?l.a.createElement(Cr,{pollResponse:y.pollResponse,setSingleChoiceResponse:ye,disabled:8===y.status_id||5===y.status_id}):null))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ne.a,{type:"primary",className:"md mr-4",onClick:function(e){e.preventDefault(),ee&&y.pollName&&y.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&y.pollHelpText&&y.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&y.pollQuestionType&&y.pollQuestionType.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&y.pollQuestion&&y.pollResponse.length>0?y.showResult||"3"===y.pollQuestionType?!y.pollChartType&&y.showResult?(z(!0),$(!1)):"3"!==y.pollQuestionType||y.pollRatingType?(z(!1),$(!0)):(z(!0),$(!1)):(z(!1),$(!0)):(z(!0),$(!1))}},"Preview"),l.a.createElement(Ne.a,(u={type:"secondary"},Object(et.a)(u,"type","secondary"),Object(et.a)(u,"htmlType","submit"),Object(et.a)(u,"onClick",(function(){d.push("/orgcc/pollsdirectory")})),u),ae))))))))))))))},Ks=_.a.Search,Js=N.a.Content,$s=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})};return a.state={columns:[{title:"Poll Name",dataIndex:"title",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Poll Name"}}}}],data:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(ks())}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.pollsdata;e.pollsdata!==a&&this.setState({data:a},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:this.props}),l.a.createElement(Js,{className:""},l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(nt.a.Item,null,"Polls")),l.a.createElement(c.c,{to:"/createpoll"},l.a.createElement(nt.a.Item,null,"Create Poll")),l.a.createElement(nt.a.Item,null,"OOTB Poll"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Out Of The Box (OOTB) Poll")),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Ks,{placeholder:"Search",onSearch:this.onSearch})))))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(_e,{rowKey:"hotline_id",columns:this.state.columns,data:this.state.filterData})))))))}}]),t}(l.a.Component);var Zs=Object(i.b)((function(e){return{pollsdata:e.poll.pollsdata}}))($s),Xs=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.state.startDate&&a.state.endDate?(a.props.showError(!1),a.setState({visible:!1}),a.props.onPublish()):a.props.showError(!0)},a.handleCancel=function(){a.setState({visible:!1})},a.disabledStartDate=function(e){return e&&e<ke()().startOf("day")},a.disabledEndDate=function(e){return a.props.pollData.pollStartDate?e&&e<ke()(a.props.pollData.pollStartDate,"DD-MM-YYYY"):e&&e<ke()().startOf("day")},a.range=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a},a.onChangeStartDate=function(e){a.props.handlePollStartDatePickerChange(e,"pollStartDate"),a.setState({dateError:!1})},a.onChangeEndDate=function(e){a.props.handlePollEndDatePickerChange(e,"pollEndDate"),a.setState({dateError:!1})},a.onChangeStartTime=function(e){var t=e.target.value,n=Ar.formatAsDDMMYYYY(a.state.startDate),l=n.split("-")[0],r=n.split("-")[1],s=n.split("-")[2],o=t.getMinutes(),i=t.getHours();1===o.toString().length&&(o="0"+o),1===i.toString().length&&(i="0"+i),"0"===i.toString()&&(i="00");var c=new Date(s+"-"+r+"-"+l+"T"+(i+":"+o+":00"));a.setState({pastStartTimeError:!1,startTime:c})},a.onBlurStartTime=function(e){new Date>a.state.startTime&&a.state.startTime.getTime()!==a.state.start_time.getTime()?a.setState({pastStartTimeError:!0,startTime:a.state.start_time}):(a.setState({pastStartTimeError:!1}),a.props.handlePollStartTimePickerChange(a.state.startTime,"pollStartTime"))},a.onChangeEndTime=function(e){var t=e.target.value,n=Ar.formatAsDDMMYYYY(a.state.endDate),l=n.split("-")[0],r=n.split("-")[1],s=n.split("-")[2],o=t.getMinutes(),i=t.getHours();1===o.toString().length&&(o="0"+o),1===i.toString().length&&(i="0"+i),"0"===i.toString()&&(i="00");var c=new Date(s+"-"+r+"-"+l+"T"+(i+":"+o+":00"));a.setState({pastEndTimeError:!1,endTime:c})},a.onBlurEndTime=function(e){var t,n;new Date>a.state.endTime&&(null===(t=a.state.endTime)||void 0===t?void 0:t.valueOf())!==(null===(n=a.state.end_time)||void 0===n?void 0:n.valueOf())?a.setState({pastEndTimeError:!0,endTime:a.state.end_time}):a.state.endTime<a.state.startTime?a.setState({endTimeError:!0,endTime:a.state.end_time}):(a.setState({pastEndTimeError:!1}),a.props.handlePollEndTimePickerChange(a.state.endTime,"pollEndTime"))},a.state={visible:!1,dateError:!1,pastStartTimeError:!1,pastEndTimeError:!1,endTimeError:!1,startDate:"",startTime:new Date,start_time:new Date,endDate:"",endTime:new Date,end_time:new Date},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pollData,t=e.pollStartDate,a=e.pollStartTime,n=e.pollEndDate,l=e.pollEndTime,r=e.pollId,s=t.split("-")[0],o=t.split("-")[1],i=t.split("-")[2],c=n.split("-")[0],m=n.split("-")[1],u=n.split("-")[2];this.setState({startDate:ke()(t,"DD-MM-YYYY"),endDate:ke()(n,"DD-MM-YYYY"),startTime:new Date(i+"-"+o+"-"+s+"T"+a),start_time:new Date(i+"-"+o+"-"+s+"T"+a),endTime:new Date(u+"-"+m+"-"+c+"T"+l),end_time:new Date(u+"-"+m+"-"+c+"T"+l)});var d=new Date(o+"-"+s+"-"+i),p=new Date(m+"-"+c+"-"+u),g=new Date;1!=r&&2!=r&&(d<g||p<g)&&this.setState({dateError:!0})}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{type:"primary",className:"md mr-4",onClick:this.showModal},"Schedule"),l.a.createElement(_t.a,{title:"Publish Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Publish",cancelText:"Cancel"},l.a.createElement(lt.a,{className:"input-md floating-label w-100"},l.a.createElement(S.a,{span:24,className:"gutter-row"},this.props.error&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:vt,type:"error",showIcon:!0})),this.state.dateError&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please select a valid date.",type:"error",showIcon:!0})),l.a.createElement("div",{className:"mb-4 subtext-md"},Pe,l.a.createElement("span",{className:"pr-1 pr-1 font-weight-md6"}," ",this.props.pollData.pollName),"Poll"),l.a.createElement(mt,{label:"Select Start Date",value:"sDate"},l.a.createElement(lt.a.Item,{name:"sDate",rules:[{required:!0,message:vt}]},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:"24",lg:12,className:"gutter-row"},l.a.createElement(rt.a,Object(et.a)({defaultValue:this.state.startDate,disabledDate:this.disabledStartDate,onChange:function(t){return e.onChangeStartDate(t)},className:"w-100",name:"sDate"},"className","required")),this.state.pastStartTimeError&&l.a.createElement(st.a,{message:bt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:"24",lg:12},l.a.createElement(Dr.a,{value:this.state.startTime,onChange:this.onChangeStartTime,onBlur:this.onBlurStartTime}))))),l.a.createElement(mt,{label:"Select End Date",value:"eDate"},l.a.createElement(lt.a.Item,{name:"eDate",rules:[{required:!0,message:vt}]},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:"24",lg:12,className:"gutter-row"},""!==this.state.endDate?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(rt.a,Object(et.a)({defaultValue:this.state.endDate,disabledDate:this.disabledEndDate,onChange:function(t){return e.onChangeEndDate(t)},className:"w-100",name:"eDate"},"className","required"))):l.a.createElement(rt.a,Object(et.a)({defaultValue:this.state.endDate,disabledDate:this.disabledEndDate,onChange:function(t){return e.onChangeEndDate(t)},className:"w-100",name:"eDate"},"className","required")),this.state.pastEndTimeError&&l.a.createElement(st.a,{message:bt,type:"error",showIcon:!0}),this.state.endTimeError&&l.a.createElement(st.a,{message:"End Time can not be lesser than Start Time",type:"error",showIcon:!0})),l.a.createElement(S.a,{span:"24",lg:12},l.a.createElement(Dr.a,{value:this.state.endTime,onChange:this.onChangeEndTime,onBlur:this.onBlurEndTime})))))))))}}]),t}(n.Component),eo={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){}},to=N.a.Content,ao=function(e){var t,a=e.poll,n=e.setPollsDate,r=e.backtoEdit,s=e.CreateDuplicatePoll,o=e.data,i=e.attachmentName,m=e.showError,u=e.loader,d=e.error;return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:o}),l.a.createElement(to,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(nt.a.Item,null,"Manage Polls")))),l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Preview Poll"),l.a.createElement(S.a,{span:24,lg:18,className:"d-flex align-items-center justify-content-end"})),l.a.createElement(S.a,{span:24,className:"mb-3 px-3 px-md-0 ".concat(Nr.a.poll_info)},l.a.createElement("h6",null,a.pollName,l.a.createElement(da.a,{placement:"top",title:a.pollHelpText},l.a.createElement("span",{className:"pl-2 icon icon-info-circle"})))),l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{spinning:u,size:"large"},l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},a.pollQuestion),l.a.createElement(w.a,{className:"preview-que",disabled:!0},l.a.createElement("div",{className:"d-flex flex-column flex-gap chk-opt"},"1"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(it.a,null,e)})):"2"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(ct.a,null,e)})):"3"===a.pollQuestionType?"1"===a.pollRatingType?l.a.createElement(Sr.a,Object.assign({},eo,{value:a.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return handlePollOnSelect(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===a.pollRatingType?l.a.createElement("img",{src:Yr.a,alt:"send message"}):"3"===a.pollRatingType?l.a.createElement("img",{src:Mr.a,alt:"send message"}):"4"===a.pollRatingType?l.a.createElement("img",{src:Pr.a,alt:"send message"}):"5"===a.pollRatingType?l.a.createElement("img",{src:Br.a,alt:"send message"}):null:null)),l.a.createElement(w.a,{className:"mt-2"},l.a.createElement("div",{class:"ant-upload-list-item"},l.a.createElement("div",{class:"ant-upload-list-item-info"},l.a.createElement("span",{class:"ant-upload-span"},l.a.createElement("div",{class:"ant-upload-text-icon"},l.a.createElement(Ir.a,null)),l.a.createElement("span",{class:"ant-upload-list-item-name",title:"add-user-doc"},a.pollDocument?l.a.createElement("a",{href:a.pollDocument,download:a.pollDocument},i):null),l.a.createElement("span",{class:"ant-upload-list-item-card-actions"},l.a.createElement("button",{type:"button",class:"ant-btn"}))))))))),l.a.createElement("div",{className:"mt-5 px-3"},l.a.createElement(Ne.a,(t={type:"secondary"},Object(et.a)(t,"type","secondary"),Object(et.a)(t,"htmlType","submit"),Object(et.a)(t,"className","mr-4"),Object(et.a)(t,"onClick",(function(){r(a)})),t),te),l.a.createElement(Xs,{pollData:a,handlePollStartDatePickerChange:function(e,t){n(e,t)},handlePollEndDatePickerChange:function(e,t){n(e,t)},handlePollStartTimePickerChange:function(e,t){n(e,t)},handlePollEndTimePickerChange:function(e,t){n(e,t)},onPublish:function(){s()},showError:m,error:d})))))))))))},no={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){}},lo=_.a.TextArea,ro=N.a.Content,so=a(48),oo=function(e){var t,a,r,s,i,c,u=Object(m.g)(),d=Object(n.useState)(""),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:"",showResult:!1,pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingResponse:0,pollStartDate:"",pollEndDate:"",pollStartTime:"",pollEndTime:"",pollResponse:[],pollOptionText:[],pollId:"",status_id:"",pollRatingType:""}),E=Object(o.a)(f,2),b=E[0],y=E[1],O=Object(n.useState)(!1),D=Object(o.a)(O,2),k=D[0],I=D[1],x=Object(n.useState)(""),T=Object(o.a)(x,2),A=T[0],F=T[1],Y=Object(n.useState)(!1),L=Object(o.a)(Y,2),B=L[0],H=L[1],z=Object(n.useState)(!1),V=Object(o.a)(z,2),q=V[0],Q=V[1],G=Object(n.useState)(!1),W=Object(o.a)(G,2),K=W[0],J=W[1],$=Object(n.useState)(!0),Z=Object(o.a)($,2),X=Z[0],ee=Z[1],te=Object(n.useState)(!1),ne=Object(o.a)(te,2),le=ne[0],re=ne[1],se=lt.a.useForm(),oe=Object(o.a)(se,1)[0],ie=Object(m.h)(),ce=j.a.useNotification(),me=Object(o.a)(ce,2),de=me[0],pe=me[1],ge=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){if(1==ge||2==ge){P.a.get("http://10.0.6.10/data/"+"poll_".concat(ge,".json"),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){var t=e.data;he(t[0])})).catch((function(e){}))}else{var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getPoll/".concat(ge,"/"),e).then((function(e){var t=e.data;Ee(t)}))}}),[]);var he=function(e){var t,a,n;y(Object(M.a)({},b,{pollId:e.poll_id,pollName:e.title,pollHelpText:e.help_text,showResult:e.show_result_to_users,pollChartType:e.poll_result_chart_type.toString(),pollQuestion:e.question,pollQuestionType:e.poll_question_type.toString(),pollRatingResponse:"",pollStartDate:ke()().utc().local().format("DD-MM-YYYY"),pollEndDate:ke()().utc().local().format("DD-MM-YYYY"),pollStartTime:ke()().utc().local().format("hh:mm:ss"),pollEndTime:ke()().utc().local().format("hh:mm:ss"),status_id:e.status_id,pollResponse:e.option_text.map((function(e){return e.option_text})),pollOptionText:e.option_text})),h(null!==e.image_name?e.image_name:null!==e.document_name?e.document_name:"");var l=(null===(t=e.image)||void 0===t?void 0:t.slice(e.image.lastIndexOf("."),e.image.length).includes("jpg"))||(null===(a=e.image)||void 0===a?void 0:a.slice(e.image.lastIndexOf("."),e.image.length).includes("jpeg"))||(null===(n=e.image)||void 0===n?void 0:n.slice(e.image.lastIndexOf("."),e.image.length).includes("png"));re(!!l),oe.setFieldsValue({pollName:e.title,pollHelpText:e.help_text,pollQuestion:e.question}),je(e.title)},Ee=function(e){var t,a,n;y(Object(M.a)({},b,{pollId:e.poll_id,pollName:e.title,pollHelpText:e.help_text,showResult:e.show_result_to_users,pollChartType:e.poll_result_chart_type.toString(),pollQuestion:e.question,pollQuestionType:e.poll_question_type.toString(),pollRatingType:e.poll_question_rating_type?e.poll_question_rating_type.toString():"",pollRatingResponse:"",pollStartDate:Ar.formatAsDDMMYYYY(e.start_date),pollEndDate:Ar.formatAsDDMMYYYY(e.end_date),pollStartTime:e.start_time,pollEndTime:e.end_time,status_id:e.status_id,pollResponse:e.option_text.map((function(e){return e.option_text})),pollOptionText:e.option_text})),h(null!==e.image_name?e.image_name:null!==e.document_name?e.document_name:"");var l=(null===(t=e.image)||void 0===t?void 0:t.slice(e.image.lastIndexOf("."),e.image.length).includes("jpg"))||(null===(a=e.image)||void 0===a?void 0:a.slice(e.image.lastIndexOf("."),e.image.length).includes("jpeg"))||(null===(n=e.image)||void 0===n?void 0:n.slice(e.image.lastIndexOf("."),e.image.length).includes("png"));re(!!l),oe.setFieldsValue({pollName:e.title,pollHelpText:e.help_text,pollQuestion:e.question}),je(e.title)},ve=function(e){y(Object(M.a)({},b,Object(et.a)({},e.target.id,e.target.value)))},be=function(e,t){"3"===e&&"pollQuestionType"===t?function(e){showResult&&"3"===e&&"4"!=b.pollChartType&&Q(!0)}(e):Q(!1),y(Object(M.a)({},b,Object(et.a)({},t,e)))},ye=function(e){y(Object(M.a)({},b,Object(et.a)({},"pollResponse",e)))},Oe=function(e){var t=null===e||void 0===e?void 0:e.includes("image");re(!!t)},_e=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},je=function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"checkpoll/",{title:e},t).then((function(e){e.data&&F(e.data[0])}))};return l.a.createElement(l.a.Fragment,null,pe,l.a.createElement(l.a.Fragment,null,K?l.a.createElement(ao,{poll:b,setPollsDate:function(e,t){y(Object(M.a)({},b,Object(et.a)({},t,e)))},backtoEdit:function(e){J(!1),y(Object(M.a)({},b,{pollName:e.pollName,pollHelpText:e.pollHelpText,pollDocument:e.pollDocument,showResult:e.showResult,pollChartType:e.pollChartType,pollQuestion:e.pollQuestion,pollQuestionType:e.pollQuestionType,pollRatingResponse:e.pollRatingResponse,pollStartDate:e.pollStartDate,pollEndDate:e.pollEndDate,pollResponse:e.pollResponse})),oe.setFieldsValue({pollHelpText:e.pollHelpText,pollQuestion:e.pollQuestion})},CreateDuplicatePoll:function(){var e;I(!0);var t=JSON.parse(v("user")),a={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=[];b.pollResponse.map((function(e){return n.push({option_text:e})}));var l=n.map((function(e){var t=Object.assign({},e);return b.pollOptionText.map((function(a){a.option_text===e.option_text?(t.poll_option_id=a.poll_option_id,t.poll=b.pollId):a.option_text===e.option_text||t.poll_option_id||(t.poll_option_id="",t.poll=b.pollId)})),t})),r={};var s=ke.a.isMoment(b.pollStartDate)?Ar.formatAsDDMMYYYY(b.pollStartDate):b.pollStartDate,o=ke.a.isMoment(b.pollEndDate)?Ar.formatAsDDMMYYYY(b.pollEndDate):b.pollStartDate,i=b.pollStartTime instanceof Date?Ar.formatAsHHmmss(b.pollStartTime):b.pollStartTime,c=b.pollEndTime instanceof Date?Ar.formatAsHHmmss(b.pollEndTime):b.pollEndTime;0===(null===(e=b.pollDocument)||void 0===e?void 0:e.length)?(r={create_poll:{title:b.pollName,help_text:b.pollHelpText,show_result_to_users:b.showResult?1:0,poll_result_chart_type:b.pollChartType?parseInt(b.pollChartType):2,poll_question_type:parseInt(b.pollQuestionType),poll_question_rating_type:b.pollRatingType?parseInt(b.pollRatingType):"",question:b.pollQuestion,start_date:s,start_time:i,end_date:o,end_time:c,status_id:b.status_id,poll_id:b.pollId,created_by:parseInt(so.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(so.enc.Utf8))},option:l},P.a.post(R+"poll/",r,a).then((function(){I(!1);de.info({description:"Poll has been created successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"}))):(r=le?{create_poll:{title:b.pollName,help_text:b.pollHelpText,image:b.pollDocument[0].base64,image_name:g,show_result_to_users:b.showResult?1:0,poll_result_chart_type:b.pollChartType?parseInt(b.pollChartType):2,poll_question_type:parseInt(b.pollQuestionType),poll_question_rating_type:b.pollRatingType?parseInt(b.pollRatingType):"",question:b.pollQuestion,start_date:s,start_time:i,end_date:o,end_time:c,created_by:parseInt(so.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(so.enc.Utf8))},option:l}:{create_poll:{title:b.pollName,help_text:b.pollHelpText,document:b.pollDocument[0].base64,document_name:g,show_result_to_users:b.showResult?1:0,poll_result_chart_type:b.pollChartType?parseInt(b.pollChartType):2,poll_question_type:parseInt(b.pollQuestionType),poll_question_rating_type:b.pollRatingType?parseInt(b.pollRatingType):"",question:b.pollQuestion,start_date:s,start_time:i,end_date:o,end_time:c,created_by:parseInt(so.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(so.enc.Utf8))},option:l},P.a.post(R+"poll/",r,a).then((function(){I(!1);de.info({description:"Poll has been created successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"})))},attachmentName:g,data:e,showError:H,error:B,loader:k}):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(ro,null,l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",initialValues:{remember:!0},form:oe},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Duplicate Poll")),l.a.createElement(C.a,{spinning:k,size:"large"},l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},B&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Poll Title",value:b.pollName},l.a.createElement(lo,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:b.pollName,id:"pollName",onChange:function(e){return ve(e)},onBlur:function(e){return function(e){e.target.value!==ie.state.title&&je(e.target.value)}(e)},autoComplete:"off",className:"required ".concat(Nr.a.sm_textarea)}),"status: false"===A&&b.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&b.pollName.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==A&&l.a.createElement(st.a,{message:"Sorry! This Poll title already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Description",value:b.pollHelpText},l.a.createElement(lt.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",htmlFor:"helptext",id:"pollHelpText",name:"pollHelpText",value:b.pollHelpText,autoComplete:"off",maxLength:500,onChange:function(e){return ve(e)}})))),l.a.createElement(S.a,{span:24,className:"gutter-row mt-3"},l.a.createElement("h6",null,"Upload"),l.a.createElement(lt.a.Item,{name:"upload",className:"upload-list",valuePropName:"fileList"},l.a.createElement(jr,{file:b.pollDocument,handleStepOneUpload:function(e,t){"removed"===e.file.status&&ee(!0);var a=e.fileList.slice(-1);Oe(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),h(e.file.name),y(Object(M.a)({},b,Object(et.a)({},t,a)))},handleBeforeUpload:function(e,t){if(4===b.status_id)return null;var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;s?ee(!1):(ee(!0),yr.b.error("".concat(e.name," is not a supported format file type.")));var o="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,i="application/pdf"===e.type||a||n||l||r,c=e.size/1024/1024<5,m=e.size/1024/1024<10;return o&&(!c&&o?(ee(!1),yr.b.error("Image must smaller than 5MB!")):ee(!0)),i&&(!m&&i?(ee(!1),yr.b.error("Document must smaller than 10MB!")):ee(!0)),s&&c||m},handleOnRemove:function(){if(4===b.status_id)return null},handlePollImagePreview:function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.awrap(_e(e.originFileObj));case 2:e.preview=t.sent,y(Object(M.a)({},b,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},handleCancel:function(e){return y(Object(M.a)({},b,{previewVisible:!1}))},poll:b}))))),l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,{className:"align-items-center d-flex"},l.a.createElement(S.a,{span:24,md:8,lg:8,xl:6},l.a.createElement(lt.a.Item,{name:"showresult",label:"Show result to users ",className:"mb-0"},l.a.createElement(Or.a,{id:"showResult",checked:b.showResult,onChange:function(e,t){return function(e,t){y(Object(M.a)({},b,Object(et.a)({},t.target.id,e)))}(e,t)}}))),b.showResult?l.a.createElement(S.a,{span:24,lg:6},l.a.createElement(mt,{label:"Display final results as",value:b.pollChartType},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"result"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(a={className:"input-control",htmlFor:"result"},Object(et.a)(a,"className","required"),Object(et.a)(a,"value","2"===b.pollChartType?"":b.pollChartType),Object(et.a)(a,"onSelect",(function(e){return be(e,"pollChartType")})),a),l.a.createElement(ot.a.Option,{value:"1"},"Pie Chart"),l.a.createElement(ot.a.Option,{value:"3"},"Bar Chart"),l.a.createElement(ot.a.Option,{value:"4"},"Star Format"))))),q&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please select the chat type as star",type:"error",showIcon:!0}))):l.a.createElement(S.a,null)))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"d-block"},l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,lg:8,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(mt,{label:"Question Type",value:b.pollQuestionType},l.a.createElement(lt.a.Item,{className:"required",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(r={className:"",htmlFor:"questiontype"},Object(et.a)(r,"className","required"),Object(et.a)(r,"id","pollQuestionType"),Object(et.a)(r,"value",b.pollQuestionType),Object(et.a)(r,"onSelect",(function(e){return be(e,"pollQuestionType")})),r),l.a.createElement(ot.a.Option,{value:"1"},"Select Single"),l.a.createElement(ot.a.Option,{value:"2"},"Select Multiple"),l.a.createElement(ot.a.Option,{value:"3"},"Rating Type",4===b.status_id)))))),"3"===b.pollQuestionType?l.a.createElement(S.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(mt,{label:"Rating Type",value:b.pollRatingType},l.a.createElement(lt.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,(s={className:"",htmlFor:"ratingtype"},Object(et.a)(s,"className","required"),Object(et.a)(s,"id","pollRatingType"),Object(et.a)(s,"value",b.pollRatingType),Object(et.a)(s,"onSelect",(function(e){return be(e,"pollRatingType")})),s),l.a.createElement(ot.a.Option,{value:"1"},"Stars"),l.a.createElement(ot.a.Option,{value:"2"},"Smiley"),l.a.createElement(ot.a.Option,{value:"3"},"Thermometer"),l.a.createElement(ot.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(ot.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Question",value:b.pollQuestion},l.a.createElement(lt.a.Item,{className:"required edit-input",name:"pollQuestion",id:"pollQuestion"},l.a.createElement(_.a,(i={className:"input-control edit-input",name:"pollQuestion",id:"pollQuestion",htmlFor:"pollQuestion"},Object(et.a)(i,"className","required"),Object(et.a)(i,"defaultValue",b.pollQuestion),Object(et.a)(i,"value",b.pollQuestion),Object(et.a)(i,"onChange",(function(e){return ve(e)})),Object(et.a)(i,"autoComplete","off"),Object(et.a)(i,"maxLength",500),i))))),l.a.createElement(S.a,{span:24,className:"mt-4"},"3"===b.pollQuestionType&&b.pollRatingType?"1"===b.pollRatingType?l.a.createElement(Sr.a,Object.assign({},no,{value:b.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return be(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===b.pollRatingType?l.a.createElement("img",{src:Yr.a,alt:"send message"}):"3"===b.pollRatingType?l.a.createElement("img",{src:Mr.a,alt:"send message"}):"4"===b.pollRatingType?l.a.createElement("img",{src:Pr.a,alt:"send message"}):"5"===b.pollRatingType?l.a.createElement("img",{src:Br.a,alt:"send message"}):null:"1"===b.pollQuestionType?l.a.createElement("div",null,l.a.createElement(Cr,{setSingleChoiceResponse:ye,pollResponse:b.pollResponse})):"2"===b.pollQuestionType?l.a.createElement(Cr,{pollResponse:b.pollResponse,setSingleChoiceResponse:ye}):null))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ne.a,{type:"primary",className:"md mr-4",onClick:function(e){e.preventDefault(),X&&A.includes("false")&&b.pollName&&b.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&b.pollHelpText&&b.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&b.pollQuestionType&&b.pollQuestionType.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&b.pollQuestion?b.showResult||"3"===b.pollQuestionType?!b.pollChartType&&b.showResult?(H(!0),J(!1)):"3"!==b.pollQuestionType||b.pollRatingType?(H(!1),J(!0)):(H(!0),J(!1)):(H(!1),J(!0)):(H(!0),J(!1))}},"Preview"),l.a.createElement(Ne.a,(c={type:"secondary"},Object(et.a)(c,"type","secondary"),Object(et.a)(c,"htmlType","submit"),Object(et.a)(c,"onClick",(function(){u.push("/orgcc/pollsdirectory")})),c),ae))))))))))))))},io=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],s=a[1];Object(n.useEffect)((function(){s([{title:"App User",value:"0",key:"0",disabled:!0,roleValue:"1"},{title:"Super User",value:"1",key:"1",roleValue:!0===e.roles["Super User"]||"1"===e.roles["Super User"]?"1":"0"},{title:"Control Center",value:"2",key:"2",roleValue:!0===e.roles["Control Center"]||"1"===e.roles["Control Center"]?"1":"0"},{title:"IDB",value:"3",key:"3",roleValue:!0===e.roles.IDB||"1"===e.roles.IDB?"1":"0"}])}),[e.roles]);var i=[{title:"",dataIndex:"title",key:"title",width:"30%"},{title:"",dataIndex:"",key:"x",width:"20%",editable:!0,render:function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{name:t.title,value:t.value,checked:"1"===t.roleValue,onChange:function(t){return e.handleRoleOnSelect(t)},disabled:"App User"===t.title}))}}];return l.a.createElement(ye.a,{className:"no-bg-table",locale:{emptyText:"  "},columns:i,dataSource:r,pagination:!1,rowClassName:function(){return"editable-row"},rowKey:"rowkey"})},co=N.a.Content,mo=function(e){var t,a=Object(n.useState)({firstName:"",lastName:"",status:"",email:"",mobile:"",empId:"",department:"",startDate:"",endDate:""}),r=Object(o.a)(a,2),s=r[0],i=r[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)([]),f=Object(o.a)(h,2),E=f[0],v=f[1],b=Object(m.g)(),y=lt.a.useForm(),O=Object(o.a)(y,1)[0],j=Object(n.useState)(!1),D=Object(o.a)(j,2),k=D[0],I=D[1],x=Object(n.useState)(!1),T=Object(o.a)(x,2),A=T[0],U=T[1],F=Object(n.useState)(!1),Y=Object(o.a)(F,2),L=Y[0],B=Y[1],H=Object(n.useState)(!1),z=Object(o.a)(H,2),V=z[0],q=z[1],Q=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){var e,t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},a=(e={},Object(et.a)(e,"Control Center",b.location.state.is_org_cc_user?"1":"0"),Object(et.a)(e,"Super User",b.location.state.is_super_user?"1":"0"),Object(et.a)(e,"IDB",b.location.state.is_idb_user?"1":"0"),e);v(a),U(!0),P.a.get(R+"employee/".concat(Q,"/"),t).then((function(e){var t,a=e.data;i(Object(M.a)({},s,{firstName:a.details.first_name,lastName:a.details.last_name,status:a.status_id.toString(),email:a.email,mobile:a.mobile_number,empId:"",department:"",startDate:ke()(a.details.start_date,"YYYY-MM-DD"),endDate:(null===(t=a.details.end_date)||void 0===t?void 0:t.length)>0?ke()(a.details.end_date,"YYYY-MM-DD"):""})),U(!1),O.setFieldsValue({firstName:a.details.first_name,lastName:a.details.last_name,email:a.email})}))}),[]);var G=function(e){i(Object(M.a)({},s,Object(et.a)({},e.target.id,e.target.value)))},W=function(e,t){i(Object(M.a)({},s,Object(et.a)({},t,e)))},K=function(e){return e&&e<ke()().startOf("day")},J=function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(U(!0),null!==s.startDate&&s.firstName.length>0&&s.lastName.length>0){I(!1);var t={first_name:s.firstName,last_name:s.lastName,status_id:s.status,is_org_cc_user:!0===E["Control Center"]||"1"===E["Control Center"]?1:0,is_idb_user:!0===E.IDB||"1"===E.IDB?1:0,is_super_user:!0===E["Super User"]||"1"===E["Super User"]?1:0,mobile_number:s.mobile,start_date:s.startDate?ke()(s.startDate).format("DD-MM-YYYY"):"",end_date:s.endDate?ke()(s.endDate).format("DD-MM-YYYY"):"31-12-2021"};P.a.put(R+"employee/".concat(Q,"/"),t,e).then((function(){U(!1),b.push("/orgcc/manageemployees")}))}else I(!0),U(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(co,{className:"w-100"},l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/manageemployees"},l.a.createElement(nt.a.Item,null,"Manage Employees")),l.a.createElement(nt.a.Item,null,"Edit Profile"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Profile")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(C.a,{spinning:A,size:"large"},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"",form:O},k&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"First Name",value:s.firstName},l.a.createElement(lt.a.Item,{className:"required",name:"firstName"},l.a.createElement(_.a,{className:"input-control",id:"firstName",htmlFor:"firstName",onChange:function(e){return G(e)},autoComplete:"off"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Last Name",value:s.lastName},l.a.createElement(lt.a.Item,{className:"required",name:"lastName",validateStatus:"success"},l.a.createElement(_.a,{className:"input-control",id:"lastName",htmlFor:"lastName",onChange:function(e){return G(e)},autoComplete:"off"})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ie,value:s.email},l.a.createElement(lt.a.Item,{className:"required",name:"email",validateStatus:"success"},l.a.createElement(_.a,{type:"email",className:"input-control",id:"email",htmlFor:"email",disabled:!0,value:s.email,onChange:function(e){return G(e)},onBlur:function(e){return function(e){/\S+@\S+\.\S+/.test(e.target.value)?B(!1):B(!0)}(e)},autoComplete:"off"}),L&&l.a.createElement(st.a,{message:gt,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(mt,{label:Te,value:s.mobile},l.a.createElement(lt.a.Item,{className:"required",name:"mobile",validateStatus:"success"},l.a.createElement(kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:s.mobile,onChange:function(e){i(Object(M.a)({},s,{mobile:e}))},onBlur:function(e){s.mobile.length>10||/^\+\d$/.test(e.target.value)?q(!1):q(!0)},autoComplete:"off"}),V&&l.a.createElement(st.a,{message:ht,type:"error",showIcon:!0})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:Ae,value:s.status},l.a.createElement(lt.a.Item,{className:"required",name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ot.a,{className:"input-control w-100",value:s.status,htmlFor:"status",onSelect:function(e){return function(e,t){i(Object(M.a)({},s,Object(et.a)({},t,e)))}(e,"status")}},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"Start Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper required",rules:[{required:!0,message:vt}]},l.a.createElement(rt.a,{className:"w-100 ",name:"startDate",value:s.startDate,onChange:function(e){return W(e,"startDate")},disabledDate:K})))),l.a.createElement(S.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(mt,{label:"End Date",value:"date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(rt.a,{className:"w-100 ",name:"endDate",value:s.endDate,onChange:function(e){return W(e,"endDate")},disabledDate:K})))),l.a.createElement(S.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(mt,{label:"Select Role",value:"role"},l.a.createElement(lt.a.Item,{name:"role",onClick:function(){g(!p)}},p?l.a.createElement(io,{handleRoleOnSelect:function(e){var t;if("Super User"===e.target.name&&e.target.checked)v(Object(M.a)({},E,(t={},Object(et.a)(t,"Super User","1"),Object(et.a)(t,"Control Center","1"),Object(et.a)(t,"IDB","1"),t)));else if("Control Center"!==e.target.name||e.target.checked)if("IDB"!==e.target.name||e.target.checked)v(Object(M.a)({},E,Object(et.a)({},e.target.name,e.target.checked?"1":"0")));else{var a;v(Object(M.a)({},E,(a={},Object(et.a)(a,"Super User","0"),Object(et.a)(a,"IDB","0"),a)))}else{var n;v(Object(M.a)({},E,(n={},Object(et.a)(n,"Super User","0"),Object(et.a)(n,"Control Center","0"),n)))}},roles:E}):null,l.a.createElement(Er.a,{className:"down-arrow-ico"})))))),l.a.createElement(lt.a.Item,{className:"mt-5"},l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",className:"mr-4",onClick:function(){J()}},"Save"),l.a.createElement(Ne.a,{type:"secondary",onClick:function(){b.push("/orgcc/manageemployees")}},ae))))))))))))},uo=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,isEmployeeAssociated:"",hotlineAssociated:!1,openlineAssociated:!1,hotlineData:[],openlineData:[],data:[]},a.showModal=function(){a.setState({visible:!0}),a.checkifEmployee()},a.handleOk=function(){a.setState({visible:!1}),a.deleteEmployee()},a.handleForceOk=function(){a.setState({visible:!1}),a.deleteEmployee()},a.handleCancel=function(){a.setState({visible:!1})},a.checkifEmployee=function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};a.props.setLoader(!0),P.a.get(R+"checkEmployeeDelete/"+a.props.userId+"/",e).then((function(e){a.props.setLoader(!1),0===e.data.assigned_hotlines.length&&0===e.data.assigned_openlines.length?a.setState({isEmployeeAssociated:!1}):(a.setState({isEmployeeAssociated:!0,data:e.data}),e.data.assigned_hotlines.length>0&&a.setState({hotlineAssociated:!0,hotlineData:e.data.assigned_hotlines}),e.data.assigned_openlines.length>0&&a.setState({openlineAssociated:!0,openlineData:e.data.assigned_openlines}),a.setState({data:e.data}))})).catch((function(e){a.setState({isEmployeeAssociated:""})}))},a.deleteEmployee=function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(a.state.isEmployeeAssociated){var t=Object(M.a)({},a.state.data,{user_id:a.props.userId});P.a.post(R+"deleteEmployee/",t,e).then((function(){window.location="/orgcc/manageemployees"})).catch((function(e){}))}else{var n={assigned_hotlines:[],assigned_openlines:[],user_id:a.props.userId};P.a.post(R+"deleteEmployee/",n,e).then((function(){window.location="/orgcc/manageemployees"})).catch((function(e){}))}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},le),l.a.createElement(_t.a,{title:"Delete Employee",visible:this.state.visible&&""!==this.state.isEmployeeAssociated&&!this.state.isEmployeeAssociated,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this employee?")),l.a.createElement(_t.a,{title:"Delete Employee",visible:this.state.visible&&this.state.isEmployeeAssociated,onOk:this.handleForceOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,this.state.hotlineAssociated&&!this.state.openlineAssociated?"Please assign the below mentioned hotline(s) to some other user before deleting this user.":!this.state.hotlineAssociated&&this.state.openlineAssociated?"Please assign the below mentioned openline(s) to some other user before deleting this user.":this.state.hotlineAssociated&&this.state.openlineAssociated?"Please assign the below mentioned hotline(s) and openline(s) to some other user before deleting this user.":"",l.a.createElement("br",null),this.state.hotlineData.length>0?this.state.hotlineData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,e.name),l.a.createElement("br",null))})):this.state.openlineData.length>0?this.state.openlineData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,e.name),l.a.createElement("br",null))})):null,"Are you sure you want to delete this employee?")))}}]),t}(n.Component),po=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(c.b,{to:{pathname:"/orgcc/editemployee/".concat(e.data.user_id),state:e.data}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editemployee/".concat(e.data.user_id)},ne)," ")),l.a.createElement("li",null,l.a.createElement(uo,{userId:e.data.user_id,name:e.data.first_name+" "+e.data.last_name,setLoader:e.setLoader}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),go=pr.a.SHOW_PARENT,ho=[{title:"AM Web",value:"1",key:"1"},{title:J,value:"2",key:"2"},{title:"APP",value:"3",key:"3"},{title:"IDB",value:"4",key:"4"},{title:"Super User",value:"5",key:"5"}],fo=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={value:""},a.onChange=function(e){a.setState({value:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e={treeData:ho,onChange:this.props.handlePollStatusOnSelect,treeCheckable:!0,showCheckedStrategy:go,placeholder:"Apply Filter",style:{width:"100%"}};return l.a.createElement(pr.a,e)}}]),t}(l.a.Component),Eo=_.a.Search,vo=(l.a.createElement(Oe.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),bo=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onSearch=function(e){a.props.setSearchValue(e)},a.handlePollStatusOnSelect=function(e){var t=e.map((function(e){return parseInt(e)})),n={is_app_user:t.includes(3)?1:0,is_am_web_user:t.includes(1)?1:0,is_org_cc_user:t.includes(2)?1:0,is_super_user:t.includes(5)?1:0,is_idb_user:t.includes(4)?1:0};a.props.setFilterOptions(n)},a.state={data:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.employees;this.setState({data:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.employees!==e.employees&&this.setState({data:e.employees})}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t=this.props.loader,a=[{title:"First Name",dataIndex:"first_name",key:"first_name",width:"22%",render:function(e){return{children:e,props:{"data-title":"First Name"}}}},{title:"Last Name",dataIndex:"last_name",key:"last_name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}}},{title:Te,dataIndex:"mobile_number",key:"mobile_number",width:"20%",render:function(e){return{children:e,props:{"data-title":"Mobile Number"}}}},{title:"Access",dataIndex:"",key:"x",render:function(e){var t="",a="",n=!1;return e.is_am_web_user&&(a="AM Web",n=!0),e.is_org_cc_user&&(a=J,n=!0),e.is_idb_user&&(a="IDB",n=!0),e.is_super_user&&(a="Super User",n=!0),e.is_app_user&&(n||(a="APP")),0===t.length?t+=a:"APP"!==a&&(t.includes("APP")?t=a:t+=", "+a),{children:t,props:{"data-title":"Access"}}},width:"20%"},{title:Ae,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}},{title:"Actions",dataIndex:"",key:"x",width:"10%",render:function(t){return{children:l.a.createElement(po,{data:t,setLoader:e.props.setLoader}),props:{"data-title":"Actions"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:this.props.data}),l.a.createElement(vo,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Manage Employees")),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Eo,{placeholder:"Search",onSearch:this.onSearch})),l.a.createElement(S.a,{span:24,lg:9,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(fo,{handlePollStatusOnSelect:this.handlePollStatusOnSelect}),l.a.createElement(Er.a,{className:"down-arrow-ico multiselect-arrow sm-arrow"})))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(c.b,{to:"/orgcc/addemployee"},l.a.createElement(je,{value:"Add Employee"}))))),l.a.createElement(C.a,{spinning:t,size:"large"},l.a.createElement(_e,{rowKey:"unique_identifier",columns:a,data:this.state.data})))))))}}]),t}(l.a.Component);var yo=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)({}),p=Object(o.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(""),E=Object(o.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)([]),O=Object(o.a)(y,2),_=O[0],N=O[1];Object(n.useEffect)((function(){(0,e.dispatch)(ba(g,v))}),[g,v]),Object(n.useEffect)((function(){null===e.manageEmpData?u(!0):null!==e.manageEmpData&&u(!1),N(e.manageEmpData)}),[e.manageEmpData]);return l.a.createElement(bo,{statusOnClicked:function(){s(!r)},employees:_,data:e,loader:m,setLoader:u,setFilterOptions:function(e){h(e)},setSearchValue:function(e){b(e)}})})),Oo=function(e){var t=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],a=Object(n.useState)({labels:[],datasets:[]}),r=Object(o.a)(a,2),s=r[0],i=r[1],c=Object(n.useState)({title:{display:!0,text:e.chartTitle},legend:{onClick:null}}),m=Object(o.a)(c,2),u=m[0],d=m[1];Object(n.useEffect)((function(){var a={},n=[],l=[];d({title:{display:!0,text:e.chartTitle},legend:{onClick:null},scales:{xAxes:[{title:{display:!0,text:e.chartTitle}}],yAxes:[{title:{display:!0,text:e.chartTitle}}]}});var r=[],o={},c={};e.isAllSelected?(r=Object.entries(e.report)).forEach((function(e){c=Object(M.a)({},c,Object(et.a)({},e[0],e[1]))})):(Object.entries(e.report).forEach((function(e){e[1]&&r.push(e[1])})),r.forEach((function(e){var t={};Object.keys(e).forEach((function(a){t=Object(M.a)({},t,Object(et.a)({},a.substring(0,a.indexOf("_")),e))})),o=Object(M.a)({},o,{},t)})));var m="months"===e.dateRange,u="years"===e.dateRange;if(m){if(l=e.months,e.isAllSelected){for(var g=0;g<=e.months.length-1;g++)n.push(0);Object.keys(c).forEach((function(t){var a=t.substring(t.indexOf("_")+1);e.months.forEach((function(e,l){parseInt(a)-1===l&&(n[l]=c[t])}))}))}}else if(u){var h=[e.years[0]];if(e.years[0]!==e.years[1]){for(var f=parseInt(e.years[1])-parseInt(e.years[0]),E=0;E<f-1;E++)h.push(e.years[0]+1);h.push(e.years[1])}if(l=h,e.isAllSelected){for(var v=0;v<=h.length-1;v++)n.push(0);Object.keys(c).forEach((function(e){var t=e.substring(e.indexOf("_")+1);h.forEach((function(a,l){parseInt(t)===a&&(n[l]=c[e])}))}))}}else if(l=t,e.isAllSelected){for(var b=0;b<=t.length-1;b++)n.push(0);Object.keys(c).forEach((function(e){var a=e.substring(e.indexOf("_")+1);t.forEach((function(t,l){a.split("-")[2]===t&&(n[l]=c[e])}))}))}var y=[];if(e.isAllSelected)a=Object(M.a)({},s,{labels:l,datasets:[{label:$,data:n,backgroundColor:p($),borderWidth:0}]}),i(a),y=n;else{var O,_=[];if(e.selectedLines.forEach((function(e){var t=[],a={};l.forEach((function(n,l){var r,s,i="",c="",d="";(o[e.line_id]&&(c=(i=Object.keys(o[e.line_id])[0]).substring(0,i.indexOf("_"))),o[c])&&(d=null===(r=Object.keys(o[c])[0])||void 0===r?void 0:r.substring((null===(s=Object.keys(o[c])[0])||void 0===s?void 0:s.indexOf("_"))+1));var g=m?l:n;m||u?parseInt(d)-1===g?t.push(o[e.line_id][i]):t.push(0):d.split("-")[2]===g?t.push(o[e.line_id][i]):t.push(0),a={label:e.line_name,data:t,backgroundColor:p(e.line_name),borderWidth:0}})),_.push(a)})),a=Object(M.a)({},s,{labels:l,datasets:_}),e.selectedLines.length>0)y=null===(O=a.datasets[0])||void 0===O?void 0:O.data;else y=n;i(a)}e.sendBackData(l,y)}),[e.selectedLines,e.report]);var p=function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);var n="#";for(a=0;a<3;a++){n+=("00"+(t>>8*a&255).toString(16)).substr(-2)}return n};return l.a.createElement(xs.a,{id:"barChart",data:s,options:u})},_o=function(e){var t={labels:["Unresolved Conversations","Resolved Conversations"],datasets:[{label:"",data:[e.totalMessages-e.resolvedMessages,e.resolvedMessages],backgroundColor:["rgba(234, 80, 55)","rgba(32, 50, 92)"],borderColor:["rgba(255, 255, 255)","rgba(255, 255, 255)"],borderWidth:3}]},a={title:{display:!0,text:e.chartTitle},legend:{onClick:null}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(xs.c,{id:"pieChart",data:t,options:a}))},No=function(e){var t=Object(n.useState)({labels:["Urgency Level High","Urgency Level Medium","Urgency Level Low"],datasets:[]}),a=Object(o.a)(t,2),r=a[0],s=a[1],i={title:{display:!0,text:e.chartTitle},legend:{onClick:null}};return Object(n.useEffect)((function(){var t=[{label:"",data:[e.urgencyLevels.high,e.urgencyLevels.medium,e.urgencyLevels.low],backgroundColor:["rgba(234, 80, 55)","rgba(32, 50, 92)","rgba(194, 194, 214)"],borderColor:["rgba(255, 255, 255)","rgba(255, 255, 255)","rgba(255, 255, 255)"],borderWidth:3}],a=Object(M.a)({},r,{datasets:t});s(a)}),[e.urgencyLevels]),l.a.createElement(l.a.Fragment,null,l.a.createElement(xs.b,{id:"doughNutChart",data:r,options:i}))},jo=a(1473),wo=pr.a.SHOW_PARENT,So=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={value:$,treeData:[],treeLength:0,selectedLines:[]},a.onChange=function(e){a.setState({treeLength:e.length,selectedLines:e.filter((function(e){return"All"!==e}))});var t=a.state.treeData,n=[];0===(n=e.length>1&&"All"===e[0]?e.filter((function(e){return"All"!==e})):e.length>1&&e.includes("All")?e.filter((function(e){return"All"===e})):e).length?a.setState({value:$}):a.setState({value:n});var l=[];t.forEach((function(e){n.forEach((function(t){e.value===t&&l.push({line_name:e.title,line_id:e.value,start_date:e.start_date})}))})),a.props.setSelectedLines(l)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.props.lines!==e.lines||t.treeLength!==this.state.treeLength){var n=[{title:$,value:$,key:$,disableCheckbox:!1}];this.props.lines.map((function(e){a.state.treeLength<5?(n.push({title:e.line_name,value:e.line_id,key:e.line_id,start_date:e.start_date,disableCheckbox:!1}),a.props.setMaxLimitReached(!1)):(n.push({title:e.line_name,value:e.line_id,key:e.line_id,start_date:e.start_date,disableCheckbox:!a.state.selectedLines.includes(e.line_id)}),a.props.isAllSelected||a.props.setMaxLimitReached(!0))})),this.setState({treeData:n})}this.props.data.path!==e.data.path&&this.setState({value:$})}},{key:"render",value:function(){var e={treeData:this.state.treeData,value:this.state.value,onChange:this.onChange,treeCheckable:!0,placeholder:this.props.data.path.includes("hotline")?"Select hotline":"Select openline",showCheckedStrategy:wo,style:{width:"100%"}};return l.a.createElement(pr.a,e)}}]),t}(l.a.Component),Co=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(Ne.a,{onClick:function(){return e.showDownloadOptions("pdf")}},"Download PDF")),l.a.createElement("li",null,l.a.createElement(Ne.a,{onClick:function(){return e.showDownloadOptions("csv")}},"Download CSV"))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement(Ne.a,{type:"primary"},"Download"),l.a.createElement(Er.a,{className:"down-arrow-ico white"})));var e}}]),t}(l.a.Component),Do=["January","February","March","April","May","June","July","August","September","October","November","December"],ko=N.a.Content,Io=rt.a.RangePicker,xo=function(e){var t,a,r=Object(n.useState)(!1),s=Object(o.a)(r,2),i=s[0],c=s[1],m=Object(n.useState)(""),u=Object(o.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(""),h=Object(o.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(""),b=Object(o.a)(v,2),y=b[0],O=b[1],_=Object(n.useState)([]),j=Object(o.a)(_,2),D=j[0],k=j[1],I=Object(n.useState)([]),x=Object(o.a)(I,2),T=x[0],A=x[1],U=Object(n.useState)([]),M=Object(o.a)(U,2),F=M[0],Y=M[1],L=Object(n.useState)(""),B=Object(o.a)(L,2),H=B[0],z=B[1],V=Object(n.useState)([]),q=Object(o.a)(V,2),Q=q[0],G=q[1],W=Object(n.useState)(!1),K=Object(o.a)(W,2),J=K[0],$=K[1],Z=Object(n.useState)("0"),X=Object(o.a)(Z,2),ee=X[0],te=X[1],ae=Object(n.useState)("0"),ne=Object(o.a)(ae,2),le=ne[0],re=ne[1],se=Object(n.useState)("0"),oe=Object(o.a)(se,2),ie=oe[0],ce=oe[1],me=Object(n.useState)({}),de=Object(o.a)(me,2),pe=de[0],ge=de[1],he=Object(n.useState)([]),fe=Object(o.a)(he,2),Ee=fe[0],ve=fe[1],be=Object(n.useState)(!0),ye=Object(o.a)(be,2),Oe=ye[0],_e=ye[1],Ne=e.path.includes("hotline")?"Hotline conversations from ":"Openline conversations from ",je=e.path.includes("hotline")?"Hotline conversations from the last 90 days.":"Openline conversations from the last 90 days.",we=Object(n.useState)(je),Se=Object(o.a)(we,2),De=Se[0],Ie=Se[1];Object(n.useEffect)((function(){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},a=e.path.includes("hotline")?"hotline/":"openline/";P.a.get(R+a,t).then((function(t){var a=[];t.data.map((function(t){a.push({line_name:(e.path.includes("hotline"),t.name),line_id:e.path.includes("hotline")?t.hotline_id:t.openline_id,start_date:t.start_date})})),A(a)})),p(""),$(!1),_e(!0),k([]),c(!1),O(""),z("months"),E(""),Ie(je),te("0"),re("0"),ce("0")}),[e.path]),Object(n.useEffect)((function(){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};c(!0);var a=[],n=[];0===D.length||1===D.length&&"All"===D[0].line_name?(_e(!0),$(!1),a=T.map((function(e){return e.line_id})),n=T.map((function(e){return new Date(e.start_date)}))):(_e(!1),a=D.map((function(e){return e.line_id})),n=T.map((function(e){return new Date(e.start_date)})));var l="",r="",s="",o=new Date("01-01-".concat((new Date).getFullYear())),i=new Date("".concat((new Date).getMonth()+1,"-01-").concat((new Date).getFullYear())),m="";if("monthly"===f)l="0",r="0",s="1",z("days"),Ie(Ne+i.toDateString()+" till date");else if("yearly"===f)l="0",r="1",s="0",z("months"),Ie(Ne+o.toDateString()+" till date");else if("beginning"===f){var u=n.reduce((function(e,t){return e<t?e:t})),p=ke()(u,"YYYY-MM-DD"),g=ke()(new Date,"YYYY-MM-DD"),h=Math.abs(p.diff(g,"days"));h<=31?(z("days"),l="0",r="0",s="1"):h>30&&h<=365?(z("months"),l="0",r="1",s="0"):(z("years"),l="1",r="0",s="0"),Ie(Ne+u.toDateString()+" till date"),m=u}else"dateRange"===f?(l="years"===H?"1":"0",r="months"===H?"1":"0",s="days"===H?"1":"0"):(l="0",r="1",s="0",z("months"),Ie(je));var E={},v=new Date,b=v.setDate(v.getDate()-90),y=new Date(b);if(a.length>0){E=e.path.includes("hotline")?{years:l,month:r,days:s,filter:{start_date:d&&""!==d?ke()(d[0],ke.a.defaultFormat):"monthly"===f?i:"yearly"===f?o:"beginning"===f?m:y,end_date:d&&""!==d?ke()(d[1],ke.a.defaultFormat):new Date,hotline_ids:0===D.length||1===D.length&&"All"===D[0].line_name?"all":a}}:{years:l,month:r,days:s,filter:{start_date:d&&""!==d?ke()(d[0],ke.a.defaultFormat):"monthly"===f?i:"yearly"===f?o:"beginning"===f?m:y,end_date:d&&""!==d?ke()(d[1],ke.a.defaultFormat):new Date,openline_ids:0===D.length||1===D.length&&"All"===D[0].line_name?"all":a}};var O=e.path.includes("hotline")?"hotlineReporting/":"openlineReporting/";P.a.post(R+O,E,t).then((function(e){if(te(e.data.total_conversation_count),e.data.avg_time_to_resolve_conversation>0?ce(Math.round(e.data.avg_time_to_resolve_conversation)+1):ce(e.data.avg_time_to_resolve_conversation),re(e.data.closed_conversation_count),ge(e.data.urgency_level),0===D.length||1===D.length&&"All"===D[0].line_name)ve(e.data.report);else{var t=[];T.map((function(a){var n="report_"+a.line_id;t.push(e.data[n])})),ve(t)}c(!1)})).catch((function(e){return c(!1)}))}}),[T,d,D,f]);var xe=function(e){var t="",a="";"barChart"===e?(t=document.getElementById("barChart").toDataURL("image/jpg"),a=document.getElementById("downloadBarChart")):"doughNutChart"===e?(t=document.getElementById("doughNutChart").toDataURL("image/jpg"),a=document.getElementById("downloadDoughNutChart")):(t=document.getElementById("pieChart").toDataURL("image/jpg"),a=document.getElementById("downloadPieChart")),a.href=t};var Te=function(){var t,a,n,l=document.getElementById("barChart"),r=document.getElementById("pieChart"),s=document.getElementById("doughNutChart");t=l,a=r,n=s,Ms()(t).then((function(t){var l=t.toDataURL("image/png");Ms()(a).then((function(a){var r=a.toDataURL("image/png");Ms()(n).then((function(n){for(var s,o=n.toDataURL("image/png"),i=[l,r,o],c=new Fs.a,m=0;m<3;m++)0===m?t.height:1===m?a.height:n.height,0===m?t.width:1===m?a.width:n.width,c.addImage(i[m],"JPEG",0,0,200,100),2!==m&&c.addPage();var u=(null===(s=e.path)||void 0===s?void 0:s.includes("hotline"))?"hotline-report.pdf":"openline-report.pdf";c.save(u)}))}))}))};var Ae=function(){var t,a,n,l,r=[],s="Month";F[0].forEach((function(e,t){F[1].forEach((function(a,n){var l;t===n&&(s="months"===H?"Month":"years"===H?"Year":"Day",r.push((l={},Object(et.a)(l,s,e),Object(et.a)(l,"Conversation Count",a),l)))}))}));var o="";null!=(o+=function(e){var t,a,n;return null!=(e=e||null)&&e.length?(",","\n",n=Object.keys(e[0]),t="",t+=n.join(","),t+="\n",e.forEach((function(e){a=0,n.forEach((function(n){a>0&&(t+=","),t+=e[n],a++})),t+="\n"})),t):null}(r))&&(n=(null===(t=e.path)||void 0===t?void 0:t.includes("hotline"))?"hotline-report.csv":"openline-report.csv",o.match(/^data:text\/csv/i)||(o="data:text/csv;charset=utf-8,"+o),a=encodeURI(o),(l=document.createElement("a")).setAttribute("href",a),l.setAttribute("download",n),document.body.appendChild(l),l.click(),document.body.removeChild(l))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amIDBUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"reports"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ia,{amIDBUser:!0,data:e}),l.a.createElement(ko,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},e.path.includes("hotline")?"Hotline Reports":"Openline Reports")),l.a.createElement(C.a,{spinning:i,size:"large"},l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:12,className:"search-row mt-2 mt-lg-0"},J?l.a.createElement(st.a,{message:(null===(t=e.path)||void 0===t?void 0:t.includes("hotline"))?"Only 5 hotlines can be selected":"Only 5 openlines can be selected",type:"error",showIcon:!0}):null,l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,lg:12,className:"gutter-row mt-2 mt-lg-0"},l.a.createElement(So,{lines:T,setSelectedLines:k,data:e,setMaxLimitReached:$,isAllSelected:Oe}),l.a.createElement(Er.a,{className:"down-arrow-ico multiselect-arrow sm-arrow"})),l.a.createElement(S.a,{span:24,lg:12,className:"gutter-row mt-2 mt-lg-2 mt-xl-0"},l.a.createElement(ot.a,{className:"w-100",onSelect:function(e){return E(t=e),void("dateRange"!==t&&p(""));var t},placeholder:"Choose Duration"},l.a.createElement(ot.a.Option,{value:"90days"},"Last 90 days"),l.a.createElement(ot.a.Option,{value:"monthly"},"Month till Date"),l.a.createElement(ot.a.Option,{value:"yearly"},"Year till Date"),l.a.createElement(ot.a.Option,{value:"dateRange"},"Select Date Range"),l.a.createElement(ot.a.Option,{value:"beginning"},"Since Beginning")),"dateRange"===f?l.a.createElement(S.a,{span:24,className:"mt-2 mt-lg-0"},l.a.createElement(Io,{name:"date",value:d,onChange:function(e){return function(e){if(p(e),e){var t=parseInt(e[0].format("M")),a=parseInt(e[0].format("D")),n=parseInt(e[0].format("YYYY")),l=[a,t-1,n],r=parseInt(e[1].format("M")),s=parseInt(e[1].format("D")),o=parseInt(e[1].format("YYYY")),i=[s,r-1,o];G([n,o]);var c=Math.abs(e[0].diff(e[1],"days"));z(c<=31?"days":c>30&&c<=365?"months":"years"),n!==o?n>o?(Ie(Ne+Do[i[1]]+" "+i[0]+", "+i[2]+Qe+Do[l[1]]+" "+l[0]+", "+l[2]),O("greater year")):(Ie(Ne+Do[l[1]]+" "+l[0]+", "+l[2]+Qe+Do[i[1]]+" "+i[0]+", "+i[2]),O("lesser year")):n===o&&t!==r?t>r?(Ie(Ne+Do[i[1]]+" "+i[0]+Qe+Do[l[1]]+" "+l[0]),O("greater month")):(Ie(Ne+Do[l[1]]+" "+l[0]+Qe+Do[i[1]]+" "+i[0]),O("lesser month")):n===o&&t===r&&a!==s?a>s?(Ie(Ne+Do[r-1]+" "+i[0]+Qe+Do[t-1]+" "+l[0]),O("greater day")):(Ie(Ne+Do[t-1]+" "+l[0]+Qe+Do[r-1]+" "+i[0]),O("lesser day")):n===o&&t===r&&a===s&&(Ie(Ne+Do[t-1]+" "+l[0]+Qe+Do[r-1]+" "+i[0]),O("same day"))}else O(""),E("dateRange")}(e)},disabledDate:function(e){return e&&e>ke()().endOf("day")}})):null))),l.a.createElement(S.a,{span:24,lg:12,className:"mt-2 mt-lg-0"},l.a.createElement(w.a,{className:"justify-content-end"},l.a.createElement(S.a,{span:24,lg:8,className:"gutter-row d-flex align-items-center justify-content-end"},l.a.createElement(Co,{showDownloadOptions:function(e){"pdf"===e?Te():Ae()}})))))),l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-4 h-auto d-flex justify-content-center align-items-center text-center"},l.a.createElement(S.a,{span:8,className:"divider-right font-weight-md6"},l.a.createElement("div",{className:"font-18"},ee),l.a.createElement("div",{className:"font-12"},"Total Conversations")),l.a.createElement(S.a,{span:8,className:"divider-right font-weight-md6"},l.a.createElement("div",{className:"font-18"},le),l.a.createElement("div",{className:"font-12"},"Conversations Resolved")),l.a.createElement(S.a,{span:8,className:"font-weight-md6"},l.a.createElement("div",{className:"font-18"},ie,"d"),l.a.createElement("div",{className:"font-12"},"Average Resolved Time"))))),l.a.createElement(w.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(S.a,{span:24,lg:24,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,{className:"d-inine-flex justify-content-between align-items-center mb-3"},l.a.createElement("h6",{className:"font-weight-md6 font-14 mb-0"},""!==y||""!==f?De:je),l.a.createElement("span",null,l.a.createElement("a",{id:"downloadBarChart",download:(null===(a=e.path)||void 0===a?void 0:a.includes("hotline"))?"Hotline-report.jpg":"Openline-report.jpg",href:""},l.a.createElement(jo.a,{className:"font-18 cursor-pointer",onClick:function(){return xe("barChart")}})))),l.a.createElement(Oo,{months:Do,selectedLines:D,report:Ee,sendBackData:function(e,t){Y([e,t])},chartTitle:De,years:Q,dateRange:H,isAllSelected:Oe})))),l.a.createElement(S.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,{className:"d-inine-flex justify-content-between align-items-center mb-3"},l.a.createElement("h6",{className:"font-weight-md6 my-3"},"Conversations based on Urgency Level"),l.a.createElement("span",null,l.a.createElement("a",{id:"downloadDoughNutChart",download:"Conversations-based-on-urgency-level.jpg",href:""},l.a.createElement(jo.a,{className:"font-18 cursor-pointer",onClick:function(){return xe("doughNutChart")}})))),l.a.createElement(w.a,null,l.a.createElement("h6",{className:"font-weight-md6 my-3"},"Total Conversations",": ",ee)),l.a.createElement(No,{urgencyLevels:pe,chartTitle:"Conversations based on Urgency Level"})))),l.a.createElement(S.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,{span:24,className:"gutter-row"},l.a.createElement(w.a,{className:"d-inine-flex justify-content-between align-items-center mb-3"},l.a.createElement("h6",{className:"font-weight-md6 my-3"},"Resolved Conversations"),l.a.createElement("span",null,l.a.createElement("a",{id:"downloadPieChart",download:"Resolved-conversations.jpg",href:""},l.a.createElement(jo.a,{className:"font-18 cursor-pointer",onClick:function(){return xe("pieChart")}})))),l.a.createElement(w.a,null,l.a.createElement("h6",{className:"font-weight-md6 my-3"},"Total Conversations",": ",ee)),l.a.createElement(_o,{resolvedMessages:le,totalMessages:ee,chartTitle:"Resolved Conversations"})))))))))))},To=N.a.Content,Ao=function(e){var t=Object(m.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e.data}),l.a.createElement(To,{"data-test":"Directory",className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Openline Directory")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Ta.a,alt:"Create Hotline",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create Openline entries and assign them to managers,",l.a.createElement("br",null),"head of departments or leadership."),l.a.createElement(w.a,{className:"d-flex justify-content-center"},l.a.createElement($e.a,{className:"mt-1"})),l.a.createElement(S.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ne.a,{"data-test":"createHotline",onClick:function(){t.push("/orgcc/createopenline")},type:"primary"},"Create"))))))))))},Uo=function(e){var t=e.data,a=e.deleteRecord,r=e.handleCheck,s=Object(n.useState)(),i=Object(o.a)(s,2),c=i[0],m=i[1];Object(n.useEffect)((function(){u()}),[t]);var u=function(){m(t)},d=[{title:"Name",dataIndex:"first_name",key:"first_name",width:"30%",render:function(e,t){var a;return{children:null===t||void 0===t?void 0:null===(a=t.user)||void 0===a?void 0:a.first_name,props:{"data-title":"Name"}}}},{title:"Respond",dataIndex:"can_respond",key:"can_respond",width:"20%",editable:!0,render:function(e,t){return l.a.createElement(S.a,{span:12,className:"d-flex justify-content-end changeColor"},l.a.createElement(ct.a,{value:"reports",checked:e,onChange:function(e){return r(t)},disabled:!0}))}},{title:"Actions",dataIndex:"user_id",key:"user_id",width:"20%",render:function(e,t){return l.a.createElement("span",{onClick:function(e){!function(e,t){t.preventDefault(),a(e)}(t,e)},className:"uploaded-icon icon icon-close d-inline-flex justify-content-end align-items-center"})}}];return l.a.createElement("div",{className:"no-bordered-grid"},l.a.createElement(ye.a,{className:"no-bg-table",locale:{emptyText:"  "},rowClassName:function(){return"editable-row"},columns:d,dataSource:c,rowKey:"rowkey"}))},Mo=function(e){var t=e.searchData,a=e.addAssignUser,r=e.data,s=Object(n.useState)(!1),i=Object(o.a)(s,2),c=i[0],m=i[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),p=d[0],g=d[1];return l.a.createElement(l.a.Fragment,null,c&&l.a.createElement(st.a,{"data-test":"alert",message:"".concat(p," is already assigned for this openline."),type:"error",showIcon:!0}),l.a.createElement(Ra.a,{"data-test":"Searchuser",options:t,placeholder:"Search Employee",filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},onSelect:function(e,t){return function(e,t){r.filter((function(e){return e.user.user_id===t.user_id})).length>0?(m(!0),g(e)):a(e,t)}(e,t)},onChange:function(){return m(!1),void g("")}}))},Fo=a(48),Po=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,assignedOpenLines:"",hotLineName:"",assignedEmp:"",loader:!1},a.showModal=function(){a.setState({visible:!0,employeeData:[],hotLineName:a.props.selectedRows.name,openlineId:a.props.selectedRows.openline_id,loader:!0}),(0,a.props.dispatch)(ba({},"")),a.getAssignedEmployee()},a.getAssignedEmployee=function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.get(R+"getOpenlineAssignEmpl/"+a.props.selectedRows.openline_id,e).then((function(e){a.setState({assignedOpenLines:e.data,loader:!1})}))},a.handleOk=function(e){a.setState({visible:!1});var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"openlineAssignEmpl/",a.state.assignedEmp,t).then((function(e){a.getAssignedEmployee(),a.setState({assignedEmp:""})})).catch((function(e){}))},a.handleCheck=function(e){var t=Object(tt.a)(a.state.assignedOpenLines),n=t.findIndex((function(t){return t.user_id===e.user_id}));t[n]=Object(M.a)({},t[n],{can_respond:!e.can_respond}),a.setState({assignedOpenLines:t});var l=Object(tt.a)(a.state.assignedEmp),r=l.findIndex((function(t){return t.user_id===e.user_id}));l[r]=Object(M.a)({},l[r],{can_respond:!e.can_respond}),a.setState({assignedEmp:l})},a.handleCancel=function(){a.setState({visible:!1})},a.deleteRecord=function(e){e.user.user_id;var t=a.state.assignedEmp&&a.state.assignedEmp.filter((function(t){return t.user_id!==e.user.user_id}));a.setState({assignedEmp:t});var n={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({user_id:e.user.user_id})};P.a.delete(R+"getOpenlineAssignEmpl/"+e.openline.openline_id,n).then((function(){a.getAssignedEmployee()})).catch((function(e){}))},a.addUser=function(e,t){var n=JSON.parse(v("user")),l=a.state,r=l.assignedOpenLines,s=l.assignedEmp,o={user:{user_id:parseInt(t.user_id),first_name:t.value},openline:{openline_id:a.state.openlineId},can_respond:!0,can_view_reports:!1},i={openline_id:a.state.openlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,created_by:parseInt(Fo.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Fo.enc.Utf8))};a.setState({assignedOpenLines:[].concat(Object(tt.a)(r),[o]),assignedEmp:[].concat(Object(tt.a)(s),[i])})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props.manageEmpData,a=[];if(e.manageEmpData!=t){for(var n=0;n<t.length;n++){var l,r,s;a.push({value:null===(l=t[n])||void 0===l?void 0:l.first_name.concat(" ",null===(r=t[n])||void 0===r?void 0:r.last_name),user_id:null===(s=t[n])||void 0===s?void 0:s.user_id})}this.setState({employeeData:a})}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Show"),l.a.createElement(_t.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:ae},l.a.createElement("div",null,"Employees with permissions to "," ",this.state.hotLineName),l.a.createElement(w.a,{className:"mt-2 mt-lg-5 mb-3 thead-outer"},l.a.createElement(S.a,{span:10},Ye)),l.a.createElement(C.a,{spinning:this.state.loader,size:"large"},l.a.createElement(Uo,{data:this.state.assignedOpenLines,deleteRecord:this.deleteRecord,handleCheck:this.handleCheck})),l.a.createElement(w.a,{className:"mb-2 autocomplete"},l.a.createElement(S.a,{span:24},l.a.createElement(Mo,{searchData:this.state.employeeData,addAssignUser:this.addUser,data:this.state.assignedOpenLines}),l.a.createElement("small",null,"Hit enter to add")))))}}]),t}(n.Component);var Ro=Object(i.b)((function(e){return{assignhotlines:e.assignedHotline.assignhotlines,manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(Po),Yo=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"deleteHotline",value:function(){this.props.history;var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"openline/"+this.props.openlineId,e).then((function(){window.location="/orgcc/openlinedirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},le),l.a.createElement(_t.a,{title:"Delete Openline",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this Openline?")))}}]),t}(n.Component),Lo=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(c.b,{to:{pathname:"/orgcc/editopenline",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editopenline"},ne)," ")),l.a.createElement("li",null,l.a.createElement(Yo,{openlineId:e.openline_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),Bo=_.a.Search,Ho=(l.a.createElement(Oe.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),zo=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","/");if(new Date<new Date(n)){var l={status_id:"Active"===t?4:5},r={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.put(R+"changeOpenlineStatus/"+e.openline_id+"/",l,r).then((function(){j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.name+Be}),a.props.statusOnClicked()}))}else j.a.config({placement:"bottomLeft"}),j.a.open({description:Le+e.name+He})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})},a.state={data:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.openlines;null===t||void 0===t||t.forEach((function(e){e.start_date=ke()(e.start_date).utc().local().format("MM / DD / YYYY"),e.end_date=ke()(e.end_date).utc().local().format("MM / DD / YYYY")})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a=this;this.props.openlines!==e.openlines&&(null===(t=e.openlines)||void 0===t||t.forEach((function(e){e.start_date=ke()(e.start_date).utc().local().format("MM / DD / YYYY"),e.end_date=ke()(e.end_date).utc().local().format("MM / DD / YYYY")})),this.setState({data:e.openlines},(function(){a.onSearch("")})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=[{title:"Openline Name",dataIndex:"name",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Openline Name"}}}},{title:"Start Date",dataIndex:"start_date",key:"start_date",width:"22%",render:function(e){return{children:e,props:{"data-title":"Start Date"}}}},{title:"End Date",dataIndex:"end_date",key:"end_date",width:"21%",render:function(e){return{children:e,props:{"data-title":"End Date"}}}},{title:"Permissions",dataIndex:"",key:"x",width:"20%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement(Ro,{selectedRows:e})),props:{"data-title":"Permissions"}}}},{title:Ae,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:4===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Draft"):5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):7===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Scheduled"):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Completed"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(Lo,{data:e}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:this.props.data}),l.a.createElement(Ho,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Openline Directory")),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Bo,{placeholder:"Search",onSearch:this.onSearch})))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(c.b,{to:"/orgcc/createopenline"},l.a.createElement(je,{value:"Create Openline"}))))),l.a.createElement(C.a,{spinning:this.props.loader,size:"large"},l.a.createElement(_e,{rowKey:"openline_id",columns:e,data:this.state.filterData})))))))}}]),t}(l.a.Component);var Vo=Object(i.b)((function(e){return{openlinesdata:e.openline.openlinesdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return Lt.getOpenlines().then((function(t){return e({type:"OPENLINE_SUCCESS",payload:{openlinesdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"OPENLINE_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[r]),Object(n.useEffect)((function(){null===e.openlinesdata?u(!0):null!==e.openlinesdata&&u(!1)}),[e.openlinesdata]);return m||null===e.openlinesdata||0!==e.openlinesdata.length?l.a.createElement(zo,{statusOnClicked:function(){s(!r)},openlines:e.openlinesdata,data:e,loader:m}):l.a.createElement(Ao,{data:e})})),qo=a(310),Qo=function(e){var t=e.next,a=e.imageError,r=e.stepOneOpenLineInfo,s=e.handleStepOneOnChange,i=e.onChangeCheckbox,c=e.handleStepOneUpload,m=e.handleStepOnePreview,u=e.handleCancel,d=(e.handleBeforeUpload,e.handleStepOneDatePickerChange),p=(e.addIcon,e.getIconText),g=e.setNameValidHandle,h=e.hotlineErrorUpdated,f=Object(n.useState)({iconText:""}),E=Object(o.a)(f,2),v=(E[0],E[1],Object(n.useState)(!1)),b=Object(o.a)(v,2),y=b[0],O=b[1],_=Object(n.useState)(!0),N=Object(o.a)(_,2),j=(N[0],N[1]),w=lt.a.useForm(),S=Object(o.a)(w,1)[0],C=rt.a.RangePicker;return l.a.createElement(lt.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:S},y&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(mt,{label:"Openline Name",value:r.openelineName},l.a.createElement(lt.a.Item,{className:"required",name:"openelineName",rules:[{required:!0,message:"Please enter directory name"}],autoComplete:"off"},l.a.createElement(Ea.a,{showCount:!0,maxLength:80,value:r.openelineName,onChange:function(e){return s(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.post(R+"checkOpenline/",{openline_name:r.openelineName},t).then((function(e){e.data&&g(e.data[0])}))}()},id:"openelineName",className:"input-control",htmlFor:"openelineName",autoComplete:"off"}),"status: false"==h&&r.openelineName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.openelineName.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==h&&l.a.createElement(st.a,{message:yt,type:"error",showIcon:!0}))),l.a.createElement(mt,{label:"Description",value:r.description},l.a.createElement(lt.a.Item,{className:"required",name:"description",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea.a,{className:"input-control",value:r.description,onChange:function(e){return s(e)},id:"description",htmlFor:"description",autoComplete:"off"})))),r.statusMessage.length>0?l.a.createElement(l.a.Fragment,null,r.statusMessage):null,l.a.createElement(mt,{label:xe,value:"sDate"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(C,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"sDate",value:r.sDate,onChange:function(e){return d(e,"sDate")},disabledDate:function(e){return e&&e<ke()().startOf("day")},rules:[{required:!0,message:vt}]}))),l.a.createElement(lt.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{className:"font-13",onChange:function(e){return i(e)},checked:r.status},"Save as Draft"))),l.a.createElement(lt.a.Item,{className:""},l.a.createElement(lt.a.Item,{className:"upload-control required",name:"upload",valuePropName:"fileList"},l.a.createElement(qo.a,{rotate:!0,modalOk:"Upload"},l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:r.file,onChange:function(e){return c(e,"file")},onPreview:function(e){return m(e)},accept:"image/png, image/jpeg, image/gif"},0===r.file.length&&l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"}),"Upload Image"))),l.a.createElement(_t.a,{className:"modal-openline",visible:r.previewVisible,title:r.previewTitle,centered:!0,onOk:function(e){return u(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:r.previewImage})),p(r.hotlineIconId)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},ha()(r.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:p(r.hotlineIconId)},p(r.hotlineIconId)))))))),a&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:"Please upload an image.",type:"error",showIcon:!0})),l.a.createElement(lt.a.Item,null,l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),r.openelineName&&r.openelineName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.description&&r.description.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.file&&r.file.length>0&&r.sDate?a||"status: false"!=h||(O(!1),j(!1),t()):O(!0)},"data-test":"stepOneNext"},ee)))},Go=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).onSearch=function(e){var t=a.state.employeeData,n=a.filterIt(t,e);a.setState({filterData:n})},a.start=function(){a.setState({showAssigntoModal:!0})},a.stepTwoPrev=function(){a.props.prev()},a.stepTwoNext=function(){0!==a.props.stepTwoOpenLine.chekedValues.length?a.props.next():a.setState({showAlert:!0})},a.state={employeeData:"",showAssigntoModal:"false",showAlert:!1,loader:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;this.setState({loader:!0}),e(ba({},""))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.manageEmpData;e.manageEmpData!=a&&this.setState({employeeData:a,loader:!1},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.props.stepTwoOpenLine.selectedRowKeys,onChange:this.props.handleStepTwoOnSelect},a=[{title:"First Name",dataIndex:"first_name",key:"first_name",width:"22%"},{title:"Last Name",dataIndex:"last_name",key:"last_name",width:"22%"},{title:Te,dataIndex:"mobile_number",key:"mobile_number",width:"21%"},{title:"Access",dataIndex:"",key:"x",render:function(e){var t="",a="",n=!1;return e.is_am_web_user&&(a="AM Web",n=!0),e.is_org_cc_user&&(a=J,n=!0),e.is_idb_user&&(a="IDB",n=!0),e.is_super_user&&(a="Super User",n=!0),e.is_app_user&&(n||(a="APP")),0===t.length?t+=a:"APP"!==a&&(t.includes("APP")?t=a:t+=", "+a),{children:l.a.createElement("span",null,t),props:{"data-title":"Access"}}},width:"20%"},{title:Ae,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}}];return l.a.createElement("div",null,l.a.createElement(S.a,{"data-test":"createHotlineStepTwo",span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Oa.a,{placeholder:"Search User",onSearch:this.onSearch})))))),this.state.showAlert&&l.a.createElement(st.a,{message:"Please select user(s).",type:"error",showIcon:!0}),l.a.createElement(C.a,{spinning:this.state.loader,size:"large"},l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(ye.a,{rowSelection:t,columns:a,dataSource:this.state.filterData,rowKey:"unique_identifier"})),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{className:"mr-4",type:"secondary",style:{margin:"0 8px"},onClick:function(){return e.stepTwoPrev()},"data-test":"steptwoPrev"},te),l.a.createElement(Ne.a,{className:"md",type:"primary",onClick:function(){return e.stepTwoNext()},"data-test":"steptwoNext"},ee))))}}]),t}(l.a.Component);var Wo=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(Go),Ko=_.a.TextArea,Jo=function(e){var t,a=e.prev,n=e.createNewHotLine,r=e.stepOneOpenLine,s=e.stepTwoOpenLine,i=e.handleStepOnePreview,c=e.handleCancel,m=lt.a.useForm(),u=Object(o.a)(m,1)[0],d=s.selectedRows.map((function(e){return e.first_name+" "+e.last_name})),p=rt.a.RangePicker;return l.a.createElement(lt.a,{"data-test":"createHotlineStepThree",className:"input-md w-md-100 w-75",name:"validate_other",form:u},l.a.createElement(lt.a.Item,{name:"openelineName"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ko,{showCount:!0,disabled:!0,maxLength:80,value:r.openelineName,id:"openelineName",className:"input-control textarea-input",htmlFor:"openelineName"}))),l.a.createElement(lt.a.Item,{name:"description"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ko,{disabled:!0,className:"input-control textarea-md",value:r.description,id:"description",htmlFor:"description"}))),l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(l.a.Fragment,null,l.a.createElement(p,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"sdate",value:r.sDate,disabled:!0}))),l.a.createElement("div",{className:"d-block d-lg-flex"},l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(lt.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{className:"font-13",checked:r.status,disabled:!0},"Save as Draft")))),l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(lt.a.Item,{name:"userNames"},l.a.createElement(l.a.Fragment,null,l.a.createElement(_.a,{className:"input-control",htmlFor:"assigned to",id:d,disabled:!0,value:d.join(", ")}))))),l.a.createElement(lt.a.Item,{className:"w-100 w-lg-50"},l.a.createElement(lt.a.Item,{className:"upload-control required"},l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",disabled:!0,fileList:r.file,onPreview:function(e){return i(e)}}),l.a.createElement(_t.a,{className:"modal-openline",visible:r.previewVisible,title:r.previewTitle,centered:!0,onOk:function(e){return c(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:r.previewImage})))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,(t={type:"secondary",className:"mr-4"},Object(et.a)(t,"type","secondary"),Object(et.a)(t,"style",{margin:"0 8px"}),Object(et.a)(t,"htmlType","submit"),Object(et.a)(t,"onClick",(function(e){e.preventDefault(),a()})),Object(et.a)(t,"data-test","stepThreePrev"),t),te),l.a.createElement(Ne.a,{type:"primary",className:"md",htmlType:"submit",onClick:function(e){n()},"data-test":"stepThreeNext"},"Create")))},$o=N.a.Content,Zo=at.a.Step,Xo=[{title:"Add Details",content:"First-content"},{title:"Assign Employee",content:"Second-content"},{title:"Review Details",content:"Last-content"}],ei=a(48),ti=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),m=Object(o.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(!1),g=Object(o.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)({openelineName:"",description:"",status:!1,statusMessage:"",sDate:"",tDate:"",hotlineIconId:"",file:"",previewVisible:!1,previewImage:"",previewTitle:"",imagename:""}),b=Object(o.a)(E,2),y=b[0],O=b[1],_=Object(n.useState)(""),j=Object(o.a)(_,2),D=j[0],k=j[1],I=Object(n.useState)({selectedRows:"",selectedRowKeys:[],chekedValues:[]}),x=Object(o.a)(I,2),T=x[0],A=x[1],F=function(){s(r+1)},Y=function(){s(r-1)},L=function(e){return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.awrap(H(e.originFileObj));case 2:e.preview=t.sent,O(Object(M.a)({},y,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},B=function(e){return O(Object(M.a)({},y,{previewVisible:!1}))},H=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},z=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"hotlineCreation"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement($o,{className:""},l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/openlinedirectory"},l.a.createElement(nt.a.Item,null,"Openline Directory")),l.a.createElement(nt.a.Item,null,"Create Openline Directory"))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Openline Directory Entries")),l.a.createElement(at.a,{className:"mt-2",current:r},Xo.map((function(e){return l.a.createElement(Zo,{key:e.title,title:e.title})}))),l.a.createElement(C.a,{spinning:h,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"steps-content"},0==r?l.a.createElement(Qo,{next:F,imageError:u,stepOneOpenLineInfo:y,handleStepOneOnChange:function(e){O(Object(M.a)({},y,Object(et.a)({},e.target.id,e.target.value)))},handleStepOneOnSelect:function(e,t){O(Object(M.a)({},y,Object(et.a)({},t,e)))},handleStepOneUpload:function(e,t){var a,n=e.fileList.slice(-1),l=e.file.name;n.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),O(Object(M.a)({},y,(a={},Object(et.a)(a,t,n),Object(et.a)(a,"imagename",l),a)))},onChangeCheckbox:function(e){if(e.target.checked)O(Object(M.a)({},y,{status:e.target.checked,statusMessage:""}));else{var t,a,n=ke()(),l=y.sDate;l&&0===(null===(t=l[0])||void 0===t?void 0:t.diff(n,"days"))?O(Object(M.a)({},y,{status:e.target.checked,statusMessage:re})):l&&(null===(a=l[0])||void 0===a?void 0:a.diff(n,"days"))>0&&O(Object(M.a)({},y,{status:e.target.checked,statusMessage:se}))}},handleBeforeUpload:function(e){return e.type.includes("image")?(d(!1),e.type):(d(!0),yr.b.error("The file that you attemped to upload ".concat(e.name," is not supported")),!1)},handleStepOnePreview:L,handleCancel:B,handleStepOneDatePickerChange:function(e,t){var a,n,l,r=ke()();if(e&&0===(null===(a=e[0])||void 0===a?void 0:a.diff(r,"days"))&&!y.status)O(Object(M.a)({},y,(l={},Object(et.a)(l,t,e),Object(et.a)(l,"statusMessage",re),l)));else if(e&&(null===(n=e[0])||void 0===n?void 0:n.diff(r,"days"))>0&&!y.status){var s;O(Object(M.a)({},y,(s={},Object(et.a)(s,t,e),Object(et.a)(s,"statusMessage",se),s)))}else{var o;O(Object(M.a)({},y,(o={},Object(et.a)(o,t,e),Object(et.a)(o,"statusMessage",""),o)))}},addIcon:function(e,t){O(Object(M.a)({},y,{hotlineIconId:t,iconHtml:e}))},getIconText:z,setNameValidHandle:function(e){k(e)},hotlineErrorUpdated:D,"data-test":"CreateHotlineStepOne"}):1==r?l.a.createElement(Wo,{next:F,prev:Y,stepOneHotLine:y,stepTwoOpenLine:T,handleStepTwoOnSelect:function(e,t){var a,n=[],l=JSON.parse(v("user")),r=t.filter((function(e){var t,a=e.user_id;return!(null===(t=n)||void 0===t?void 0:t.some((function(e){return e.user_id===a})))})).reduce((function(e,t){return e.push({user_id:t.user_id,can_respond:1,can_view_reports:0,created_by:parseInt(ei.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(ei.enc.Utf8))}),e}),[]);n=null===(a=n)||void 0===a?void 0:a.concat(r),A(Object(M.a)({},T,{selectedRowKeys:e,selectedRows:t,chekedValues:n}))}}):2==r?l.a.createElement(Jo,{prev:Y,createNewHotLine:function(){var e,t,a,n;return U.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:e=JSON.parse(v("user")),t=Ce(),a={create_openline:{name:y.openelineName,help_text:y.description,openline_image:y.file[0].base64,openline_image_name:y.imagename,status_id:y.status?4:1,start_date:y.sDate[0]?ke()(y.sDate[0]).format("DD-MM-YYYY"):"",end_date:y.sDate[1]?ke()(y.sDate[1]).format("DD-MM-YYYY"):"",created_by:parseInt(ei.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(ei.enc.Utf8))},permissions:T.chekedValues},n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},f(!0),P.a.post(R+"openline/",a,n).then((function(){window.location="/orgcc/openlinedirectory"}));case 6:case"end":return l.stop()}}))},stepOneOpenLine:y,stepTwoOpenLine:T,getIconText:z,handleStepOnePreview:L,handleCancel:B}):""))))))))))},ai=a(48),ni=_.a.TextArea,li=N.a.Content,ri=function(e){var t,a=Object(n.useState)(!1),r=Object(o.a)(a,2),s=r[0],i=r[1],c=Object(n.useState)({end_date:"",help_text:"",openline_id:"",name:"",start_date:"",openline_image:"",openline_image_name:"",statusMessage:"",status:!1,iconHtml:"",ImgfileList:[]}),u=Object(o.a)(c,2),d=u[0],p=u[1],g=Object(n.useState)(!1),h=Object(o.a)(g,2),f=h[0],E=h[1],b=lt.a.useForm(),y=Object(o.a)(b,1)[0],O=Object(n.useState)(""),_=Object(o.a)(O,2),j=_[0],S=_[1],D=Object(m.h)();Object(n.useEffect)((function(){var e=ke()(D.state.start_date).format("YYYY-MM-DD"),t=ke()(D.state.end_date).format("YYYY-MM-DD"),a=[ke()(e,"YYYY/MM/DD"),ke()(t,"YYYY/MM/DD")];p({end_date:"",help_text:D.state.help_text,openline_id:D.state.openline_id,name:D.state.name,start_date:a,openline_image:D.state.openline_image,openline_image_name:D.state.openline_image_name,status:4===D.state.status_id,ImgfileList:[{uid:"1",name:D.state.openline_image_name,status:"done",url:D.state.openline_image}]}),y.setFieldsValue({name:D.state.name,help_text:D.state.help_text})}),[]);var k=function(e){p(Object(M.a)({},d,Object(et.a)({},e.target.id,e.target.value)))};function I(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}var x=function(e){var t=Ce(),a=d.openline_id;delete d.hotline_id;var n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.put(R+"openline/"+a+"/",e,n).then((function(e){200===e.status&&(i(!1),window.location="/orgcc/openlinedirectory")}))};var T=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}},A=rt.a.RangePicker;return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(li,{className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",null,"Edit Openline")),l.a.createElement(C.a,{spinning:s,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(lt.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:y},f&&l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})),l.a.createElement(mt,{label:"Directory Name",value:d.name},l.a.createElement(lt.a.Item,{className:"required",name:"name",id:"name",rules:[{required:!0,message:"Please enter directory name"}]},l.a.createElement(ni,{showCount:!0,maxLength:80,value:d.name,onChange:function(e){return k(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==D.state.name?P.a.post(R+"checkOpenline/",{openline_name:e.target.value},t).then((function(e){e.data&&S(e.data[0])})):S(!1)}(e)},name:"name",id:"name",className:"input-control textarea-input",htmlFor:"name",autoComplete:"off"}),"status: false"==j&&d.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&d.name.length>0&&l.a.createElement(ut.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==j&&l.a.createElement(st.a,{message:yt,type:"error",showIcon:!0}))),l.a.createElement(mt,{label:"Description",value:d.help_text},l.a.createElement(lt.a.Item,{className:"required",name:"help_text",id:"help_text",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(ni,{className:"input-control textarea-input",value:d.help_text,onChange:function(e){return k(e)},name:"help_text",id:"help_text",htmlFor:"help_text",autoComplete:"off"})))),(null===(t=d.statusMessage)||void 0===t?void 0:t.length)>0?l.a.createElement(l.a.Fragment,null,d.statusMessage):null,l.a.createElement(mt,{label:xe,value:"start_date"},l.a.createElement(lt.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(A,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"start_date",value:d.start_date,disabledDate:function(e){return e&&e<ke()().startOf("day")},onChange:function(e){return function(e,t){var a,n,l,r=ke()();if(e&&0===(null===(a=e[0])||void 0===a?void 0:a.diff(r,"days"))&&!d.status)p(Object(M.a)({},d,(l={},Object(et.a)(l,t,e),Object(et.a)(l,"statusMessage",re),l)));else if(e&&(null===(n=e[0])||void 0===n?void 0:n.diff(r,"days"))>0&&!d.status){var s;p(Object(M.a)({},d,(s={},Object(et.a)(s,t,e),Object(et.a)(s,"statusMessage",se),s)))}else{var o;p(Object(M.a)({},d,(o={},Object(et.a)(o,t,e),Object(et.a)(o,"statusMessage",""),o)))}}(e,"start_date")},rules:[{required:!0,message:vt}]}))),l.a.createElement(lt.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{className:"font-13",onChange:function(e){return function(e){if(e.target.checked)p(Object(M.a)({},d,{status:e.target.checked,statusMessage:""}));else{var t,a,n=ke()(),l=d.start_date;l&&0===(null===(t=l[0])||void 0===t?void 0:t.diff(n,"days"))?p(Object(M.a)({},d,{status:e.target.checked,statusMessage:re})):l&&(null===(a=l[0])||void 0===a?void 0:a.diff(n,"days"))>0&&p(Object(M.a)({},d,{status:e.target.checked,statusMessage:se}))}}(e)},checked:d.status},"Save as Draft"))),l.a.createElement(lt.a.Item,{className:""},l.a.createElement(lt.a.Item,{className:"upload-control required",name:"upload",valuePropName:"fileList"},l.a.createElement(qo.a,{rotate:!0,modalOk:"Upload"},l.a.createElement(cn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:d.ImgfileList,onChange:function(e){return function(e,t){var a=e.fileList.slice(-1),n=e.file.name;a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),p(Object(M.a)({},d,{ImgfileList:a,openline_image:a,openline_image_name:n})),"removed"===e.file.status&&p(Object(M.a)({},d,{ImgfileList:[],openline_image:"",openline_image_name:""}))}(e)},onPreview:function(e){return t=e,U.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:"1"===t.uid?I(t.url,(function(e){p(Object(M.a)({},d,{previewImage:e,previewVisible:!0,previewTitle:t.name}))})):p(Object(M.a)({},d,{previewImage:t.base64,previewVisible:!0,previewTitle:t.name}));case 1:case"end":return e.stop()}}));var t},handleOnRemove:function(e,t){p(Object(M.a)({},d,{fileList:[]}))},accept:"image/png, image/jpeg, image/gif"},0===d.openline_image.length&&l.a.createElement(Ne.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"})," ","Upload Image"))),l.a.createElement(_t.a,{visible:d.previewVisible,title:d.previewTitle,centered:!0,onOk:function(e){return p(Object(M.a)({},d,{previewVisible:!1}))},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:d.previewImage})),T(d.openline_id)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},ReactHtmlParser(d.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:T(d.openline_id)},T(d.openline_id)))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){if(d.name&&d.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&d.help_text&&d.help_text.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&d.openline_image.length>0&&d.start_date){i(!0),E(!1),e.preventDefault();var t=JSON.parse(v("user")),a={};"1"===d.ImgfileList[0].uid?I(d.openline_image,(function(e){a={end_date:ke()(d.start_date[1]).format("DD-MM-YYYY"),help_text:d.help_text,openline_id:d.openline_id,openline_image:e,name:d.name,openline_image_name:d.openline_image_name,start_date:ke()(d.start_date[0]).format("DD-MM-YYYY"),status_id:1,updated_by:parseInt(ai.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(ai.enc.Utf8)),created_by:parseInt(ai.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(ai.enc.Utf8))},"status: false"!=j&&d.name!==D.state.name||x(a)})):(a={end_date:ke()(d.start_date[1]).format("DD-MM-YYYY"),help_text:d.help_text,openline_id:d.openline_id,openline_image:d.ImgfileList[0].base64,name:d.name,openline_image_name:d.openline_image_name,start_date:ke()(d.start_date[0]).format("DD-MM-YYYY"),status_id:d.status?4:1,updated_by:parseInt(ai.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(ai.enc.Utf8)),created_by:parseInt(ai.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(ai.enc.Utf8))},"status: false"!=j&&d.name!==D.state.name||x(a))}else E(!0)},"data-test":"stepOneNext",style:{margin:"0 8px"}},"Update"),l.a.createElement(Ne.a,{type:"primary",htmlType:"submit",onClick:function(e){window.location="/orgcc/openlinedirectory"},"data-test":"stepOneNext"},ae))))))))))},si=a(309),oi=N.a.Content;var ii=Object(i.b)((function(e){return{createhelpdata:e.help.createhelpdata}}))((function(e){var t=Object(m.g)(),a=Object(si.useForm)(),r=Object(o.a)(a,1)[0],s=Object(n.useState)({title:"",message:"",help_id:""}),i=Object(o.a)(s,2),u=i[0],d=i[1],p=Object(n.useState)("Create Help"),g=Object(o.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)(!1),v=Object(o.a)(E,2),b=v[0],y=v[1],O=Object(n.useState)(!1),_=Object(o.a)(O,2),j=_[0],D=_[1];Object(n.useEffect)((function(){e.location.state&&e.location.state.help&&(d({title:e.location.state.help.title,message:e.location.state.help.message,help_id:e.location.state.help.help_id}),f("Edit Help"),r.setFieldsValue({title:e.location.state.help.title,message:e.location.state.help.message}))}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(oi,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/help"},l.a.createElement(nt.a.Item,null,"Help")),l.a.createElement(nt.a.Item,null,h))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},h)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(C.a,{spinning:j,size:"large"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",form:r},b?l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})):"",l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message Title",value:u.title},l.a.createElement(lt.a.Item,{className:"required",name:"title",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(Ea.a,{showCount:!0,maxLength:80,value:u.title,onChange:function(e){return function(e){d(Object(M.a)({},u,Object(et.a)({},e.target.id,e.target.value)))}(e)},id:"title",name:"title",className:"input-control",htmlFor:"directoryName",autoComplete:"off"})))))),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message",value:u.message},l.a.createElement(lt.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(ls,{value:u.message,onChange:function(e){return function(e,t){d((function(a){return Object(M.a)({},a,Object(et.a)({},t,e))}))}(e,"message")},id:"message"})))))),l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ne.a,{onClick:function(){D(!0);var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(u.title&&u.message){y(!1);var t=u;"Create Help"===h?P.a.post(R+"createhelp/",t,e).then((function(){D(!1),window.location="/orgcc/help"})):"Edit Help"===h&&P.a.put(R+"createhelp/",t,e).then((function(e){200===e.status&&(D(!1),window.location="/orgcc/help")}))}else y(!0)},type:"primary",htmlType:"submit"},"Save"),l.a.createElement(Ne.a,{onClick:function(){t.push("/orgcc/help")},className:"ml-4",type:"secondary"},ae))))))))))))))})),ci=a(613),mi=a.n(ci),ui=N.a.Content,di=function(e){var t=Object(m.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e.data}),l.a.createElement(ui,{"data-test":"Broadcast",className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Help")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"c-vector-area d-flex justify-content-center"},l.a.createElement("img",{src:mi.a,alt:"Create Help"})),l.a.createElement("p",{className:"text-center pt-3"},'Populate information that employees will see in "Help" section under Settings in the app.'),l.a.createElement(w.a,{className:"d-flex justify-content-center"},l.a.createElement($e.a,{className:"mt-1"})),l.a.createElement(S.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ne.a,{onClick:function(){t.push("/orgcc/createhelp")},type:"primary"},"Create Help"))))))))))},pi=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!0},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHelp()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"deleteHelp",value:function(){if(this.props.help){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"deletehelp/"+this.props.help.help_id,e).then((function(){window.location="/orgcc/help"})).catch((function(e){}))}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(_t.a,{title:"Delete Help",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this help?")))}}]),t}(n.Component),gi=N.a.Content,hi=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1];return l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(c.b,{to:{pathname:"/orgcc/edithelp",state:{help:e&&e.helps&&e.helps[0]?e.helps[0]:{}}}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/edithelp"},ne))),l.a.createElement(c.b,{onClick:function(){s(!0)}},l.a.createElement("li",null,l.a.createElement("a",null,le),r?l.a.createElement(pi,{help:e&&e.helps&&e.helps[0]?e.helps[0]:{}}):""))))},fi=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=e.loader;return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e.data}),l.a.createElement(gi,null,l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Help")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(C.a,{spinning:i,size:"large"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:22,className:"editor-data"},l.a.createElement("h6",{className:"font-weight-md mb-1"},e.helps&&e.helps[0]&&e.helps[0].title?e.helps[0].title:"")),l.a.createElement(S.a,{span:2,className:"d-flex justify-content-end"},l.a.createElement(Q.a,{placement:"bottom",content:hi(e),trigger:"click",visible:r,onVisibleChange:function(){s(!r)}},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon",className:"pr-4"})))),l.a.createElement("p",{className:"pt-2 mt-3"},e.helps&&e.helps[0]&&e.helps[0].message?ha()(e.helps[0].message):"")))))))))};var Ei=Object(i.b)((function(e){return{helpsdata:e.help.helpsdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1];Object(n.useEffect)((function(){var t=e.dispatch;s(!1),t((function(e){return Lt.getHelps().then((function(t){return e({type:"HELP_SUCCESS",payload:{helpsdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"HELP_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))})),s(!0)}),[m]),Object(n.useEffect)((function(){null===e.helpsdata?s(!0):null!==e.helpsdata&&s(!1)}),[e.helpsdata]);return r||null===e.helpsdata||0!==e.helpsdata.length?l.a.createElement(fi,{helps:e.helpsdata,data:e,loader:r,statusOnClicked:function(){u(!m)}}):l.a.createElement(di,{data:e})})),vi=N.a.Content;var bi=Object(i.b)((function(e){return{createinfodata:e.info.createinfodata}}))((function(e){var t=Object(m.g)(),a=Object(si.useForm)(),r=Object(o.a)(a,1)[0],s=Object(n.useState)({title:"",message:"",info_id:""}),i=Object(o.a)(s,2),u=i[0],d=i[1],p=Object(n.useState)("Create Info"),g=Object(o.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)(!1),v=Object(o.a)(E,2),b=v[0],y=v[1],O=Object(n.useState)(!1),_=Object(o.a)(O,2),j=_[0],D=_[1];Object(n.useEffect)((function(){e.location.state&&e.location.state&&(d(e.location.state),f("Edit Info"),r.setFieldsValue({title:e.location.state.title,message:e.location.state.message}))}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(vi,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/info"},l.a.createElement(nt.a.Item,null,Z)),l.a.createElement(nt.a.Item,null,h))),l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},h)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(C.a,{spinning:j,size:"large"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement(lt.a,{className:"input-md floating-label w-100",name:"validate_other",form:r},b?l.a.createElement(lt.a.Item,null,l.a.createElement(st.a,{message:dt,type:"error",showIcon:!0})):"",l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message Title",value:u.title},l.a.createElement(lt.a.Item,{className:"required",name:"title",rules:[{required:!0,message:"Please enter title"}]},l.a.createElement(Ea.a,{showCount:!0,maxLength:80,value:u.title,onChange:function(e){return function(e){d(Object(M.a)({},u,Object(et.a)({},e.target.id,e.target.value)))}(e)},id:"title",name:"title",className:"input-control",htmlFor:"directoryName",autoComplete:"off"})))))),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(mt,{label:"Message",value:u.message},l.a.createElement(lt.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(ls,{value:u.message,onChange:function(e){return function(e,t){d((function(a){return Object(M.a)({},a,Object(et.a)({},t,e))}))}(e,"message")},id:"message"})))))),l.a.createElement(lt.a.Item,null,l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ne.a,{onClick:function(){D(!0);var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(u.title&&u.message){y(!1);var t=u;"Create Info"===h?P.a.post(R+"createinfo/",t,e).then((function(){D(!1),window.location="/orgcc/info"})):"Edit Info"===h&&P.a.put(R+"createinfo/",t,e).then((function(){D(!1),window.location="/orgcc/info"}))}else y(!0)},type:"primary",htmlType:"submit"},"SAVE"),l.a.createElement(Ne.a,{onClick:function(){t.push("/orgcc/info")},className:"ml-4",type:"secondary"},"Cancel"))))))))))))))})),yi=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteInfo()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"deleteInfo",value:function(){var e={headers:{Authorization:Ce(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};P.a.delete(R+"deleteInfo/"+this.props.infoId,e).then((function(){window.location="/orgcc/info"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},le),l.a.createElement(_t.a,{title:"Delete Info",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this info?")))}}]),t}(n.Component),Oi=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(c.b,{to:{pathname:"/orgcc/editinfo",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editinfo"},ne)," ")),l.a.createElement("li",null,l.a.createElement(yi,{infoId:e.info_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:wt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),_i=N.a.Content,Ni=function(e){var t=e.location.state?e.location.state:{};return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e}),l.a.createElement(_i,null,l.a.createElement(w.a,{className:"pt-3"},l.a.createElement(nt.a,{separator:">"},l.a.createElement(c.c,{to:"/orgcc/info"},l.a.createElement(nt.a.Item,null,Z)),l.a.createElement(nt.a.Item,null,t.title))),l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"}," ",t.title)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:22,className:"editor-data"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,className:"mb-2"},ha()(t.message)))),l.a.createElement(S.a,{span:2,className:"d-flex justify-content-end"},l.a.createElement(Oi,{data:t})))))))))},ji=N.a.Content,wi=_.a.Search,Si=function(e){var t=Object(m.g)(),a=Object(n.useState)(""),r=Object(o.a)(a,2),s=r[0],i=r[1],u=e.loader,d=[{title:"Info Name",dataIndex:"title",key:"title",width:"22%",render:function(e,t){return{children:l.a.createElement("h6",{className:"font-weight-md6 mb-1"},l.a.createElement(c.b,{to:{pathname:"/orgcc/infodetails",state:t}},t.title)),props:{"data-title":"title"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(Oi,{data:e}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e.data}),l.a.createElement(ji,null,l.a.createElement(w.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},Z)),l.a.createElement(S.a,{span:24},l.a.createElement(w.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(S.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24,lg:9,className:"search-box"},l.a.createElement(wi,{onChange:function(e){i(e.target.value)},onBlur:function(){e.setSearchValue(s)},placeholder:"Search"})),l.a.createElement(S.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"}))),l.a.createElement(S.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(Ne.a,{onClick:function(){t.push("/orgcc/createinfo")},type:"primary"},"Create")))),l.a.createElement(C.a,{spinning:u,size:"large"},l.a.createElement(_e,{rowKey:"info_id",columns:d,data:e.infos}))))))))},Ci=a(614),Di=a.n(Ci),ki=N.a.Content,Ii=function(e){var t=Object(m.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(w.a,{className:"inner-header"},l.a.createElement(ue,{amORGUser:!0})),l.a.createElement(w.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(fe,{amORGUser:!0,data:e.data}),l.a.createElement(ki,{"data-test":"Broadcast",className:""},l.a.createElement(w.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Info")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(w.a,null,l.a.createElement(S.a,{span:24},l.a.createElement("div",{className:"c-vector-area d-flex justify-content-center"},l.a.createElement("img",{src:Di.a,alt:"Create Info"})),l.a.createElement("p",{className:"text-center pt-3"},'Populate information that employees will see in "Info" section under Settings in the app. This section enables employees to use AnonyMoose more effectively.'),l.a.createElement(w.a,{className:"d-flex justify-content-center"},l.a.createElement($e.a,{className:"mt-1"})),l.a.createElement(S.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ne.a,{onClick:function(){t.push("/orgcc/createinfo")},type:"primary"},"Create Info"))))))))))};var xi=Object(i.b)((function(e){var t=e.info;return{infosdata:t.infosdata,createinfodata:t.createinfodata}}))((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),g=p[0],h=p[1];Object(n.useEffect)((function(){(0,e.dispatch)(function(e){return function(t){return Lt.getInfos(e).then((function(e){return t({type:"INFO_SUCCESS",payload:{infosdata:e.data}}),Promise.resolve()}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return t({type:"INFO_FAIL"}),t({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}}(g))}),[m,e.createinfodata,g]),Object(n.useEffect)((function(){null===e.infosdata?s(!0):null!==e.infosdata&&s(!1)}),[e.infosdata]);return r||null===e.infosdata||0!==e.infosdata.length||0!==g.length?l.a.createElement(Si,{infos:e.infosdata?e.infosdata:[],data:e,loader:r,statusOnClicked:function(){u(!m)},setSearchValue:function(e){h(e)}}):l.a.createElement(Ii,{data:e})})),Ti=a(48);var Ai,Ui,Mi,Fi,Pi,Ri,Yi,Li,Bi,Hi,zi,Vi=function(e){var t=v("user"),a=JSON.parse(v("user")),n=!1,r=!1,s=!1,o=!1;t||(n=!0,r=!0,s=!0,o=!0),t&&a&&"null"!=a.user_data&&(n="true"===Ti.AES.decrypt(a.user_data.is_amcc_user,"anonymoose").toString(Ti.enc.Utf8),r="true"===Ti.AES.decrypt(a.user_data.is_org_cc_user,"anonymoose").toString(Ti.enc.Utf8),s="true"===Ti.AES.decrypt(a.user_data.is_am_web_user,"anonymoose").toString(Ti.enc.Utf8),o="true"===Ti.AES.decrypt(a.user_data.is_idb_user,"anonymoose").toString(Ti.enc.Utf8));var i=window.location.pathname;return l.a.createElement(c.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/editprofile",component:er}),l.a.createElement(m.b,{path:"/managebroadcast",component:Xr}),l.a.createElement(O,{path:"/changepassword",component:ua}),l.a.createElement(m.b,{exact:!0,path:"/amcc/login",component:la}),l.a.createElement(m.b,{exact:!0,path:"/org/login",component:ea}),l.a.createElement(m.b,{exact:!0,path:"/forgotpassword",component:Qt}),l.a.createElement(m.b,{exact:!0,path:"/resetpassword",component:Wt}),r&&("/orgcc/createhotline"===i||"/orgcc/edithotline"===i||"/orgcc/editopenline"===i||"/orgcc/manageemployees"===i||"/orgcc/assignhotline"===i||"/orgcc/hotlinedirectory"===i||"/orgcc/createopenline"===i||"/orgcc/openlinedirectory"===i||"/orgcc/pollsdirectory"===i||"/orgcc/createpoll"===i||i.includes("/orgcc/editpoll")||"/orgcc/previewpoll"===i||"/orgcc/pollresponse"===i||"/orgcc/existingpolls"===i||i.includes("/orgcc/duplicatepoll")||"/orgcc/addemployee"===i||"/orgcc/createemployee"===i||"/orgcc/help"===i||"/orgcc/createhelp"===i||"/orgcc/edithelp"===i||"/orgcc/info"===i||"/orgcc/infodetails"===i||"/orgcc/createinfo"===i||"/orgcc/editinfo"===i||"/orgcc/importemployee"===i||i.includes("/orgcc/editemployee")||"/orgcc/broadcastmessages"===i||"/orgcc/createbroadcast"===i||i.includes("/orgcc/editbroadcast")||"/"===i||"/amcc/login"===i||"/org/login"===i)?l.a.createElement(m.d,null,l.a.createElement(O,{exact:!0,path:"/orgcc/createhotline",amorg:!0,component:Ia}),l.a.createElement(O,{exact:!0,path:"/orgcc/manageemployees",amorg:!0,component:yo}),l.a.createElement(O,{exact:!0,path:"/orgcc/importemployee",amorg:!0,component:dr}),l.a.createElement(O,{exact:!0,path:"/orgcc/addemployee",amorg:!0,component:ir}),l.a.createElement(O,{exact:!0,path:"/orgcc/createemployee",amorg:!0,component:br}),l.a.createElement(O,{exact:!0,path:"/orgcc/assignhotline",amorg:!0,component:Wa}),l.a.createElement(O,{exact:!0,path:"/orgcc/hotlinedirectory",amorg:!0,component:Ga}),l.a.createElement(O,{exact:!0,path:"/orgcc/edithotline",amorg:!0,component:lr}),l.a.createElement(O,{exact:!0,path:"/orgcc/createopenline",amorg:!0,component:ti}),l.a.createElement(O,{exact:!0,path:"/orgcc/openlinedirectory",amorg:!0,component:Vo}),l.a.createElement(O,{exact:!0,path:"/orgcc/editopenline",amorg:!0,component:ri}),l.a.createElement(O,{exact:!0,path:"/orgcc/pollsdirectory",amorg:!0,component:Is}),l.a.createElement(O,{exact:!0,path:"/orgcc/previewpoll",amorg:!0,component:qr}),l.a.createElement(O,{exact:!0,path:"/orgcc/createpoll",amorg:!0,component:Kr}),l.a.createElement(O,{exact:!0,path:"/orgcc/pollresponse",amorg:!0,component:Ys}),l.a.createElement(O,{exact:!0,path:"/orgcc/editpoll/:id",amorg:!0,component:Ws}),l.a.createElement(O,{exact:!0,path:"/orgcc/existingpolls",amorg:!0,component:Zs}),l.a.createElement(O,{exact:!0,path:"/orgcc/createhelp",amorg:!0,component:ii}),l.a.createElement(O,{exact:!0,path:"/orgcc/help",amorg:!0,component:Ei}),l.a.createElement(O,{exact:!0,path:"/orgcc/info",amorg:!0,component:xi}),l.a.createElement(O,{exact:!0,path:"/orgcc/createinfo",amorg:!0,component:bi}),l.a.createElement(O,{exact:!0,path:"/orgcc/editinfo",amorg:!0,component:bi}),l.a.createElement(O,{exact:!0,path:"/orgcc/edithelp",amorg:!0,component:ii}),l.a.createElement(O,{exact:!0,path:"/orgcc/infodetails",amorg:!0,component:Ni}),l.a.createElement(O,{exact:!0,path:"/orgcc/duplicatepoll/:id",amorg:!0,component:oo}),l.a.createElement(O,{exact:!0,path:"/orgcc/editemployee/:id",amorg:!0,component:mo}),l.a.createElement(O,{exact:!0,path:"/orgcc/broadcastmessages",amorg:!0,component:vs}),l.a.createElement(O,{exact:!0,path:"/orgcc/createbroadcast",amorg:!0,component:is}),l.a.createElement(O,{exact:!0,path:"/orgcc/editbroadcast/:id",amorg:!0,component:us})):!s||"/amweb/hotlinemessages"!==i&&"/org/login"!==i&&"/amcc/login"!==i&&"/"!==i&&"/amweb/openlinemessages"!==i&&"/hotlinereports"!==i&&"/openlinereports"!==i&&"/orgcc/help"!==i&&"/orgcc/createhelp"!==i&&"/orgcc/edithelp"!==i&&"/orgcc/info"!==i&&"/orgcc/infodetails"!==i&&"/orgcc/createinfo"!==i&&"/orgcc/editinfo"!==i?n&&("/amcc/manageorganizations"===i||"/amcc/createorg"===i||"/"===i||i.includes("/amcc/editorg")||i.includes("/amcc/orgdetails")||"/org/login"===i||"/amcc/login"===i)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(m.d,null,l.a.createElement(O,{exact:!0,path:"/amcc/orgdetails/:id",amcc:!0,component:Jl}),l.a.createElement(O,{exact:!0,path:"/amcc/manageorganizations",amcc:!0,component:Bt}),l.a.createElement(O,{exact:!0,path:"/amcc/createorg",amcc:!0,component:Mt}),l.a.createElement(O,{exact:!0,path:"/amcc/editorg/:id",amcc:!0,component:Zl}))," "):!o||"/org/login"!==i&&"/amcc/login"!==i&&"/"!==i&&"/idb/hotlinereports"!==i&&"/idb/openlinereports"!==i&&"/orgcc/help"!==i&&"/orgcc/createhelp"!==i&&"/orgcc/edithelp"!==i&&"/orgcc/info"!==i&&"/orgcc/infodetails"!==i&&"/orgcc/createinfo"!==i&&"/orgcc/editinfo"!==i?t&&l.a.createElement(m.b,{component:ql}):l.a.createElement(m.d,null," ",l.a.createElement(O,{exact:!0,path:"/idb/hotlinereports",amidb:!0,component:xo}),l.a.createElement(O,{exact:!0,path:"/idb/openlinereports",amidb:!0,component:xo})," ",l.a.createElement(O,{exact:!0,path:"/orgcc/createhelp",amidb:!0,component:ii}),l.a.createElement(O,{exact:!0,path:"/orgcc/edithelp",amidb:!0,component:ii}),l.a.createElement(O,{exact:!0,path:"/orgcc/help",amidb:!0,component:Ei}),l.a.createElement(O,{exact:!0,path:"/orgcc/info",amidb:!0,component:xi}),l.a.createElement(O,{exact:!0,path:"/orgcc/createinfo",amidb:!0,component:bi}),l.a.createElement(O,{exact:!0,path:"/orgcc/editinfo",amorg:!0,component:bi}),l.a.createElement(O,{exact:!0,path:"/orgcc/infodetails",amidb:!0,component:Ni})):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(m.d,null,l.a.createElement(O,{exact:!0,path:"/amweb/hotlinemessages",amweb:!0,component:cl}),l.a.createElement(O,{exact:!0,path:"/amweb/openlinemessages",amweb:!0,component:Hl}),l.a.createElement(O,{exact:!0,path:"/orgcc/createhelp",amweb:!0,component:ii}),l.a.createElement(O,{exact:!0,path:"/orgcc/edithelp",amweb:!0,component:ii}),l.a.createElement(O,{exact:!0,path:"/orgcc/help",amweb:!0,component:Ei}),l.a.createElement(O,{exact:!0,path:"/orgcc/info",amweb:!0,component:xi}),l.a.createElement(O,{exact:!0,path:"/orgcc/createinfo",amweb:!0,component:bi}),l.a.createElement(O,{exact:!0,path:"/orgcc/editinfo",amorg:!0,component:bi}),l.a.createElement(O,{exact:!0,path:"/orgcc/infodetails",amweb:!0,component:Ni})))))},qi=a(152),Qi=a(615),Gi=a(616),Wi=a(48),Ki="",Ji=v("current");Ki=Ji?Wi.AES.decrypt(Ji,"anonymoose"):"";var $i=JSON.parse(v("user")),Zi=$i?Wi.AES.decrypt(null===$i||void 0===$i?void 0:null===(Ai=$i.user_details)||void 0===Ai?void 0:Ai.first_name,"anonymoose").toString(Wi.enc.Utf8):"",Xi=$i?Wi.AES.decrypt(null===$i||void 0===$i?void 0:null===(Ui=$i.user_details)||void 0===Ui?void 0:Ui.last_name,"anonymoose").toString(Wi.enc.Utf8):"",ec=$i?Wi.AES.decrypt(null===$i||void 0===$i?void 0:null===(Mi=$i.user_data)||void 0===Mi?void 0:Mi.email,"anonymoose").toString(Wi.enc.Utf8):"",tc=$i?Wi.AES.decrypt(null===$i||void 0===$i?void 0:null===(Fi=$i.user_data)||void 0===Fi?void 0:Fi.mobile_number,"anonymoose").toString(Wi.enc.Utf8):"",ac=!!$i&&"true"===Wi.AES.decrypt(null===(Pi=$i.user_data)||void 0===Pi?void 0:Pi.is_am_web_user,"anonymoose").toString(Wi.enc.Utf8),nc=!!$i&&"true"===Wi.AES.decrypt(null===(Ri=$i.user_data)||void 0===Ri?void 0:Ri.is_amcc_user,"anonymoose").toString(Wi.enc.Utf8),lc=!!$i&&"true"===Wi.AES.decrypt(null===(Yi=$i.user_data)||void 0===Yi?void 0:Yi.is_super_user,"anonymoose").toString(Wi.enc.Utf8),rc=!!$i&&"true"===Wi.AES.decrypt(null===(Li=$i.user_data)||void 0===Li?void 0:Li.is_org_cc_user,"anonymoose").toString(Wi.enc.Utf8),sc=!!$i&&"true"===Wi.AES.decrypt(null===(Bi=$i.user_data)||void 0===Bi?void 0:Bi.is_idb_user,"anonymoose").toString(Wi.enc.Utf8),oc=!!$i&&"true"===Wi.AES.decrypt(null===(Hi=$i.user_data)||void 0===Hi?void 0:Hi.is_seeded_user,"anonymoose").toString(Wi.enc.Utf8),ic=!!$i&&"true"===Wi.AES.decrypt(null===(zi=$i.user_data)||void 0===zi?void 0:zi.is_app_user,"anonymoose").toString(Wi.enc.Utf8),cc=Object(M.a)({},$i,{user_data:Object(M.a)({},null===$i||void 0===$i?void 0:$i.user_data,{email:ec,mobile_number:tc,is_am_web_user:ac,is_amcc_user:nc,is_super_user:lc,is_app_user:ic,is_org_cc_user:rc,is_idb_user:sc,is_seeded_user:oc}),user_details:Object(M.a)({},null===$i||void 0===$i?void 0:$i.user_details,{first_name:Zi,last_name:Xi})}),mc=Ki.toString(Wi.enc.Utf8),uc=$i?{isLoggedIn:!0,user:cc,current:mc.replaceAll('^"+|"+$',"")}:{isLoggedIn:!1,user:null,current:null},dc={},pc={manageOrgData:null},gc={manageEmpData:null},hc={hotlinesdata:null,assignhotlinedata:[]},fc={assignhotlinedata:[]},Ec={openlinesdata:null},vc={pollsdata:null},bc={helpsdata:null,createhelpdata:null},yc={broadcastmessagedata:null},Oc={infosdata:null,createinfodata:null},_c=Object(qi.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOGIN_SUCCESS":return Object(M.a)({},e,{isLoggedIn:!0,user:n.user,current:n.current});case"LOGIN_FAIL":case"LOGOUT":return Object(M.a)({},e,{isLoggedIn:!1,user:null,current:null});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_MESSAGE":return{message:n};case"CLEAR_MESSAGE":return{message:""};default:return e}},manageOrg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MANAGEORG_SUCCESS":return Object(M.a)({},e,{manageOrgData:n.manageOrgData});case"MANAGEORG_FAIL":return Object(M.a)({},e,{manageOrgData:[]});default:return e}},manageEmp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MANAGEEMP_SUCCESS":return Object(M.a)({},e,{manageEmpData:n.manageEmpData});case"MANAGEEMP_FAIL":return Object(M.a)({},e,{manageEmpData:[]});default:return e}},hotlinedata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HOTLINE_SUCCESS":return Object(M.a)({},e,{hotlinesdata:n.hotlinesdata});case"HOTLINE_FAIL":return Object(M.a)({},e,{hotlinesdata:[]});case"HOTLINE_SUCCESS":return Object(M.a)({},e,{assignhotlinedata:n.assignhotlinedata});case"HOTLINE_FAIL":return Object(M.a)({},e,{assignhotlinedata:[]});default:return e}},assignedHotline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HOTLINE_SUCCESS":return Object(M.a)({},e,{assignhotlinedata:n.assignhotlinedata});case"HOTLINE_FAIL":return Object(M.a)({},e,{assignhotlinedata:[]});default:return e}},openline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ec,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"OPENLINE_SUCCESS":return Object(M.a)({},e,{openlinesdata:n.openlinesdata});case"OPENLINE_FAIL":return Object(M.a)({},e,{openlinesdata:[]});default:return e}},poll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"POLL_SUCCESS":return Object(M.a)({},e,{pollsdata:n.pollsdata});case"POLL_FAIL":return Object(M.a)({},e,{pollsdata:[]});default:return e}},help:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HELP_SUCCESS":return Object(M.a)({},e,{helpsdata:n.helpsdata});case"HELP_FAIL":return Object(M.a)({},e,{helpsdata:[]});case"CREATEHELP_SUCCESS":return Object(M.a)({},e,{createhelpdata:n.createhelpdata});case"CREATEHELP_FAIL":return Object(M.a)({},e,{createhelpdata:[]});default:return e}},broadcastMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"BROADCAST_SUCCESS":return Object(M.a)({},e,{broadcastmessagedata:n.broadcast});case"BROADCAST_FAIL":return Object(M.a)({},e,{broadcastmessagedata:[]});default:return e}},info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oc,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"INFO_SUCCESS":return Object(M.a)({},e,{infosdata:n.infosdata});case"INFO_FAIL":return Object(M.a)({},e,{infosdata:[]});case"CREATEINFO_SUCCESS":return Object(M.a)({},e,{createinfodata:n.createinfodata});case"CREATEINFO_FAIL":return Object(M.a)({},e,{createinfodata:[]});default:return e}}}),Nc=[Gi.a],jc=Object(qi.createStore)(_c,Object(Qi.composeWithDevTools)(qi.applyMiddleware.apply(void 0,Nc))),wc=a(617);var Sc=function(){var e=null,t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!1),m=Object(o.a)(c,2),u=m[0],d=m[1],p=Object(n.useState)(!1),g=Object(o.a)(p,2),h=g[0],f=g[1];return l.a.createElement(i.a,{store:jc},l.a.createElement(wc.a,{ref:function(t){e=t},element:document,onIdle:function(t){v("user")&&(h?(s(!1),d(!0)):(s(!0),e.reset(),f(!0)))},onAction:function(e){f(!1)},onActive:function(e){f(!1)},debounce:250,timeout:h?6e4:12e5}),l.a.createElement("div",{className:"App"},l.a.createElement("div",null,l.a.createElement("div",{className:"content"},l.a.createElement(_t.a,{visible:r,onOk:function(){s(!1)},onCancel:function(){s(!1)},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:X},l.a.createElement("p",null,Ve)),l.a.createElement(_t.a,{visible:u,onOk:function(){v("user")&&H.logout()},onCancel:function(){v("user")&&H.logout()},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:X},l.a.createElement("p",null,qe)),l.a.createElement(Vi,null)))))};s.a.render(l.a.createElement(Sc,null),document.getElementById("root"))},157:function(e,t,a){e.exports=a.p+"static/media/amcc-vector.042c9163.svg"},197:function(e,t,a){},211:function(e,t,a){e.exports=a.p+"static/media/create-hotline.7fcce0f6.svg"},231:function(e,t,a){},264:function(e,t,a){},307:function(e,t,a){e.exports=a.p+"static/media/send.5a28702a.svg"},308:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAIkElEQVR42u1cC3AUVRa9t7tnJsYkEJGAmF1W+biSJSgIhIC7YFkKogiIlqWgKLgiLMRFqJKPH6wSYcXFDwJaKgh+UFChFtRad/mUho8RiBuCAhK+WVgpEvIhyWS63933ejIhM5nMdCc9k5nM3KrJdL+57773Tt933n23040Ql4CCrd2BSJcWAbQks7sS7g4TEcwuOKqGqz1TAG3KznT0T02egojjeUd78SK7bgRR77iXYZ8yq3SEFF0oWzQk98AzEQVQ/q0D0jsl2Lfww8xwdCyQHDpfSjLiizfvDD1IhgDakPUHR3aHdt/zw956JS7U4LL6nodSR8jhkgui32EByRBA/x05OId/LQ314M0AJMrE9As1SEYByuNf/SINoLrfQwqSIYDO3Dmkin9dFooONEc4B/kWhWy6GfUg5lUpgjzIoxMqkNoMQKHipDYFUN2xpSC1OYCsBskoSZMRvXCJH5L2J5ZwUpv0IE+ZFSBFJUBHOEDMYL2WTreoBOhEWQXWqKrhei0BKSo5qKS6Bs5VVZut1qzpFpUexE+QexE5VdWU7eaAFJUAiTKXxuh0RSUIkMzYNjvdohYgqiu8UOOEcmct1mqaT1pNHxs1dW6TpBcH5xYEBSmqAQqkEwwgIV225EqWABRpJG2VXLX5u6Djb7MeZETHMg+KAxQHqGUAxTkoiMQ9KA5QHKA4QHGStl7iJC02p5IkTtxjFQXs0lBifopB4uWkLFgKkNYZ4Nz/UF08n+jXs3GA9DJJQnnms4Q39AeorgL1hdlIp47HSdoj8gOTULpjLIGmgfbKAqDikyiPG0/a26/W/79RzJI0B0YApAPBVi8HSEoBadS9AIoN1EdGA9TxUEyStDT0dpAnzxADQ3bsCGFyCsCVnQQoyDZvILZ+jfUeFC0ASf2zQZ4+h6Mkecam61DRYWCr3uSA/RK7HIR9biL5yXn6NKrXYYzYFx8B2/SJ7kExGyhiZj+Qn5wPaLfXl1GtE7Rli4H27WmyXkxwkNR3IMgz5iD3nEs6mspXrheQ/WdvbO/FpOyhID8+E1BRvHS0d18H2v7P2N6sSrcMJ2niNH0b0VCH9nwLKp9aYhWLTYDEjb/R96N0z/jG9WqqQZ31GNCF0hjdzfPlW35kGkjDhvv9Wdu4DtiGtYbNtSmSxuR2IE+dBdi7r/96qkpqzkTuPSWGbYdkimFd6iCcAGHPXiQ/8ZQ7IhbCYxruTV71WH4eqS8/Z8q25QCJ3Io87yXQVi5FOnc25ACJuEYaNwGlEWOoLqcDlJ8HeG1PhJR2XvW01ctJ+2Zz6wBUz0EcIGXVFwDOWmCfrga29av6jZ/Vghk3gDxxKuBVV7uB4YEfW/s296KOIN99fyN919zpACeLTLVhOQcJD1JeeQcwrbP7apw+Adr6tUD79+hhvZfhZnoQpHcl+d6HAHkAWK9TfIrUZYsAVBWUhcsAbTZfW6g+OpYEiGbaDw0HybJYRfgy+yABJ063winUvt5E9N1W8HTSFAGLWKZnL5BGjEbsN6h+OoFIV2z9CtnH7xE5a0B56jkQCbBGtpxOdE0aG1l3NUQ6U+RdpNtHAV6W6G68shzYzh1AeblAR37SV5YmO2yzAXbthpjZl6SsP/Le/sY74CvYB9onqwFOFLmj5u7Xgfz83/0PtqYaXZPHRRZAnsYwKVkkqFAaeQ8B966GV5VOFhGcLQYqLxf7IwS7g7B9KkCnLoDpXQUJe3da7Lj37ib25efAfvlZ9yBPW8r0pwEH3ux/sLXcgx5tRQ9qGCjKOfMALk8C7NARICGBD4r/dLGClyUDpl5hxJyXiLsMVHRE9zq2cxtAaUljpZT2oLz+vthzNWGEwCUyhaq5R1mtJ2nuIWIVQ1kxR8CaJlZABKYRlJwHOnMa6PhRkchCOnSQqKIsoB3ptlEkTfgzNNWeOHf9ZQJR6fmAOuGJg6bMBDp2FOnXM5xzuOeoLj54mXNSIkGHNEDBJdd057FKDwSb3d0hl0tsIlH7x3qi4pOmBiHK5LkLCa/PDFhPXTCL2OGDrQuQqYElJOgrkjxiDMDvurl1nDXEPvsQBMdQA34JaIcvAMrKdV785q+etupN0v61pXUAaulmlQMFMp8ieGWafs527QBx+wVctcHrZvQBZc7CoHps53bQlr9sql+RtVnlniA/lkM4YIh+TocKQVvyPFJ1VeD7W6PuQ+m+h4OvUBVlpE4bDyT4zmAfIy4fJHCRHpjEA8IxbpAO5CMHiUjwWBN2lKmzEbOHGlrCtUXzgR3YH70AeaJmSeR0bhnh5o5vNpMmbu41BdCCpYjdehqyTbnbQF2xJLoB0o9lBeRnFoPU43r3lV/Mr3zBfr92bG+sQUjtYMw25zR1xkQQYUNYASoeOZgkNKRqXDp3AeWl5fqWg0fcoM6dAT7/CK+LHnfZ7IbNahs+ALbx46B6jGN19ZZca0j62PAs5giyzDYnHyQ/NIUHgXfpZYI/qDC/0X5NWbWx0SMEAW1frAR15mSAqsqA7Ts5mV/z9W5rPOjHYX1Zx8RL7xWwLFuY1hmVv71FIs8kckvs/RW+Kx8ob63Tb1D46Tc1dc7+/SWwNSsDti+eN+uzbZ81AO0YlFHVtV1ygr3Oi6xMp9anTsVf8rk9LNIgYovSeO4FfVDF91Zzw/ZrufecKKuo+dOuwkRLANo+KCNPkfCm9OQkcChhf6eSpSKeLxPPmamMfhi6q7C/JQBty+qlv/1FEHX7BAekOOzIvYnQ2475q9w8HdP1xB/uNVjurCXxfBlzO9Jfh+0++JolAC36/W8dA9sneb0/KESDDwlAnvMGU67gYGX1gGkHjjkhiBheu9fd2CO9k8MmdoO9reQgszoW2C4odWkjx+49dNrIuE0FN8KTslKTn+CHD/JPBkTQK3OCiHhEupB/Pvyx/OKKnMLjQT3HI/8HuD0V7skadxYAAAAASUVORK5CYII="},478:function(e,t,a){},506:function(e,t,a){},507:function(e,t,a){},508:function(e,t,a){},510:function(e,t,a){},540:function(e,t,a){},563:function(e,t,a){e.exports=a.p+"static/media/anonymoose-logo.c7b270ba.svg"},564:function(e,t,a){e.exports=a.p+"static/media/logo.c7b270ba.svg"},565:function(e,t,a){e.exports=a.p+"static/media/expand-more.2d8e2c25.svg"},577:function(e,t,a){e.exports=a.p+"static/media/pencil.5fa26e5e.svg"},578:function(e,t,a){e.exports=a.p+"static/media/work-chart.d8145f68.svg"},582:function(e,t,a){e.exports=a.p+"static/media/no-hotlines.50051d5a.svg"},587:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAN5JREFUeJzt2LENwjAYROEDMREFLU0qRsoQYZtUNLQpMgk7QG8qS45ewO+T3FiRfTkpKf5EkiRJ6tIBundIcin2liQPIAtiSvIu1kQEORKX7okF0AFoFkAHoFkAHYBmAXQAmgXQAWgWQAegWQAdgNZ9AbUToSHJrcG91yTnYm9N8mxw9pwNJ0tjvic5e1tjzQt1/wlYAB2Adqp8fklyb3Dvlj/BpcEZm3MsvhcWQAegWQAdgGYBdACaBdABaBZAB6BZAB2AZgF0AFr3BdROhFqZk7yKvZ+Y5EiSJEl/4gNtTT/cFdm74gAAAABJRU5ErkJggg=="},59:function(e,t,a){e.exports={sm_textarea:"managePoll_sm_textarea__3nkFR",poll_info:"managePoll_poll_info__1ojZa",circle_white:"managePoll_circle_white__1uaCi",select_md:"managePoll_select_md__13um9","ant-select-dropdown":"managePoll_ant-select-dropdown__28tj6",edit_tag:"managePoll_edit_tag__1rhNS",add_tag:"managePoll_add_tag__n7gkH","ant-tag":"managePoll_ant-tag__zesSw",rating_img_wrapper:"managePoll_rating_img_wrapper__hrXkQ",steps_img:"managePoll_steps_img__37tTu"}},597:function(e,t,a){e.exports=a.p+"static/media/no-openlines.50051d5a.svg"},598:function(e,t,a){e.exports=a.p+"static/media/create-openline.7fcce0f6.svg"},608:function(e,t,a){e.exports=a.p+"static/media/manage-broadcast.2eea7cab.svg"},613:function(e,t,a){e.exports=a.p+"static/media/create-help.3d559d4b.svg"},614:function(e,t,a){e.exports=a.p+"static/media/create-info.603eb5e9.svg"},658:function(e,t,a){e.exports=a(1439)},662:function(e,t,a){},664:function(e,t,a){},665:function(e,t,a){},67:function(e,t,a){},691:function(e,t){},693:function(e,t){},726:function(e,t){},727:function(e,t){},792:function(e,t,a){},82:function(e,t,a){e.exports=a.p+"static/media/dots-icon.aa302437.svg"},92:function(e,t,a){},959:function(e,t){}},[[658,1,2]]]);
//# sourceMappingURL=main.d96fd672.chunk.js.map