(this["webpackJsonplogin-app-reactjs"]=this["webpackJsonplogin-app-reactjs"]||[]).push([[0],{101:function(e,t,a){e.exports=a.p+"static/media/pie-chart.aec9fc99.svg"},102:function(e,t,a){e.exports=a.p+"static/media/bar-chart.e822e6b1.svg"},1066:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(32),s=a.n(r),o=(a(528),a(4)),c=a(2),i=(a(529),a(530),a(531),a(22)),m=a(10),u=a(68),d=a(12),p=a(13),g=a(15),h=a(14),f=a(16),E=function(e){return"".concat("AnonyMoose",".").concat(e)},v=function(e,t){return localStorage.setItem(E(e),t)},b=function(e){return localStorage.getItem(E(e))},y=function(e){return localStorage.removeItem(E(e))},_=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.component;return b("user")?l.a.createElement(e,this.props):l.a.createElement(u.a,{to:{pathname:"/org/login"}})}}]),t}(l.a.Component),O=_,N=a(1086),j=a(1071),w=a(519),S=a(1072),C=a(1070),D=a(253),k=a(465),x=a.n(k),I=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:x.a,alt:"AnonyMoose",className:"pr-4 pt-2 pt-lg-0 logo"}))},T=a(466),A=a.n(T),Y=a(52),M=a(1085),U=(a(538),a(518)),F=a(1091),P=a(467),R=a.n(P),L=a(30),z=a.n(L),H=a(9),B=a.n(H),q="http://54.241.83.181:8000/api/V1/",V="AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI",Q=a(41),G={headers:{Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},K=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"login",value:function(e,t,a){var n,l,r,s,c,i,m,u,d,p,g,h,f,E,b,y,_,O,N,j,w,S,C,D,k,x,I,T,A,Y,M,U,F,P,R,L,H,V,K;return z.a.async((function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,z.a.awrap(B.a.post(q+"authenticate/",{email:e,password:t,page:a},G));case 2:return(n=W.sent).data&&(j=n.data,w=Q.AES.encrypt(null===(l=j.user_details)||void 0===l?void 0:l.first_name,"anonymoose").toString(),S=Q.AES.encrypt(null===(r=j.user_details)||void 0===r?void 0:r.last_name,"anonymoose").toString(),C=Q.AES.encrypt(null===(s=j.user_details)||void 0===s?void 0:s.department_id.toString(),"anonymoose").toString(),D=Q.AES.encrypt(null===(c=j.user_details)||void 0===c?void 0:c.org_user_id.toString(),"anonymoose").toString(),k=Q.AES.encrypt(null===(i=j.user_details)||void 0===i?void 0:i.end_date,"anonymoose").toString(),x=Q.AES.encrypt(null===(m=j.user_details)||void 0===m?void 0:m.start_date,"anonymoose").toString(),I=Q.AES.encrypt(null===(u=j.user_data)||void 0===u?void 0:u.email,"anonymoose").toString(),T=Q.AES.encrypt(null===(d=j.user_data)||void 0===d?void 0:d.mobile_number,"anonymoose").toString(),A=Q.AES.encrypt(null===(p=j.user_data)||void 0===p?void 0:p.organization_id.toString(),"anonymoose").toString(),Y=Q.AES.encrypt(null===(g=j.user_data)||void 0===g?void 0:g.user_id.toString(),"anonymoose").toString(),M=Q.AES.encrypt(null===(h=j.user_data)||void 0===h?void 0:h.is_am_web_user.toString(),"anonymoose").toString(),U=Q.AES.encrypt(null===(f=j.user_data)||void 0===f?void 0:f.is_super_user.toString(),"anonymoose").toString(),F=Q.AES.encrypt(null===(E=j.user_data)||void 0===E?void 0:E.is_amcc_user.toString(),"anonymoose").toString(),P=Q.AES.encrypt(null===(b=j.user_data)||void 0===b?void 0:b.is_org_cc_user.toString(),"anonymoose").toString(),R=Q.AES.encrypt(null===(y=j.user_data)||void 0===y?void 0:y.is_idb_user.toString(),"anonymoose").toString(),L=Q.AES.encrypt(null===(_=j.user_data)||void 0===_?void 0:_.is_seeded_user.toString(),"anonymoose").toString(),H=Q.AES.encrypt(null===(O=j.user_data)||void 0===O?void 0:O.is_app_user.toString(),"anonymoose").toString(),V=Q.AES.encrypt(null===(N=j.user_data)||void 0===N?void 0:N.app_authentication_key_id.toString(),"anonymoose").toString(),K=Object(o.a)({},j,{user_data:Object(o.a)({},j.user_data,{email:I,mobile_number:T,organization_id:A,user_id:Y,is_am_web_user:M,is_amcc_user:F,is_super_user:U,is_app_user:H,is_org_cc_user:P,is_idb_user:R,is_seeded_user:L,app_authentication_key_id:V}),user_details:Object(o.a)({},j.user_details,{first_name:w,last_name:S,department_id:C,org_user_id:D,end_date:k,start_date:x})}),v("user",JSON.stringify(K)),v("current",Q.AES.encrypt(JSON.stringify(t),"anonymoose").toString())),W.abrupt("return",n.data);case 5:case"end":return W.stop()}}))}},{key:"logout",value:function(){var e=b("userType"),t="/";t="AM CC"!==(e=Q.AES.decrypt(e,"anonymoose").toString(Q.enc.Utf8))?"/org/login":"/amcc/login",localStorage.clear(),window.location=t}}]),e}(),W=new K,J="Active",Z="Draft",$="Control Center",X="Scheduled",ee="Completed",te="All",ae="Polls",ne="Help",le="Info",re="Search",se="OK",oe="Next",ce="Back",ie="Cancel",me="Edit",ue="Delete",de="Total Conversations Initiated in this duration",pe="Upload",ge="Status has been set to Active.",he="Status has been set to Scheduled.",fe=a(41),Ee=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).handleLogoutClick=a.handleLogoutClick.bind(Object(Y.a)(a)),a.handleChangeUserRole=a.handleChangeUserRole.bind(Object(Y.a)(a)),a.state={isLoggedIn:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"handleLogoutClick",value:function(){W.logout()}},{key:"handleChangeUserRole",value:function(e){"amweb"===e?window.location.href="/amweb/hotlinemessages":"amcc"===e?window.location.href="/amcc/manageorganizations":"amorgcc"===e?window.location.href="/orgcc/manageemployees":"idb"===e&&(window.location.href="/idb/hotlinereports")}},{key:"render",value:function(){var e,t,a,n,r,s=this,o=null===(e=this.props)||void 0===e?void 0:e.userRole,c=o.amWEBUser,i=o.amCCUser,u=o.amORGUser,d=o.amIDBUser;i?v("userType",fe.AES.encrypt("AM CC","anonymoose").toString()):u?v("userType",fe.AES.encrypt("Org CC","anonymoose").toString()):c?v("userType",fe.AES.encrypt("AM WEB","anonymoose").toString()):d&&v("userType",fe.AES.encrypt("IDB","anonymoose").toString());var p=b("userType"),g=p?fe.AES.decrypt(p,"anonymoose").toString(fe.enc.Utf8):"",h=(null===(t=this.props)||void 0===t?void 0:null===(a=t.user)||void 0===a?void 0:a.user_data)||{},f=h.email,E=h.is_am_web_user,y=h.is_amcc_user,_=h.is_org_cc_user,O=(h.is_app_user,h.is_idb_user),N=(h.is_seeded_user,null===(n=this.props)||void 0===n?void 0:null===(r=n.user)||void 0===r?void 0:r.user_details),j=N.first_name+" "+N.last_name,w=j.charAt(0).toUpperCase()+j.slice(1),S=w.split(" "),C=S.shift().charAt(0)+S.pop().charAt(0);return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{"data-test":"userInfo",className:"test",placement:"bottom",content:l.a.createElement(F.b,{className:"u-info",size:"large",bordered:!0},l.a.createElement(F.b.Item,{className:" d-flex d-lg-none"},l.a.createElement("div",{className:"d-flex flex-column "},l.a.createElement("span",{className:"uname-top"},w),l.a.createElement("span",{className:"u-type"},(null===g||void 0===g?void 0:g.includes("Org"))?$:g))),l.a.createElement(F.b.Item,null,l.a.createElement("div",{className:"email"},f,l.a.createElement("br",null))),u&&E?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amweb")}},"AM Web"):null,u&&y?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amcc")}},"AM CC"):null,u&&O?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("idb")}},"IDB"):null,c&&_?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amorgcc")}},$):null,c&&y?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amcc")}},"AM CC"):null,c&&O?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("idb")}},"IDB"):null,i&&E?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amweb")}},"AM Web"):null,i&&_?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amorgcc")}},$):null,i&&O?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("idb")}},"IDB"):null,d&&E?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amweb")}},"AM Web"):null,d&&_?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amorgcc")}},$):null,d&&y?l.a.createElement(F.b.Item,{onClick:function(){return s.handleChangeUserRole("amcc")}},"AM CC"):null,l.a.createElement(m.b,{to:"/changepassword"},l.a.createElement(F.b.Item,null,"Change Password")),l.a.createElement(F.b.Item,{onClick:this.handleLogoutClick},"Sign Out")),trigger:"click"},l.a.createElement(M.a,{className:"mr-2"},C),l.a.createElement("span",{className:"d-none d-lg-flex flex-column"},l.a.createElement("span",{className:"uname-top"},w),l.a.createElement("span",{className:"u-type"},(null===g||void 0===g?void 0:g.includes("Org"))?$:g)),l.a.createElement("span",{className:"expand-arrow"},l.a.createElement("img",{src:R.a,alt:"Expand Arrow",className:"pr-0 pr-md-4"}))))}}]),t}(l.a.Component);var ve=Object(u.i)(Object(i.b)((function(e){var t=e.auth;return{isLoggedIn:t.isLoggedIn,user:t.user}}))(Ee));var be=Object(i.b)((function(e){var t=e.auth;return{isLoggedIn:t.isLoggedIn,user:t.user,current:t.current,message:e.message.message}}))((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:18,md:18,lg:12},l.a.createElement("img",{src:A.a,alt:"Anonymoose Logo",className:"pl-md-0 pr-0 pr-md-4 pt-0 pt-md-0 pt-lg-0 logo"})),l.a.createElement(C.a,{span:6,md:6,lg:12,className:"d-flex justify-content-end av-wrapper"},l.a.createElement(ve,{userRole:e})))})),ye=a(123),_e=a(1092),Oe=a(1093),Ne=j.a.Sider,je=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("employee")?t="4":this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")?t="2":this.props.data.location.pathname.includes("poll")?t="3":this.props.data.location.pathname.includes("broadcast")?t="5":this.props.data.location.pathname.includes("help")?t="6":this.props.data.location.pathname.includes("info")&&(t="7")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?_e.a:Oe.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(Ne,{className:this.state.collapsed?" d-lg-block w-md-100 sider-width":"d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(ye.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(ye.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(m.b,{to:"/orgcc/hotlinedirectory"},"Hotlines")),l.a.createElement(ye.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(m.b,{to:"/orgcc/openlinedirectory"},"Openlines")),l.a.createElement(ye.a.Item,{key:"3",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-polls"}))}," ",l.a.createElement(m.b,{to:"/orgcc/pollsdirectory"},ae)),l.a.createElement(ye.a.Item,{key:"4",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-manage-emp"}))}," ",l.a.createElement(m.b,{to:"/orgcc/manageemployees"},"Manage Employees")),l.a.createElement(ye.a.Item,{key:"5",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-broadcast"}))},l.a.createElement(m.b,{to:"/orgcc/broadcastmessages"},"Broadcast Messages")),l.a.createElement(ye.a.Item,{key:"6",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-help"}))},l.a.createElement(m.b,{to:"/orgcc/help"},ne)),l.a.createElement(ye.a.Item,{key:"7",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-info"}))},l.a.createElement(m.b,{to:"/orgcc/info"},le))),l.a.createElement("div",{className:"btm-div"},l.a.createElement(m.b,{to:"/orgcc/info",className:"px-2"},le),l.a.createElement(m.b,{to:"/orgcc/help",className:"px-2"},ne))))}}]),t}(l.a.Component),we=(a(203),j.a.Sider),Se=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?_e.a:Oe.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(we,{className:this.state.collapsed?"d-lg-block w-md-100 sider-width":" d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(ye.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},l.a.createElement(ye.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-manage-org"}))},l.a.createElement(m.b,{to:"/amcc/manageorganizations"},"Manage Organizations")))))}}]),t}(l.a.Component),Ce=function(e){var t=Object(u.g)(),a="/amcc/orgdetails/".concat(e.record.organization_id),n=function(){t.push(a)};return l.a.createElement(l.a.Fragment,null,e.orgName?l.a.createElement("a",{onClick:n},e.record.name):e.orgId?l.a.createElement("a",{onClick:n},e.record.identifier):l.a.createElement(l.a.Fragment,null," "))},De=a(1076),ke=a(1094),xe=(a(204),N.a.Search,l.a.createElement(ke.a,{style:{fontSize:16,color:"#1890ff"}}),function(e){var t=e.columns,a=e.data,n=e.rowKey;return l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(De.a,{pagination:{pageSize:10},rowKey:n,columns:t,dataSource:a,className:"cf"}))}),Ie=a(72),Te=function(e){var t=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{type:"primary"}," ",t))},Ae=a(479),Ye=a.n(Ae);function Me(){var e=JSON.parse(b("user"));return e&&e.user_data.tokens.access?"Bearer "+e.user_data.tokens.access:{}}var Ue=a(5),Fe=a.n(Ue),Pe="Email",Re="Mobile",Le="Status",ze="Actions",He="Start Date",Be="End Date",qe="Are you sure you want to delete",Ve="Control Center and Insights Dashboard",Qe="Raising Voice Anonymously Made Easy",Ge=" date has been extended successfully.",Ke="Reply to Messages, Add Notes, Status & Urgency level",We="Status of ",Je=" has been changed successfully.",Ze=" can't be changed as the end date has been passed.",$e=" can't be changed as this poll is completed.",Xe="You are about to log out. Click Ok to keep yourself logged in.",et="You are logged out. Click Ok to log in again.",tt=" to ",at="Note : Max 5 image/documents can be attached",nt="Messages once deleted can not be retrieved. Please confirm if you want to clear the conversation history.",lt="By choosing question type, you will see the associated fields here",rt=N.a.Search,st=(l.a.createElement(ke.a,{style:{fontSize:16,color:"#1890ff"}}),j.a.Content),ot=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","/");if(new Date<new Date(n)){var l={name:e.name,identifier:e.identifier,organization_id:e.organization_id,start_date:Fe()(e.start_date.replaceAll(" / ","-")).format("DD-MM-YYYY"),end_date:Fe()(n.replaceAll("/","-")).format("DD-MM-YYYY"),status_id:"Active"===t?2:1},r={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.put(q+"saveOrganization/",l,r).then((function(){w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.name+Je}),a.props.statusOnClicked()}))}else w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.name+Ze})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n,searchBy:e})},a.state={data:[],searchBy:"",filterData:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.organizations;null===t||void 0===t||t.forEach((function(e){e.start_date=Fe()(e.start_date).utc().local().format("MM / DD / YYYY"),e.end_date=Fe()(e.end_date).utc().local().format("MM / DD / YYYY")})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.organizations!==e.organizations&&(e.organizations.forEach((function(e){e.start_date=e.start_date?Fe()(e.start_date).utc().local().format("MM / DD / YYYY"):"",e.end_date=e.end_date?Fe()(e.end_date).utc().local().format("MM / DD / YYYY"):""})),this.setState({data:e.organizations},(function(){t.onSearch(t.state.searchBy)})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=[{title:"Organization Name",dataIndex:"",key:"name",width:"22%",render:function(e){return{children:l.a.createElement(Ce,{record:e,orgName:!0}),props:{"data-title":"Organization Name"}}}},{title:"Organization Id",dataIndex:"",key:"identifier",width:"20%",render:function(e){return{children:l.a.createElement(Ce,{record:e,orgId:!0}),props:{"data-title":"Organization Id"}}}},{title:He,dataIndex:"start_date",key:"start_date",width:"20%",render:function(e){return{children:e,props:{"data-title":"Start date"}}}},{title:Be,dataIndex:"end_date",key:"end_date",width:"20%",render:function(e){return{children:e,props:{"data-title":"End date"}}}},{title:Le,dataIndex:"",key:"status_id",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):2===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Draft"):3===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},X):4===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),ee):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Deleted"),props:{"data-title":"Status"}}}},{title:ze,dataIndex:"",key:"",width:"10%",render:function(e){var t="/amcc/editorg/".concat(e.organization_id);return{children:l.a.createElement(m.b,{to:t},l.a.createElement("img",{src:Ye.a,alt:"Actions"})),props:{"data-title":"Actions"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Se,null),l.a.createElement(st,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Organizations")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(rt,{placeholder:re,onSearch:this.onSearch})))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(m.b,{to:"/amcc/createorg"},l.a.createElement(Te,{value:"Create Organization"}))))),l.a.createElement(D.a,{spinning:this.props.loader,size:"large"},l.a.createElement(xe,{key:"manageOrg",rowKey:"identifier",columns:e,data:this.state.filterData})))))))}}]),t}(l.a.Component),ct=a(1073),it=a(480),mt=a.n(it),ut=a(7),dt=a(25),pt=a(1079),gt=a(1087),ht=(a(91),a(1082)),ft=a(1075),Et=a(1089),vt=a(283),bt=a(215),yt=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=e.children,i=e.label,m=e.value,u=r||m&&0!==m.length?"label label-float":"label";return l.a.createElement("div",{className:"float-label",onBlur:function(){return s(!1)},onFocus:function(){return s(!0)}},o,l.a.createElement("label",{className:u},i))},_t=a(1095),Ot="Please fill the fields marked with asterisk(*)",Nt="Max Characters limit reached.",jt="Please enter a valid email address.",wt="Please enter a valid mobile number.",St="Please enter a valid password. It should be atleast 8 characters long with atleast 1 each of Capital letter, small letter, numeric and special character.",Ct="Sorry! This hotline already exists in the system. Please use a different name.",Dt="Please select date",kt="Sorry! This Poll title already exists in the system. Please use a different name.",xt="Past Time can not be selected",It="Sorry! This openline already exists in the system. Please use a different name.",Tt="Please uplaod correct file format",At="Sorry! This email id already exists in the system. Please use a different email.",Yt="Sorry! This Phone number already exists in the system. Please use a different number.",Mt=a(1081),Ut=a(516),Ft=a(62),Pt=Mt.a.Panel,Rt=function(e){var t=e.CUGModalvisible,a=e.flexAttribute,r=e.CUGAttribute,s=e.viewOnly,i=void 0!==s&&s,m=e.handleCancel,u=e.handleSave,d=e.handleCUGChange,p=e.isEdit,g=void 0!==p&&p,h=e.orgStatus,f=void 0===h?"0":h,E=Object(n.useState)([]),v=Object(c.a)(E,2),b=v[0],y=v[1];return Object(n.useEffect)((function(){y(Object(o.a)({},r,{},a))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Ut.a,{title:"Add Employees",centered:!0,visible:t,width:800,onOk:function(){return u()},onCancel:function(){return m()},okButtonProps:{children:"Custom OK",disabled:!!i},cancelButtonProps:{children:"Custom cancel"},okText:"Save",cancelText:i?"Close":"Cancel"},l.a.createElement("div",{className:"font-weight-normal"},"Please create all employees for your organization who are eligible to use the app"),l.a.createElement("h6",{className:"mt-3 mb-1"},"Choose Attributes"),l.a.createElement("small",null,"You can choose from following organizational attribute as well as from CUG attribute to build sample form."),l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(Mt.a,{defaultActiveKey:[1],className:"mt-3"},l.a.createElement(Pt,{header:"Add CUG Attributes",key:"1"},l.a.createElement(C.a,{className:"pr-4"},l.a.createElement("h6",{className:"font-weight-bold"},"CUG Attributes"),l.a.createElement("p",{className:"pr-3"},"Description will go here... Lorem ipsum is a placeholder text commonly used to demonstrate the visual form of a document or a typeface."),l.a.createElement("div",null,l.a.createElement("h6",{className:"mt-3 mb-1"},"Enter Attributes"," ",l.a.createElement("small",{className:"pl-1"},"(Max 5)")),l.a.createElement("small",null,"Attributes like",l.a.createElement("b",{className:"pl-1 pr-1"},"Gender, Age, Race, Location, Designation"),"etc."),l.a.createElement(C.a,{span:24,className:"gutter-row mt-3"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"CUG Attribute 1",allowClear:!0,value:r.cug1,id:"cug1",onChange:function(e){return d(e,"cug")},disabled:i||g&&"1"===f&&""!==b.cug1,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"CUG Attribute 2",allowClear:!0,value:r.cug2,id:"cug2",onChange:function(e){return d(e,"cug")},disabled:i||g&&"1"===f&&""!==b.cug2,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"CUG Attribute 3",allowClear:!0,value:r.cug3,id:"cug3",onChange:function(e){return d(e,"cug")},disabled:i||g&&"1"===f&&""!==b.cug3,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"CUG Attribute 4",allowClear:!0,value:r.cug4,id:"cug4",onChange:function(e){return d(e,"cug")},disabled:i||g&&"1"===f&&""!==b.cug4,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"CUG Attribute 5",allowClear:!0,value:r.cug5,id:"cug5",onChange:function(e){return d(e,"cug")},disabled:i||g&&"1"===f&&""!==b.cug5,maxLength:50}))))))),l.a.createElement(Pt,{header:"Add Org Attributes",key:"2"},l.a.createElement(C.a,null,l.a.createElement("h6",{className:"font-weight-bold"},"Flexible Attributes"),l.a.createElement("p",{className:"pr-3"},"Description will go here... Lorem ipsum is a placeholder text commonly used to demonstrate the visual form of a document or a typeface."),l.a.createElement("h6",{className:"mt-3 mb-1"},"Enter Flexible Attributes ",l.a.createElement("small",{className:"pl-1"},"(Max 5)")),l.a.createElement("small",null,"Attributes like",l.a.createElement("b",{className:"pl-1 pr-1"},"Experience, Date of Birth, National Identification Number"),"etc."),l.a.createElement(C.a,{span:24,className:"gutter-row mt-2 pr-3"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"Flexible Attribute 1",allowClear:!0,value:a.flex1,id:"flex1",onChange:function(e){return d(e,"flex")},disabled:i||g&&"1"===f&&""!==b.flex1,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"Flexible Attribute 2",allowClear:!0,value:a.flex2,id:"flex2",onChange:function(e){return d(e,"flex")},disabled:i||g&&"1"===f&&""!==b.flex2,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"Flexible Attribute 3",allowClear:!0,value:a.flex3,id:"flex3",onChange:function(e){return d(e,"flex")},disabled:i||g&&"1"===f&&""!==b.flex3,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"Flexible Attribute 4",allowClear:!0,value:a.flex4,id:"flex4",onChange:function(e){return d(e,"flex")},disabled:i||g&&"1"===f&&""!==b.flex4,maxLength:50})),l.a.createElement(C.a,{span:24,md:8,className:"mb-2"},l.a.createElement(N.a,{placeholder:"Flexible Attribute 5",allowClear:!0,value:a.flex5,id:"flex5",onChange:function(e){return d(e,"flex")},disabled:i||g&&"1"===f&&""!==b.flex5,maxLength:50})))))))))))},Lt=function(e){var t=e.next,a=e.stepOneOrganizationInfo,r=e.handleStepOneOnChange,s=(e.handleStepOneOnSelect,e.handleStepOneDatePickerChange),i=e.orgIdCount,u=e.orgNameCount,d=e.setOrgNameAlreadyExists,p=e.setOrgIDAlreadyExists,g=e.orgIDAlreadyExists,h=e.orgNameAlreadyExists,f=e.setStepOneOrganization,E=e.flexAttribute,v=e.CUGAttribute,b=e.handleCUGChange,y=e.clearAttribute,_=e.saveOrganizationAsDefault,O=3===a.primary?1:4===a.primary?2:a.primary,j=3===a.primary||4===a.primary,w=ht.a.useForm(),D=Object(c.a)(w,1)[0],k=Object(n.useState)(!1),x=Object(c.a)(k,2),I=x[0],T=x[1],A=Object(n.useState)(O),Y=Object(c.a)(A,2),M=Y[0],U=Y[1],F=Object(n.useState)(!1),P=Object(c.a)(F,2),R=P[0],L=P[1],z=Object(n.useState)(!1),H=Object(c.a)(z,2),V=H[0],Q=H[1],G=function(e){return e&&e<Fe()().startOf("day")};ft.a.RangePicker;return l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",form:D},I&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Name",value:a.organizationName},l.a.createElement(ht.a.Item,{className:"required",name:"organizationName"},l.a.createElement(N.a,{className:"input-control",id:"organizationName",htmlFor:"organizationName",defaultValue:a.organizationName,value:a.organizationName,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkOrganization/",{organization_name:a.organizationName},t).then((function(e){e.data&&d(e.data[0])}))}()},autoComplete:"off",maxLength:80}),"status: false"===h&&a.organizationName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.organizationName.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==h&&l.a.createElement(Et.a,{message:"Sorry! This organization already exists in the system. Please use a different name.",type:"error",showIcon:!0})),u&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Id",value:a.organizationId},l.a.createElement(ht.a.Item,{className:"required",name:"organizationId",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:"organizationId",htmlFor:"organizationId",defaultValue:a.organizationId,value:a.organizationId,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkOrganizationID/",{orgID:a.organizationId},t).then((function(e){e.data&&p(e.data[0])}))}()},autoComplete:"off",maxLength:20}),"status: false"===g&&a.organizationId.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.organizationId.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==g&&l.a.createElement(Et.a,{message:"Sorry! This Org Id already exists in the system. Please use a different Id.",type:"error",showIcon:!0})),i&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:a.startDate,onChange:function(e){return s(e,"startDate")},disabledDate:G})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:a.endDate,onChange:function(e){return s(e,"endDate")},disabledDate:G})))),l.a.createElement(C.a,{span:24,md:16,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Primary Key",value:"primarykey"},l.a.createElement(ht.a.Item,{className:""},l.a.createElement("div",{className:"box-wht"},l.a.createElement("span",{className:"pt-3 px-3 d-flex font-weight-md6"},l.a.createElement(vt.a.Group,{onChange:function(e){return function(e){var t=0;R?1===e.target.value?(U(1),t=3):(U(2),t=4):1===e.target.value?(U(1),t=1):(U(2),t=2),f(Object(o.a)({},a,{primary:t}))}(e)},value:M},l.a.createElement(vt.a,{value:1},Pe),l.a.createElement(vt.a,{value:2},Re))),l.a.createElement("span",{className:"p-3 d-flex"},l.a.createElement(bt.a,{className:"font-13",onChange:function(e){return function(e){L(e.target.checked);var t=0;e.target.checked?1===M?t=3:2===M&&(t=4):1===M?t=1:2===M&&(t=2),f(Object(o.a)({},a,{primary:t}))}(e)},checked:j},"Send OTP to Email and Mobile Number")))))))),l.a.createElement(ct.a,{className:"w-100"}),l.a.createElement(ht.a.Item,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"pt-3"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0",onClick:function(){Q(!V)}},"Configure CUG and ORG Attribute"),V&&l.a.createElement(Rt,{CUGModalvisible:V,flexAttribute:E,CUGAttribute:v,handleCancel:function(){Q(!1),y()},handleSave:function(){Q(!1)},handleCUGChange:b})))),l.a.createElement(ht.a.Item,null,l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"mr-3",onClick:function(e){e.preventDefault(),a.organizationName&&a.organizationId&&a.startDate?"status: false"===h&&"status: false"===g&&(T(!1),t()):T(!0)}},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){e.preventDefault(),a.organizationName&&a.organizationId?"status: false"===h&&"status: false"===g&&(T(!1),_()):T(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))},zt=a(134),Ht=(a(57),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,show:!1},a.showModal=function(){a.setState({visible:!0})},a.showBothModals=function(){a.setState({visible:!0,show:!0})},a.handleOnOk=function(){a.setState({show:!1})},a.handleOk=function(){a.setState({visible:!1}),a.props.seededUser?a.props.viaEdit?a.props.handleDelete(a.props.user.email):a.props.handleDelete(a.props.user.userId):a.props.deleteOrg&&a.props.handleDelete(a.props.org)},a.handleCancel=function(){a.setState({visible:!1}),a.props.deleteOrg&&a.props.handleCancel()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.deleteOrg&&this.showModal()}},{key:"deleteHotline",value:function(){var e=this.props.history,t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"hotline/"+this.props.hotlineId,t).then((function(){e.push("/orgcc/hotlinedirectory")})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.props.deleteOrg||this.props.data.manageEmp?this.props.data&&this.props.data.manageEmp?l.a.createElement("a",{onClick:this.showModal},ue):l.a.createElement(l.a.Fragment,null):l.a.createElement(Ie.a,{onClick:this.showBothModals},ue),this.props.deleteOrg?l.a.createElement(Ut.a,{visible:this.state.visible,onOk:this.handleCancel,onCancel:this.handleOk,centered:!0,width:700,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Cancel",cancelText:"Delete"},l.a.createElement("p",null,"You are about to delete the organization"," ",l.a.createElement("strong",null,this.props.org),"."," ","Deleting organization would delete all records associated with it. Are you sure you want to delete organization"," ",l.a.createElement("strong",null,this.props.org),"?")):!this.props.deleteOrg&&this.props.viaEdit&&this.props.seededUsers.length>1?l.a.createElement(Ut.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,qe," ",this.props.user.firstName,"?")):!this.props.viaEdit&&this.props.seededUser?l.a.createElement(Ut.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,qe," ",this.props.user.firstName,"?")):!this.props.deleteOrg&&this.props.viaEdit&&1===this.props.seededUsers.length?l.a.createElement(Ut.a,{visible:this.state.show,onOk:this.handleOnOk,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:se},l.a.createElement("p",null,"There should be at least one seeded user.")):l.a.createElement(Ut.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:se,cancelText:"Cancel"},l.a.createElement("p",null,qe)))}}]),t}(n.Component)),Bt=a(70),qt=a.n(Bt),Vt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null," ",e.seededUser?e.viaEdit?l.a.createElement(Ie.a,{onClick:function(){return e.handleEditUser(e.user.email)}},me):l.a.createElement(Ie.a,{onClick:function(){return e.handleEditUser(e.user.userId)}},me):l.a.createElement("a",{href:""},me)),l.a.createElement("li",null,e.seededUser?l.a.createElement(Ht,{user:e.user,handleDelete:e.handleDelete,seededUsers:e.seededUsers,seededUser:!0,data:e,viaEdit:e.viaEdit}):l.a.createElement(Ht,{data:e}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),Qt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).statusClicked=function(e,t){var n=Fe()(e.endDate).isValid()?{first_name:e.firstName,last_name:e.lastName,email:e.email,mobile_number:e.mobile,status_id:"Active"===t?2:1,start_date:e.startDate?Fe()(e.startDate).format("DD-MM-YYYY"):"",end_date:e.endDate?Fe()(e.endDate).format("DD-MM-YYYY"):"",organization_id:a.props.orgID}:{first_name:e.firstName,last_name:e.lastName,email:e.email,mobile_number:e.mobile,status_id:"Active"===t?2:1,start_date:e.startDate?Fe()(e.startDate).format("DD-MM-YYYY"):"",organization_id:a.props.orgID},l={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.put(q+"seededUser/",n,l).then((function(){w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.firstName+Je}),a.props.statusOnClicked()}))},a.state={data:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.seededUsers;this.setState({data:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.seededUsers!==e.seededUsers&&e.seededUsers.length>0&&this.setState({data:e.seededUsers})}},{key:"render",value:function(){var e=this,t=[{title:"First Name",dataIndex:"firstName",key:"firstName",width:"22%",render:function(e){return{children:e,props:{"data-title":"First Name"}}}},{title:"Last Name",dataIndex:"lastName",key:"lastName",width:"22%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}}},{title:Re,dataIndex:"mobile",key:"mobile",width:"22%",render:function(e){return{children:e.includes("+")?e:"+"+e,props:{"data-title":"Mobile"}}}},{title:Pe,dataIndex:"email",key:"email",width:"21%",render:function(e){return{children:e,props:{"data-title":"Email"}}}},{title:Le,dataIndex:"",key:"status2",width:"10%",render:function(e){return{children:1===e.status2||"1"===e.status2?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(t){return l.a.createElement(Vt,{handleEditUser:e.props.handleEditUser,handleDelete:e.props.handleDelete,user:t,seededUsers:e.props.seededUsers,seededUser:!0,viaEdit:e.props.viaEdit})}}];return l.a.createElement("div",{className:"w-100","data-test":"addSeededuser"},this.props.fromStepTwo?l.a.createElement(C.a,{className:"d-flex align-items-center justify-content-end"},l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return e.props.fromStepTwo?e.props.showAddSeededUserForm():e.props.addSeededUser()}},"Add Seeded User")):null,l.a.createElement(xe,{rowKey:"unique_identifier",columns:t,data:this.state.data}))}}]),t}(l.a.Component),Gt=(a(205),a(118)),Kt=a.n(Gt),Wt=function(e){var t,a,r,s=e.next,o=e.prev,i=e.stepTwoOrganizationInfo,u=e.handleStepTwoOnChange,d=e.handleStepTwoOnSelect,p=e.handleMobile,g=e.handleStepTwoDatePickerChange,h=e.addUser,f=e.seededUsers,E=e.showAddUserForm,v=e.showAddSeededUserForm,b=e.showEditUserForm,y=e.showEditSeededUserForm,_=e.cancelAddUser,O=e.cancelEditUser,j=e.editUser,w=e.deleteUser,D=e.fNameCount,k=e.lNameCount,x=e.setOrgEmailErrorUpdated,I=e.orgEmailErrorUpdated,T=e.setOrgMobErrorUpdated,A=e.orgMobErrorUpdated,Y=Object(n.useState)(!1),M=Object(c.a)(Y,2),U=M[0],F=M[1],P=Object(n.useState)(!1),R=Object(c.a)(P,2),L=R[0],z=R[1],H=Object(n.useState)(!1),V=Object(c.a)(H,2),Q=V[0],G=V[1],K=Object(n.useState)(!1),W=Object(c.a)(K,2),Z=W[0],$=W[1];Object(n.useEffect)((function(){(E||E)&&(F(!1),z(!1),G(!1),$(!1))}),[E,b]);var X=function(e){e.preventDefault(),o()},ee=function(e){i.email?(F(!1),L||Q||Z||h(e)):F(!0)},te=function(e){i.firstName&&i.lastName&&i.status2&&i.mobile&&i.startDate&&i.email?(F(!1),L||Q||Z||h(e)):F(!0)},ae=function(e){return e&&e<Fe()().startOf("day")},ne=function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkEmail/",{email:i.email},t).then((function(e){e.data&&x(e.data.message)}))},le=function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkPhone/",{mobile_number:i.mobile},t).then((function(e){e.data&&T(e.data.message)}))};ft.a.RangePicker;return 0===f.length||E||b?l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},U&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"First Name",value:i.firstName},l.a.createElement(ht.a.Item,{name:"firstName",className:"required"},l.a.createElement(N.a,{id:"firstName",className:"input-control",defaultValue:i.firstName,htmlFor:"firstName",value:i.firstName,onChange:function(e){return u(e)},autoComplete:"off",maxLength:50})),D&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Last Name",value:i.lastName},l.a.createElement(ht.a.Item,{name:"lastName",className:"required"},l.a.createElement(N.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"defaultValue",i.lastName),Object(ut.a)(t,"value",i.lastName),Object(ut.a)(t,"onChange",(function(e){return u(e)})),Object(ut.a)(t,"autoComplete","off"),Object(ut.a)(t,"maxLength",50),t))),k&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Pe,value:i.email},l.a.createElement(ht.a.Item,{name:"email",className:"required"},l.a.createElement(N.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"defaultValue",i.email),Object(ut.a)(a,"value",i.email),Object(ut.a)(a,"onChange",(function(e){return u(e)})),Object(ut.a)(a,"onBlur",(function(e){return function(e){!/\S+@\S+\.\S+/.test(e.target.value)||e.target.value.length<6?z(!0):z(!1),ne()}(e)})),Object(ut.a)(a,"autoComplete","off"),a)),L&&l.a.createElement(Et.a,{message:jt,type:"error",showIcon:!0}),!I&&i.email.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&i.email.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),I&&l.a.createElement(Et.a,{message:At,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:i.startDate,onChange:function(e){return g(e,"startDate")},disabledDate:ae})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:i.endDate,onChange:function(e){return g(e,"endDate")},disabledDate:ae})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Le,value:i.status2},l.a.createElement(ht.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(r={className:"input-control w-100 w-lg-50",value:i.status2,htmlFor:"status2"},Object(ut.a)(r,"className","required"),Object(ut.a)(r,"onSelect",(function(e){return d(e,"status2")})),r),l.a.createElement(Option,{value:"1"},J),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(yt,{label:"Mobile",value:i.mobile},l.a.createElement(ht.a.Item,{name:"mobile",className:"required"},l.a.createElement(Kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:i.mobile,onChange:p,onBlur:function(){i.mobile.length>10?G(!1):G(!0),le()},autoComplete:"off"}),Q&&l.a.createElement(Et.a,{message:wt,type:"error",showIcon:!0}),!A&&i.mobile.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),A&&l.a.createElement(Et.a,{message:Yt,type:"error",showIcon:!0})))))),l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},E?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return _()}},ce),l.a.createElement(Ie.a,{type:"primary",className:"mr-4",onClick:function(){return te("viaAddUserButton")}},"Add User"),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){return ee("viaAddUserButton")}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))):b?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return O()}},ce),l.a.createElement(Ie.a,{type:"primary",onClick:function(){var e;i.firstName&&i.lastName&&i.status2&&i.mobile&&i.startDate&&i.email?(F(!1),L||Q||Z||j(e)):F(!0)}},"Update")):null)),l.a.createElement(ht.a.Item,null,E||b?null:l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:X},ce),E||b?null:l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"mr-3",onClick:function(){return te("viaNext")}},oe),E||b?null:l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){return ee("viaNext")}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(Qt,{seededUsers:f,showAddSeededUserForm:v,fromStepTwo:!0,handleEditUser:function(e){y(e,"viaStepTwo")},handleDelete:function(e){w(e,"viaStepTwo")}}),l.a.createElement(ht.a,null,l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:X},ce),l.a.createElement(Ie.a,{type:"primary",className:"mr-4",htmlType:"submit",onClick:function(e){e.preventDefault(),s()}},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){e.preventDefault(),s()}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))))},Jt=function(e){var t,a=e.prev,r=e.loader,s=e.apiError,o=e.handleOk,i=e.handleCancel,u=e.stepOneOrganizationInfo,d=e.handleStepOneOnChange,p=(e.handleStepOneOnSelect,e.handleStepOneDatePickerChange),g=e.createNewOrganization,h=e.seededUsers,f=e.showEditSeededUserForm,E=e.deleteUser,v=e.addSeededUserFromThirdStep,b=e.flexAttribute,y=e.CUGAttribute,_=e.saveOrganizationAsDefault,O=e.orgErrorMessage,j=e.orgError,w=ht.a.useForm(),k=Object(c.a)(w,1)[0],x=(ft.a.RangePicker,Object(n.useState)(!1)),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(n.useState)(!1),U=Object(c.a)(Y,2),F=U[0],P=U[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"py-3 mb-0"},"Organization Details"),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(M.a,null,null===(t=u.organizationName)||void 0===t?void 0:t.charAt(0)),l.a.createElement("span",{className:"md-name"},u.organizationName)),l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",form:k},T&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),j&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:O,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(Ut.a,{visible:s,onOk:o,onCancel:i,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:se}," ",l.a.createElement("p",null,"There is some difficulty while creating this organization.")," "),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Name",value:u.organizationName},l.a.createElement(ht.a.Item,{className:"required",name:"organizationName"},l.a.createElement(N.a,{className:"input-control",htmlFor:"organizationName",id:"organizationName",defaultValue:u.organizationName,onChange:function(e){return d(e)},value:u.organizationName,autoComplete:"off",disabled:!0})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Id",value:u.organizationId},l.a.createElement(ht.a.Item,{className:"required",name:"organizationId",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",htmlFor:"organizationId",id:"organizationId",defaultValue:u.organizationId,onChange:function(e){return d(e)},value:u.organizationId,autoComplete:"off",disabled:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:u.startDate,onChange:function(e){return p(e,"startDate")},disabled:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:u.endDate,onChange:function(e){return p(e,"endDate")},disabled:!0})))))),l.a.createElement(ht.a.Item,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"pt-3"},!!(y.cug1||y.cug2||y.cug3||y.cug4||y.cug5||b.flex1||b.flex2||b.flex3||b.flex4||b.flex5)&&l.a.createElement(Ie.a,{type:"link",className:"link pl-0",onClick:function(){P(!0)}},"Configured CUG and ORG Attribute")),F&&l.a.createElement(Rt,{CUGModalvisible:F,flexAttribute:b,CUGAttribute:y,viewOnly:!0,handleCancel:function(){P(!1)}}))),l.a.createElement(ct.a,{className:"w-100"}),l.a.createElement(D.a,{spinning:r,size:"large"},l.a.createElement(C.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Seeded Users Details"),l.a.createElement("div",null," ",l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return v()}},"Add Seeded User"))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(Qt,{seededUsers:h,handleEditUser:function(e){f(e,"viaStepThree")},handleDelete:function(e){E(e,"viaStepThree")},fromStepThree:!0}))),l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(e){e.preventDefault(),a()}},ce),l.a.createElement(Ie.a,{type:"primary",className:"mr-4",htmlType:"submit",onClick:function(e){e.preventDefault(),h&&u.organizationName&&u.organizationId&&u.startDate?(A(!1),g()):A(!0)}},"Create and Invite"),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){e.preventDefault(),u.organizationName&&u.organizationId?(A(!1),_()):A(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))))},Zt=a(41),$t=j.a.Content,Xt=pt.a.Step,ea=[{title:"Organization Details",content:"First-content"},{title:"Seeded Users Details",content:"Second-content"},{title:"Confirm Details",content:"Last-content"}],ta=function(){var e=Object(n.useState)(0),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),i=Object(c.a)(s,2),u=i[0],d=i[1],p=Object(n.useState)(!1),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)({organizationName:"",organizationId:"",status1:"",startDate:"",endDate:"",primary:1}),v=Object(c.a)(E,2),y=v[0],_=v[1],O=Object(n.useState)(""),N=Object(c.a)(O,2),w=N[0],D=N[1],k=Object(n.useState)(""),x=Object(c.a)(k,2),I=x[0],T=x[1],A=Object(n.useState)({firstName:"",lastName:"",userId:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),Y=Object(c.a)(A,2),M=Y[0],U=Y[1],F=Object(n.useState)([]),P=Object(c.a)(F,2),R=P[0],L=P[1],z=Object(n.useState)(!1),H=Object(c.a)(z,2),V=H[0],Q=H[1],G=Object(n.useState)(!1),K=Object(c.a)(G,2),W=K[0],J=K[1],Z=Object(n.useState)(!1),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],le=ae[1],re=Object(n.useState)(!1),se=Object(c.a)(re,2),oe=se[0],ce=se[1],ie=Object(n.useState)(!1),me=Object(c.a)(ie,2),ue=me[0],de=me[1],pe=Object(n.useState)({cug1:"",cug2:"",cug3:"",cug4:"",cug5:""}),ge=Object(c.a)(pe,2),he=ge[0],fe=ge[1],Ee=Object(n.useState)({flex1:"",flex2:"",flex3:"",flex4:"",flex5:""}),ve=Object(c.a)(Ee,2),ye=ve[0],_e=ve[1],Oe=Object(n.useState)(!1),Ne=Object(c.a)(Oe,2),je=Ne[0],we=Ne[1],Ce=Object(n.useState)(""),De=Object(c.a)(Ce,2),ke=De[0],xe=De[1],Ie=Object(n.useState)(""),Te=Object(c.a)(Ie,2),Ae=Te[0],Ye=Te[1],Ue=Object(n.useState)(""),Pe=Object(c.a)(Ue,2),Re=Pe[0],Le=Pe[1],ze=function(){Q(!1),J(!1),r(a+1)},He=function(){Q(!1),J(!1),r(a-1)},Be=function(e,t){var n=null===R||void 0===R?void 0:R.filter((function(t){return(null===t||void 0===t?void 0:t.userId)!==e}));L(n),0===n.length&&(U({firstName:"",lastName:"",userId:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),"viaStepThree"===t&&r(a-1))},qe=function(){Q(!0),ce(!1),de(!1),U({firstName:"",lastName:"",userId:"",status2:"",email:"",mobile:"",startDate:"",endDate:""})},Ve=function(e,t){"viaStepThree"===t&&r(a-1),ce(!1),de(!1),J(!0);var n={};R.forEach((function(t){t.userId===e&&(n=t)})),U(n)},Qe=function(e){"organizationId"===e.target.id&&20===e.target.value.length?le(!0):"organizationName"===e.target.id&&80===e.target.value.length?ee(!0):(ee(!1),le(!1)),_(Object(o.a)({},y,Object(ut.a)({},e.target.id,e.target.value)))},Ge=function(e,t){_(Object(o.a)({},y,Object(ut.a)({},t,e)))},Ke=function(e,t){_(Object(o.a)({},y,Object(ut.a)({},t,e)))},We=function(e){"firstName"===e.target.id&&50===e.target.value.length?ce(!0):"lastName"===e.target.id&&50===e.target.value.length?de(!0):(ce(!1),de(!1)),U(Object(o.a)({},M,Object(ut.a)({},e.target.id,e.target.value)))},Je=function(e,t){U(Object(o.a)({},M,Object(ut.a)({},t,e)))},Ze=function(e,t){U(Object(o.a)({},M,Object(ut.a)({},t,e)))},$e=function(){d(!0);var e=Me(),t=JSON.parse(b("user")),a=[];R.map((function(e){var t={first_name:e.firstName,last_name:e.lastName,email:e.email,status_id:4,start_date:e.startDate?Fe()(e.startDate).format("DD-MM-YYYY"):null,end_date:e.endDate?Fe()(e.endDate).format("DD-MM-YYYY"):null,mobile_number:e.mobile?"+"+e.mobile:0,is_seeded_user:0};a.push(t)}));var n={organization:{name:y.organizationName,identifier:y.organizationId,status_id:1,start_date:y.startDate?Fe()(y.startDate).format("DD-MM-YYYY"):null,end_date:y.endDate?Fe()(y.endDate).format("DD-MM-YYYY"):null,app_authentication_key_id:y.primary},seeded_users:a,cug_flex_fields:{cug_parameters:{cug_field_1:he.cug1,cug_field_2:he.cug2,cug_field_3:he.cug3,cug_field_4:he.cug4,cug_field_5:he.cug5,created_by:parseInt(Zt.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Zt.enc.Utf8))},flex_parameters:{flex_field_1:ye.flex1,flex_field_2:ye.flex2,flex_field_3:ye.flex3,flex_field_4:ye.flex4,flex_field_5:ye.flex5,created_by:parseInt(Zt.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Zt.enc.Utf8))}}},l={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"saveOrganization/",n,l).then((function(){d(!1),window.location="/amcc/manageorganizations"})).catch((function(e){e.message.includes("500")&&f(!0)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Se,null),l.a.createElement($t,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/amcc/manageorganizations"},l.a.createElement(gt.a.Item,null,"Organizations")),l.a.createElement(gt.a.Item,null,"Create Organization"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Organization")),l.a.createElement(pt.a,{className:"mt-2",current:a},ea.map((function(e){return l.a.createElement(Xt,{key:e.title,title:e.title})}))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"steps-content org-form"},0==a?l.a.createElement(Lt,{next:ze,stepOneOrganizationInfo:y,handleStepOneOnChange:Qe,handleStepOneOnSelect:Ge,handleStepOneDatePickerChange:Ke,orgNameCount:X,orgIdCount:ne,setOrgNameAlreadyExists:function(e){D(e)},orgNameAlreadyExists:w,setOrgIDAlreadyExists:function(e){T(e)},orgIDAlreadyExists:I,setStepOneOrganization:_,flexAttribute:ye,CUGAttribute:he,handleCUGChange:function(e,t){/^[0-9a-zA-Z\s]*$/.test(e.target.value)&&("flex"===t?_e(Object(o.a)({},ye,Object(ut.a)({},e.target.id,e.target.value))):fe(Object(o.a)({},he,Object(ut.a)({},e.target.id,e.target.value))))},clearAttribute:function(){fe({cug1:"",cug2:"",cug3:"",cug4:"",cug5:""}),_e({flex1:"",flex2:"",flex3:"",flex4:"",flex5:""})},saveOrganizationAsDefault:$e}):1==a?l.a.createElement(Wt,{next:ze,prev:He,stepTwoOrganizationInfo:M,handleStepTwoOnChange:We,handleStepTwoOnSelect:Je,handleStepTwoDatePickerChange:Ze,handleMobile:function(e){U(Object(o.a)({},M,{mobile:e}))},addUser:function(e){"viaNext"===e&&r(a+1);var t=Math.floor(100*Math.random())+1,n=Object(o.a)({},M,{userId:t});L([].concat(Object(dt.a)(R),[n])),Q(!1)},editUser:function(){R.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(M)&&e.userId===M.userId){var t=R.indexOf(e),a=JSON.parse(JSON.stringify(R));a[t]=M,L(a)}})),J(!1)},deleteUser:Be,seededUsers:R,showAddUserForm:V,showAddSeededUserForm:qe,showEditUserForm:W,showEditSeededUserForm:Ve,cancelAddUser:function(){Q(!1)},cancelEditUser:function(){J(!1)},fNameCount:oe,lNameCount:ue,setOrgEmailErrorUpdated:Ye,orgEmailErrorUpdated:Ae,setOrgMobErrorUpdated:Le,orgMobErrorUpdated:Re}):2==a?l.a.createElement(Jt,{prev:He,createNewOrganization:function(){d(!0);var e=JSON.parse(b("user")),t=Me(),a=[];R.map((function(e){var t={first_name:e.firstName,last_name:e.lastName,email:e.email,status_id:parseInt(e.status2),start_date:e.startDate?Fe()(e.startDate).format("DD-MM-YYYY"):null,end_date:e.endDate?Fe()(e.endDate).format("DD-MM-YYYY"):null,mobile_number:"+"+e.mobile,is_seeded_user:1};a.push(t)}));var n={organization:{name:y.organizationName,identifier:y.organizationId,status_id:1,start_date:y.startDate?Fe()(y.startDate).format("DD-MM-YYYY"):null,end_date:y.endDate?Fe()(y.endDate).format("DD-MM-YYYY"):null,app_authentication_key_id:y.primary},seeded_users:a,cug_flex_fields:{cug_parameters:{cug_field_1:he.cug1,cug_field_2:he.cug2,cug_field_3:he.cug3,cug_field_4:he.cug4,cug_field_5:he.cug5,created_by:parseInt(Zt.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Zt.enc.Utf8))},flex_parameters:{flex_field_1:ye.flex1,flex_field_2:ye.flex2,flex_field_3:ye.flex3,flex_field_4:ye.flex4,flex_field_5:ye.flex5,created_by:parseInt(Zt.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Zt.enc.Utf8))}}},l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"saveOrganization/",n,l).then((function(){d(!1),window.location="/amcc/manageorganizations"})).catch((function(e){e.message.includes("500")&&f(!0),e.message.includes("400")&&(we(!0),xe(e.response.data.email),d(!1))}))},stepOneOrganizationInfo:y,stepTwoOrganizationInfo:M,handleStepOneOnChange:Qe,handleStepOneOnSelect:Ge,handleStepOneDatePickerChange:Ke,handleStepTwoOnChange:We,handleStepTwoOnSelect:Je,handleStepTwoDatePickerChange:Ze,seededUsers:R,showEditUserForm:W,deleteUser:Be,showEditSeededUserForm:Ve,addSeededUserFromThirdStep:function(){r(a-1),qe()},handleOk:function(){window.location="/amcc/manageorganizations"},handleCancel:function(){window.location="/amcc/manageorganizations"},loader:u,apiError:h,flexAttribute:ye,CUGAttribute:he,saveOrganizationAsDefault:$e,orgError:je,orgErrorMessage:ke}):l.a.createElement(l.a.Fragment,null)))))))))))},aa=j.a.Content,na=function(){var e=l.a.useState(!1),t=Object(c.a)(e,2),a=t[0],n=t[1];return l.a.createElement(l.a.Fragment,null,!0===!a?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Se,null),l.a.createElement(aa,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Manage Organizations")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:mt.a,alt:"Create Organization",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create a new Org Id for your client's organization"),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(ct.a,{className:"mt-1"})),l.a.createElement(C.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ie.a,{onClick:function(){n(!0)},type:"primary"},"Create Organization")))))))))):l.a.createElement(ta,null))},la=a(41),ra={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},sa=new(function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"orgId",value:function(){var e=JSON.parse(b("user"));if(e&&e.user_data.organization_id){var t=la.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(la.enc.Utf8);return parseInt(t)}return{}}},{key:"getOrganizationData",value:function(){return B.a.get(q+"getOrganization/",ra)}},{key:"getEmployees",value:function(e,t){var a=this.orgId(),n=e||{};return n.organization_id=a,n.status_id&&(n.filter=n.status_id&&n.status_id.length>0?n.status_id:null,delete n.status_id),B.a.post(q+"getFilteredEmployees/",JSON.stringify(n),ra)}},{key:"getHotlines",value:function(){return B.a.get(q+"hotline/",ra)}},{key:"getOpenlines",value:function(){return B.a.get(q+"openline/",ra)}},{key:"getBroadCastMessagesDetailsByID",value:function(e){return console.log("---",e),B.a.get(q+"getBroadcast/"+e,ra)}},{key:"getBroadCastMessages",value:function(e,t,a){var n=e&&e.length<1?{status_id:[],sort:""}:e,l=n&&n.cug_fliter?n.cug_fliter:{};Object.keys(l).length<1&&delete n.cug_fliter;for(var r=n.cug_fliter?n.cug_fliter:{},s=Object.getOwnPropertyNames(r),o=0;o<s.length;o++){var c=s[o];(null===r[c]||r[c].length<1)&&delete n.cug_fliter[c]}return B.a.post(q+"getFilteredBroadcast/",JSON.stringify(n),ra)}},{key:"getPolls",value:function(e,t){for(var a=e.cug_filter?e.cug_filter:{},n=Object.getOwnPropertyNames(a),l=0;l<n.length;l++){var r=n[l],s=r.split("_"),o=r;s.length>0&&(o=s[1]),null===a[r]||a[r].length<1?delete a[r]:(console.log("------cugFieldsObj-----",o,a),o&&(a[o]=a[r],delete a[r]))}return e.cug_filter=a,B.a.post(q+"getFilteredPoll/",JSON.stringify(e),ra)}},{key:"getAssignHotlines",value:function(e){return B.a.get(q+"getHotlineAssignEmpl/"+e,ra)}},{key:"getHelps",value:function(){return B.a.get(q+"gethelps/",ra)}},{key:"createHelp",value:function(e){return e.help_id?B.a.put(q+"createhelp/",e,ra):B.a.post(q+"createhelp/",e,ra)}},{key:"getInfos",value:function(e){return e&&e.length>0?B.a.get(q+"getInfos/?search="+e,ra):B.a.get(q+"getInfos/",ra)}},{key:"createInfo",value:function(e){return e.info_id?B.a.put(q+"createinfo/",e,ra):B.a.post(q+"createinfo/",e,ra)}},{key:"getCUGValues",value:function(){return B.a.get(q+"getUniqueCUGValues/",ra)}}]),e}());var oa=Object(i.b)((function(e){return{manageOrgData:e.manageOrg.manageOrgData}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return sa.getOrganizationData().then((function(t){return e({type:"MANAGEORG_SUCCESS",payload:{manageOrgData:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"MANAGEORG_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[r]),Object(n.useEffect)((function(){null===e.manageOrgData?u(!0):null!==e.manageOrgData&&u(!1)}),[e.manageOrgData]);return m||null===e.manageOrgData||0!==e.manageOrgData.length?l.a.createElement(ot,{organizations:e.manageOrgData,statusOnClicked:function(){s(!r)},loader:m}):l.a.createElement(na,null)})),ca=a(145),ia=a.n(ca),ma=(a(231),{wrapperCol:{span:24}}),ua={wrapperCol:{span:24}},da=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onChangeUsername=function(e){a.setState({email:e.target.value})},a.sendEmail=function(e){if(""!==a.state.email){var t={email:a.state.email};a.setState({error:!1,loader:!0}),B.a.post(q+"request-reset-email/",t,{headers:{Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}}).then((function(e){200===e.status&&a.setState({emailSent:!0,loader:!1,incorrectEMail:!1})})).catch((function(){return a.setState({emailSent:!1,loader:!1,incorrectEMail:!0})}))}else a.setState({error:!0,emailSent:!1,incorrectEMail:!1})},a.state={email:"",error:!1,emailSent:!1,incorrectEMail:!1,loader:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(S.a,{className:"content-center mt-0 px-4"},l.a.createElement(C.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(C.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},Ve)),l.a.createElement(S.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:ia.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(S.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},Qe))),l.a.createElement(C.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},this.state.emailSent?"Reset Password email has been sent to "+this.state.email:null,l.a.createElement(S.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Forgot Password"),l.a.createElement("p",{className:"mt-3 font-weight-bold"}," Enter your registered email address to request a password reset link.")),l.a.createElement(ht.a,Object.assign({},ma,{ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(D.a,{spinning:this.state.loader,size:"large"},this.state.error&&l.a.createElement(Et.a,{message:jt,type:"error",showIcon:!0}),this.state.incorrectEMail&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"This email address is incorrect. Please enter a valid email address.",type:"error"})),l.a.createElement(yt,{label:Pe,value:this.state.email},l.a.createElement(ht.a.Item,{name:"email",className:"required"},l.a.createElement(N.a,{type:"Email",className:"input-control",placeholder:" ",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(ht.a.Item,ua,l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(t){return e.sendEmail()}},"Request Password Reset Link"))),l.a.createElement("div",{className:"justify-content-center d-flex"},l.a.createElement(Ie.a,{type:"link",className:"link"},l.a.createElement(m.b,{to:"/org/login"}," ","Back to "," ",l.a.createElement("b",{className:"pl-1"},"Sign In")))))))))}}]),t}(n.Component),pa={wrapperCol:{span:24}},ga=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onChangePassword=function(e){a.setState({password:e.target.value})},a.onChangeConfirmPassword=function(e){a.setState({confirm_password:e.target.value})},a.resetPassword=function(e){var t=new URLSearchParams(a.props.location.search).get("uidb64"),n=new URLSearchParams(a.props.location.search).get("token"),l={password:a.state.password,token:n,uidb64:t};a.state.password!==a.state.confirm_password||a.state.passwordValidationError||(a.setState({loader:!0}),B.a.put(q+"password-reset-complete/",l,{headers:{Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}}).then((function(){a.setState({resetDone:!0,resetFailed:!1,loader:!1})})).catch((function(){a.setState({resetFailed:!0,resetDone:!1,loader:!1}),setTimeout((function(){a.handleOk()}),5e3)})))},a.validatePassword=function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?a.setState({passwordValidationError:!1}):a.setState({passwordValidationError:!0})},a.handleOk=function(){window.location="/org/login"},a.handleCancel=function(){window.location="/org/login"},a.state={password:"",confirm_password:"",error:"false",passwordValidationError:"",resetDone:!1,resetFailed:!1,loader:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(S.a,{className:"content-center mt-0 px-4"},l.a.createElement(C.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(C.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},Ve)),l.a.createElement(S.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:ia.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(S.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},Qe))),l.a.createElement(C.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},l.a.createElement(S.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Reset Password"),l.a.createElement("p",{className:"mt-3 font-weight-bold"},"Set a new password for your account.")),l.a.createElement(Ut.a,{visible:this.state.resetDone,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:se},l.a.createElement("p",null,"Password has been reset successfully. Please login with your new password")),l.a.createElement(ht.a,null,l.a.createElement(D.a,{spinning:this.state.loader,size:"large"},this.state.resetFailed&&l.a.createElement(Et.a,{message:"Password can not be reset at this moment. Please try again",type:"error",showIcon:!0}),l.a.createElement(yt,{label:"Password",value:this.state.password},l.a.createElement(ht.a.Item,{name:"newpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your new password!"}]},l.a.createElement(N.a.Password,{htmlFor:"newpassword",id:"newPwd",value:this.state.password,onChange:this.onChangePassword,onBlur:function(t){return e.validatePassword(t)}})),this.state.passwordValidationError&&l.a.createElement(Et.a,{message:St,type:"error",showIcon:!0})),l.a.createElement(yt,{label:"Confirm Password",value:this.state.confirm_password},l.a.createElement(ht.a.Item,{name:"confirmpassword",className:"pwd confirpwd required",rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newpassword")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],dependencies:["newpassword"],hasFeedback:!0},l.a.createElement(N.a.Password,{htmlFor:"confirmpassword",id:"confirmPwd",value:this.state.confirm_password,onChange:this.onChangeConfirmPassword}))),l.a.createElement(ht.a.Item,pa,l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(t){return e.resetPassword(t)}},"Reset Password"))))))))}}]),t}(n.Component),ha=function(e,t,a){return function(n){return a="admin@anonymoose.co"===e?"is_amcc_user":a,W.login(e,t,a).then((function(e){return n({type:"LOGIN_SUCCESS",payload:{user:e,current:t}}),Promise.resolve()}),(function(e){e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return n({type:"LOGIN_FAIL"}),Promise.reject()}))}},fa=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){window.open("https://www.anonymoose.co/platformprivacypolicy.pdf","_blank")},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,"See",l.a.createElement(Ie.a,{type:"link",className:"link pl-1",onClick:this.showModal},"Privacy Policy"),l.a.createElement(Ut.a,{title:"Privacy Policy",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,className:"modal-lg privacy-txt",centered:!0},l.a.createElement(S.a,{className:"modal-icon py-4"},l.a.createElement("p",null,"THIS PRIVACY POLICY (\u201cPRIVACY POLICY\u201d) SETS FORTH HOW WE USE AND PROTECT THE PERSONAL INFORMATION COLLECTED WHILE USING OUR SERVICES. PLEASE READ THIS PRIVACY POLICY CAREFULLY. THIS PRIVACY POLICY IS APPLICABLE TO YOU (\u201cYOU\u201d, \u201cYOUR\u201d, \u201cUSER\u201d OR \u201cUSERS\u201d) IF YOU ARE USING, ACCESSING OUR SERVICES OR HAVE DOWNLOADED OR INSTALLED OUR PLATFORM. BY DOWNLOADING, CONTINUING TO USE OR ACCESSING THE PLATFORM OR THE SERVICES, YOU AGREE TO THE TERMS OF THIS PRIVACY POLICY. IF THE YOU DO NOT AGREE TO THIS PRIVACY POLICY, YOU MAY NOT USE, AVAIL OR ACCESS OUR SERVICES.",l.a.createElement("ol",{className:""},l.a.createElement("li",null,l.a.createElement("u",null,"Introduction"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"EarthenLamps Inc, registered in Delaware with principal office located at 12265 Viewoak Drive, Saratoga, CA 95070 (",l.a.createElement("b",null,"\u201cCompany\u201d, \u201cwe\u201d, \u201cus\u201d, \u201cour\u201d"),"), has developed a platform comprising of a mobile application, dashboard and control center under a name \u201cAnonyMoose\u201d (",l.a.createElement("b",null,"\u201cSaaS PlaCorm\u201d or \u201cPlaCorm\u201d"),")and offers services that will enable employees of an organization to provide feedback, ideas, suggesZons, and to report incidents relaZng to harassment or microaggressions, or any other concern, privately and discreetly, to such organizaZon\u2019s leadership, management and designated individuals or departments",l.a.createElement("b",null,"(\u201cServices\u201d)"),"."),l.a.createElement("li",{className:""},"We are committed to data privacy and have made this Privacy Policy to describe the procedures we adhere to for collecting, using, and disclosing the Personal Information (defined below). We recommend Users to read this Privacy Policy carefully so that Users understand our approach towards the use of their Personal Information."))),l.a.createElement("li",null,l.a.createElement("u",null,"What kinds of information do we collect?"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"To provide the Services, we require to process information about you. The type of information that we collect depends on how you use our platform."),l.a.createElement("li",null,l.a.createElement("b",null,"Personal Details:")," We may collect any personal information such as your name, contact number, email address, and designaZon, provided by your organization, or while you create and/or update your respecZve account and/or use of the Services. This information that can identify, or is capable of identifying a person, shall be referred to as ",l.a.createElement("b",null,"\u201cPersonal Information\u201d"),"."),l.a.createElement("li",null,l.a.createElement("b",null,"Device information:")," Whenever you access our Platform through Wi-Fi or the internet, we may also collect your browser name, usage, log related information, the type of electronic device, manufacturer, make, model, unique ID of the electronic device and other technical information about your means of connection to our Platform or Services, such as the operating system and other similar information. The device information will be used solely for the purpose of improving our Services and to provide You with better user experience."),l.a.createElement("li",null,"For the purposes of this Privacy Policy, such information in section 2.3 shall also be considered Personal Information."))),l.a.createElement("li",null,l.a.createElement("u",null,"How we use this information"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"We use the information (which include the Personal Information) provided by you or collected by us in the following cases: (i) to provide User with the Services and to assist the User in the event the User needs any additional support; (ii) for creation or development of business intelligence or data analytics in relation to the Services provided by the Company; (iii) to understand usage patterns of our Platform or the Services; (iv) to improve usability of our Services and for Services maintenance; (v) to maintain and manage account of the organization; (vi) to prevent fraud and abuse (vii) to enhance the security of our the Platform and/ or the Services; (viii) to ensure that our Platform or the Services are not used for illegal purposes ; (ix) for internal record keeping; and (x) to comply with our legal or statutory obligations."),l.a.createElement("li",null,"ANONYMIZED DATA: We will also use your Personal Information collected by us to create aggregate anonymized data. We ensure that such anonymized data doesn\u2019t directly identify you or your Personal Information shared with us. We may use this anonymized data for any purpose including but not limited to, research, understand usage patterns, analytical purposes, and to improve our Services. By agreeing to this Privacy Policy, you provide us the right to use your Personal Information to create anonymized data and use it for our business purposes."))),l.a.createElement("li",null,l.a.createElement("u",null,"How the information is shared"),l.a.createElement("p",{className:"pl-4"},"In the course of providing Services or access of the Platform to you, we may share your information, which may also include your Personal Information, with certain parties, in only the following cases. The Company does not share your Personal Information with any member within your organization/company/enterprise. Accordingly, you expressly give your free consent to us to disclose or share your Personal Information in the following cases:"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,l.a.createElement("b",null,"Administrators:")," We may provide access to your Personal information to any of our authorized administrators for internal technical purpose, who shall be under confidentiality obligations towards the same. For the sake of clarity, such administrators shall not be part of your organization."),l.a.createElement("li",null,l.a.createElement("b",null,"Service Providers:")," We may share User\u2019s Personal Information with the service providers, who are working with us, or may work with us, in connection with the operation of the Services and assisting us in improving the Platform. Examples include service providers who are providing technical infrastructure services, analyzing how our Platform is used, providing customer service, facilitating payments or conducting surveys."),l.a.createElement("li",null,l.a.createElement("b",null,"Merger or Acquisi7on:")," We may transfer User\u2019s Personal Information if we are acquired by/we acquire or merge with another company or transfer a part of our business, to a third party. Any third party or resultant entity that receives the User\u2019s Personal Information pursuant to a merger, demerger, amalgamation reconstruction, change in control or business transfer shall have the right to continue to use User\u2019s Personal Information and such new entity shall abide with this privacy policy."),l.a.createElement("li",null,l.a.createElement("b",null,"Legal and Regulatory Authorities:")," We may be required to disclose User\u2019s information including Personal Information due to legal or regulatory requirements. In such instances, we reserve the right to disclose User\u2019s Personal Information as required in order to comply with our legal obligations, including but not limited to complying with court orders, warrants, or discovery requests. We may also disclose User\u2019s Personal Information to (a) law enforcement officers or others; (b) to comply with a judicial proceeding, court order, or legal process served on us ; (c) to enforce or apply this Privacy Policy or our other policies or agreements; (d) respond to claims that any Personal Information violates the rights of third-parties; or (e) protect the rights, property, or personal safety of Company, or the general public."),l.a.createElement("li",null,"User agrees and acknowledges that we may not be required to inform User prior to or after disclosures made according to this section."))),l.a.createElement("li",null,l.a.createElement("u",null,"How long your information is retained"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"We endeavor to collect only such Information including Personal Information that is necessary for the purposes indicated here. We may retain such information on a case-by-case determination depending on matters such as the nature of the information, why it is collected and processed, and relevant legal or operational retention needs. For example, we may retain such information to pursue legitimate business interests, conduct audits, comply with (and demonstrate compliance with) legal obligations, resolve disputes and enforce our agreements."),l.a.createElement("li",null,"We may retain your non- Personal Information even after you have stopped using our Platform or the Services for the sole purpose of providing better Services and improving usage pattern on the Platform."))),l.a.createElement("li",null,l.a.createElement("u",null," Access to your content on the PlaCorm:"),l.a.createElement("p",{className:"pl-4"},"While you use our Platform, you may provide certain information including but not limited to images, location detail, documents, text, audio clip, video clip, organization\u2019s policies and training material to us (\u201cUser Content\u201d). The Company ensures that the User Content remain private, integral and secure. The Company may access such User Content only to abide by its legal obligations as provided in section 4.4 of this Privacy Policy.")),l.a.createElement("li",null,l.a.createElement("u",null,"Our Security Measures:"),l.a.createElement("p",{className:"pl-4"},"User\u2019s Personal Information is stored on our database which is hosted on the AWS cloud. Although there are appropriate \ufb01rewalls and protections, we cannot warrant the security of any Personal Information transmitted as our systems are not hack proof. Data pilferage due to unauthorized hacking, virus attacks, technical issues is possible, and we take no liability or responsibility for it. Users are required to be careful to avoid \u2018phishing\u2019 scams, where someone may send User an e-mail that looks like it is from the Company asking for User\u2019s Personal Information.")),l.a.createElement("li",null,l.a.createElement("u",null,"Hyperlinks:"),l.a.createElement("p",{className:"pl-4"},"The Platform may from time to time contain hyperlinks to other websites or mobile applications. Such links are provided for convenience only and we take no responsibility for the content and maintenance of or privacy compliance of any linked website. Any hyperlink on our Platform to another website does not imply our endorsement, support, or sponsorship of the operator of that website nor of the information and/or services which it provides. The Company is not a party to any transaction between you and such website.")),l.a.createElement("li",null,l.a.createElement("u",null,"Limitation of Liability:"),l.a.createElement("p",{className:"pl-4"},"NEITHER PARTY SHALL BE LIABLE TO THE OTHER FOR ANY INDIRECT, CONSEQUENTIAL, INCIDENTAL, EXEMPLARY OR SPECIAL DAMAGES, LOSS OF PROFIT, BUSINESS HOWSOEVER CAUSED, EVEN IF THE OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. THE MAXIMUM LIABLITY OF THE COMPANY FOR DIRECT DAMAGE OR LOSS SHALL BE LIMITED TO AN AMOUNT OF USD 1000 (US DOLLARS ONE THOUSAND ONLY). THE FOREGOING LIMITATIONS OF LIABILITY SHALL APPLY NOTWITHSTANDING THE FAILURE OF ESSENTIAL PURPOSE OF ANY LIMITED WARRANTY OR REMEDY HEREIN.")),l.a.createElement("li",null,l.a.createElement("u",null,"Reservation of Rights:"),l.a.createElement("p",{className:"pl-4"},"All rights not expressly granted in this Privacy Policy are reserved by the Company. Nothing contained in this Privacy Policy shall be construed as conferring by implication, estoppels or otherwise, any license or right under any copyright, patent, trademark or other intellectual property right of Company or any other person or to User.")),l.a.createElement("li",null,l.a.createElement("u",null,"Governing Laws and Disputes:"),l.a.createElement("p",{className:"pl-4"},"This Privacy Policy shall in all respects be governed by and construed and enforced in accordance with the laws of Delaware and the courts in Delaware shall have an exclusive jurisdiction to adjudicate any subject matter under this Privacy Policy without any con\ufb02ict of laws. Any dispute or di\ufb00erence arising between you and the Company as to the e\ufb00ect, validity or interpretation or any other matter under this Privacy Policy or as to their rights, duties or liabilities hereunder shall be referred to arbitration in accordance with the rules of the International Chamber of Commerce to the exclusive jurisdiction to venue of the courts of Delaware.")),l.a.createElement("li",null,l.a.createElement("u",null,"Changes to This Policy:"),l.a.createElement("p",{className:"pl-4"},"We may update this Privacy Policy from time to time. Users are encouraged to check this Privacy Policy on a regular basis to be aware of the changes made to it. The Company shall not be liable for any claims arising out of non-intimation of such change in this Privacy Policy. This Privacy Policy was last modi\ufb01ed on"," ",l.a.createElement("b",null,l.a.createElement("span",{className:"border-bottom"}," ")," July, 2020."))),l.a.createElement("li",null,l.a.createElement("u",null,"Contact Us"),l.a.createElement("p",{className:"pl-4"},"If User has any questions, concerns or grievances regarding this Privacy Policy, User can email us at our grievance email-address"," ",l.a.createElement("a",{href:"mailto:info@anonymoose.co"},"info@anonymoose.co"))))))))}}]),t}(n.Component),Ea={wrapperCol:{span:24}},va={wrapperCol:{span:24}},ba=a(41),ya=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(Y.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(Y.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(Y.a)(a)),a.state={email:"",password:"",page:"is_app_user",error:"false",loading:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch;t.history;a(ha(this.state.email,this.state.password,this.state.page)).then((function(){window.location.reload()})).catch((function(){e.setState({loading:!1,error:"true"})}))}},{key:"canSubmit",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=(t.message,!1),r=!1,s=!1,o=!1,c=b("user");c||(n=!0,r=!0,s=!0,o=!0);var i=JSON.parse(b("user"));c&&i&&"null"!=i.user_data&&(n="true"===ba.AES.decrypt(i.user_data.is_amcc_user,"anonymoose").toString(ba.enc.Utf8),r="true"===ba.AES.decrypt(i.user_data.is_org_cc_user,"anonymoose").toString(ba.enc.Utf8),s="true"===ba.AES.decrypt(i.user_data.is_am_web_user,"anonymoose").toString(ba.enc.Utf8),o="true"===ba.AES.decrypt(i.user_data.is_idb_user,"anonymoose").toString(ba.enc.Utf8));var d=this.canSubmit();if(a){if(r)return l.a.createElement(u.a,{to:"/orgcc/manageemployees"});if(n)return l.a.createElement(u.a,{to:"/amcc/manageorganizations"});if(s)return l.a.createElement(u.a,{to:"/amweb/hotlinemessages"});if(o)return l.a.createElement(u.a,{to:"/idb/hotlinereports"})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(S.a,{className:"content-center mt-0 px-4"},l.a.createElement(C.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(C.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},Ve)),l.a.createElement(S.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:ia.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(C.a,{span:24,className:"subtext mb-0 d-none d-lg-block"},l.a.createElement(S.a,{className:"pt-4"},l.a.createElement(C.a,{span:8,className:"gutter-row vertical-divider"},l.a.createElement("h6",null,"Control Center (CC)"),l.a.createElement("div",{className:"divider-bottom mb-2"}),l.a.createElement("p",null,"For authorized employees to manage Hotlines and Openlines, Polls and Surveys, Broadcast Messages and to manage employee access permissions.")),l.a.createElement(C.a,{span:8,className:"gutter-row  vertical-divider"},l.a.createElement("h6",null,"Insights Dashboard (IDB)"),l.a.createElement("div",{className:"divider-bottom mb-2"}),l.a.createElement("p",null,"View reports for Hotlines and Openlines, results for Polls and Surveys, and all Broadcast Messages thus far")),l.a.createElement(C.a,{span:8,className:"gutter-row"},l.a.createElement("h6",null,"AnonyMoose Web (AM Web)"),l.a.createElement("div",{className:"divider-bottom mb-2"}),l.a.createElement("p",null,"Manage messages for Hotlines and Openlines assigned to you."))))),l.a.createElement(C.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},l.a.createElement(D.a,{spinning:this.state.loading,size:"large"},"true"==this.state.error&&l.a.createElement(Et.a,{message:"Invalid Login! Please try again",type:"error",showIcon:!0}),l.a.createElement(S.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Sign In")),l.a.createElement(ht.a,Object.assign({className:"floating-label"},Ea,{onSubmit:this.handleLogin,ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(yt,{label:Pe,value:this.state.email},l.a.createElement(ht.a.Item,{name:"email",rules:[{required:!0,message:jt,type:"email"}]},l.a.createElement(N.a,{type:"Email",className:"input-control",placeholder:" ",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(yt,{label:"Password",value:this.state.password},l.a.createElement(ht.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your password"}]},l.a.createElement(N.a.Password,{type:"password",className:"input-control",value:this.state.password,onChange:this.onChangePassword}))),l.a.createElement("div",{className:"forgot-pwd"},l.a.createElement(m.b,{to:"/forgotpassword"}," ","Forgot Password")),l.a.createElement(ht.a.Item,va,l.a.createElement(Ie.a,{disabled:!d,type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(){e.handleLogin()}},"Sign In"))))))),l.a.createElement(S.a,{className:"footer-content position-fixed"},l.a.createElement(fa,null)))}}]),t}(n.Component);var _a=Object(i.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,message:e.message.message}}))(ya),Oa={wrapperCol:{span:24}},Na={wrapperCol:{span:24}},ja=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(Y.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(Y.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(Y.a)(a)),a.state={email:"",password:"",page:"is_amcc_user",error:"false",loading:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch,n=t.history;a(ha(this.state.email,this.state.password,this.state.page)).then((function(){n.push("/amcc/manageorganizations"),window.location.reload()})).catch((function(){e.setState({loading:!1,error:"true"})}))}},{key:"canSubmit",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){var e=this,t=this.canSubmit(),a=this.props,n=a.isLoggedIn;a.message;return n?l.a.createElement(u.a,{to:"/amcc/manageorganizations"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(I,null)),l.a.createElement(S.a,{className:"content-center mt-0 px-4"},l.a.createElement(C.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(C.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},"Control Center and Insights Dashboard")),l.a.createElement(S.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:ia.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(S.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},"Raising Voice Anonymously Made Easy"))),l.a.createElement(C.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center align-items-center"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},l.a.createElement(D.a,{spinning:this.state.loading,size:"large"}," ","true"==this.state.error&&l.a.createElement(Et.a,{message:"Invalid Login! Please try again",type:"error",showIcon:!0}),l.a.createElement(S.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Sign In")),l.a.createElement(ht.a,Object.assign({className:"floating-label"},Oa,{onSubmit:this.handleLogin,ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(yt,{label:"Email",value:this.state.email},l.a.createElement(ht.a.Item,{name:"email",rules:[{required:!0,message:"Please enter your email!",type:"email"}]},l.a.createElement(N.a,{type:"Email",className:"input-control",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(yt,{label:"Password",value:this.state.password},l.a.createElement(ht.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your password!"}]},l.a.createElement(N.a.Password,{type:"password",className:"input-control",value:this.state.password,onChange:this.onChangePassword}))),l.a.createElement("div",{className:"forgot-pwd"},l.a.createElement("a",{href:"#"},"Forgot Password")),l.a.createElement(ht.a.Item,Na,l.a.createElement(Ie.a,{disabled:!t,type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(){e.handleLogin()}},"SIGN IN"))))))))}}]),t}(n.Component);var wa=Object(i.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,message:e.message.message}}))(ja),Sa=j.a.Sider,Ca=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")&&(t="2")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?Oe.a:_e.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(Sa,{className:this.state.collapsed?"d-none d-lg-block w-md-100 sider-width":" d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(ye.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(ye.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(m.b,{to:"/amweb/hotlinemessages"},"Hotline Conversations")),l.a.createElement(ye.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(m.b,{to:"/amweb/openlinemessages"},"Openline Conversations"))),l.a.createElement("div",{className:"btm-div"},l.a.createElement(m.b,{to:"/amweb/info",className:"px-2"},le),l.a.createElement(m.b,{to:"/amweb/help",className:"px-2"},ne))))}}]),t}(l.a.Component),Da=j.a.Sider,ka=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")?t="2":this.props.data.location.pathname.includes("poll")?t="3":this.props.data.location.pathname.includes("broadcast")?t="4":this.props.data.location.pathname.includes("help")?t="5":this.props.data.location.pathname.includes("info")&&(t="6")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?_e.a:Oe.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(Da,{className:this.state.collapsed?"d-lg-block w-md-100 sider-width":" d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(ye.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(ye.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-reports"}))},l.a.createElement(m.b,{to:"/idb/hotlinereports"},"Hotline Reports")),l.a.createElement(ye.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-reports"}))}," ",l.a.createElement(m.b,{to:"/idb/openlinereports"},"Openline Reports")),l.a.createElement(ye.a.Item,{key:"3",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-polls"}))}," ",l.a.createElement(m.b,{to:"/idb/pollsdirectory"},"Poll Results")),l.a.createElement(ye.a.Item,{key:"4",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-broadcast"}))},l.a.createElement(m.b,{to:"/idb/broadcastmessages"},"Broadcast Messages")),l.a.createElement(ye.a.Item,{key:"5",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-help"}))},l.a.createElement(m.b,{to:"/idb/help"},ne)),l.a.createElement(ye.a.Item,{key:"6",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-info"}))},l.a.createElement(m.b,{to:"/idb/info"},le))),l.a.createElement("div",{className:"btm-div"},l.a.createElement(m.b,{to:"/idb/info",className:"px-2"},le),l.a.createElement(m.b,{to:"/idb/help",className:"px-2"},ne))))}}]),t}(l.a.Component),xa=j.a.Content,Ia=a(41),Ta=function(e){var t=b("userType"),a=t?Ia.AES.decrypt(t,"anonymoose").toString(Ia.enc.Utf8):"",r=Object(n.useState)({currentPwd:"",newPwd:"",confirmPwd:""}),s=Object(c.a)(r,2),i=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(!1),f=Object(c.a)(h,2),E=f[0],v=f[1],y=Object(n.useState)(""),_=Object(c.a)(y,2),O=_[0],w=_[1],D=Object(n.useState)(!1),k=Object(c.a)(D,2),x=k[0],I=k[1];Object(n.useEffect)((function(){v(!1),I(!1);var e=JSON.parse(b("user")),t=e?Ia.AES.decrypt(e.user_details.first_name,"anonymoose").toString(Ia.enc.Utf8)+" "+Ia.AES.decrypt(e.user_details.last_name,"anonymoose").toString(Ia.enc.Utf8):"";w(t)}),[]);var T=function(e){m(Object(o.a)({},i,Object(ut.a)({},e.target.id,e.target.value)))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},"AM WEB"===a?l.a.createElement(be,{amWEBUser:!0}):"AM CC"===a?l.a.createElement(be,{amCCUser:!0}):"Org CC"===a?l.a.createElement(be,{amORGUser:!0}):"IDB"===a?l.a.createElement(be,{amIDBUser:!0}):null),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,"AM WEB"===a?l.a.createElement(Ca,{data:e}):"Org CC"===a?l.a.createElement(je,{data:e}):"AM CC"===a?l.a.createElement(Se,null):"IDB"===a?l.a.createElement(ka,null):null,l.a.createElement(xa,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Change Password for"," ",O)),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(Ut.a,{visible:p,onOk:function(){b("user")&&W.logout()},onCancel:function(){b("user")&&W.logout()},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:se},l.a.createElement("p",null,"Your password has been changed successfully. Please login again with your new password.")),l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100"},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32},className:"d-block"},l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row"},E&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Old Password is wrong.",type:"error"})),l.a.createElement(yt,{label:"Current Password",value:i.currentPwd},l.a.createElement(ht.a.Item,{name:"currentpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your current password!"}]},l.a.createElement(N.a.Password,{htmlFor:"currentpassword",id:"currentPwd",value:i.currentPwd,onChange:T})))),l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"New Password",value:i.newPwd},l.a.createElement(ht.a.Item,{name:"newpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your new password!"}]},l.a.createElement(N.a.Password,{htmlFor:"newpassword",id:"newPwd",value:i.newPwd,onChange:T,onBlur:function(e){return function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?I(!1):I(!0)}(e)}})),x&&l.a.createElement(Et.a,{message:St,type:"error",showIcon:!0}))),l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Confirm Password",value:i.confirmPwd},l.a.createElement(ht.a.Item,{name:"confirmpassword",className:"pwd confirpwd required",rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newpassword")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],dependencies:["newpassword"],hasFeedback:!0},l.a.createElement(N.a.Password,{htmlFor:"confirmpassword",id:"confirmPwd",value:i.confirmPwd,onChange:T})))))),l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:function(){var e=Me(),t={old_password:i.currentPwd,new_password:i.newPwd,confirm_password:i.confirmPwd},a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};i.newPwd!==i.confirmPwd||x||B.a.put(q+"changepassword/",t,a).then((function(){v(!1),g(!0)})).catch((function(e){e.message.includes("400")&&v(!0)}))}},"Submit")))))))))))))},Aa=(a(411),a(84)),Ya=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,iconContent:"",ImageId:""},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.addIcon(a.state.iconContent,a.state.ImageId)},a.handleCancel=function(){a.setState({visible:!1})},a.onSelectIcon=function(e){a.setState({iconContent:e.currentTarget.innerHTML,ImageId:e.currentTarget.id})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{type:"link",className:"link pl-0",onClick:this.showModal},l.a.createElement("span",{className:"icon icon-add-filled"}),"Add Icon"),l.a.createElement(Ut.a,{className:"modal-icon",title:"Add Icon",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Add",cancelText:"Cancel"},l.a.createElement(S.a,{className:"py-4","data-test":"AddIcon"},l.a.createElement("div",{className:"1"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:1,onClick:this.onSelectIcon},l.a.createElement(Aa.a,{title:"Sexual Harrasment"},l.a.createElement("span",{className:"icon icon-sexual-harassment-1"}))),l.a.createElement("div",{className:"2"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:2,onClick:this.onSelectIcon},l.a.createElement(Aa.a,{title:"Violence"},l.a.createElement("span",{className:"icon icon-violence"}))),l.a.createElement("div",{className:"3"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:3,onClick:this.onSelectIcon},l.a.createElement(Aa.a,{title:"Racism"},l.a.createElement("span",{className:"icon icon-racism"}))),l.a.createElement("div",{className:"4"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:4,onClick:this.onSelectIcon},l.a.createElement(Aa.a,{title:"Cyber Bullying"},l.a.createElement("span",{className:"icon icon-cyber-bullying"}))),l.a.createElement("div",{className:"5"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:5,onClick:this.onSelectIcon},l.a.createElement(Aa.a,{title:"Fight"},l.a.createElement("span",{className:"icon icon-fight"}))),l.a.createElement("div",{className:"6"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:6,onClick:this.onSelectIcon},l.a.createElement(Aa.a,{title:"Discrimination"},l.a.createElement("span",{className:"icon icon-discrimination"}))),l.a.createElement("div",{className:"7"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:7,onClick:this.onSelectIcon},l.a.createElement(Aa.a,{title:"Slap"},l.a.createElement("span",{className:"icon icon-slap"}))))))}}]),t}(n.Component),Ma=a(42),Ua=a.n(Ma),Fa=a(121),Pa=a.n(Fa),Ra=function(e){var t=e.next,a=e.stepOneHotLineInfo,r=e.handleStepOneOnChange,s=(e.handleStepOneOnSelect,e.handleStepOneDatePickerChange),o=e.addIcon,i=(e.onChangeCheckbox,e.getIconText),u=e.setNameValidHandle,d=e.hotlineErrorUpdated,p=e.createHotLine,g=Object(n.useState)({iconText:""}),h=Object(c.a)(g,2),f=(h[0],h[1],Object(n.useState)(!1)),E=Object(c.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)(!0),_=Object(c.a)(y,2),O=(_[0],_[1]),N=ht.a.useForm(),j=Object(c.a)(N,1)[0],w=Object(n.useState)(!1),S=Object(c.a)(w,2),C=S[0],D=S[1],k=function(e){return e&&e<Fe()().startOf("day")};ft.a.RangePicker;return l.a.createElement(ht.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:j},v&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),C&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please fill directory name",type:"error",showIcon:!0})),l.a.createElement(yt,{label:"Directory Name",value:a.directoryName},l.a.createElement(ht.a.Item,{className:"required",name:"directoryName",rules:[{required:!0,message:{ENTER_DIRECTORY_NAME:"Please enter directory name"}}]},l.a.createElement(Pa.a,{showCount:!0,maxLength:80,value:a.directoryName,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkhotline/",{hotline_name:a.directoryName},t).then((function(e){e.data&&u(e.data[0],"hotlineErrorUpdated")}))}()},id:"directoryName",className:"input-control",htmlFor:"directoryName",autoComplete:"off"}),"status: false"===d&&a.directoryName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.directoryName.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==d&&l.a.createElement(Et.a,{message:Ct,type:"error",showIcon:!0}))),l.a.createElement(yt,{label:"Description",value:a.description},l.a.createElement(ht.a.Item,{className:"required",name:"description",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(Pa.a,{className:"input-control",value:a.description,onChange:function(e){return r(e)},id:"description",htmlFor:"description",autoComplete:"off"}))),a.statusMessage.length>0?l.a.createElement(l.a.Fragment,null,a.statusMessage):null,l.a.createElement(yt,{label:He,value:"startDate"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"startDate",value:a.startDate,onChange:function(e){return s(e,"startDate")},disabledDate:k,rules:[{required:!0,message:{SELECT_DATE:Dt}}]}))),l.a.createElement(yt,{label:Be,value:"endDate"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"endDate",value:a.endDate,onChange:function(e){return s(e,"endDate")},disabledDate:k}))),l.a.createElement(ht.a.Item,{className:""},l.a.createElement(ht.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(Ya,{"data-test":"addIconComponent",addIcon:o}),i(a.hotlineIconId)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},Ua()(a.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:i(a.hotlineIconId)},i(a.hotlineIconId)))))))),l.a.createElement(ht.a.Item,null,l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),a.directoryName&&a.directoryName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.description&&a.description.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.iconHtml&&a.startDate?"status: false"==d&&(b(!1),O(!1),D(!1),t()):(D(!1),b(!0))},"data-test":"stepOneNext",className:"mr-4"},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){a.directoryName&&a.directoryName.replace(/^\s*/,"").replace(/\s*$/,"").length>0?"status: false"==d&&(b(!1),D(!1),p(!0)):(b(!1),D(!0))}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))},La=function(e,t){return function(a){return sa.getEmployees(e,t).then((function(e){return a({type:"MANAGEEMP_SUCCESS",payload:{manageEmpData:e.data}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:"MANAGEEMP_FAIL"}),a({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}},za=a(269),Ha=a.n(za),Ba=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.employeeData,n=a.filterIt(t,e);a.setState({filterData:n})},a.start=function(){a.setState({showAssigntoModal:!0})},a.stepTwoPrev=function(){a.props.prev()},a.stepTwoNext=function(){0!==a.props.stepTwoHotLine.chekedValues.length?a.props.next():a.setState({showAlert:!0})},a.state={employeeData:"",showAssigntoModal:"false",showAlert:!1,loader:!1,filter:{search:"",cug_filter:{},filter:{is_app_user:1,is_am_web_user:1,is_org_cc_user:1,is_super_user:0,is_idb_user:1}}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;this.setState({loader:!0}),e(La(this.state.filter,""))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.manageEmpData,n=[];null!==a&&(n=a.filter((function(e){return 1===e.status_id}))),e.manageEmpData!=a&&this.setState({employeeData:n,loader:!1},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.props.stepTwoHotLine.selectedRowKeys,onChange:this.props.handleStepTwoOnSelect},a=[{title:"First Name",dataIndex:"first_name",key:"first_name",width:"22%",render:function(e){return{children:e,props:{"data-title":"First Name"}}}},{title:"Last Name",dataIndex:"last_name",key:"last_name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}}},{title:Re,dataIndex:"mobile_number",key:"mobile_number",width:"21%",render:function(e){return{children:e,props:{"data-title":"Mobile Number"}}}},{title:"Access",dataIndex:"",key:"x",render:function(e){var t="",a="",n=!1;return e.is_am_web_user&&(a="AM Web",n=!0),e.is_org_cc_user&&(a=$,n=!0),e.is_idb_user&&(a="IDB",n=!0),e.is_super_user&&(a="Super User",n=!0),e.is_app_user&&(n||(a="APP")),0===t.length?t+=a:"APP"!==a&&(t.includes("APP")?t=a:t+=", "+a),{children:l.a.createElement("span",null,t),props:{"data-title":"Access"}}},width:"20%"},{title:Le,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):2===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Draft"):3===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),X):4===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),ee):null,props:{"data-title":"Status"}}}}];return l.a.createElement("div",null,l.a.createElement(C.a,{"data-test":"createHotlineStepTwo",span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Ha.a,{placeholder:"Search User",onSearch:this.onSearch})))))),this.state.showAlert&&l.a.createElement(Et.a,{message:"Please select user(s).",type:"error",showIcon:!0}),l.a.createElement(D.a,{spinning:this.state.loader,size:"large"},l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(De.a,{rowSelection:t,columns:a,dataSource:this.state.filterData,rowKey:"unique_identifier"})),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return e.stepTwoPrev()},"data-test":"steptwoPrev"},ce),l.a.createElement(Ie.a,{className:"md mr-4",type:"primary",onClick:function(){return e.stepTwoNext()},"data-test":"steptwoNext"},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){return e.props.createHotLine(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))}}]),t}(l.a.Component);var qa=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(Ba),Va=N.a.TextArea,Qa=function(e){var t,a=e.prev,n=e.createNewHotLine,r=e.stepOneHotLine,s=e.stepTwoHotLine,o=e.getIconText,i=ht.a.useForm(),u=Object(c.a)(i,1)[0],d=s.selectedRows.map((function(e){return e.first_name+" "+e.last_name}));ft.a.RangePicker;return l.a.createElement(ht.a,{"data-test":"createHotlineStepThree",className:"input-md w-md-100 w-75",name:"validate_other",form:u},l.a.createElement(ht.a.Item,{name:"directoryName"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Va,{showCount:!0,disabled:!0,maxLength:80,value:r.directoryName,id:"directoryName",className:"input-control textarea-input",htmlFor:"directoryName"}))),l.a.createElement(ht.a.Item,{name:"description"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Va,{disabled:!0,className:"input-control textarea-md",value:r.description,id:"description",htmlFor:"description"}))),l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"startDate",value:r.startDate,disabled:!0,rules:[{readOnly:!0,required:!0,message:{SELECT_DATE:Dt}}]}),l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"endDate",value:r.endDate,disabled:!0})),l.a.createElement("div",{className:"d-block d-lg-flex"},l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(ht.a.Item,{name:"userNames"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"assigned to",id:d,disabled:!0,value:d.join(", ")}))))),l.a.createElement(ht.a.Item,{className:"w-100 w-lg-50"},l.a.createElement(ht.a.Item,{className:"upload-control"},l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail",href:"#",rel:""},Ua()(r.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:""},o(r.hotlineIconId)))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,(t={type:"secondary",className:"mr-4"},Object(ut.a)(t,"type","secondary"),Object(ut.a)(t,"htmlType","submit"),Object(ut.a)(t,"onClick",(function(e){e.preventDefault(),a()})),Object(ut.a)(t,"data-test","stepThreePrev"),t),ce),l.a.createElement(Ie.a,{type:"primary",className:"md mr-4",htmlType:"submit",onClick:function(e){n()},"data-test":"stepThreeNext"},"Create"),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){return n(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))},Ga=j.a.Content,Ka=pt.a.Step,Wa=[{title:"Add Details",content:"First-content"},{title:"Assign Employee",content:"Second-content"},{title:"Create Directory",content:"Last-content"}],Ja=a(41),Za=function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),u=Object(c.a)(i,2),d=u[0],p=u[1],g=Object(n.useState)({directoryName:"",description:"",status:!1,statusMessage:"",startDate:"",endDate:"",hotlineIconId:"",iconHtml:""}),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(""),y=Object(c.a)(v,2),_=y[0],O=y[1],N=Object(n.useState)({selectedRows:"",selectedRowKeys:[],chekedValues:[]}),w=Object(c.a)(N,2),k=w[0],x=w[1],I=function(){s(r+1)},T=function(){s(r-1)},A=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}},Y=function(){var e,t,a,n,l,r=arguments;return z.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:e=r.length>0&&void 0!==r[0]&&r[0],t=JSON.parse(b("user")),a=Me(),n={create_hotline:{name:f.directoryName,help_text:f.description,start_date:f.startDate?Fe()(f.startDate).format("DD-MM-YYYY"):null,end_date:f.endDate?Fe()(f.endDate).format("DD-MM-YYYY"):null,status_id:e?4:1,hotline_icon_id:f.hotlineIconId?parseInt(f.hotlineIconId):"",created_by:parseInt(Ja.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Ja.enc.Utf8))},permissions:k.chekedValues},l={headers:{Authorization:a,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},p(!0),B.a.post(q+"hotline/",n,l).then((function(){window.location="/orgcc/hotlinedirectory"}));case 7:case"end":return s.stop()}}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"hotlineCreation"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e.noHotlines?e.data:e}),l.a.createElement(Ga,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/hotlinedirectory"},l.a.createElement(gt.a.Item,null,"Hotline Directory")),l.a.createElement(gt.a.Item,null,"Create Hotline Directory"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Hotline Directory Entries")),l.a.createElement(pt.a,{className:"mt-2",current:r},Wa.map((function(e){return l.a.createElement(Ka,{key:e.title,title:e.title})}))),l.a.createElement(D.a,{spinning:d,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"steps-content"},0==r?l.a.createElement(Ra,{next:I,stepOneHotLineInfo:f,handleStepOneOnChange:function(e){E(Object(o.a)({},f,Object(ut.a)({},e.target.id,e.target.value)))},handleStepOneOnSelect:function(e,t){E(Object(o.a)({},f,Object(ut.a)({},t,e)))},handleStepOneDatePickerChange:function(e,t){var a,n=Fe()();if(e&&0===(null===e||void 0===e?void 0:e.diff(n,"days"))&&!f.status)E(Object(o.a)({},f,(a={},Object(ut.a)(a,t,e),Object(ut.a)(a,"statusMessage",ge),a)));else if(e&&(null===e||void 0===e?void 0:e.diff(n,"days"))>0&&!f.status){var l;E(Object(o.a)({},f,(l={},Object(ut.a)(l,t,e),Object(ut.a)(l,"statusMessage",he),l)))}else{var r;E(Object(o.a)({},f,(r={},Object(ut.a)(r,t,e),Object(ut.a)(r,"statusMessage",""),r)))}},onChangeCheckbox:function(e){if(e.target.checked)E(Object(o.a)({},f,{status:e.target.checked,statusMessage:""}));else{var t,a,n=Fe()(),l=f.sDate;l&&0===(null===(t=l[0])||void 0===t?void 0:t.diff(n,"days"))?E(Object(o.a)({},f,{status:e.target.checked,statusMessage:ge})):l&&(null===(a=l[0])||void 0===a?void 0:a.diff(n,"days"))>0&&E(Object(o.a)({},f,{status:e.target.checked,statusMessage:he}))}},setNameValidHandle:function(e,t){O(e)},addIcon:function(e,t){E(Object(o.a)({},f,{hotlineIconId:t,iconHtml:e}))},getIconText:A,hotlineErrorUpdated:_,"data-test":"CreateHotlineStepOne",createHotLine:Y}):1==r?l.a.createElement(qa,{next:I,prev:T,stepOneHotLine:f,stepTwoHotLine:k,handleStepTwoOnSelect:function(e,t){var a,n=[],l=JSON.parse(b("user")),r=t.filter((function(e){var t,a=e.user_id;return!(null===(t=n)||void 0===t?void 0:t.some((function(e){return e.user_id===a})))})).reduce((function(e,t){return e.push({user_id:t.user_id,can_respond:1,can_view_reports:0,created_by:parseInt(Ja.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Ja.enc.Utf8))}),e}),[]);n=null===(a=n)||void 0===a?void 0:a.concat(r),x(Object(o.a)({},k,{selectedRowKeys:e,selectedRows:t,chekedValues:n}))},createHotLine:Y}):2==r?l.a.createElement(Qa,{prev:T,createNewHotLine:Y,stepOneHotLine:f,stepTwoHotLine:k,getIconText:A}):""))))))))))},$a=(a(439),a(190)),Xa=a.n($a),en=j.a.Content,tn=function(e){var t=Object(u.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e.data}),l.a.createElement(en,{"data-test":"Directory",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Hotline Directory")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Xa.a,alt:"Create Hotline",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create Hotline entries and assign them to managers,",l.a.createElement("br",null),"head of departments or leadership."),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(ct.a,{className:"mt-1"})),l.a.createElement(C.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ie.a,{"data-test":"createHotline",onClick:function(){t.push("/orgcc/createhotline")},type:"primary"},"Create"))))))))))},an=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"deleteHotline",value:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"hotline/"+this.props.hotlineId,e).then((function(){window.location="/orgcc/hotlinedirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},ue),l.a.createElement(Ut.a,{title:"Delete Hotline",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this hotline?")))}}]),t}(n.Component),nn=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,8===e.status_id?"":l.a.createElement(m.b,{to:{pathname:"/orgcc/edithotline",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/edithotline"},me)," ")),5===e.status_id?"":l.a.createElement("li",null,l.a.createElement(an,{hotlineId:e.hotline_id,hotlineName:e.name}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),ln=function(e){var t=e.data,a=e.deleteRecord,r=e.handleCheck,s=Object(n.useState)(),o=Object(c.a)(s,2),i=o[0],m=o[1];Object(n.useEffect)((function(){u()}),[t]);var u=function(){m(t)},d=[{title:"Name",key:"first_name",width:"30%",render:function(e){return l.a.createElement("div",null,e.first_name," ",e.last_name)}},{title:"Respond",dataIndex:"can_respond",key:"can_respond",width:"20%",editable:!0,render:function(e,t){return l.a.createElement(C.a,{span:12,className:"d-flex justify-content-end changeColor"},l.a.createElement(bt.a,{value:"reports",checked:e,onChange:function(e){return r(t)},disabled:!0}))}},{title:ze,dataIndex:"user_id",key:"user_id",width:"20%",render:function(e,t){return l.a.createElement("span",{onClick:function(e){!function(e,t){t.preventDefault(),a(e)}(t,e)},className:"uploaded-icon icon icon-close d-inline-flex justify-content-end align-items-center"})}}];return l.a.createElement("div",{className:"no-bordered-grid"},l.a.createElement(De.a,{className:"no-bg-table",locale:{emptyText:"  "},rowClassName:function(){return"editable-row"},columns:d,dataSource:i,rowKey:"rowkey"}))},rn=a(1074),sn=(a(440),function(e){var t=e.searchData,a=e.addAssignUser,r=e.data,s=Object(n.useState)(!1),o=Object(c.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(""),f=Object(c.a)(h,2),E=f[0],v=f[1];return l.a.createElement(l.a.Fragment,null,i&&l.a.createElement(Et.a,{"data-test":"alert",message:"".concat(p," is already assigned for this hotline."),type:"error",showIcon:!0}),l.a.createElement(rn.a,{"data-test":"Searchuser",value:E,options:t,placeholder:"Search Employee",filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},onSelect:function(e,t){return function(e,t){r.filter((function(e){return e.user_id===t.user_id})).length>0?(m(!0),g(e),v("")):a(e,t)}(e,t)},onChange:function(){return m(!1),void g("")}}))}),on=a(41),cn=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,assignedHotLines:"",hotLineName:"",assignedEmp:"",loader:!1,filter:{search:"",cug_filter:{},filter:{is_app_user:1,is_am_web_user:1,is_org_cc_user:1,is_super_user:0,is_idb_user:1}}},a.showModal=function(){a.setState({visible:!0,employeeData:[],hotLineName:a.props.selectedRows.name,hotlineId:a.props.selectedRows.hotline_id,loader:!0}),(0,a.props.dispatch)(La(a.state.filter,"")),a.getAssignedEmployee()},a.getAssignedEmployee=function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getHotlineAssignEmpl/"+a.props.selectedRows.hotline_id,e).then((function(e){a.setState({assignedHotLines:e.data,loader:!1})}))},a.handleOk=function(e){a.setState({visible:!1});var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"hotlineAssignEmpl/",a.state.assignedEmp,t).then((function(e){a.getAssignedEmployee(),a.setState({assignedEmp:""})})).catch((function(e){}))},a.handleCheck=function(e){var t=Object(dt.a)(a.state.assignedHotLines),n=t.findIndex((function(t){return t.user_id===e.user_id}));t[n]=Object(o.a)({},t[n],{can_respond:!e.can_respond}),a.setState({assignedHotLines:t});var l=Object(dt.a)(a.state.assignedEmp),r=l.findIndex((function(t){return t.user_id===e.user_id}));l[r]=Object(o.a)({},l[r],{can_respond:!e.can_respond}),a.setState({assignedEmp:l})},a.handleCancel=function(){a.setState({visible:!1})},a.deleteRecord=function(e){e.user_id;var t=a.state.assignedEmp&&a.state.assignedEmp.filter((function(t){return t.user_id!==e.user_id}));a.setState({assignedEmp:t});var n={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({user_id:e.user_id})};B.a.delete(q+"getHotlineAssignEmpl/"+e.hotline_id,n).then((function(){a.getAssignedEmployee()})).catch((function(e){}))},a.addUser=function(e,t){var n=JSON.parse(b("user")),l=a.state,r=l.assignedHotLines,s=l.assignedEmp,o={hotline_id:a.state.hotlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,first_name:t.value},c={hotline_id:a.state.hotlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,created_by:parseInt(on.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(on.enc.Utf8))};a.setState({assignedHotLines:[].concat(Object(dt.a)(r),[o]),assignedEmp:[].concat(Object(dt.a)(s),[c])})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props.manageEmpData,a=[];if(e.manageEmpData!=t){for(var n=0;n<t.length;n++){var l,r,s;a.push({value:null===(l=t[n])||void 0===l?void 0:l.first_name.concat(" ",null===(r=t[n])||void 0===r?void 0:r.last_name),user_id:null===(s=t[n])||void 0===s?void 0:s.user_id})}this.setState({employeeData:a})}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Show"),l.a.createElement(Ut.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:ie},l.a.createElement("div",null,"Employees with permissions to "," ",this.state.hotLineName),l.a.createElement(S.a,{className:"mt-2 mt-lg-5 mb-3 thead-outer"},l.a.createElement(C.a,{span:10},Ke)),l.a.createElement(D.a,{spinning:this.state.loader,size:"large"},l.a.createElement(ln,{data:this.state.assignedHotLines,deleteRecord:this.deleteRecord,handleCheck:this.handleCheck})),l.a.createElement(S.a,{className:"mb-2 autocomplete"},l.a.createElement(C.a,{span:24},l.a.createElement(sn,{searchData:this.state.employeeData,addAssignUser:this.addUser,data:this.state.assignedHotLines}),l.a.createElement("small",null,"Hit enter to add")))))}}]),t}(n.Component);var mn=Object(i.b)((function(e){return{assignhotlines:e.assignedHotline.assignhotlines,manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(cn),un=a(41),dn=N.a.Search,pn=(l.a.createElement(ke.a,{style:{fontSize:16,color:"#1890ff"}}),j.a.Content),gn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","/");if(new Date<new Date(n)){var l=JSON.parse(b("user")),r={help_text:e.help_text,hotline_icon_id:e.hotline_icon_id,hotline_id:e.hotline_id,name:e.name,start_date:Fe()(e.start_date.replaceAll(" / ","-")).format("DD-MM-YYYY"),end_date:Fe()(n.replaceAll("/","-")).format("DD-MM-YYYY"),status_id:"Active"===t?4:5,updated_by:parseInt(un.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(un.enc.Utf8))},s={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.put(q+"hotline/"+r.hotline_id,r,s).then((function(){w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.name+Je}),a.props.statusOnClicked()}))}else w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.name+Ze})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n,searchBy:e})},a.state={data:[],filterData:[],searchBy:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.hotlines;null===t||void 0===t||t.forEach((function(e){e.start_date=e.start_date?Fe()(e.start_date).utc().local().format("MM / DD / YYYY"):"",e.end_date=e.end_date?Fe()(e.end_date).utc().local().format("MM / DD / YYYY"):""})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a=this;this.props.hotlines!==e.hotlines&&(null===(t=e.hotlines)||void 0===t||t.forEach((function(e){e.start_date=e.start_date?Fe()(e.start_date).utc().local().format("MM / DD / YYYY"):"",e.end_date=e.end_date?Fe()(e.end_date).utc().local().format("MM / DD / YYYY"):""})),this.setState({data:e.hotlines},(function(){a.onSearch(a.state.searchBy)})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=[{title:"Hotline Name",dataIndex:"name",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Hotline Name"}}}},{title:He,dataIndex:"start_date",key:"start_date",width:"18%",render:function(e){return{children:e||"-",props:{"data-title":"Start Date"}}}},{title:Be,dataIndex:"end_date",key:"end_date",width:"18%",render:function(e){return{children:e||"-",props:{"data-title":"End Date"}}}},{title:"Permissions",dataIndex:"",key:"x",width:"10%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement(mn,{selectedRows:e})),props:{"data-title":"Permissions"}}}},{title:Le,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:4===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},Z):5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):7===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),X):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),ee),props:{"data-title":"Status"}}}},{title:ze,dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(nn,{data:e}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:this.props.data}),l.a.createElement(pn,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Hotline Directory")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(dn,{placeholder:re,onSearch:this.onSearch})))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(m.b,{to:"/orgcc/createhotline"},l.a.createElement(Te,{value:"Create Hotline"}))))),l.a.createElement(D.a,{spinning:this.props.loader,size:"large"},l.a.createElement(xe,{rowKey:"hotline_id",columns:e,data:this.state.filterData})))))))}}]),t}(l.a.Component);var hn=Object(i.b)((function(e){return{hotlinesdata:e.hotlinedata.hotlinesdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return sa.getHotlines().then((function(t){return e({type:"HOTLINE_SUCCESS",payload:{hotlinesdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"HOTLINE_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[r]),Object(n.useEffect)((function(){null===e.hotlinesdata?u(!0):null!==e.hotlinesdata&&u(!1)}),[e.hotlinesdata]);return m||null===e.hotlinesdata||0!==e.hotlinesdata.length?l.a.createElement(gn,{hotlines:e.hotlinesdata,statusOnClicked:function(){s(!r)},data:e,loader:m}):l.a.createElement(tn,{data:e})})),fn=function(e){var t=e.handleCheck,a=e.selectedRow,r=e.stepOneHotLineValues,s=e.permissions,o=e.getCheckValues,i=Object(n.useState)(!1),m=Object(c.a)(i,2),u=m[0],d=m[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{type:"primary",onClick:function(){return z.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}))}},"Assign"),l.a.createElement(Ut.a,{className:"modal-checkbox",visible:u,onOk:function(){return d(!1),void o()},onCancel:function(){d(!1)},centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:ie},l.a.createElement("div",null,ASSIGN_HOTLINE_TEXT_PART1," ",l.a.createElement("b",null,r.directoryName)," ","Hotline",l.a.createElement("br",null)," ",l.a.createElement("span",{className:"font-wgt-md"}," ")," "),l.a.createElement("div",null,l.a.createElement(S.a,{className:"mt-2 mt-lg-5"},l.a.createElement(C.a,{span:6}),l.a.createElement(C.a,{span:14,className:"small text-center"},Ke)),a&&a.map((function(e){var a=s.find((function(t){return t.user_id===e.user_id}));return l.a.createElement(S.a,{className:"mt-3 d-flex justify-content-center"},l.a.createElement(C.a,{span:12},"".concat(e.firstname," ").concat(e.lastname)),l.a.createElement(C.a,{span:10},l.a.createElement(bt.a,{checked:!(!a||1!==a.can_respond),disabled:!0,onChange:function(a){return t(e)}})))})))))},En=a(1099),vn=a(105),bn=a(484),yn=a.n(bn),_n=(a(441),a(1083)),On=a(1088),Nn=a(521),jn=function(e,t){return e.filter((function(e){return e.conversation_id.toLowerCase().includes(t.toLowerCase())||e.responder_conversation_name.toLowerCase().includes(t.toLowerCase())||e.hotline_name.toLowerCase().includes(t.toLowerCase())||e.message.toLowerCase().includes(t.toLowerCase())})).map((function(e){var a=e.conversation_id.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),n=e.responder_conversation_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),l=e.hotline_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),r=e.message.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));return Object(o.a)({},e,{conversation_id:a,responder_conversation_name:n,message:r,hotline:{name:l,hotline_id:e.hotline_id}})}))},wn=(a(316),a(41)),Sn=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)([]),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)([]),v=Object(c.a)(E,2),y=v[0],_=v[1],O=Object(n.useState)([]),N=Object(c.a)(O,2),j=N[0],w=N[1],D=Object(n.useState)([]),k=Object(c.a)(D,2),x=k[0],I=k[1],T=Object(n.useState)([]),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)([]),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)([]),z=Object(c.a)(L,2),H=z[0],V=z[1],Q=Object(n.useState)([]),G=Object(c.a)(Q,2),K=G[0],W=G[1],J=Object(n.useState)([]),Z=Object(c.a)(J,2),$=Z[0],X=Z[1],ee=Object(n.useState)([]),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)([]),re=Object(c.a)(le,2),se=re[0],oe=re[1];Object(n.useEffect)((function(){var e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getUserallHotlines/"+parseInt(wn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(wn.enc.Utf8)),a).then((function(e){var t=[];e.data.map((function(e){return t.push({label:e.hotline_name,value:e.hotline_id})})),_(t)}))}),[]),Object(n.useEffect)((function(){void 0===e.removeFilter.type||e.visible||de(!1)}),[u,r,h]),Object(n.useEffect)((function(){if("urgencyLevel"===e.removeFilter.type){var t=$.filter((function(t){return t.value!==e.removeFilter.value})),a=u.filter((function(t){return t!==e.removeFilter.value}));d(a),X(t)}if("urgencyHotline"===e.removeFilter.type){var n=ae.filter((function(t){return t.value!==e.removeFilter.value})),l=h.filter((function(t){return t!==e.removeFilter.value}));f(l),ne(n)}if("urgencyStatus"===e.removeFilter.type){var o=se.filter((function(t){return t.value!==e.removeFilter.value})),c=r.filter((function(t){return t!==e.removeFilter.value}));s(c),oe(o)}}),[e.removeFilter]);var ce=[{label:"Low",value:1},{label:"Medium",value:2},{label:"High",value:3}],me=[{label:"New",value:1},{label:"Open",value:2},{label:"Closed",value:3}],ue=y,de=function(t){var a=Object(o.a)({},r.length>0&&{status_id:r},{},u.length>0&&{urgency_level_id:u},{},h.length>0&&{hotline_id:h});M(r),w(u),I(h),V(ae),W(se),R($);var n=Me(),l=JSON.parse(b("user")),s=b("searchBy"),c={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},i=q+"hotlineResponderConversation/?user_id="+parseInt(wn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(wn.enc.Utf8)),m=Object(o.a)({},a,{hotline_id:a.hotline_id&&a.hotline_id.toString(),status_id:a.status_id&&a.status_id.toString(),urgency_level_id:a.urgency_level_id&&a.urgency_level_id.toString()}),d=""===e.searchString?i+"&filter="+JSON.stringify(m):i+"&filter="+JSON.stringify(m)+"&search="+e.searchString,p=[];B.a.get(d,c).then((function(t){p=(null===s||void 0===s?void 0:s.length)>0?jn(t.data,s):t.data,e.loadFilteredConversations(p,"apply",$,se,ae)})),t&&e.hide()};return l.a.createElement("div",null,l.a.createElement(C.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(C.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return function(){var t=Me(),a=JSON.parse(b("user")),n=b("searchBy"),l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r=q+"hotlineResponderConversation/?user_id="+parseInt(wn.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(wn.enc.Utf8)),o=[];B.a.get(r,l).then((function(t){o=(null===n||void 0===n?void 0:n.length)>0?jn(t.data,n):t.data,e.loadFilteredConversations(o,"reset",[],[],[]),d([]),X([]),s([]),oe([]),ne([]),f([])})),e.hide()}()}},"Reset"))),l.a.createElement(ct.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Urgency level")),l.a.createElement(C.a,{span:"24"},l.a.createElement(bt.a.Group,{className:"d-flex flex-column flex-gap",name:"urgencyLevel",options:ce,value:u,onChange:function(e){var t=$;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ce.find((function(t){return t.value===e})))})):t=[],X(t),d(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,Le)),l.a.createElement(C.a,{span:"24"},l.a.createElement(bt.a.Group,{className:"d-flex flex-column flex-gap",name:"status",value:r,options:me,onChange:function(e){var t=se;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(me.find((function(t){return t.value===e})))})):t=[],oe(t),s(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Hotline")),l.a.createElement(C.a,{span:"24"},l.a.createElement(bt.a.Group,{className:"d-flex flex-column flex-gap",name:"hotline",options:ue,value:h,onChange:function(e){var t=ae;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ue.find((function(t){return t.value===e})))})):t=[],ne(t),f(e)}})))))),l.a.createElement(S.a,null,l.a.createElement(C.a,{span:"24",className:"btn-row actions"},l.a.createElement(Ie.a,{type:"primary",className:"mr-2",onClick:function(){return de(!0)}},"Apply"),l.a.createElement(Ie.a,{type:"secondary",onClick:function(t){d(j),s(Y),f(x),X(P),oe(K),ne(H),e.hide()}},ie)))))},Cn=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:l.a.createElement(Sn,{hide:this.hide,searchString:this.props.searchString,removeFilter:this.props.removeFilter,loadFilteredConversations:this.props.loadFilteredConversations,visible:this.state.visible}),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"icon icon-filter"})))}}]),t}(l.a.Component),Dn=a(1080),kn=a(1078),xn=a(1097),In=a(270),Tn=a.n(In),An=a(1098),Yn=a(41),Mn=N.a.TextArea,Un=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1});var e=Me(),t=JSON.parse(b("user")),n={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},l={note_text:a.state.noteText,conversation_id:a.props.convoId,created_by:parseInt(Yn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Yn.enc.Utf8))};B.a.post(q+"addNotes/",l,n).then((function(e){200===e.status&&(a.setState({noteText:""}),a.formRef.current.resetFields(),a.props.getNoteData(e.data.conversation_id))}))},a.handleCancel=function(){a.setState({visible:!1,noteText:""}),a.formRef.current.resetFields()},a.handleChange=function(e){a.setState({noteText:e.target.value})},a.formRef=l.a.createRef(),a.state={visible:!1,noteText:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0"},l.a.createElement("span",{className:"icon icon-add-filled"}),"Take a note"),l.a.createElement(Ut.a,{className:"note-modal",title:"Take a note",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Add",cancelText:"Cancel"},l.a.createElement(S.a,{className:"pt-2","data-test":"NoteModal"},l.a.createElement(ht.a,{className:"input-md w-100",name:"validate-other",ref:this.formRef},l.a.createElement(ht.a.Item,{className:"mb-0",name:"send message"},l.a.createElement(Mn,{className:"input-control",placeholder:"Add note here",htmlFor:"send message",value:this.state.noteText,onChange:function(t){return e.handleChange(t)}}))))))}}]),t}(l.a.Component),Fn=_n.a.Paragraph,Pn=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={expand:!1,counter:0,notesData:[],conversationId:""},a.typoExpand=function(){a.setState({expand:!0,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a.typoClose=function(){a.setState({expand:!1,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"renderParagraph",value:function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:this.state.counter},l.a.createElement("span",{className:"note-user"},Fe()(e.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A \u2022")," ",e.first_name," ",e.last_name),l.a.createElement(Fn,{ellipsis:{rows:3,expandable:!0,symbol:"Show more",onExpand:this.typoExpand}},e.note_text))}},{key:"render",value:function(){var e=this;return this.props.addedNote.map((function(t){return l.a.createElement("div",{className:"show-less","data-test":"addedNotes"},e.renderParagraph(t),e.state.expand&&l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:e.typoClose},"Show less"))}))}}]),t}(n.Component),Rn=(_n.a.Paragraph,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onChange=function(e){a.setState({rows:e})},a.state={rows:1,notes:[],conversationId:""},a.getNotes=a.getNotes.bind(Object(Y.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({conversationId:this.props.conversation_id}),this.getNotes(this.props.conversation_id)}},{key:"getNotes",value:function(e){var t=this,a={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},params:{conversation_id:e}};B.a.get(q+"getNotes/",a).then((function(e){t.setState({notes:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.notes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class,"data-test":"Notes"},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Notes")),l.a.createElement(Ie.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.notesClicked(t)}}))),l.a.createElement(ct.a,{className:"my-2 w-100"}),l.a.createElement(C.a,{span:"24",className:"px-3"},l.a.createElement(Un,{convoId:this.props.conversation_id,getNoteData:this.getNotes}),l.a.createElement(S.a,{className:"added-notes"},l.a.createElement(Pn,{addedNote:t}))))))))}}]),t}(n.Component)),Ln=a(1090),zn=[{id:1,name:"Updated the Status to"},{id:2,name:"Updated the Urgency level to"},{id:3,name:"Added new Note"},{id:4,name:"View Hotline Converations"}],Hn=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],Bn=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],qn=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(g.a)(this,Object(h.a)(t).call(this))).state={myclass:"",activity:[]},e.divclicked=e.divclicked.bind(Object(Y.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAcitivity(this.props.conversation_id)}},{key:"getAcitivity",value:function(e){var t=this,a={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getconversationActivity/?conversation_id="+e,a).then((function(e){t.setState({activity:e.data})}))}},{key:"mapAuditLog",value:function(e){var t="";return zn.map((function(a){a.id===e.audit_log_event_id&&(t=a.name,e.status_value&&Hn.map((function(a){e.status_value==a.id&&(t=t+" <b>"+a.name+"</b>")})),e.urgency_level_value&&Bn.map((function(a){e.urgency_level_value==a.id&&(t=t+" <b>"+a.name+"</b>")})))})),t}},{key:"render",value:function(){var e=this,t=this.state.activity;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Activity")),l.a.createElement(Ie.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.activityClicked(t)}}))),l.a.createElement(ct.a,{className:"my-2 w-100"}),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(C.a,{span:"24",className:"px-3 pt-2"},l.a.createElement(Ln.a,null,t.map((function(t){return l.a.createElement(Ln.a.Item,null,l.a.createElement("span",{className:"note-user"},Fe()(t.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A\u2022")," ",t.name),l.a.createElement("br",null),Ua()(e.mapAuditLog(t)))}))))))))))}}]),t}(n.Component),Vn=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(g.a)(this,Object(h.a)(t).call(this))).state={myclass:"",assigneEmp:[]},e.divclicked=e.divclicked.bind(Object(Y.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAssigne(this.props.hotline_id)}},{key:"getAssigne",value:function(e){var t=this,a={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getHotlineAssignee/"+e,a).then((function(e){t.setState({assigneEmp:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.assigneEmp;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Assigned To")),l.a.createElement(Ie.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.assigneClicked(t)}}))),l.a.createElement(ct.a,{className:"my-2 w-100"}),l.a.createElement(C.a,{span:"24",className:"px-3 pt-2 assignees d-flex flex-column flex-gap"},t.map((function(e){return l.a.createElement(Nn.a,null,e["Assigned User_name"])}))))))))}}]),t}(n.Component),Qn=a(340),Gn=a(152),Kn=a.n(Gn),Wn=a(1096);Kn.a.setApiKey(V),Kn.a.enableDebug();var Jn={position:"absolute",width:"100%",height:"100%"},Zn=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onMarkerDragEnd=function(e){console.log("----------------test this today ",e);var t=e.latLng.lat(),n=e.latLng.lng();a.props.onDragendEventCheck(t,n)},a.addMarkerOnFirstLoad=function(e,t){var n,l,r,s,o,c,i;return z.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return n=a.map,l=a.props.google,l.maps,r=new l.maps.LatLng(e,t),m.next=6,z.a.awrap(a.getAddress(r));case 6:s=m.sent,o=s.data.results[0].formatted_address,(c=new l.maps.Marker({map:n,position:r,title:o,draggable:!0})).addListener("dragend",a.onMarkerDragEnd),(i=a.state.markerArray).push(c),a.setState({markerArray:i});case 13:case"end":return m.stop()}}))},a.getAddress=function(e){var t,a;return z.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.lat(),a=e.lng(),"AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI",n.abrupt("return",B.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+a+"&key=AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI").then((function(e){return e||"Address not found"})));case 4:case"end":return n.stop()}}))},a.removeMarker=function(e){for(var t=0;t<e.length;t++)e[t].setMap(null),console.log("check the remove marker ",t)};var n=a.props,l=n.lat,r=n.lng;return a.autocomplete=null,a.state={currentLocation:{lat:l,lng:r,address:""},markerArray:[]},a.setAutocomplete=a.setAutocomplete.bind(Object(Y.a)(a)),a.onMarkerDragEnd=a.onMarkerDragEnd.bind(Object(Y.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.currentLocation,t=e.lat,a=e.lng;console.log(t,"=====",a),console.log("thisss",this.state.currentLocation),this.loadMap(parseFloat(t),parseFloat(a)),this.props.locationOnBroadCastList&&""!=this.props.locationOnBroadCastList||(this.recenterMap(t,a),this.initPlaceAPI())}},{key:"componentDidUpdate",value:function(e){var t,a=this;if((null===e||void 0===e?void 0:e.lat)!==(null===(t=this.props)||void 0===t?void 0:t.lat)){this.loadMap(this.props.lat,this.props.lng),this.recenterMap(this.props.lat,this.props.lng),this.setState({currentLocation:{lat:this.props.lat,lng:this.props.lng,address:""}});B.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+this.props.lat+","+this.props.lng+"&key=AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI").then((function(e){a.setState({currentLocation:Object(o.a)({},a.state.currentLocation,{address:e})})})),this.loadMap(this.props.lat,this.props.lng),this.recenterMap(this.props.lat,this.props.lng)}}},{key:"loadMap",value:function(e,t){var a=this;if(this.props&&this.props.google){var n=this.props.google.maps,l=this.refs.map,r=s.a.findDOMNode(l),o=this.props.zoom;console.log("in load map",e,"===",t);var c=new n.LatLng(e,t),i=Object.assign({},{center:c,zoom:o});this.map=new n.Map(r,i),this.addMarkerOnFirstLoad(e,t),this.map.addListener("click",(function(e){B.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.latLng.lat()+","+e.latLng.lng()+"&key=AIzaSyBtKD5VNiKZxh9cUkN0l0QmKp50OF5BGSI").then((function(t){a.setState({currentLocation:{lat:e.latLng.lat(),lng:e.latLng.lng(),address:t}}),a.props.getMapLocation(e.latLng.lat(),e.latLng.lng(),t)}))}))}}},{key:"recenterMap",value:function(e,t){var a=this.map,n=this.props.google.maps;if(a){var l=new n.LatLng(e,t);a.panTo(l)}}},{key:"initPlaceAPI",value:function(){var e=this.refs.placeInputRef,t=s.a.findDOMNode(e);this.map;console.log("----initPlaceAPI----- first load-----"),this.autocomplete=new google.maps.places.Autocomplete(t,{fields:["formatted_address","address_components","geometry","icon","name"]}),this.autocomplete.addListener("place_changed",this.setAutocomplete)}},{key:"setAutocomplete",value:function(){var e,t,a,n,l;return z.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=this.map,t=this.state.markerArray,console.log("-----markerArrayData----",t),this.removeMarker(t),(a=this.autocomplete.getPlace()).geometry&&a.geometry.location){r.next=8;break}return window.alert("No details available for input: '"+a.name+"'"),r.abrupt("return");case 8:(n=new google.maps.Marker({map:e,position:a.geometry.location,title:a.formatted_address,draggable:!0})).addListener("dragend",this.onMarkerDragEnd),t.push(n),this.setState({markerArray:t}),l=new google.maps.InfoWindow,n.addListener("click",(function(){l.setContent(a.name),l.open(e,n)})),a.geometry.viewport?e.fitBounds(a.geometry.viewport):(e.setCenter(a.geometry.location),e.setZoom(17)),this.setState({currentLocation:{lat:a.geometry.location.lat(),lng:a.geometry.location.lng(),address:a.formatted_address}}),this.props.getMapLocation(a.geometry.location.lat(),a.geometry.location.lng(),a.formatted_address);case 17:case"end":return r.stop()}}),null,this)}},{key:"renderChildren",value:function(){var e=this,t=this.props.children;if(t)return l.a.Children.map(t,(function(t){if(t)return l.a.cloneElement(t,{map:e.map,google:e.props.google,mapCenter:e.state.currentLocation})}))}},{key:"render",value:function(){var e=Object.assign({},Jn);return l.a.createElement("div",{className:"search-wrapper"},!this.props.locationOnBroadCastList&&l.a.createElement(C.a,{span:24,className:"mb-2 search-location"},l.a.createElement("span",{className:"ant-input-group-wrapper ant-input-search"},l.a.createElement("span",{className:"ant-input-wrapper ant-input-group"},l.a.createElement("input",{type:"text",ref:"placeInputRef",className:"ant-input",placeholder:"Enter your address"}),l.a.createElement("span",{className:"ant-input-group-addon"}),l.a.createElement(Wn.a,null)))),l.a.createElement("div",{style:e,ref:"map"},"Loading map..."),this.renderChildren())}}]),t}(l.a.Component),$n=Zn;Zn.defaultProps={zoom:14},Kn.a.setApiKey(V),Kn.a.enableDebug();var Xn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onMarkerClick=function(e,t,n){console.log("----onMarkerClick---",e,"--marker---",t),a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0}),a.props.getCurrenLocationName(e.name)},a.onDragendEventCheckCalled=function(e,t){console.log("onDragendEventCheckCalled called ---",e,t),Kn.a.fromLatLng(e,t).then((function(n){var l=n.results[0].formatted_address;a.setState({selectedPlace:l,activeMarker:"",showingInfoWindow:!0}),a.props.getCurrenLocationName(l),a.props.getMapLocation(e,t,l),console.log("Test this to check now",l,e,t)}))},a.onClose=function(){a.setState({selectedPlace:{},activeMarker:{},showingInfoWindow:!1})},a.state={currentPosition:{lat:18.60932,lng:73.769691},showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(console.log("this.props.locationOnBroadCastList    --",this.props.locationOnBroadCastList,"---latitude--",this.props.latitude,this.props.longitude),this.props.locationOnBroadCastList){var t={lat:this.props.latitude,lng:this.props.longitude};this.setState({currentPosition:t})}else navigator.geolocation.getCurrentPosition((function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};console.log("currentPosition",a),e.setState({currentPosition:a}),e.onDragendEventCheckCalled(t.coords.latitude,t.coords.longitude)}))}},{key:"onMarkerDragEnd",value:function(e,t,a){var n=this,l=a.latLng.lat(),r=a.latLng.lng();Kn.a.fromLatLng(l,r).then((function(e){var a=e.results[0].formatted_address;n.setState({selectedPlace:a,activeMarker:t,showingInfoWindow:!0}),n.props.getCurrenLocationName(a),n.props.getMapLocation(l,r,a),console.log("Test this to check now",a,l,r)}))}},{key:"render",value:function(){return l.a.createElement($n,{locationOnBroadCastList:this.props.locationOnBroadCastList,lat:this.props.latitude?this.props.latitude:this.state.currentPosition.lat,lng:this.props.longitude?this.props.longitude:this.state.currentPosition.lng,google:this.props.google,getMapLocation:this.props.getMapLocation,viaModal:this.props.viaModal,onDragendEventCheck:this.onDragendEventCheckCalled},this.state.showingInfoWindow&&l.a.createElement(Qn.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onCloseClick:this.onClose},l.a.createElement("div",null,l.a.createElement("h4",null,this.state.selectedPlace.name))))}}]),t}(l.a.Component),el=Object(Qn.GoogleApiWrapper)({apiKey:V})(Xn),tl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!!a.props.viaModal,latitude:"",longitude:"",location:"",locationOnBroadCastList:!1},a.showModal=function(){a.setState({visible:!0,latitude:a.props.viaModal?a.props.latitude:"",longitude:a.props.viaModal?a.props.longitude:"",locationName:""}),a.props.isEdit&&a.setState({latitude:a.props.latitude,longitude:a.props.longitude,location:a.props.address})},a.handleOk=function(){a.setState({visible:!1}),a.props.viaModal?a.props.setShowMap(!1):a.props.setLocation(a.state.latitude,a.state.longitude,a.state.locationName)},a.getMapLocation=function(e,t,n){var l,r=null===(l=n.data)||void 0===l?void 0:l.results[0].formatted_address;console.log("-----getMapLocation----called",e,t,n),a.setState({latitude:e,longitude:t,locationName:r||n})},a.getCurrenLocationName=function(e){a.setState({locationName:e})},a.handleCancel=function(){a.setState({visible:!1}),a.props.viaModal&&a.props.setShowMap(!1)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.locationOnBroadCastList?this.setState({locationOnBroadCastList:this.props.locationOnBroadCastList}):this.setState({locationOnBroadCastList:!1})}},{key:"render",value:function(){var e,t;return l.a.createElement(l.a.Fragment,null,this.props.viaModal?null:l.a.createElement("div",{className:"w-25 w-md-100"}," ",l.a.createElement(Ie.a,{type:"link",className:"upload-list link pl-0",onClick:this.showModal,disabled:(null===(e=this.props.documents)||void 0===e?void 0:e.length)>0||(null===(t=this.props.images)||void 0===t?void 0:t.length)>0||this.props.disabledLocation},l.a.createElement("span",{className:"icon icon-location"}),this.state.locationOnBroadCastList?this.state.locationOnBroadCastList:this.props.viaMessages?"Add Location":"Location"),l.a.createElement(Aa.a,{placement:"top",title:this.props.locationName},l.a.createElement("div",{className:"text-truncate w-75"}," ",this.state.locationOnBroadCastList?"":this.props.locationName))),l.a.createElement(Ut.a,{title:this.state.locationOnBroadCastList?"Selected Location":this.props.viaModal?"":"Select Location",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:800,okButtonProps:{children:"Custom OK",style:{display:this.state.locationOnBroadCastList?"none":"block"}},cancelButtonProps:this.props.viaModal?{style:{display:this.state.locationOnBroadCastList?"none":"block"}}:{children:"Custom cancel",className:"ant-btn-secondary"},okText:this.props.viaModal?"Close":"Add",cancelText:"Cancel"},l.a.createElement(S.a,{className:"py-4 map-container"},l.a.createElement(el,{getMapLocation:this.getMapLocation,getCurrenLocationName:this.getCurrenLocationName,longitude:this.props.longitude,latitude:this.props.latitude,viaModal:this.props.viaModal,locationOnBroadCastList:this.state.locationOnBroadCastList?this.state.locationOnBroadCastList.trim():""}))))}}]),t}(n.Component),al=a(489),nl=a.n(al),ll=function(e){var t=e.state,a=e.props,n=e.showImageModal,r=e.showDocumentModal,s=e.handleOk;return l.a.createElement("div",null,l.a.createElement("ul",{className:"mb-0 px-2"},l.a.createElement("li",null,l.a.createElement(tl,{setLocation:a.setLocation,documents:a.documentFile.document,images:a.imageFile.image,viaMessages:!0})),l.a.createElement("li",null,l.a.createElement(Ie.a,{type:"link",className:"link pl-0",disabled:a.documentFile.document.length>0||""!==a.mapLocation.longitude,onClick:function(){return n()}},l.a.createElement("span",{className:"icon icon-image"}),"Add Image"),l.a.createElement(Ut.a,{visible:t.showImageModal,centered:!0,onOk:function(e){return s(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Cancel"},0===a.message.length?l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:[],onChange:function(e){return a.handleUploadImage(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0"},"Add Image")):l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:a.imageFile.image,onChange:function(e){return a.handleUploadImage(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0"},"Add Image")))),l.a.createElement("li",null,l.a.createElement(Ie.a,{type:"link",className:"link pl-0",disabled:a.imageFile.image.length>0||""!==a.mapLocation.longitude,onClick:function(){return r()}},l.a.createElement("span",{className:"icon icon-doc"}),"Add Document"),l.a.createElement(Ut.a,{visible:t.showDocumentModal,centered:!0,onOk:function(e){return s(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Cancel"},0===a.message.length?l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:[],onChange:function(e){return a.handleUploadDocument(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0"},"Add Document")):l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:a.documentFile.document,onChange:function(e){return a.handleUploadDocument(e)},beforeUpload:function(e){return a.handleBeforeUpload(e)},onPreview:function(e){return a.handlePreview(e)},onRemove:function(){return a.handleOnRemove()},multiple:!0,className:"upload-list-inline c-upload",accept:"application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0"},"Add Document"))))))},rl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={showDocumentModal:!1,showImageModal:!1},a.showDocumentModal=function(){a.setState({showDocumentModal:!a.state.showDocumentModal})},a.showImageModal=function(){a.setState({showImageModal:!a.state.showImageModal})},a.handleOk=function(){a.setState({showDocumentModal:!1,showImageModal:!1})},a.handleCancel=function(){a.setState({showDocumentModal:!1,showImageModal:!1})},a.showHidePopover=function(){a.props.openAttachmentSection()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&(e.documentFile.document.length>0||e.imageFile.image.length>0)&&this.handleOk()}},{key:"render",value:function(){var e={state:this.state,props:this.props,showDocumentModal:this.showDocumentModal,showImageModal:this.showImageModal,handleOk:this.handleOk,handleCancel:this.handleCancel};return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:ll(e),trigger:"click",visible:this.props.showAttachmentSection,onVisibleChange:this.props.openAttachmentSection},l.a.createElement("span",{className:"add-icon-wrapper"},l.a.createElement("img",{src:nl.a,alt:"add attachment",className:"pr-4"}))))}}]),t}(l.a.Component),sl=a(271),ol=a.n(sl),cl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e}),a.props.setHidePopup(!1)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.hidePopup&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(Ie.a,{onClick:function(){return e.openModal()},disabled:0===e.convoMessages.length},"Clear Conversation")),l.a.createElement("li",null,l.a.createElement(Ie.a,{onClick:function(){return e.showDeleteMessagesCheckboxes()},disabled:0===e.convoMessages.length},"Delete Message"))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"switch-ico ico-grid-dots pt-2 pl-2"},l.a.createElement("img",{src:qt.a,alt:"DotIcon"}))));var e}}]),t}(l.a.Component),il=function(e){var t=e.convoMessages,a=[],n=e.checkedMessages.some((function(e){return!(null===e||void 0===e?void 0:e.is_responder_message)})),r=e.checkedMessages.some((function(t){return(null===t||void 0===t?void 0:t.created_by)!==(null===e||void 0===e?void 0:e.userID)})),s=(e.hotline?e.checkedMessages.sort((function(e,t){return(null===e||void 0===e?void 0:e.user_hotline_conversation_id)-(null===t||void 0===t?void 0:t.user_hotline_conversation_id)})):e.checkedMessages.sort((function(e,t){return(null===e||void 0===e?void 0:e.user_openline_conversation_id)-(null===t||void 0===t?void 0:t.user_openline_conversation_id)})))[0];if(s){if(e.hotline){var o=!0,c=!1,i=void 0;try{for(var m,u=e.convoMessages[Symbol.iterator]();!(o=(m=u.next()).done);o=!0){var d,p,g=m.value;if((null===g||void 0===g?void 0:null===(d=g.user_hotline_conversation_id)||void 0===d?void 0:d.toString())!==(null===s||void 0===s?void 0:s.user_hotline_conversation_id.toString())&&(e.convoMessages.indexOf(g),a.push(g)),(null===g||void 0===g?void 0:null===(p=g.user_hotline_conversation_id)||void 0===p?void 0:p.toString())===(null===s||void 0===s?void 0:s.user_hotline_conversation_id.toString()))break}}catch(N){c=!0,i=N}finally{try{o||null==u.return||u.return()}finally{if(c)throw i}}a.forEach((function(e){t=t.filter((function(t){return t.user_hotline_conversation_id!==e.user_hotline_conversation_id}))}))}else{var h=!0,f=!1,E=void 0;try{for(var v,b=e.convoMessages[Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var y,_,O=v.value;if((null===O||void 0===O?void 0:null===(y=O.user_openline_conversation_id)||void 0===y?void 0:y.toString())!==(null===s||void 0===s?void 0:s.user_openline_conversation_id.toString())&&(e.convoMessages.indexOf(O),a.push(O)),(null===O||void 0===O?void 0:null===(_=O.user_openline_conversation_id)||void 0===_?void 0:_.toString())===(null===s||void 0===s?void 0:s.user_openline_conversation_id.toString()))break}}catch(N){f=!0,E=N}finally{try{h||null==b.return||b.return()}finally{if(f)throw E}}a.forEach((function(e){t=t.filter((function(t){return t.user_openline_conversation_id!==e.user_openline_conversation_id}))}))}t.forEach((function(e){e.is_responder_message||(n=!0)}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,n?l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{onClick:function(){return e.deleteMessage("deleteForMe",e.messagesIds)},disabled:0===e.messagesIds.length},"Delete For Me")))):r?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{onClick:function(){return e.deleteMessage("deleteForMe",e.messagesIds)},disabled:0===e.messagesIds.length},"Delete For Me")):l.a.createElement("ul",null,l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{onClick:function(){return e.deleteMessage("deleteForMe",e.messagesIds)},disabled:0===e.messagesIds.length},"Delete For Me")))),Object.keys(e.timeExpired).length>0&&!Object.values(e.timeExpired).includes(!0)?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{onClick:function(){return e.deleteMessage("deleteForEveryone",e.messagesIds)},disabled:0===e.messagesIds.length},"Delete For Everyone")))):null)))},ml=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e}),a.props.setHideDeleteMessagePopup(!1)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.deleteMessagePopup&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:il(this.props),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{id:"deleteConversation",className:"switch-ico icon-delete ico-grid-dots pt-2 pl-1 font-18"})))}}]),t}(l.a.Component),ul=a(41),dl=N.a.TextArea,pl=zt.a.Option,gl=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],hl=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],fl=function(e){var t,a,r=e.conversation,s=e.urgencyLevel,i=e.status,m=e.onChangeUrgencyLevel,u=e.onChangeStatus,d=e.searchString,p=e.newState,g=e.setCounter,h=e.socket,f=e.chatdiv,E=ht.a.useForm(),v=Object(c.a)(E,1)[0],y="";if(b("user")){var _,O=JSON.parse(b("user"));y=parseInt(ul.AES.decrypt(null===O||void 0===O?void 0:null===(_=O.user_details)||void 0===_?void 0:_.org_user_id,"anonymoose").toString(ul.enc.Utf8))}var N=Object(n.useState)([]),j=Object(c.a)(N,2),w=j[0],k=j[1],x=Object(n.useState)(!1),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(n.useState)({lat:0,lng:0}),M=Object(c.a)(Y,2),U=M[0],F=M[1],P=Object(n.useState)(""),R=Object(c.a)(P,2),L=R[0],H=R[1],V=Object(n.useState)(!1),Q=Object(c.a)(V,2),G=Q[0],K=Q[1],W=Object(n.useState)({}),J=Object(c.a)(W,2),Z=J[0],$=J[1],X=Object(n.useState)(!1),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({}),le=Object(c.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),ce=Object(c.a)(oe,2),ie=ce[0],me=ce[1],ue=Object(n.useState)({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),de=Object(c.a)(ue,2),pe=de[0],ge=de[1],he=Object(n.useState)(""),fe=Object(c.a)(he,2),Ee=fe[0],ve=fe[1],be=Object(n.useState)({noteDivClicked:!1,myClass:""}),ye=Object(c.a)(be,2),_e=ye[0],Oe=ye[1],Ne=Object(n.useState)(!0),je=Object(c.a)(Ne,2),we=(je[0],je[1]),Se=Object(n.useState)(!1),Ce=Object(c.a)(Se,2),De=Ce[0],ke=Ce[1],xe=Object(n.useState)([]),Ie=Object(c.a)(xe,2),Te=Ie[0],Ae=Ie[1],Ye=Object(n.useState)([]),Ue=Object(c.a)(Ye,2),Pe=Ue[0],Re=Ue[1],ze=Object(n.useState)({latitude:"",longitude:"",address:""}),He=Object(c.a)(ze,2),Be=He[0],qe=He[1],Ve=Object(n.useState)({activityDivClicked:!1,myClass:""}),Qe=Object(c.a)(Ve,2),Ge=Qe[0],Ke=Qe[1],We=Object(n.useState)({assigneDivClicked:!1,myClass:""}),Je=Object(c.a)(We,2),Ze=Je[0],$e=Je[1],Xe=Object(n.useState)(!1),et=Object(c.a)(Xe,2),tt=et[0],at=et[1],lt=Object(n.useState)(!1),rt=Object(c.a)(lt,2),st=rt[0],ot=rt[1],it=Object(n.useState)(""),mt=Object(c.a)(it,2),pt=mt[0],gt=mt[1],ft=Object(n.useState)(!1),Et=Object(c.a)(ft,2),vt=Et[0],yt=Et[1],_t=Object(n.useState)(!1),Ot=Object(c.a)(_t,2),Nt=Ot[0],jt=Ot[1],wt=Object(n.useState)(!1),St=Object(c.a)(wt,2),Ct=St[0],Dt=St[1];Object(n.useEffect)((function(){gt(d)}),[d,r.conversation_id]),Object(n.useEffect)((function(){kt();var e=document.getElementById("activityId"),t=document.getElementById("noteId"),a=document.getElementById("assigneId");""!=Ze.myClass&&($e({myClass:"",assigneDivClicked:!1}),a.classList.remove("selected")),""!=_e.myClass&&(Oe({myClass:"",noteDivClicked:!1}),t.classList.remove("selected")),""!=Ge.myClass&&(Ke({myClass:"",activityDivClicked:!1}),e.classList.remove("selected"));var n=void 0!==Z[r.conversation_id]?Z[r.conversation_id]:"";H(n),Ae([]),Re([]),at(!1),se({})}),[r.conversation_id]),Object(n.useEffect)((function(){Bt()}),[p]),Object(n.useEffect)((function(){if(w.length>0)if(pt.length>1){var e=0;w.map((function(t){return t.message.includes("</mark>")&&(e+=1),e}));var t=document.getElementsByTagName("mark")[e-1];t&&t.scrollIntoView(!1,{block:"end"})}else{var a=document.getElementsByClassName("hotline_message")[document.getElementsByClassName("hotline_message").length-1];a&&a.scrollIntoView(!1,{block:"end"})}}),[w,d]);var kt=function(){var e,t,a,n,l,s;return z.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:yt(!0),e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n="",n=r.conversation_id.includes("<mark")?null===(l=r.conversation_id)||void 0===l?void 0:l.toString().replace(/(<([^>]+)>)/gi,""):r.conversation_id,s={conversation_id:n,user_id:parseInt(ul.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(ul.enc.Utf8))},B.a.post(q+"hotlineConvoMessages/",s,a).then((function(e){k(e.data),yt(!1)}));case 8:case"end":return o.stop()}}))},xt=function(e,t,a){var n={latitude:e,longitude:t,address:a};H("$$$L#o#c#a#t#i#o#n$$$"),qe(n)},It=function(e){"removed"===e.file.status&&we(!0);var t=e.fileList.slice(-5);At(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),ve(e.file.name),"removed"!==e.file.status&&H("$$$D#o#c#u#m#e#n#t$$$"),0===t.length&&H(""),me(Object(o.a)({},ie,{document:t}))},Tt=function(e){"removed"===e.file.status&&we(!0);var t=e.fileList.slice(-5);At(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),ve(e.file.name),"removed"!==e.file.status&&H("$$$I#m#a#g#e$$$"),0===t.length&&H(""),ge(Object(o.a)({},pe,{image:t}))},At=function(e){var t=e.includes("image");ae(!!t)},Yt=function(e){return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.awrap(Mt(e.originFileObj));case 2:e.preview=t.sent,te?ge(Object(o.a)({},pe,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})):me(Object(o.a)({},ie,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},Mt=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},Pt=function(){te?ge(Object(o.a)({},pe,{imageValidation:!0})):me(Object(o.a)({},ie,{documentValidation:!0}))},Rt=function(e){var t=e.name.includes(".xls"),a=e.name.includes(".pptx"),n=e.name.includes(".doc"),l=e.name.includes(".csv"),r="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||t||a||n||l;r?we(!0):(we(!1),L.error("".concat(e.name," is not a supported format file type.")));var s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,o="application/pdf"===e.type||t||a||n||l,c=e.size/1024/1024<5,i=e.size/1024/1024<10;return s&&(!c&&s?(we(!1),L.error("Image must smaller than 5MB!")):we(!0)),o&&(!i&&o?(we(!1),L.error("Document must smaller than 10MB!")):we(!0)),r&&c||i},Lt=function(){var e,t=Me(),a="";r.conversation_id.includes("<mark")?a=null===(e=r.conversation_id)||void 0===e?void 0:e.toString().replace(/(<([^>]+)>)/gi,""):a=r.conversation_id;var n=JSON.parse(b("user"));if(L.length>0){var l,s,c,i,m,d={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},p=[],f={};if((null===(l=ie.document)||void 0===l?void 0:l.length)>0)null===(m=ie.document)||void 0===m||m.map((function(e){f={name:Ee,attach:e.base64},p.push(f)}));else if((null===(s=pe.image)||void 0===s?void 0:s.length)>0){var E;null===(E=pe.image)||void 0===E||E.map((function(e){f={name:Ee,attach:e.base64},p.push(f)}))}else p.push({name:"",attach:""},{name:"",attach:""});var y={user_id:parseInt(ul.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(ul.enc.Utf8)),hotline_id:r.hotline_id,conversation_id:a,message:L,created_by:parseInt(ul.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(ul.enc.Utf8)),attachment_type:(null===(c=ie.document)||void 0===c?void 0:c.length)>0?"document":(null===(i=pe.image)||void 0===i?void 0:i.length)>0?"image":""!==Be.latitude?"location":"",latitude:Be.latitude,longitude:Be.longitude,address:Be.address,attachments:p};B.a.post(q+"receiveHotlineMessage/",y,d).then((function(e){201===e.status&&(1!==e.data.status_id&&3!==e.data.status_id||u(2,a),(ie.document.length>0||pe.image.length>0||""!==Be.latitude)&&(me({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),ge({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),qe({latitude:"",longitude:"",address:""})),gt(""),g(e),H(""),$(Object(o.a)({},Z,Object(ut.a)({},a,""))),h.send(JSON.stringify(e.data)),kt())}))}v.setFieldsValue({chatArea:""})},Ht=function(e,t){F({lat:e,lng:t}),A(!0)},Bt=function(){k((function(e){var t,a,n=[];if((null===(t=p.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))){var l=e.filter((function(e){var t,a;return(null===(t=e.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=p.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))}));if(p.message.includes("This message was deleted")){var s=p.message.substring(p.message.lastIndexOf(".")+1,p.message.length).split(",");l=l.filter((function(e){return!s.includes(e.user_hotline_conversation_id.toString())})),n=[].concat(Object(dt.a)(l),[p])}else n=[].concat(Object(dt.a)(l),[p])}else n=Object(dt.a)(e);return n}))},qt=function(e){var t=document.getElementById("noteId");vn.isMobile&&ot(!0),""!=Ge.myClass&&Ke({myClass:"",activityDivClicked:!1}),""!=Ze.myClass&&$e({myClass:"",assigneDivClicked:!1}),""===_e.myClass?(t.classList.add("selected"),Oe({myClass:"rgt-panel",noteDivClicked:!0})):(t.classList.remove("selected"),Oe({myClass:"",noteDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},Vt=function(e){var t=document.getElementById("activityId");vn.isMobile&&ot(!0),""!=_e.myClass&&Oe({myClass:"",noteDivClicked:!1}),""!=Ze.myClass&&$e({myClass:"",assigneDivClicked:!1}),""===Ge.myClass?(t.classList.add("selected"),Ke({myClass:"rgt-panel",activityDivClicked:!0})):(t.classList.remove("selected"),Ke({myClass:"",activityDivClicked:!1})),document.getElementById("noteId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},Qt=function(e){var t=document.getElementById("assigneId");vn.isMobile&&ot(!0),""!=_e.myClass&&Oe({myClass:"",noteDivClicked:!1}),""!=Ge.myClass&&Ke({myClass:"",activityDivClicked:!1}),""===Ze.myClass?(t.classList.add("selected"),$e({myClass:"rgt-panel",assigneDivClicked:!0})):(t.classList.remove("selected"),$e({myClass:"",assigneDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("noteId").classList.remove("selected")},Gt=function(){var e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={user_id:parseInt(ul.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(ul.enc.Utf8)),hotline_conversation_id:r.conversation_id};B.a.post(q+"clearHotlineConversation/",n,a).then((function(){k([]),Ae([]),Re([])}))},Kt=function(e){return{__html:e}};if(d){var Wt,Jt,Zt,$t,Xt;if(r.responder_conversation_name.includes("</mark>"))r.responder_conversation_name=null===(Jt=r.responder_conversation_name)||void 0===Jt?void 0:Jt.toString().replace(/(<([^>]+)>)/gi,""),r.responder_conversation_name=r.responder_conversation_name.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(r.hotline_name.includes("</mark>"))r.hotline_name=null===(Zt=r.hotline_name)||void 0===Zt?void 0:Zt.toString().replace(/(<([^>]+)>)/gi,""),r.hotline_name=r.hotline_name.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(null===(Wt=r.conversation_id)||void 0===Wt?void 0:Wt.toString().includes("</mark>"))r.conversation_id=null===($t=r.conversation_id)||void 0===$t?void 0:$t.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(Xt=r.conversation_id)||void 0===Xt?void 0:Xt.toString().replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));w.map((function(e){var t;e.message.includes("</mark>")?(e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),e.message=e.message.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}))):(e.message=e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),e.message=e.message.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})));return Object(o.a)({},e,{message:e.message})}))}else{var ea,ta,aa;r.responder_conversation_name=null===(ea=r.responder_conversation_name)||void 0===ea?void 0:ea.toString().replace(/(<([^>]+)>)/gi,""),r.hotline_name=null===(ta=r.hotline_name)||void 0===ta?void 0:ta.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(aa=r.conversation_id)||void 0===aa?void 0:aa.toString().replace(/(<([^>]+)>)/gi,""),w.map((function(e){var t;return e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(?:\r\n|\r|\n)/g,"<br />"),Object(o.a)({},e,{message:e.message})}))}var na=w.length-r.unread_messages_count;return l.a.createElement(C.a,{span:24,lg:18,className:f?"chat-section d-lg-flex":"chat-section d-lg-flex d-none","data-test":"messages"},l.a.createElement(C.a,{span:24,className:"h-100"},l.a.createElement(S.a,{className:"top-filter-pan p-2 p-lg-4 d-flex align-items-center"},l.a.createElement(C.a,{span:24,lg:10},l.a.createElement("div",{className:""},l.a.createElement("h6",{dangerouslySetInnerHTML:Kt(r.responder_conversation_name)}),l.a.createElement("p",{style:{margin:0,display:"inline",float:"left"},dangerouslySetInnerHTML:Kt(r.hotline_name)}),"\xa0|\xa0",l.a.createElement("p",{style:{margin:0,display:"inline",float:"center"},dangerouslySetInnerHTML:Kt(r.conversation_id)}))),l.a.createElement(C.a,{span:24,lg:14},l.a.createElement("div",{className:"d-flex justify-content-start justify-content-lg-end pt-3 pt-sm-1 pt-md-0"},l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Urgency level"),l.a.createElement(zt.a,{bordered:!1,value:s,onChange:function(e){var t;return m(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},hl.map((function(e){return l.a.createElement(pl,{value:e.id},e.name)})))),l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,Le),l.a.createElement(zt.a,{bordered:!1,value:i,onChange:function(e){var t;return u(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},gl.map((function(e){return 2!==i&&3!==i||1!==e.id?l.a.createElement(pl,{value:e.id},e.name):l.a.createElement(pl,{value:e.id,disabled:!0},e.name)})))),l.a.createElement("div",{className:"icon-row d-flex align-items-center"},l.a.createElement(C.a,{span:8},l.a.createElement("span",{id:"noteId",className:"icon icon-create",onClick:function(e){return qt()}})),l.a.createElement(C.a,{span:8},l.a.createElement("span",{id:"activityId",className:"icon icon-activity",onClick:function(e){return Vt()}})),l.a.createElement(C.a,{span:8},l.a.createElement("span",{id:"assigneId",className:"icon icon-assign",onClick:function(e){return Qt()}}))),Pe.length>0&&l.a.createElement(ml,{deleteMessage:function(e,t){var a=Me(),n=JSON.parse(b("user")),l={headers:{Authorization:a,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={user_hotline_message_id:t,type:"deleteForMe"===e?"delete_by_user_id":"delete_for_all",user_id:parseInt(ul.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(ul.enc.Utf8))};B.a.post(q+"deleteHotlineMessage/",s,l).then((function(){if(kt(),jt(!0),Ae([]),Re([]),at(!1),"deleteForMe"!==e){var a={user_id:parseInt(ul.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(ul.enc.Utf8)),hotline_id:r.hotline_id,conversation_id:r.conversation_id,message:"This message was deleted.".concat(t),created_by:parseInt(ul.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(ul.enc.Utf8)),address:"",attachment_type:"",latitude:"",longitude:"",attachments:[{name:"",attach:""},{name:"",attach:""}]};B.a.post(q+"receiveHotlineMessage/",a,l).then((function(e){201===e.status&&h.send(JSON.stringify(e.data))}))}}))},setHideDeleteMessagePopup:Dt,deleteMessagePopup:Ct,userID:y,convoMessages:w,timeExpired:re,showDeleteCheckboxes:tt,messagesIds:Te,checkedMessages:Pe,hideDeleteMessagesCheckboxes:function(){at(!1),jt(!0)},hotline:!0}),tt&&l.a.createElement(xn.a,{onClick:function(){return Ae([]),Re([]),at(!1),void se({})}}),0===Pe.length&&l.a.createElement(cl,{showDeleteMessagesCheckboxes:function(){at(!0),jt(!0)},openModal:function(){ke(!0)},setHidePopup:jt,hidePopup:Nt,convoMessages:w,showDeleteCheckboxes:tt})))),l.a.createElement(D.a,{spinning:vt,size:"medium"},l.a.createElement(S.a,{className:"row-hgt"},l.a.createElement("div",{className:_e.noteDivClicked||Ge.activityDivClicked||Ze.assigneDivClicked?st?"w-75 d-none":"w-75":"w-100"},l.a.createElement("div",{className:"msg_main"},l.a.createElement(Ut.a,{title:"Clear Conversation History",visible:De,onOk:function(){ke(!1),Gt()},onCancel:function(){ke(!1)},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Clear",cancelText:"Cancel"},l.a.createElement("p",null,nt)),l.a.createElement(Ft.Scrollbars,{autoHeightMax:450,universal:!0},l.a.createElement(C.a,{span:24,className:"msg-history p-4"},w.length>0&&w.map((function(e,t){var a,n;return l.a.createElement("div",null,na===t?l.a.createElement(ct.a,{plain:!0},"Last Read"):null,e.message.includes("Urgency Level has been changed to")||e.message.includes("Status has been changed to")?l.a.createElement(ct.a,{plain:!0},e.message):null,e.message.includes("Urgency Level has been changed to")||e.message.includes("Status has been changed to")?null:l.a.createElement("div",{className:e.is_responder_message?"outgoing-msg hotline_message mb-3":"incoming-msg hotline_message mb-2"},l.a.createElement("div",{className:e.is_responder_message?"sent-msg":"received-msg"},l.a.createElement("div",{className:"d-flex align-items-center"},tt&&!e.message.includes("This message was deleted")&&l.a.createElement(l.a.Fragment,null,l.a.createElement(bt.a,{className:"font-13 pr-2",onChange:function(t){var a;return function(e,t,a){if(e.target.checked){if(Ae([].concat(Object(dt.a)(Te),[t])),Re([].concat(Object(dt.a)(Pe),[a])),a.is_responder_message){var n=new Date-new Date(a.created_on);if(n>48e4)se(Object(o.a)({},re,Object(ut.a)({},t,!0)));else{var l=48e4-n;se(Object(o.a)({},re,Object(ut.a)({},t,!1))),setTimeout((function(){se(Object(o.a)({},re,Object(ut.a)({},t,!0)))}),l)}}}else Ae(Te.filter((function(e){return e!==t}))),Re(Pe.filter((function(e){return e.user_hotline_conversation_id.toString()!==t}))),delete re[t]}(t,null===(a=e.user_hotline_conversation_id)||void 0===a?void 0:a.toString(),e)}})),(null===(a=e.img_attach.url)||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(Dn.a,{width:100,src:e.img_attach.url,className:"pr-3",placeholder:e.img_attach.name,alt:e.img_attach.name}),e.img_attach.name):(null===(n=e.doc_attach.url)||void 0===n?void 0:n.length)>0?l.a.createElement("a",{href:e.doc_attach.url,target:"_blank"},"pdf"===e.doc_attach.url.substring(e.doc_attach.url.length-3)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("img",{src:ol.a}),e.doc_attach.name):l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-doc"}),e.doc_attach.name)):null!==e.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Ht(e.latitude,e.longitude)}},e.address),T?l.a.createElement(tl,{setLocation:xt,viaMessages:!0,viaModal:!0,setShowMap:A,latitude:U.lat,longitude:U.lng}):null):e.message.includes("This message was deleted")?l.a.createElement("i",null,e.message.substring(0,e.message.lastIndexOf("."))):l.a.createElement("p",{ellipsis:!0,dangerouslySetInnerHTML:Kt(e.message)})),l.a.createElement("span",{className:"time-date"}," ",Fe()(e.created_on).isSame(Fe()(),"day")?Fe()(e.created_on).utc().local().format("hh:mm A"):Fe()(e.created_on).utc().local().format("MM:DD:YY | hh:mm A "),e.is_responder_message&&" | ".concat(e.first_name," ").concat(e.last_name)))))}))))),l.a.createElement(C.a,{span:24,className:_e.noteDivClicked||Ge.activityDivClicked||Ze.assigneDivClicked?"send-msg w-75":"send-msg w-100"},l.a.createElement("div",{className:"type-msg"},3===r.status_id||6===r.hotline_status_id||8===r.hotline_status_id?l.a.createElement(l.a.Fragment,null," "):l.a.createElement(rl,{openAttachmentSection:function(){K(!G)},closeAttachmentSection:function(){K(!1)},showAttachmentSection:G,setLocation:xt,handleUploadImage:Tt,handleUploadDocument:It,handleBeforeUpload:Rt,handleOnRemove:Pt,handlePreview:Yt,documentFile:ie,imageFile:pe,message:L,mapLocation:Be}),l.a.createElement(ht.a,{className:"input-md w-100",name:"validate-other",form:v},ie.document.length>0?l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:ie.document,onPreview:function(e){return Yt(e)},onRemove:function(){return Pt()},onChange:function(e){return It(e)},beforeUpload:function(e){return Rt(e)}}):pe.image.length>0?l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:pe.image,onPreview:function(e){return Yt(e)},onRemove:function(){return Pt()},onChange:function(e){return Tt(e)},beforeUpload:function(e){return Rt(e)}}):""!==Be.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Ht()}}),Be.address," ",l.a.createElement(An.a,{onClick:function(){return H(""),void qe({latitude:"",longitude:"",address:""})}})):l.a.createElement(dl,{className:"input-control",id:"chatArea",name:r.conversation_id,placeholder:"Replying as Hotline representative",onChange:function(e){return function(e){H(e.target.value),$(Object(o.a)({},Z,Object(ut.a)({},e.target.name,e.target.value)))}(e)},value:L,onKeyDown:function(e){if(e.altKey&&13===e.keyCode||e.ctrlKey&&13===e.keyCode){var t=document.querySelector(".input-control");t.value=t.value+"\r\n"}e.altKey||e.shiftKey||e.ctrlKey||13!==e.keyCode||(e.preventDefault(),Lt())},maxLength:1e4,disabled:3===i||6===r.hotline_status_id||8===r.hotline_status_id})),l.a.createElement("span",{className:"ml-3 send",onClick:function(){return Lt()}},l.a.createElement("img",{src:Tn.a,alt:"send message"}))))),l.a.createElement("div",{className:"w-25 d-flex justify-content-end width-sm-100"},_e.noteDivClicked?l.a.createElement(Rn,{class:_e.myClass,conversation_id:null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),notesClicked:function(){return qt()}}):null,Ge.activityDivClicked?l.a.createElement(qn,{class:Ge.myClass,conversation_id:null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""),activityClicked:function(){return Vt()}}):null,Ze.assigneDivClicked?l.a.createElement(Vn,{class:Ze.myClass,hotline_id:r.hotline_id,assigneClicked:function(){return Qt()}}):null)))))},El=a(41),vl=N.a.Search,bl=function(e){var t=Object(n.useRef)(""),a=function(a){var n=a.trim();t.current=n;var l=e.statusFilterData.map((function(e){return e=e.value})),r=Object(o.a)({},l.length>0&&{status_id:l},{},e.urgencyFilterData.length>0&&{urgency_level_id:e.urgencyFilterData.map((function(e){return e.value}))},{},e.hotlineFilterData.length>0&&{hotline_id:e.hotlineFilterData.map((function(e){return e.value}))}),s=Object(o.a)({},r,{hotline_id:r.hotline_id&&r.hotline_id.toString(),status_id:r.status_id&&r.status_id.toString(),urgency_level_id:r.urgency_level_id&&r.urgency_level_id.toString()}),c=Me(),i=JSON.parse(b("user")),m={headers:{Authorization:c,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},u=q+"hotlineResponderConversation/?user_id="+parseInt(El.AES.decrypt(i.user_details.org_user_id,"anonymoose").toString(El.enc.Utf8)),d=""===n?u+"&filter="+JSON.stringify(s):u+"&filter="+JSON.stringify(s)+"&search="+n.toString();B.a.get(d,m).then((function(a){e.setSearchString(t.current),v("searchBy",t.current);var n=[];n=t.current.length>0?jn(a.data,t.current):a.data,e.setConversations(n)}))};return l.a.createElement(vl,{name:"search",id:"search",placeholder:re,onChange:function(e){return a(e.target.value)},onSearch:a,autoComplete:"off"})},yl=_n.a.Paragraph,_l=a(41),Ol=function(e){return l.a.createElement("div",{className:"mid-content p-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:6,className:e.showdiv?"message-section py-4 d-none":"message-section py-4"},l.a.createElement(C.a,{span:24,className:" d-flex justify-content-between px-3"},l.a.createElement("h6",null,"Conversations"," ",l.a.createElement(On.a,{className:"pl-1",count:e.unreadCount})),l.a.createElement(Cn,{searchString:e.searchString,removeFilter:e.removeFilter,loadFilteredConversations:e.loadFilteredConversations})),l.a.createElement(C.a,{span:24,className:"mt-4 px-3 d-block"},l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:150,thumbMinSize:30,universal:!0},l.a.createElement(l.a.Fragment,null,e.urgencyFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,{visible:!0,key:a,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyLevel",t.value)},className:"mb-2"},"Urgency",": ",l.a.createElement("span",null,t.label)))})),e.hotlineFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyHotline",t.value)},className:"mb-2",key:a},"Hotline",": ",l.a.createElement("span",null,t.label," ")))})),e.statusFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyStatus",t.value)},className:"mb-2",key:a},Le,": ",l.a.createElement("span",null,t.label," ")))}))))),l.a.createElement(C.a,{span:24,className:"search-box mt-3 px-3"},l.a.createElement(ht.a,{form:e.form},l.a.createElement(ht.a.Item,{name:"search",id:"search"},l.a.createElement(bl,{statusFilterData:e.statusFilterData,urgencyFilterData:e.urgencyFilterData,hotlineFilterData:e.hotlineFilterData,setSearchString:e.setSearchString,setConversations:e.setConversations})))),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(C.a,{span:24,className:" inbox-messages"},e.conversations.length>0?e.conversations.map((function(t){var a,n;return l.a.createElement("div",{className:(null===(a=e.conversation.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))?"msg-wrapper active":"msg-wrapper",onClick:function(){return e.onConversationClick(t)}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{ellipsis:!0,style:{fontWeight:"bold"},className:"w-75 pr-2 mb-1",dangerouslySetInnerHTML:e.createMarkup(t.responder_conversation_name)}),l.a.createElement("span",{className:"small"}," ",Fe()(t.created_on).isSame(Fe()(),"day")?Fe()(t.created_on).utc().local().format("hh:mm"):Fe()(t.created_on).utc().local().format("MM:DD:YY"))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(yl,{ellipsis:!0,className:"font-weight-normal mb-1 sm para_wrapper"},l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.hotline_name)}),"\xa0 |\xa0",l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.conversation_id)})),l.a.createElement("span",{className:"small"}," ",l.a.createElement(On.a,{count:t.unread_messages_count}))))})):l.a.createElement("div",{className:"msg-wrapper"},"No messages found")))),e.conversation?l.a.createElement(fl,{conversation:e.conversation,urgencyLevel:e.urgencyLevel,status:e.status,onChangeUrgencyLevel:function(t,a){var n=Me(),l=JSON.parse(b("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(_l.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(_l.enc.Utf8)),urgency_level_id:t},o={user_id:parseInt(_l.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(_l.enc.Utf8)),hotline_id:e.conversation.hotline_id,conversation_id:a,message:"".concat("Urgency Level has been changed to"," ").concat(1===t?"Low":2===t?"Medium":"High"),created_by:parseInt(_l.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(_l.enc.Utf8)),address:"",attachment_type:"",latitude:"",longitude:"",attachments:[{name:"",attach:""},{name:"",attach:""}]};B.a.put(q+"hotlineConvoMessagesUrgencyLevel/ ",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setUrgencyLevel(t),B.a.post(q+"receiveHotlineMessage/",o,r).then((function(t){201===t.status&&e.socket.send(JSON.stringify(t.data))})))}))},onChangeStatus:function(t,a){var n=Me(),l=JSON.parse(b("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(_l.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(_l.enc.Utf8)),status_id:t},o={user_id:parseInt(_l.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(_l.enc.Utf8)),hotline_id:e.conversation.hotline_id,conversation_id:a,message:"".concat("Status has been changed to"," ").concat(1===t?"New":2===t?"Open":"Closed"),created_by:parseInt(_l.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(_l.enc.Utf8)),address:"",attachment_type:"",latitude:"",longitude:"",attachments:[{name:"",attach:""},{name:"",attach:""}]};B.a.put(q+"hotlineConvoMessagesStatus/",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setStatus(t),B.a.post(q+"receiveHotlineMessage/",o,r).then((function(t){201===t.status&&e.socket.send(JSON.stringify(t.data))})))}))},searchString:e.searchString,newState:e.newState,socket:e.socket,setCounter:e.setCounter,"data-test":"Messages",chatdiv:e.chatdiv}):l.a.createElement(C.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.NoHotlines,alt:"No Hotlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No Conversation Selected"),l.a.createElement("small",null,"Select a Conversation to view"))))},Nl=function(e){return l.a.createElement(C.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.CreateHotline,alt:"No Hotlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No conversations are initiated for the hotlines assigned to you"))},jl=function(e){return l.a.createElement(C.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement(D.a,{size:"large",tip:"Loading...",spinning:e})))},wl=a(41),Sl=function(e,t,a){var n=0,l=e;return e.map((function(a){if((null===a||void 0===a?void 0:a.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===t||void 0===t?void 0:t.conversation_id))return n=e.indexOf(a)})),l.splice(n,1),[a].concat(Object(dt.a)(l))},Cl=function(e,t,a,n){for(var l=JSON.parse(b("user")),r=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(wl.AES.decrypt(l.user_data.user_id,"anonymoose").toString(wl.enc.Utf8))&&e.conversation_id!==a})),s=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),o=0;o<r.length;o++){var c,i;(null===(c=s[0])||void 0===c?void 0:c.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===(i=r[o])||void 0===i?void 0:i.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))&&0===s[0].unread_messages_count&&n((function(e){return e+1}))}},Dl=function(e,t,a,n,l,r,s,c,i,m){if(a.length>0||n.length>0||l.length>0||r.length>0)for(var u=JSON.parse(b("user")),d=null===t||void 0===t?void 0:t.filter((function(t){var a;return(null===t||void 0===t?void 0:null===(a=t.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(wl.AES.decrypt(u.user_data.user_id,"anonymoose").toString(wl.enc.Utf8))&&(null===e||void 0===e?void 0:e.conversation_id)!==m.conversation_id})),p=null===t||void 0===t?void 0:t.filter((function(t){var a;return(null===t||void 0===t?void 0:null===(a=t.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),g=0;g<d.length;g++){var h,f,E,v,y;if((null===(h=p[0])||void 0===h?void 0:null===(f=h.conversation_id)||void 0===f?void 0:f.toString().replace(/(<([^>]+)>)/gi,""))===(null===(E=d[g])||void 0===E?void 0:null===(v=E.conversation_id)||void 0===v?void 0:v.toString().replace(/(<([^>]+)>)/gi,""))&&0===(null===(y=p[0])||void 0===y?void 0:y.unread_messages_count))s.current||c((function(e){return e+1})),i(t.map((function(t){return t.conversation_id===(null===e||void 0===e?void 0:e.conversation_id)?Object(o.a)({},t,{unread_messages_count:t.unread_messages_count+1}):t})))}},kl=function(e){y("urgencyLevels"),y("status"),y("hotline"===e?"hotline":"openline"),y("searchBy"),y("ConvID")},xl=function(e,t,a,n,l){var r,s,c,i,m,u,d,p="hotline"===l?e.hotline:e.openline,g="hotline"===l?t.hotline_id:t.openline_id,h="hotline"===l?t.hotline_name:t.openline_name,f=[];if((null===(r=e.status)||void 0===r?void 0:r.includes(t.status_id.toString()))&&(null===(s=e.urgency)||void 0===s?void 0:s.includes(t.urgency_level_id.toString()))&&(null===p||void 0===p?void 0:p.includes(g.toString()))&&(null===(c=e.searchBy)||void 0===c?void 0:c.length)>0&&t.conversation_id.toLowerCase().includes(null===(i=e.searchBy)||void 0===i?void 0:i.toLowerCase())||t.responder_conversation_name.toLowerCase().includes(null===(m=e.searchBy)||void 0===m?void 0:m.toLowerCase())||h.toLowerCase().includes(null===(u=e.searchBy)||void 0===u?void 0:u.toLowerCase())||t.message.toLowerCase().includes(null===(d=e.searchBy)||void 0===d?void 0:d.toLowerCase())){var E,v=t.conversation_id.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),b=t.responder_conversation_name.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),y=h.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),_=t.message.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),O="hotline"===l?Object(o.a)({},t,{conversation_id:v,responder_conversation_name:b,message:_,hotline:{name:y,hotline_id:g}}):Object(o.a)({},t,{conversation_id:v,responder_conversation_name:b,message:_,openline:{name:y,openline_id:g}});f=n.includes(null===(E=O.conversation_id)||void 0===E?void 0:E.toString().replace(/(<([^>]+)>)/gi,""))?a:[].concat(Object(dt.a)(a),[O])}else f=a;return f};function Il(e,t,a,n,l,r,s){var o,c,i,m;(n(e),l(t),r(a),v("urgencyLevels",null===(o=Object.values(e))||void 0===o?void 0:o.map((function(e){return e.value}))),"hotline"===s)?v("hotline",null===(i=Object.values(a))||void 0===i?void 0:i.map((function(e){return e.value}))):v("openline",null===(m=Object.values(a))||void 0===m?void 0:m.map((function(e){return e.value})));v("status",null===(c=Object.values(t))||void 0===c?void 0:c.map((function(e){return e.value})))}var Tl=function(e){return{__html:e}},Al=j.a.Content,Yl=a(41),Ml=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)([]),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)([]),y=Object(c.a)(E,2),_=y[0],O=y[1],N=Object(n.useState)([]),w=Object(c.a)(N,2),C=w[0],D=w[1],k=Object(n.useState)({}),x=Object(c.a)(k,2),I=x[0],T=x[1],A=Object(n.useState)(""),Y=Object(c.a)(A,2),M=Y[0],U=Y[1],F=Object(n.useState)(""),P=Object(c.a)(F,2),R=P[0],L=P[1],z=Object(n.useState)(""),H=Object(c.a)(z,2),V=H[0],Q=H[1],G=Object(n.useState)(""),K=Object(c.a)(G,2),W=K[0],J=K[1],Z=Object(n.useState)(null),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)({}),ae=Object(c.a)(te,2),ne=ae[0],le=ae[1],re=Object(n.useState)(0),se=Object(c.a)(re,2),oe=se[0],ce=se[1],ie=Object(n.useState)([]),me=Object(c.a)(ie,2),ue=me[0],de=me[1],pe=Object(n.useState)(!1),ge=Object(c.a)(pe,2),he=ge[0],fe=ge[1],Ee=Object(n.useState)(!1),ve=Object(c.a)(Ee,2),ye=ve[0],_e=ve[1],Oe=Object(n.useState)(!1),Ne=Object(c.a)(Oe,2),je=Ne[0],we=Ne[1],Se=Object(n.useRef)(null),Ce=Object(n.useRef)(!1),De=ht.a.useForm(),ke=Object(c.a)(De,1)[0],xe=Object(n.useState)(!0),Ie=Object(c.a)(xe,2),Te=Ie[0],Ae=Ie[1];Object(n.useEffect)((function(){return Fe(),Ye(),kl("hotline"),function(){Se.current.close()}}),[]),Object(n.useEffect)((function(){var e=b("searchBy")&&b("searchBy").toString(),t=[],a=[];null===ue||void 0===ue||ue.map((function(e){var a=e.conversation_id,n="";n=(null===a||void 0===a?void 0:a.includes("</mark>"))?null===a||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""):a,t.push(n)})),a=t.includes(null===ne||void 0===ne?void 0:ne.conversation_id)?ue:[].concat(Object(dt.a)(ue),[ne]),de(a),Dl(ne,a,h,C,_,W,Ce,ce,de,M),(null===e||void 0===e?void 0:e.length)>0&&Ce.current&&(Ce.current=!1)}),[ne,ue]);var Ye=function(){var e=JSON.parse(b("user"));Se.current=new WebSocket("ws://54.241.83.181:8000/ws/hotlineMessages/"+parseInt(Yl.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(Yl.enc.Utf8))+"/"),Se.current.onopen=function(){ee(Se.current),console.log("WEBSOCKET Connected")},Se.current.onmessage=function(e){console.log("WEBSOCKET Event Received!",e);var t=JSON.parse(e.data);if(le(t),Ue(t),t.message.includes("Urgency Level has been changed to")){var a=(l=t.message.split(" "))[l.length-1],n="Low"===a.trim()?1:"Medium"===a.trim()?2:3;L(n)}else if(t.message.includes("Status has been changed to")){var l,r=(l=t.message.split(" "))[l.length-1],s="New"===r.trim()?1:"Open"===r.trim()?2:3;Q(s)}},Se.current.onclose=function(){console.log("WEBSOCKET Closed!")},Se.current.onerror=function(e){console.log("WEBSOCKET Error!",e)}},Ue=function(e){var t=JSON.parse(b("user"));e.accessed_users.includes(parseInt(Yl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Yl.enc.Utf8)))&&s((function(a){var n=b("ConvID")&&b("ConvID"),l=b("urgencyLevels")&&b("urgencyLevels").split(","),r=b("status")&&b("status").split(","),s=b("hotline")&&b("hotline").split(","),c=b("searchBy")&&b("searchBy").toString(),i=[];a.map((function(e){var t=e.conversation_id,a="";a=t.includes("</mark>")?t.toString().replace(/(<([^>]+)>)/gi,""):t,i.push(a)}));var m=e,u=a,d=!1,p=!1,g=!1,h=!1,f=[],E={urgency:"",status:"",hotline:"",searchBy:""};null!==l&&(null===l||void 0===l?void 0:l.length)>0&&(d=!0,E=Object(o.a)({},E,{urgency:l})),null!==r&&(null===r||void 0===r?void 0:r.length)>0&&(p=!0,E=Object(o.a)({},E,{status:r})),null!==s&&(null===s||void 0===s?void 0:s.length)>0&&(g=!0,E=Object(o.a)({},E,{hotline:s})),null!==c&&(null===c||void 0===c?void 0:c.length)>0&&(h=!0,E=Object(o.a)({},E,{searchBy:c})),(d||p||g||h)&&(u=xl(E,e,u,i,"hotline")),h&&(f=[e.conversation_id,e.responder_conversation_name,e.hotline_name,e.message].map((function(e){return e.toLowerCase().includes(c.toLowerCase())}))),h||d||p||g||i.includes(e.conversation_id)||(u=[].concat(Object(dt.a)(u),[e]),Ce.current=!0);var v=u.map((function(a){return a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by!==parseInt(Yl.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Yl.enc.Utf8))&&e.conversation_id!==n?(a.responder_conversation_name.includes("</mark>")&&(m=Object(o.a)({},m,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(m=Object(o.a)({},m,{conversation_id:a.conversation_id})),a.hotline_name.includes("</mark>")&&(m=Object(o.a)({},m,{hotline:{name:a.hotline_name}})),m=Object(o.a)({},m,{unread_messages_count:a.unread_messages_count+1})):a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by===parseInt(Yl.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Yl.enc.Utf8))?(a.responder_conversation_name.includes("</mark>")&&(m=Object(o.a)({},m,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(m=Object(o.a)({},m,{conversation_id:a.conversation_id})),a.hotline_name.includes("</mark>")&&(m=Object(o.a)({},m,{hotline:{name:a.hotline_name}})),m):a}));d||p||g||h||Cl(e,u,n,ce);return d&&!l.includes(e.urgency_level_id.toString())?v:p&&!r.includes(e.status_id.toString())?v:g&&!s.includes(e.hotline_id.toString())?v:h&&!f.includes(!0)?v:Sl(v,e,m)}))};var Fe=function(){var e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=b("urgencyLevels")&&b("urgencyLevels").split(","),l=b("status")&&b("status").split(","),r=b("hotline")&&b("hotline").split(","),c=Object(o.a)({},n&&n.length>0&&{urgency_level_id:n},{},l&&l.length>0&&{status_id:l},{},r&&r.length>0&&{hotline_id:r}),i=q+"hotlineResponderConversation/?user_id="+parseInt(Yl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Yl.enc.Utf8)),m=W.length>0&&0===h.length&&0===C.length&&0===_.length?i+"&search="+W:W.length>0&&(h.length>0||C.length>0||_.length>0)?i+"&filter="+JSON.stringify(c)+"&search="+W:0===W.length&&(h.length>0||C.length>0||_.length>0)?i+"&filter="+JSON.stringify(c):"";t&&(m.length>0?B.a.get(m,a).then((function(e){s(e.data)})):B.a.get(i,a).then((function(e){var t=0;d(e.data),s(e.data),Ae(!1),de(e.data);e.data.reduce((function(e,a,n){0!=a.unread_messages_count&&t++}),[]);ce(t)})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amWEBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"hotlinemsg"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Ca,{amWEBUser:!0,data:e}),l.a.createElement(Al,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},je?l.a.createElement("span",null,l.a.createElement(En.a,{className:"d-inline-flex d-lg-none pr-3 back-arrow ",title:"Back to Messages",onClick:function(){return fe(!1),_e(!1),void we(!1)}})):null,"Hotline Conversations")),Te?l.a.createElement(jl,{loader:Te}):!Te&&(null===u||void 0===u?void 0:u.length)>0?l.a.createElement(Ol,{conversation:M,conversations:r,chatdiv:ye,urgencyLevel:R,status:V,searchString:W,newState:ne,socket:X,setCounter:function(e){for(var t=e.data,a=0;a<r.length-1;a++)r[a].conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.data.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")&&(t=Object(o.a)({},t,{unread_messages_count:r[a].unread_messages_count}));t.unread_messages_count&&t.unread_messages_count>0&&oe>0&&ce(oe-1)},NoHotlines:yn.a,createMarkup:Tl,setSearchString:J,setConversations:s,onConversationClick:function(e){vn.isMobile&&(fe(!0),_e(!0),we(!0));(s((function(t){return t.map((function(t){return t.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")?Object(o.a)({},e,{unread_messages_count:0}):t}))})),e.unread_messages_count>0&&oe>0)&&ce(oe-1);v("ConvID",e.conversation_id),U(e),L(e.urgency_level_id),Q(e.status_id)},removeFilter:I,removeFilterLevel:function(e,t){T({type:e,value:t})},statusFilterData:C,hotlineFilterData:_,urgencyFilterData:h,loadFilteredConversations:function(e,t,a,n,l){Il(a,n,l,f,D,O,"hotline"),s(e),"reset"===t&&ke.setFieldsValue({search:""})},getConversations:Fe,setStatus:Q,setUrgencyLevel:L,unreadCount:oe,showdiv:he}):l.a.createElement(Nl,{CreateHotline:Xa.a}))))))},Ul=(a(442),j.a.Sider),Fl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")&&(t="2")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?Oe.a:_e.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(Ul,{className:this.state.collapsed?"d-none d-lg-block w-md-100 sider-width":" d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(ye.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(ye.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(m.b,{to:"/amweb/hotlinemessages"},"Hotline Conversations")),l.a.createElement(ye.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(m.b,{to:"/amweb/openlinemessages"},"Openline Conversations"))),l.a.createElement("div",{className:"btm-div"},l.a.createElement(m.b,{to:"/amweb/info",className:"px-2"},le),l.a.createElement(m.b,{to:"/amweb/help",className:"px-2"},ne))))}}]),t}(l.a.Component),Pl=a(499),Rl=a.n(Pl),Ll=a(500),zl=a.n(Ll),Hl=function(e,t){return e.filter((function(e){return e.conversation_id.toLowerCase().includes(t.toLowerCase())||e.responder_conversation_name.toLowerCase().includes(t.toLowerCase())||e.openline_name.toLowerCase().includes(t.toLowerCase())||e.message.toLowerCase().includes(t.toLowerCase())})).map((function(e){var a=e.conversation_id.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),n=e.responder_conversation_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),l=e.openline_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),r=e.message.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));return Object(o.a)({},e,{conversation_id:a,responder_conversation_name:n,message:r,openline:{name:l,openline_id:e.openline_id}})}))},Bl=(a(935),a(41)),ql=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)([]),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)([]),v=Object(c.a)(E,2),y=v[0],_=v[1],O=Object(n.useState)([]),N=Object(c.a)(O,2),j=N[0],w=N[1],D=Object(n.useState)([]),k=Object(c.a)(D,2),x=k[0],I=k[1],T=Object(n.useState)([]),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)([]),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)([]),z=Object(c.a)(L,2),H=z[0],V=z[1],Q=Object(n.useState)([]),G=Object(c.a)(Q,2),K=G[0],W=G[1],J=Object(n.useState)([]),Z=Object(c.a)(J,2),$=Z[0],X=Z[1],ee=Object(n.useState)([]),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)([]),re=Object(c.a)(le,2),se=re[0],oe=re[1];Object(n.useEffect)((function(){var e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getUserAllOpenlines/"+parseInt(Bl.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Bl.enc.Utf8)),a).then((function(e){var t=[];e.data.map((function(e){return t.push({label:e.openline.name,value:e.openline.openline_id})})),_(t)}))}),[]),Object(n.useEffect)((function(){void 0===e.removeFilter.type||e.visible||de(!1)}),[u,r,h]),Object(n.useEffect)((function(){if("urgencyLevel"===e.removeFilter.type){var t=$.filter((function(t){return t.value!==e.removeFilter.value})),a=u.filter((function(t){return t!==e.removeFilter.value}));d(a),X(t)}if("urgencyOpenline"===e.removeFilter.type){var n=ae.filter((function(t){return t.value!==e.removeFilter.value})),l=h.filter((function(t){return t!==e.removeFilter.value}));f(l),ne(n)}if("urgencyStatus"===e.removeFilter.type){var o=se.filter((function(t){return t.value!==e.removeFilter.value})),c=r.filter((function(t){return t!==e.removeFilter.value}));s(c),oe(o)}}),[e.removeFilter]);var ce=[{label:"Low",value:1},{label:"Medium",value:2},{label:"High",value:3}],me=[{label:"New",value:1},{label:"Open",value:2},{label:"Closed",value:3}],ue=y,de=function(t){var a=Object(o.a)({},r.length>0&&{status_id:r},{},u.length>0&&{urgency_level_id:u},{},h.length>0&&{openline_id:h});M(r),w(u),I(h),V(ae),W(se),R($);var n=Me(),l=JSON.parse(b("user")),s=b("searchBy"),c={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},i=q+"openlineResponderConversation/?user_id="+parseInt(Bl.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Bl.enc.Utf8)),m=Object(o.a)({},a,{openline_id:a.openline_id&&a.openline_id.toString(),status_id:a.status_id&&a.status_id.toString(),urgency_level_id:a.urgency_level_id&&a.urgency_level_id.toString()}),d=""===e.searchString?i+"&filter="+JSON.stringify(m):i+"&filter="+JSON.stringify(m)+"&search="+e.searchString,p=[];B.a.get(d,c).then((function(t){p=(null===s||void 0===s?void 0:s.length)>0?Hl(t.data,s):t.data,e.loadFilteredConversations(p,"apply",$,se,ae)})),t&&e.hide()};return l.a.createElement("div",null,l.a.createElement(C.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(C.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return function(){var t=Me(),a=JSON.parse(b("user")),n=b("searchBy"),l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r=q+"openlineResponderConversation/?user_id="+parseInt(Bl.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Bl.enc.Utf8)),o=[];B.a.get(r,l).then((function(t){o=(null===n||void 0===n?void 0:n.length)>0?Hl(t.data,n):t.data,e.loadFilteredConversations(o,"reset",[],[],[]),d([]),X([]),s([]),oe([]),ne([]),f([])})),e.hide()}()}},"Reset"))),l.a.createElement(ct.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Urgency level")),l.a.createElement(C.a,{span:"24"},l.a.createElement(bt.a.Group,{className:"d-flex flex-column flex-gap",name:"urgencyLevel",options:ce,value:u,onChange:function(e){var t=$;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ce.find((function(t){return t.value===e})))})):t=[],X(t),d(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,Le)),l.a.createElement(C.a,{span:"24"},l.a.createElement(bt.a.Group,{className:"d-flex flex-column flex-gap",name:"status",value:r,options:me,onChange:function(e){var t=se;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(me.find((function(t){return t.value===e})))})):t=[],oe(t),s(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Openline")),l.a.createElement(C.a,{span:"24"},l.a.createElement(bt.a.Group,{className:"d-flex flex-column flex-gap",name:"openline",options:ue,value:h,onChange:function(e){var t=ae;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ue.find((function(t){return t.value===e})))})):t=[],ne(t),f(e)}})))))),l.a.createElement(S.a,null,l.a.createElement(C.a,{span:"24",className:"btn-row actions"},l.a.createElement(Ie.a,{type:"primary",className:"mr-2",onClick:function(){return de(!0)}},"Apply"),l.a.createElement(Ie.a,{type:"secondary",onClick:function(t){d(j),s(Y),f(x),X(P),oe(K),ne(H),e.hide()}},ie)))))},Vl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:l.a.createElement(ql,{hide:this.hide,searchString:this.props.searchString,removeFilter:this.props.removeFilter,loadFilteredConversations:this.props.loadFilteredConversations,visible:this.state.visible}),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"icon icon-filter"})))}}]),t}(l.a.Component),Ql=_n.a.Paragraph,Gl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={expand:!1,counter:0,notesData:[],conversationId:""},a.typoExpand=function(){a.setState({expand:!0,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a.typoClose=function(){a.setState({expand:!1,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"renderParagraph",value:function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:this.state.counter},l.a.createElement("span",{className:"note-user"},Fe()(e.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A \u2022")," ",e.first_name," ",e.last_name),l.a.createElement(Ql,{ellipsis:{rows:3,expandable:!0,symbol:"Show more",onExpand:this.typoExpand}},e.note_text))}},{key:"render",value:function(){var e=this;return this.props.addedNote.map((function(t){return l.a.createElement("div",{className:"show-less","data-test":"addedNotes"},e.renderParagraph(t),e.state.expand&&l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:e.typoClose},"Show less"))}))}}]),t}(n.Component),Kl=(_n.a.Paragraph,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onChange=function(e){a.setState({rows:e})},a.state={rows:1,notes:[],conversationId:""},a.getNotes=a.getNotes.bind(Object(Y.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({conversationId:this.props.conversation_id}),this.getNotes(this.props.conversation_id)}},{key:"getNotes",value:function(e){var t=this,a={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},params:{conversation_id:e}};B.a.get(q+"getNotes/",a).then((function(e){t.setState({notes:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.notes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class,"data-test":"Notes"},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Notes")),l.a.createElement(Ie.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.notesClicked(t)}}))),l.a.createElement(ct.a,{className:"my-2 w-100"}),l.a.createElement(C.a,{span:"24",className:"px-3"},l.a.createElement(Un,{convoId:this.props.conversation_id,getNoteData:this.getNotes}),l.a.createElement(S.a,{className:"added-notes"},l.a.createElement(Gl,{addedNote:t}))))))))}}]),t}(n.Component)),Wl=[{id:5,name:"Updated the Status to"},{id:6,name:"Updated the Urgency level to"},{id:7,name:"Added new Note"},{id:8,name:"View Openline Converations"}],Jl=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],Zl=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],$l=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(g.a)(this,Object(h.a)(t).call(this))).state={myclass:"",activity:[]},e.divclicked=e.divclicked.bind(Object(Y.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAcitivity(this.props.conversation_id)}},{key:"getAcitivity",value:function(e){var t=this,a={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getOpenlineConversationActivity/?conversation_id="+e,a).then((function(e){t.setState({activity:e.data})}))}},{key:"mapAuditLog",value:function(e){var t="";return Wl.map((function(a){a.id===e.audit_log_event_id&&(t=a.name,e.status_value&&Jl.map((function(a){e.status_value==a.id&&(t=t+" <b>"+a.name+"</b>")})),e.urgency_level_value&&Zl.map((function(a){e.urgency_level_value==a.id&&(t=t+" <b>"+a.name+"</b>")})))})),t}},{key:"render",value:function(){var e=this,t=this.state.activity;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Activity")),l.a.createElement(Ie.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.activityClicked(t)}}))),l.a.createElement(ct.a,{className:"my-2 w-100"}),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(C.a,{span:"24",className:"px-3 pt-2"},l.a.createElement(Ln.a,null,t.map((function(t){return l.a.createElement(Ln.a.Item,null,l.a.createElement("span",{className:"note-user"},Fe()(t.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A\u2022")," ",t.name),l.a.createElement("br",null),Ua()(e.mapAuditLog(t)))}))))))))))}}]),t}(n.Component),Xl=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(g.a)(this,Object(h.a)(t).call(this))).state={myclass:"",assigneEmp:[]},e.divclicked=e.divclicked.bind(Object(Y.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAssigne(this.props.openline_id)}},{key:"getAssigne",value:function(e){var t=this,a={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getOpenlineAssignEmpl/"+e,a).then((function(e){var a=[];e.data.map((function(e){var t=e.user.first_name+" "+e.user.last_name;return a.push({"Assigned User_name":t}),a})),t.setState({assigneEmp:a})}))}},{key:"render",value:function(){var e=this,t=this.state.assigneEmp;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Assigned To")),l.a.createElement(Ie.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.assigneClicked(t)}}))),l.a.createElement(ct.a,{className:"my-2 w-100"}),l.a.createElement(C.a,{span:"24",className:"px-3 pt-2 assignees d-flex flex-column flex-gap"},t.map((function(e){return l.a.createElement(Nn.a,null,e["Assigned User_name"])}))))))))}}]),t}(n.Component),er=N.a.TextArea,tr=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],ar=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],nr=a(41),lr=function(e){var t,a,r=e.conversation,s=e.urgencyLevel,i=e.status,m=e.onChangeUrgencyLevel,u=e.onChangeStatus,d=e.searchString,p=e.newState,g=e.setCounter,h=e.socket,f=e.chatdiv,E=ht.a.useForm(),v=Object(c.a)(E,1)[0],y="";if(b("user")){var _,O=JSON.parse(b("user"));y=parseInt(nr.AES.decrypt(null===O||void 0===O?void 0:null===(_=O.user_details)||void 0===_?void 0:_.org_user_id,"anonymoose").toString(nr.enc.Utf8))}var N=Object(n.useState)([]),j=Object(c.a)(N,2),w=j[0],k=j[1],x=Object(n.useState)(!1),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(n.useState)(""),M=Object(c.a)(Y,2),U=M[0],F=M[1],P=Object(n.useState)({}),R=Object(c.a)(P,2),L=R[0],H=R[1],V=Object(n.useState)(!1),Q=Object(c.a)(V,2),G=Q[0],K=Q[1],W=Object(n.useState)({latitude:"",longitude:"",address:""}),J=Object(c.a)(W,2),Z=J[0],$=J[1],X=Object(n.useState)(!1),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),le=Object(c.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),ce=Object(c.a)(oe,2),ie=ce[0],me=ce[1],ue=Object(n.useState)(""),de=Object(c.a)(ue,2),pe=de[0],ge=de[1],he=Object(n.useState)(!0),fe=Object(c.a)(he,2),Ee=(fe[0],fe[1]),ve=Object(n.useState)(!1),be=Object(c.a)(ve,2),ye=be[0],_e=be[1],Oe=Object(n.useState)({noteDivClicked:!1,myClass:""}),Ne=Object(c.a)(Oe,2),je=Ne[0],we=Ne[1],Se=Object(n.useState)({activityDivClicked:!1,myClass:""}),Ce=Object(c.a)(Se,2),De=Ce[0],ke=Ce[1],xe=Object(n.useState)({assigneDivClicked:!1,myClass:""}),Ie=Object(c.a)(xe,2),Te=Ie[0],Ae=Ie[1],Ye=Object(n.useState)(!1),Ue=Object(c.a)(Ye,2),Pe=Ue[0],Re=Ue[1],ze=Object(n.useState)(""),He=Object(c.a)(ze,2),Be=He[0],qe=He[1],Ve=Object(n.useState)(!1),Qe=Object(c.a)(Ve,2),Ge=Qe[0],Ke=Qe[1],We=Object(n.useState)(!1),Je=Object(c.a)(We,2),Ze=Je[0],$e=Je[1],Xe=Object(n.useState)({}),et=Object(c.a)(Xe,2),tt=et[0],at=et[1],lt=Object(n.useState)([]),rt=Object(c.a)(lt,2),st=rt[0],ot=rt[1],it=Object(n.useState)([]),mt=Object(c.a)(it,2),pt=mt[0],gt=mt[1],ft=Object(n.useState)(!1),Et=Object(c.a)(ft,2),vt=Et[0],yt=Et[1],_t=Object(n.useState)(!1),Ot=Object(c.a)(_t,2),Nt=Ot[0],jt=Ot[1];Object(n.useEffect)((function(){qe(d)}),[d,r.conversation_id]),Object(n.useEffect)((function(){At();var e=document.getElementById("activityId"),t=document.getElementById("noteId"),a=document.getElementById("assigneId");""!=Te.myClass&&(Ae({myClass:"",assigneDivClicked:!1}),a.classList.remove("selected")),""!=je.myClass&&(we({myClass:"",noteDivClicked:!1}),t.classList.remove("selected")),""!=De.myClass&&(ke({myClass:"",activityDivClicked:!1}),e.classList.remove("selected"));var n=void 0!==L[r.conversation_id]?L[r.conversation_id]:"";F(n),ot([]),gt([]),yt(!1),at({})}),[r.conversation_id]),Object(n.useEffect)((function(){Pt()}),[p]),Object(n.useEffect)((function(){if(w.length>0)if(Be.length>1){var e=0;w.map((function(t){return t.message.includes("</mark>")&&(e+=1),e}));var t=document.getElementsByTagName("mark")[e-1];t&&t.scrollIntoView(!1,{block:"end"})}else{var a=document.getElementsByClassName("openline_message")[document.getElementsByClassName("openline_message").length-1];a&&a.scrollIntoView(!1,{block:"end"})}}),[w,d]);var wt=function(e,t,a){var n={latitude:e,longitude:t,address:a};F("$$$L#o#c#a#t#i#o#n$$$"),$(n)},St=function(e){"removed"===e.file.status&&Ee(!0);var t=e.fileList.slice(-5);Dt(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),ge(e.file.name),"removed"!==e.file.status&&F("$$$D#o#c#u#m#e#n#t$$$"),0===t.length&&F(""),se(Object(o.a)({},re,{document:t}))},Ct=function(e){"removed"===e.file.status&&Ee(!0);var t=e.fileList.slice(-5);Dt(e.file.type),t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),ge(e.file.name),"removed"!==e.file.status&&F("$$$I#m#a#g#e$$$"),0===t.length&&F(""),me(Object(o.a)({},ie,{image:t}))},Dt=function(e){var t=e.includes("image");ae(!!t)},kt=function(e){return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.awrap(xt(e.originFileObj));case 2:e.preview=t.sent,te?me(Object(o.a)({},ie,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})):se(Object(o.a)({},re,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},xt=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},It=function(){te?me(Object(o.a)({},ie,{imageValidation:!0})):se(Object(o.a)({},re,{documentValidation:!0}))},Tt=function(e){var t=e.name.includes(".xls"),a=e.name.includes(".pptx"),n=e.name.includes(".doc"),l=e.name.includes(".csv"),r="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||t||a||n||l;r?Ee(!0):(Ee(!1),U.error("".concat(e.name," is not a supported format file type.")));var s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,o="application/pdf"===e.type||t||a||n||l,c=e.size/1024/1024<5,i=e.size/1024/1024<10;return s&&(!c&&s?(Ee(!1),U.error("Image must smaller than 5MB!")):Ee(!0)),o&&(!i&&o?(Ee(!1),U.error("Document must smaller than 10MB!")):Ee(!0)),r&&c||i},At=function(){var e,t,a,n,l,s;return z.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:Ke(!0),e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n="",n=r.conversation_id.includes("<mark")?null===(l=r.conversation_id)||void 0===l?void 0:l.toString().replace(/(<([^>]+)>)/gi,""):r.conversation_id,s={conversation_id:n,user_id:parseInt(nr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(nr.enc.Utf8))},B.a.post(q+"openlineConvoMessages/",s,a).then((function(e){k(e.data),Ke(!1)}));case 8:case"end":return o.stop()}}))},Yt=function(){var e=Me(),t=JSON.parse(b("user"));if(U){var a,n,l,s,c,i={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},m="";if(r.conversation_id.includes("<mark"))m=null===(c=r.conversation_id)||void 0===c?void 0:c.toString().replace(/(<([^>]+)>)/gi,"");else m=r.conversation_id;var d,p=[],f={};if((null===(a=re.document)||void 0===a?void 0:a.length)>0)null===(d=re.document)||void 0===d||d.map((function(e){f={name:pe,attach:e.base64},p.push(f)}));else if((null===(n=ie.image)||void 0===n?void 0:n.length)>0){var E;null===(E=ie.image)||void 0===E||E.map((function(e){f={name:pe,attach:e.base64},p.push(f)}))}else p.push({name:"",attach:""},{name:"",attach:""});var y={user_id:parseInt(nr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(nr.enc.Utf8)),openline_id:r.openline_id,conversation_id:m,message:U,created_by:parseInt(nr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(nr.enc.Utf8)),attachment_type:(null===(l=re.document)||void 0===l?void 0:l.length)>0?"document":(null===(s=ie.image)||void 0===s?void 0:s.length)>0?"image":""!==Z.latitude?"location":"",latitude:Z.latitude,longitude:Z.longitude,address:Z.address,attachments:p};B.a.post(q+"receiveOpenlineMessage/",y,i).then((function(e){201===e.status&&(1!==e.data.status_id&&3!==e.data.status_id||u(2,m),(re.document.length>0||ie.image.length>0||""!==Z.latitude)&&(se({document:"",documentValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),me({image:"",imageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:""}),$({latitude:"",longitude:"",address:""})),qe(""),g(e),F(""),H(Object(o.a)({},L,Object(ut.a)({},m,""))),h.send(JSON.stringify(e.data)),At())}))}v.setFieldsValue({chatArea:""})},Mt=function(){K(!0)},Pt=function(){k((function(e){var t,a,n=[];if((null===(t=p.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))){var l=e.filter((function(e){var t,a;return(null===(t=e.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=p.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))}));if(p.message.includes("This message was deleted")){var s=p.message.substring(p.message.lastIndexOf(".")+1,p.message.length).split(",");l=l.filter((function(e){return!s.includes(e.user_openline_conversation_id.toString())})),n=[].concat(Object(dt.a)(l),[p])}else n=[].concat(Object(dt.a)(l),[p])}else n=Object(dt.a)(e);return n}))},Rt=function(e){var t=document.getElementById("noteId");vn.isMobile&&Re(!0),""!=De.myClass&&ke({myClass:"",activityDivClicked:!1}),""!=Te.myClass&&Ae({myClass:"",assigneDivClicked:!1}),""===je.myClass?(t.classList.add("selected"),we({myClass:"rgt-panel",noteDivClicked:!0})):(t.classList.remove("selected"),we({myClass:"",noteDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},Lt=function(e){var t=document.getElementById("activityId");vn.isMobile&&Re(!0),""!=je.myClass&&we({myClass:"",noteDivClicked:!1}),""!=Te.myClass&&Ae({myClass:"",assigneDivClicked:!1}),""===De.myClass?(t.classList.add("selected"),ke({myClass:"rgt-panel",activityDivClicked:!0})):(t.classList.remove("selected"),ke({myClass:"",activityDivClicked:!1})),document.getElementById("noteId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},Ht=function(e){var t=document.getElementById("assigneId");vn.isMobile&&Re(!0),""!=je.myClass&&we({myClass:"",noteDivClicked:!1}),""!=De.myClass&&ke({myClass:"",activityDivClicked:!1}),""===Te.myClass?(t.classList.add("selected"),Ae({myClass:"rgt-panel",assigneDivClicked:!0})):(t.classList.remove("selected"),Ae({myClass:"",assigneDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("noteId").classList.remove("selected")},Bt=function(){var e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={user_id:parseInt(nr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(nr.enc.Utf8)),openline_conversation_id:r.conversation_id};B.a.post(q+"clearOpenlineConversation/",n,a).then((function(){k([]),ot([]),gt([])}))},qt=function(e){return{__html:e}};if(d){var Vt,Qt,Gt,Kt,Wt;if(r.responder_conversation_name.includes("</mark>"))r.responder_conversation_name=null===(Qt=r.responder_conversation_name)||void 0===Qt?void 0:Qt.toString().replace(/(<([^>]+)>)/gi,""),r.responder_conversation_name=r.responder_conversation_name.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(r.openline_name.includes("</mark>"))r.openline_name=null===(Gt=r.openline_name)||void 0===Gt?void 0:Gt.toString().replace(/(<([^>]+)>)/gi,""),r.openline_name=r.openline_name.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(null===(Vt=r.conversation_id)||void 0===Vt?void 0:Vt.toString().includes("</mark>"))r.conversation_id=null===(Kt=r.conversation_id)||void 0===Kt?void 0:Kt.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(Wt=r.conversation_id)||void 0===Wt?void 0:Wt.toString().replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));w.map((function(e){var t;e.message.includes("</mark>")?(e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),e.message=e.message.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}))):(e.message=e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),e.message=e.message.replace(new RegExp(d,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})));return Object(o.a)({},e,{message:e.message})}))}else{var Jt,Zt,$t;r.responder_conversation_name=null===(Jt=r.responder_conversation_name)||void 0===Jt?void 0:Jt.toString().replace(/(<([^>]+)>)/gi,""),r.openline_name=null===(Zt=r.openline_name)||void 0===Zt?void 0:Zt.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===($t=r.conversation_id)||void 0===$t?void 0:$t.toString().replace(/(<([^>]+)>)/gi,""),w.map((function(e){var t;return e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(?:\r\n|\r|\n)/g,"<br />"),Object(o.a)({},e,{message:e.message})}))}var Xt=w.length-r.unread_messages_count;return l.a.createElement(C.a,{span:24,lg:18,className:f?"chat-section d-lg-flex":"chat-section d-lg-flex d-none","data-test":"messages"},l.a.createElement(C.a,{span:24,className:"h-100"},l.a.createElement(S.a,{className:"top-filter-pan p-2 p-lg-4 d-flex align-items-center"},l.a.createElement(C.a,{span:24,lg:10},l.a.createElement("div",{className:""},l.a.createElement("h6",{dangerouslySetInnerHTML:qt(r.responder_conversation_name)}),l.a.createElement("p",{style:{margin:0,display:"inline",float:"left"},dangerouslySetInnerHTML:qt(r.openline_name)}),"\xa0|\xa0",l.a.createElement("p",{style:{margin:0,display:"inline",float:"center"},dangerouslySetInnerHTML:qt(r.conversation_id)}))),l.a.createElement(C.a,{span:24,lg:14},l.a.createElement("div",{className:"d-flex justify-content-end pt-3 pt-sm-1 pt-md-0"},l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Urgency level"),l.a.createElement(zt.a,{bordered:!1,value:s,onChange:function(e){var t;return m(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},ar.map((function(e){return l.a.createElement(Option,{value:e.id},e.name)})))),l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,Le),l.a.createElement(zt.a,{bordered:!1,value:i,onChange:function(e){var t;return u(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},tr.map((function(e){return 2!==i&&3!==i||1!==e.id?l.a.createElement(Option,{value:e.id},e.name):l.a.createElement(Option,{value:e.id,disabled:!0},e.name)})))),l.a.createElement("div",{className:"icon-row d-flex align-items-center"},l.a.createElement(C.a,{span:24,md:8},l.a.createElement("span",{id:"noteId",className:"icon icon-create",onClick:function(e){return Rt()}})),l.a.createElement(C.a,{span:24,md:8},l.a.createElement("span",{id:"activityId",className:"icon icon-activity",onClick:function(e){return Lt()}})),l.a.createElement(C.a,{span:24,md:8},l.a.createElement("span",{id:"assigneId",className:"icon icon-assign",onClick:function(e){return Ht()}}))),pt.length>0&&l.a.createElement(ml,{deleteMessage:function(e,t){var a=Me(),n=JSON.parse(b("user")),l={headers:{Authorization:a,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={user_openline_message_id:t,type:"delete_by_user_id",user_id:parseInt(nr.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(nr.enc.Utf8))};B.a.post(q+"deleteOpenlineMessage/",s,l).then((function(){if(At(),$e(!0),ot([]),gt([]),yt(!1),"deleteForMe"!==e){var a={user_id:parseInt(nr.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(nr.enc.Utf8)),openline_id:r.openline_id,conversation_id:r.conversation_id,message:"This message was deleted.".concat(t),created_by:parseInt(nr.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(nr.enc.Utf8)),address:"",attachment_type:"",latitude:"",longitude:"",attachments:[{name:"",attach:""},{name:"",attach:""}]};B.a.post(q+"receiveOpenlineMessage/",a,l).then((function(e){201===e.status&&h.send(JSON.stringify(e.data))}))}}))},setHideDeleteMessagePopup:jt,deleteMessagePopup:Nt,userID:y,convoMessages:w,timeExpired:tt,showDeleteCheckboxes:vt,messagesIds:st,hideDeleteMessagesCheckboxes:function(){yt(!1),$e(!0)},checkedMessages:pt,openline:!0}),vt&&l.a.createElement(xn.a,{onClick:function(){return ot([]),gt([]),yt(!1),void at({})}}),0===pt.length&&l.a.createElement(cl,{showDeleteMessagesCheckboxes:function(){yt(!0),$e(!0)},openModal:function(){_e(!0)},setHidePopup:$e,hidePopup:Ze,convoMessages:w,showDeleteCheckboxes:vt})))),l.a.createElement(D.a,{spinning:Ge,size:"medium"},l.a.createElement(S.a,{className:"row-hgt"},l.a.createElement("div",{className:je.noteDivClicked||De.activityDivClicked||Te.assigneDivClicked?Pe?"w-75 d-none":"w-75":"w-100"},l.a.createElement("div",{className:"msg_main"},l.a.createElement(Ut.a,{title:"Clear Conversation History",visible:ye,onOk:function(){_e(!1),Bt()},onCancel:function(){_e(!1)},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Clear",cancelText:"Cancel"},l.a.createElement("p",null,nt)),l.a.createElement(Ft.Scrollbars,{autoHeightMax:450,universal:!0},l.a.createElement(C.a,{span:24,className:"msg-history p-4"},w.length>0&&w.map((function(e,t){var a,n;return l.a.createElement("div",null,Xt===t?l.a.createElement(ct.a,{plain:!0},"Last Read"):null,l.a.createElement("div",{className:e.is_responder_message?"outgoing-msg openline_message mb-3":"incoming-msg openline_message mb-2"},l.a.createElement("div",{className:e.is_responder_message?"sent-msg":"received-msg"},l.a.createElement("div",{className:"d-flex align-items-center"},vt&&!e.message.includes("This message was deleted")&&l.a.createElement(l.a.Fragment,null,l.a.createElement(bt.a,{className:"font-13",onChange:function(t){var a;return function(e,t,a){if(e.target.checked){if(ot([].concat(Object(dt.a)(st),[t])),gt([].concat(Object(dt.a)(pt),[a])),a.is_responder_message){var n=new Date-new Date(a.created_on);if(n>48e4)at(Object(o.a)({},tt,Object(ut.a)({},t,!0)));else{var l=48e4-n;at(Object(o.a)({},tt,Object(ut.a)({},t,!1))),setTimeout((function(){at(Object(o.a)({},tt,Object(ut.a)({},t,!0)))}),l)}}}else ot(st.filter((function(e){return e!==t}))),gt(pt.filter((function(e){return e.user_openline_conversation_id.toString()!==t}))),delete tt[t]}(t,null===(a=e.user_openline_conversation_id)||void 0===a?void 0:a.toString(),e)}})),(null===(a=e.img_attach.url)||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(Dn.a,{width:100,src:e.img_attach.url,className:"pr-3",placeholder:e.img_attach.name,alt:e.img_attach.name}),e.img_attach.name," "):(null===(n=e.doc_attach.url)||void 0===n?void 0:n.length)>0?l.a.createElement("a",{href:e.doc_attach.url,target:"_blank"},"pdf"===e.doc_attach.url.substring(e.doc_attach.url.length-3)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("img",{src:ol.a}),e.doc_attach.name):l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-doc"}),e.doc_attach.name)):null!==e.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Mt()}},e.address),G?l.a.createElement(tl,{setLocation:wt,viaMessages:!0,viaModal:!0,setShowMap:K,latitude:e.latitude,longitude:e.longitude}):null):e.message.includes("This message was deleted")?l.a.createElement("i",null,e.message.substring(0,e.message.lastIndexOf("."))):l.a.createElement("p",{ellipsis:!0,dangerouslySetInnerHTML:qt(e.message)})),l.a.createElement("span",{className:"time-date"}," ",Fe()(e.created_on).isSame(Fe()(),"day")?Fe()(e.created_on).utc().local().format("hh:mm A"):Fe()(e.created_on).utc().local().format("MM:DD:YY | hh:mm A "),e.is_responder_message&&" | ".concat(e.first_name," ").concat(e.last_name)))))}))))),l.a.createElement(C.a,{span:24,className:je.noteDivClicked||De.activityDivClicked||Te.assigneDivClicked?"send-msg w-75":"send-msg w-100"},l.a.createElement("div",{className:"type-msg"},3===r.status_id||6===r.hotline_status_id||8===r.hotline_status_id?l.a.createElement(l.a.Fragment,null," "):l.a.createElement(rl,{openAttachmentSection:function(){A(!T)},closeAttachmentSection:function(){A(!1)},showAttachmentSection:T,setLocation:wt,handleUploadImage:Ct,handleUploadDocument:St,handleBeforeUpload:Tt,handleOnRemove:It,handlePreview:kt,documentFile:re,imageFile:ie,message:U,mapLocation:Z}),l.a.createElement(ht.a,{className:"input-md w-100",name:"validate-other",form:v},re.document.length>0?l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:re.document,onPreview:function(e){return kt(e)},onRemove:function(){return It()},onChange:function(e){return St(e)},beforeUpload:function(e){return Tt(e)}}):ie.image.length>0?l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:ie.image,onPreview:function(e){return kt(e)},onRemove:function(){return It()},onChange:function(e){return Ct(e)},beforeUpload:function(e){return Tt(e)}}):""!==Z.longitude?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{className:"icon icon-location",onClick:function(){return Mt()}}),Z.address," ",l.a.createElement(An.a,{onClick:function(){return F(""),void $({latitude:"",longitude:"",address:""})}})):l.a.createElement(er,{className:"input-control",id:"chatArea",placeholder:"Replying as Openline representative",onChange:function(e){return function(e){F(e.target.value),H(Object(o.a)({},L,Object(ut.a)({},e.target.name,e.target.value)))}(e)},value:U,onKeyDown:function(e){if(e.altKey&&13===e.keyCode||e.ctrlKey&&13===e.keyCode){var t=document.querySelector(".input-control");t.value=t.value+"\r\n"}e.altKey||e.shiftKey||e.ctrlKey||13!==e.keyCode||(e.preventDefault(),Yt())},maxLength:1e4,disabled:3===i||6===r.hotline_status_id||8===r.hotline_status_id})),l.a.createElement("span",{className:"ml-3 send",onClick:function(){return Yt()}},l.a.createElement("img",{src:Tn.a,alt:"send message"}))))),l.a.createElement("div",{className:"w-25 d-flex justify-content-end width-sm-100"},je.noteDivClicked?l.a.createElement(Kl,{class:je.myClass,conversation_id:null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),notesClicked:function(){return Rt()}}):null,De.activityDivClicked?l.a.createElement($l,{class:De.myClass,conversation_id:null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""),activityClicked:function(){return Lt()}}):null,Te.assigneDivClicked?l.a.createElement(Xl,{class:Te.myClass,openline_id:r.openline_id,assigneClicked:function(){return Ht()}}):null)))))},rr=a(41),sr=N.a.Search,or=function(e){var t=Object(n.useRef)(""),a=function(a){var n=a.trim();t.current=n;var l=e.statusFilterData.map((function(e){return e=e.value})),r=Object(o.a)({},l.length>0&&{status_id:l},{},e.urgencyFilterData.length>0&&{urgency_level_id:e.urgencyFilterData.map((function(e){return e.value}))},{},e.openlineFilterData.length>0&&{openline_id:e.openlineFilterData.map((function(e){return e.value}))}),s=Object(o.a)({},r,{openline_id:r.openline_id&&r.openline_id.toString(),status_id:r.status_id&&r.status_id.toString(),urgency_level_id:r.urgency_level_id&&r.urgency_level_id.toString()}),c=Me(),i=JSON.parse(b("user")),m={headers:{Authorization:c,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},u=q+"openlineResponderConversation/?user_id="+parseInt(rr.AES.decrypt(i.user_details.org_user_id,"anonymoose").toString(rr.enc.Utf8)),d=""===n?u+"&filter="+JSON.stringify(s):u+"&filter="+JSON.stringify(s)+"&search="+n.toString();B.a.get(d,m).then((function(a){e.setSearchString(t.current),v("searchBy",t.current);var n=[];n=t.current.length>0?Hl(a.data,t.current):a.data,e.setConversations(n)}))};return l.a.createElement(sr,{name:"search",id:"search",placeholder:re,onChange:function(e){return a(e.target.value)},onSearch:a,autoComplete:"off"})},cr=_n.a.Paragraph,ir=a(41),mr=function(e){return l.a.createElement("div",{className:"mid-content p-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:6,className:e.showdiv?"message-section py-4 d-none":"message-section py-4"},l.a.createElement(C.a,{span:24,className:" d-flex justify-content-between px-3"},l.a.createElement("h6",null,"Conversations"," ",l.a.createElement(On.a,{className:"pl-1",count:e.unreadCount})),l.a.createElement(Vl,{searchString:e.searchString,removeFilter:e.removeFilter,loadFilteredConversations:e.loadFilteredConversations})),l.a.createElement(C.a,{span:24,className:"mt-4 px-3 d-block"},l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:150,thumbMinSize:30,universal:!0},l.a.createElement(l.a.Fragment,null,e.urgencyFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,{visible:!0,key:a,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyLevel",t.value)},className:"mb-2"},"Urgency",": ",l.a.createElement("span",null,t.label)))})),e.openlineFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyOpenline",t.value)},className:"mb-2",key:a},"Openline",": ",l.a.createElement("span",null,t.label," ")))})),e.statusFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyStatus",t.value)},className:"mb-2",key:a},Le,": ",l.a.createElement("span",null,t.label," ")))}))))),l.a.createElement(C.a,{span:24,className:"search-box mt-3 px-3"},l.a.createElement(ht.a,{form:e.form},l.a.createElement(ht.a.Item,{name:"search",id:"search"},l.a.createElement(or,{statusFilterData:e.statusFilterData,urgencyFilterData:e.urgencyFilterData,openlineFilterData:e.openlineFilterData,setSearchString:e.setSearchString,setConversations:e.setConversations})))),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(C.a,{span:24,className:" inbox-messages"},e.conversations.length>0?e.conversations.map((function(t){var a,n;return l.a.createElement("div",{className:(null===(a=e.conversation.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))?"msg-wrapper active":"msg-wrapper",onClick:function(){return e.onConversationClick(t)}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{ellipsis:!0,style:{fontWeight:"bold"},className:"w-75 pr-2 mb-1",dangerouslySetInnerHTML:e.createMarkup(t.responder_conversation_name)}),l.a.createElement("span",{className:"small"}," ",Fe()(t.created_on).isSame(Fe()(),"day")?Fe()(t.created_on).utc().local().format("hh:mm"):Fe()(t.created_on).utc().local().format("MM:DD:YY"))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(cr,{ellipsis:!0,className:"font-weight-normal mb-1 sm para_wrapper"},l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.openline_name)}),"\xa0 |\xa0",l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.conversation_id)})),l.a.createElement("span",{className:"small"}," ",l.a.createElement(On.a,{count:t.unread_messages_count}))))})):l.a.createElement("div",{className:"msg-wrapper"},"No messages found")))),e.conversation?l.a.createElement(lr,{conversation:e.conversation,urgencyLevel:e.urgencyLevel,status:e.status,onChangeUrgencyLevel:function(t,a){var n=Me(),l=JSON.parse(b("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(ir.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(ir.enc.Utf8)),urgency_level_id:t};B.a.put(q+"openlineConvoMessagesUrgencyLevel/ ",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setUrgencyLevel(t))}))},onChangeStatus:function(t,a){var n=Me(),l=JSON.parse(b("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(ir.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(ir.enc.Utf8)),status_id:t};B.a.put(q+"openlineConvoMessagesStatus/",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setStatus(t))}))},searchString:e.searchString,newState:e.newState,socket:e.socket,setCounter:e.setCounter,"data-test":"Messages",chatdiv:e.chatdiv}):l.a.createElement(C.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.NoOpenlines,alt:"No Openlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No Conversation Selected"),l.a.createElement("small",null,"Select a Conversation to view"))))},ur=function(e){return l.a.createElement(C.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.CreateOpenline,alt:"No Openlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No conversations are initiated for the openlines assigned to you"))},dr=j.a.Content,pr=a(41),gr=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(!0),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)([]),y=Object(c.a)(E,2),_=y[0],O=y[1],N=Object(n.useState)([]),w=Object(c.a)(N,2),k=w[0],x=w[1],I=Object(n.useState)([]),T=Object(c.a)(I,2),A=T[0],Y=T[1],M=Object(n.useState)({}),U=Object(c.a)(M,2),F=U[0],P=U[1],R=Object(n.useState)(""),L=Object(c.a)(R,2),z=L[0],H=L[1],V=Object(n.useState)(""),Q=Object(c.a)(V,2),G=Q[0],K=Q[1],W=Object(n.useState)(""),J=Object(c.a)(W,2),Z=J[0],$=J[1],X=Object(n.useState)(""),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(null),le=Object(c.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)({}),ce=Object(c.a)(oe,2),ie=ce[0],me=ce[1],ue=Object(n.useState)(0),de=Object(c.a)(ue,2),pe=de[0],ge=de[1],he=Object(n.useState)([]),fe=Object(c.a)(he,2),Ee=fe[0],ve=fe[1],ye=Object(n.useState)(!1),_e=Object(c.a)(ye,2),Oe=_e[0],Ne=_e[1],je=Object(n.useState)(!1),we=Object(c.a)(je,2),Se=we[0],Ce=we[1],De=Object(n.useRef)(null),ke=Object(n.useRef)(!1),xe=ht.a.useForm(),Ie=Object(c.a)(xe,1)[0];Object(n.useEffect)((function(){return Ye(),Te(),kl("openline"),function(){De.current.close()}}),[]),Object(n.useEffect)((function(){var e=b("searchBy")&&b("searchBy").toString(),t=[],a=[];null===Ee||void 0===Ee||Ee.map((function(e){var a=e.conversation_id,n="";n=(null===a||void 0===a?void 0:a.includes("</mark>"))?null===a||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""):a,t.push(n)})),a=t.includes(null===ie||void 0===ie?void 0:ie.conversation_id)?Ee:[].concat(Object(dt.a)(Ee),[ie]),ve(a),Dl(ie,a,_,A,k,te,ke,ge,ve,z),(null===e||void 0===e?void 0:e.length)>0&&ke.current&&(ke.current=!1)}),[ie,Ee]);var Te=function(){var e=JSON.parse(b("user"));De.current=new WebSocket("ws://54.241.83.181:8000/ws/openlineMessages/"+parseInt(pr.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(pr.enc.Utf8))+"/"),De.current.onopen=function(){se(De.current),console.log("WEBSOCKET Connected")},De.current.onmessage=function(e){console.log("WEBSOCKET Event Received!",e);var t=JSON.parse(e.data);me(t),Ae(t)},De.current.onclose=function(){console.log("WEBSOCKET Closed!")},De.current.onerror=function(e){console.log("WEBSOCKET Error!",e)}},Ae=function(e){var t=JSON.parse(b("user"));e.accessed_users.includes(parseInt(pr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(pr.enc.Utf8)))&&s((function(a){var n=b("ConvID")&&b("ConvID"),l=b("urgencyLevels")&&b("urgencyLevels").split(","),r=b("status")&&b("status").split(","),s=b("openline")&&b("openline").split(","),c=b("searchBy")&&b("searchBy").toString(),i=[];a.map((function(e){var t=e.conversation_id,a="";a=t.includes("</mark>")?t.toString().replace(/(<([^>]+)>)/gi,""):t,i.push(a)}));var m=e,u=a,d=!1,p=!1,g=!1,h=!1,f=[],E={urgency:"",status:"",openline:"",searchBy:""};null!==l&&(null===l||void 0===l?void 0:l.length)>0&&(d=!0,E=Object(o.a)({},E,{urgency:l})),null!==r&&(null===r||void 0===r?void 0:r.length)>0&&(p=!0,E=Object(o.a)({},E,{status:r})),null!==s&&(null===s||void 0===s?void 0:s.length)>0&&(g=!0,E=Object(o.a)({},E,{openline:s})),null!==c&&(null===c||void 0===c?void 0:c.length)>0&&(h=!0,E=Object(o.a)({},E,{searchBy:c})),(d||p||g||h)&&(u=xl(E,e,u,i,"openline")),h&&(f=[e.conversation_id,e.responder_conversation_name,e.openline_name,e.message].map((function(e){return e.toLowerCase().includes(c.toLowerCase())}))),h||d||p||g||i.includes(e.conversation_id)||(u=[].concat(Object(dt.a)(u),[e]),ke.current=!0);var v=u.map((function(a){return a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by!==parseInt(pr.AES.decrypt(t.user_data.user_id,"anonymoose").toString(pr.enc.Utf8))&&e.conversation_id!==n?(a.responder_conversation_name.includes("</mark>")&&(m=Object(o.a)({},m,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(m=Object(o.a)({},m,{conversation_id:a.conversation_id})),a.openline_name.includes("</mark>")&&(m=Object(o.a)({},m,{openline:{name:a.openline_name}})),m=Object(o.a)({},m,{unread_messages_count:a.unread_messages_count+1})):a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by===parseInt(pr.AES.decrypt(t.user_data.user_id,"anonymoose").toString(pr.enc.Utf8))?(a.responder_conversation_name.includes("</mark>")&&(m=Object(o.a)({},m,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(m=Object(o.a)({},m,{conversation_id:a.conversation_id})),a.openline_name.includes("</mark>")&&(m=Object(o.a)({},m,{openline:{name:a.openline_name}})),m):a}));d||p||g||h||Cl(e,u,n,ge);return d&&!l.includes(e.urgency_level_id.toString())?v:p&&!r.includes(e.status_id.toString())?v:g&&!s.includes(e.openline_id.toString())?v:h&&!f.includes(!0)?v:Sl(v,e,m)}))};var Ye=function(){var e=Me(),t=JSON.parse(b("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=b("urgencyLevels")&&b("urgencyLevels").split(","),l=b("status")&&b("status").split(","),r=b("openline")&&b("openline").split(","),c=Object(o.a)({},n&&n.length>0&&{urgency_level_id:n},{},l&&l.length>0&&{status_id:l},{},r&&r.length>0&&{openline_id:r}),i=q+"openlineResponderConversation/?user_id="+parseInt(pr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(pr.enc.Utf8)),m=te.length>0&&0===_.length&&0===A.length&&0===k.length?i+"&search="+te:te.length>0&&(_.length>0||A.length>0||k.length>0)?i+"&filter="+JSON.stringify(c)+"&search="+te:0===te.length&&(_.length>0||A.length>0||k.length>0)?i+"&filter="+JSON.stringify(c):"";t&&(m.length>0?B.a.get(m,a).then((function(e){s(e.data)})):B.a.get(i,a).then((function(e){var t=0;d(e.data),s(e.data),f(!1),ve(e.data);e.data.reduce((function(e,a,n){0!=a.unread_messages_count&&t++}),[]);ge(t)})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amWEBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"openlinemsg"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Fl,{amWEBUser:!0,data:e}),l.a.createElement(dr,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},l.a.createElement("span",null,l.a.createElement(En.a,{className:"d-inline-flex d-lg-none pr-3 back-arrow ",title:"Back to Messages",onClick:function(){return Ne(!1),void Ce(!1)}})),"Openline Conversations")),h?l.a.createElement(C.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement(D.a,{size:"large",tip:"Loading...",spinning:h}))):!h&&(null===u||void 0===u?void 0:u.length)>0?l.a.createElement(mr,{conversation:z,conversations:r,chatdiv:Se,urgencyLevel:G,status:Z,searchString:te,newState:ie,socket:re,setCounter:function(e){for(var t=e.data,a=0;a<r.length-1;a++)r[a].conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.data.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")&&(t=Object(o.a)({},t,{unread_messages_count:r[a].unread_messages_count}));t.unread_messages_count&&t.unread_messages_count>0&&pe>0&&ge(pe-1)},NoOpenlines:Rl.a,createMarkup:Tl,setSearchString:ae,setConversations:s,onConversationClick:function(e){vn.isMobile&&(Ne(!0),Ce(!0));(s((function(t){return t.map((function(t){return t.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")?Object(o.a)({},e,{unread_messages_count:0}):t}))})),e.unread_messages_count>0&&pe>0)&&ge(pe-1);v("ConvID",e.conversation_id),H(e),K(e.urgency_level_id),$(e.status_id)},removeFilter:F,removeFilterLevel:function(e,t){P({type:e,value:t})},statusFilterData:A,openlineFilterData:k,urgencyFilterData:_,loadFilteredConversations:function(e,t,a,n,l){Il(a,n,l,O,Y,x,"openline"),s(e),"reset"===t&&Ie.setFieldsValue({search:""})},getConversations:Ye,setStatus:$,setUrgencyLevel:K,unreadCount:pe,showdiv:Oe}):l.a.createElement(ur,{CreateOpenline:zl.a}))))))},hr=a(41),fr=j.a.Content,Er=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=b("userType"),t=e?hr.AES.decrypt(e,"anonymoose").toString(hr.enc.Utf8):"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},"AM WEB"===t?l.a.createElement(be,{amWEBUser:!0}):"AM CC"===t?l.a.createElement(be,{amCCUser:!0}):"Org CC"===t?l.a.createElement(be,{amORGUser:!0}):"IDB"===t?l.a.createElement(be,{amIDBUser:!0}):null),l.a.createElement(S.a,{className:"content-center"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,"AM WEB"===t?l.a.createElement(Ca,{data:this.props}):"Org CC"===t?l.a.createElement(je,{data:this.props}):"AM CC"===t?l.a.createElement(Se,null):"IDB"===t?l.a.createElement(ka,null):null,l.a.createElement(fr,{className:""},l.a.createElement(S.a,{className:"py-3",style:{justifyContent:"center"}},l.a.createElement("h1",{className:"mb-0"},"You don't have access rights! Please contact your administrator.")))))))}}]),t}(l.a.Component),vr=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.handleResetPasswordOk()},a.handleCancel=function(){a.setState({visible:!1}),a.props.handleResetPasswordCancel()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{type:"link",className:"link pl-0 mt-4",onClick:this.showModal},l.a.createElement("span",null,"Reset password for this user")),l.a.createElement(Ut.a,{title:"Reset Password",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Reset and Invite",cancelText:"Cancel"},l.a.createElement(ht.a,{className:"input-md floating-label w-100"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement("div",{className:"mb-4 subtext-md"},"Reset password for "," ",l.a.createElement("span",{className:"font-weight-md"},this.props.user)),l.a.createElement(yt,{label:"New Password",value:""},l.a.createElement(ht.a.Item,{name:"newpwd",className:"pwd",rules:[{required:!0,message:{ENTER_NEW_PASSWORD:"Please enter your new password!"}}]},l.a.createElement(N.a.Password,(e={className:"input-control",htmlFor:"newpwd"},Object(ut.a)(e,"className","required"),Object(ut.a)(e,"value",""),e)))),l.a.createElement(yt,{label:"Confirm Password",value:""},l.a.createElement(ht.a.Item,{name:"confirmpwd",className:"pwd",rules:[{required:!0,message:{CONFIRM_YOUR_PASSWORD:"Please confirm your password!"}}]},l.a.createElement(N.a.Password,(t={className:"input-control",htmlFor:"confirmpwd"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"value",""),t))))))))}}]),t}(n.Component),br=(ft.a.RangePicker,function(e){var t,a,n;return l.a.createElement(Ut.a,{visible:!0,onOk:e.handleEditOk,onCancel:e.handleEditCancel,centered:!0,width:900,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Update",cancelText:"Cancel"},l.a.createElement(D.a,{spinning:e.loader,size:"large"},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement("div",null,"Edit Seeded User"),l.a.createElement("br",null),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(M.a,null,e.seededUserName.charAt(0)),l.a.createElement("span",{className:"md-name"},e.seededUserName)),e.error&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"First Name",value:e.seededUserDetails.firstName},l.a.createElement(ht.a.Item,{name:"firstName",className:"required"},l.a.createElement(N.a,{id:"firstName",className:"input-control",defaultValue:e.seededUserDetails.firstName,htmlFor:"firstName",value:e.seededUserDetails.firstName,onChange:function(t){return e.handleSeededUserOnChange(t)},autoComplete:"off",maxLength:50})),e.fNameCount&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Last Name",value:e.seededUserDetails.lastName},l.a.createElement(ht.a.Item,{name:"lastName",className:"required"},l.a.createElement(N.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"defaultValue",e.seededUserDetails.lastName),Object(ut.a)(t,"value",e.seededUserDetails.lastName),Object(ut.a)(t,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(ut.a)(t,"autoComplete","off"),Object(ut.a)(t,"maxLength",50),t))),e.lNameCount&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Pe,value:e.seededUserDetails.email},l.a.createElement(ht.a.Item,{name:"email",className:"required"},l.a.createElement(N.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"defaultValue",e.seededUserDetails.email),Object(ut.a)(a,"value",e.seededUserDetails.email),Object(ut.a)(a,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(ut.a)(a,"onBlur",(function(t){return e.validateEmailAddress(t)})),Object(ut.a)(a,"autoComplete","off"),Object(ut.a)(a,"disabled",!0),a)),e.emailValidationError&&l.a.createElement(Et.a,{message:jt,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:e.seededUserDetails.startDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"startDate")},disabledDate:e.disabledDate})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:e.seededUserDetails.endDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"endDate")},disabledDate:e.disabledDate})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(yt,{label:Re,value:e.seededUserDetails.mobile},l.a.createElement(ht.a.Item,{name:"mobile",className:"required"},l.a.createElement(Kt.a,{country:"us",id:"mobile",htmlFor:"mobile",defaultValue:e.seededUserDetails.mobile,value:e.seededUserDetails.mobile,onChange:e.handleMobile,onBlur:function(t){return e.validateMobile(t)},autoComplete:"off"}),e.mobileValidationError&&l.a.createElement(Et.a,{message:wt,type:"error",showIcon:!0}),!e.orgMobErrorUpdated&&e.seededUserDetails.mobile.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),e.orgMobErrorUpdated&&l.a.createElement(Et.a,{message:Yt,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Le,value:e.seededUserDetails.status2},l.a.createElement(ht.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(n={className:"input-control w-100 w-lg-50",value:e.seededUserDetails.status2,htmlFor:"status2"},Object(ut.a)(n,"className","required"),Object(ut.a)(n,"onSelect",(function(t){return e.handleSeededUserOnSelect(t,"status2")})),n),l.a.createElement(Option,{value:"1"},J),l.a.createElement(Option,{value:"2"},"Inactive")))))))))),l.a.createElement(vr,{user:e.seededUserDetails.firstName,handleResetPasswordOk:e.handleResetPasswordOk,handleResetPasswordCancel:e.handleResetPasswordCancel}))}),yr=(ft.a.RangePicker,function(e){var t,a,n;return l.a.createElement(Ut.a,{visible:!0,onOk:e.handleAddSeededUser,onCancel:e.handleAddSeededUserCancel,centered:!0,width:1200,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Add",cancelText:"Cancel"},l.a.createElement(D.a,{spinning:e.loader,size:"large"},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},e.error&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement("div",null,"Add Seeded User"),l.a.createElement("br",null),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"First Name",value:e.seededUserDetails.firstName},l.a.createElement(ht.a.Item,{name:"firstName",className:"required"},l.a.createElement(N.a,{id:"firstName",className:"input-control",defaultValue:e.seededUserDetails.firstName,htmlFor:"firstName",value:e.seededUserDetails.firstName,onChange:function(t){return e.handleSeededUserOnChange(t)},autoComplete:"off",maxLength:50})),e.fNameCount&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Last Name",value:e.seededUserDetails.lastName},l.a.createElement(ht.a.Item,{name:"lastName",className:"required"},l.a.createElement(N.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"defaultValue",e.seededUserDetails.lastName),Object(ut.a)(t,"value",e.seededUserDetails.lastName),Object(ut.a)(t,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(ut.a)(t,"autoComplete","off"),Object(ut.a)(t,"maxLength",50),t))),e.lNameCount&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Pe,value:e.seededUserDetails.email},l.a.createElement(ht.a.Item,{name:"email",className:"required"},l.a.createElement(N.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"defaultValue",e.seededUserDetails.email),Object(ut.a)(a,"value",e.seededUserDetails.email),Object(ut.a)(a,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(ut.a)(a,"onBlur",(function(t){return e.validateEmailAddress(t)})),Object(ut.a)(a,"autoComplete","off"),a)),e.emailValidationError&&l.a.createElement(Et.a,{message:jt,type:"error",showIcon:!0}),!e.orgEmailErrorUpdated&&e.seededUserDetails.email.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&e.seededUserDetails.email.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),e.orgEmailErrorUpdated&&l.a.createElement(Et.a,{message:At,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:e.seededUserDetails.startDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"startDate")},disabledDate:e.disabledDate})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:e.seededUserDetails.endDate,onChange:function(t){return e.handleSeededUserDatePickerChange(t,"endDate")},disabledDate:e.disabledDate})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(yt,{label:Re,value:e.seededUserDetails.mobile},l.a.createElement(ht.a.Item,{name:"mobile",className:"required"},l.a.createElement(Kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:e.seededUserDetails.mobile,onChange:e.handleMobile,onBlur:e.validateMobile,autoComplete:"off"}),e.mobileValidationError&&l.a.createElement(Et.a,{message:wt,type:"error",showIcon:!0}),!e.orgMobErrorUpdated&&e.seededUserDetails.mobile.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),e.orgMobErrorUpdated&&l.a.createElement(Et.a,{message:Yt,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Le,value:e.seededUserDetails.status2},l.a.createElement(ht.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(n={className:"input-control w-100 w-lg-50",value:e.seededUserDetails.status2,htmlFor:"status2"},Object(ut.a)(n,"className","required"),Object(ut.a)(n,"onSelect",(function(t){return e.handleSeededUserOnSelect(t,"status2")})),n),l.a.createElement(Option,{value:"1"},J),l.a.createElement(Option,{value:"2"},"Inactive")))))))))))}),_r=j.a.Content,Or=function(e){var t,a=Object(u.g)(),r=Object(n.useState)(!1),s=Object(c.a)(r,2),i=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!1),E=Object(c.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)(!1),_=Object(c.a)(y,2),O=_[0],k=_[1],x=Object(n.useState)(!1),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(n.useState)(!1),U=Object(c.a)(Y,2),F=U[0],P=U[1],R=Object(n.useState)(!1),L=Object(c.a)(R,2),z=L[0],H=L[1],V=Object(n.useState)(!1),Q=Object(c.a)(V,2),G=Q[0],K=Q[1],W=Object(n.useState)(""),J=Object(c.a)(W,2),Z=J[0],$=J[1],X=Object(n.useState)(""),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),le=Object(c.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)(!1),ce=Object(c.a)(oe,2),ie=ce[0],me=ce[1],ue=Object(n.useState)(!1),de=Object(c.a)(ue,2),pe=de[0],ge=de[1],he=Object(n.useState)({name:"",identifier:"",org_id:"",status:"",startDate:"",endDate:""}),fe=Object(c.a)(he,2),Ee=fe[0],ve=fe[1],ye=Object(n.useState)([]),_e=Object(c.a)(ye,2),Oe=_e[0],Ne=_e[1],je=w.a.useNotification(),we=Object(c.a)(je,2),Ce=we[0],De=we[1],ke=ht.a.useForm(),xe=Object(c.a)(ke,1)[0],Te=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id,Ae=Object(n.useState)({cug1:"",cug2:"",cug3:"",cug4:"",cug5:""}),Ye=Object(c.a)(Ae,2),Ue=Ye[0],Pe=Ye[1],Re=Object(n.useState)({flex1:"",flex2:"",flex3:"",flex4:"",flex5:""}),Le=Object(c.a)(Re,2),ze=Le[0],qe=Le[1],Ve=Object(n.useState)(!1),Qe=Object(c.a)(Ve,2),Ge=Qe[0],Ke=Qe[1];Object(n.useEffect)((function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};h(!0),B.a.get(q+"getOrganization/".concat(Te,"/"),e).then((function(e){var t=null===e||void 0===e?void 0:e.data;ve({name:t.organization.name,identifier:t.organization.identifier,status:t.organization.status_id.toString(),startDate:Fe()(t.organization.start_date,"YYYY-MM-DD"),endDate:Fe()(t.organization.end_date).isValid()&&Fe()(t.organization.end_date,"YYYY-MM-DD")}),xe.setFieldsValue({name:t.organization.name,identifier:t.organization.identifier});var a=[];t.seeded_user.map((function(e){e.soft_delete||(a=[].concat(Object(dt.a)(a),[{firstName:e.first_name,lastName:e.last_name,status2:e.status_id.toString(),email:e.email,startDate:Fe()(e.start_date,"YYYY-MM-DD"),endDate:Fe()(e.end_date).isValid()&&Fe()(e.end_date,"YYYY-MM-DD"),mobile:e.mobile_number}]))})),Ne(a);var n=t.cug_flex_fields.cug_parameters,l=t.cug_flex_fields.flex_parameters;Pe({cug1:n.cug_field_1,cug2:n.cug_field_2,cug3:n.cug_field_3,cug4:n.cug_field_4,cug5:n.cug_field_5}),qe({flex1:l.flex_field_1,flex2:l.flex_field_2,flex3:l.flex_field_3,flex4:l.flex_field_4,flex5:l.flex_field_5}),h(!1)}))}),[i]);var We=function(){Oe.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(re)&&e.email===re.email){var t=Oe.indexOf(e),a=JSON.parse(JSON.stringify(Oe));a[t]=re;var n=[];a.map((function(e){e=Object(o.a)({},e,{startDate:Fe()(e.startDate,"YYYY-MM-DD"),endDate:Fe()(e.endDate).isValid()&&Fe()(e.endDate,"YYYY-MM-DD")}),n.push(e)})),Ne(n)}})),at()},Je=function(e){"firstName"===e.target.id&&50===e.target.value.length?H(!0):"lastName"===e.target.id&&50===e.target.value.length?K(!0):(H(!1),K(!1)),se(Object(o.a)({},re,Object(ut.a)({},e.target.id,e.target.value)))},Ze=function(e){se(Object(o.a)({},re,{mobile:e}))},$e=function(e,t){se(Object(o.a)({},re,Object(ut.a)({},t,e)))},Xe=function(e,t){se(Object(o.a)({},re,Object(ut.a)({},t,e)))},et=function(e){/\S+@\S+\.\S+/.test(e.target.value)?k(!1):k(!0)},tt=function(e){re.mobile.length>10||/^\+\d$/.test(e.target.value)?A(!1):A(!0)},at=function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t=re.endDate?{first_name:re.firstName,last_name:re.lastName,email:te,mobile_number:re.mobile,status_id:parseInt(re.status2),start_date:re.startDate?Fe()(re.startDate).format("DD-MM-YYYY"):"",end_date:re.endDate?Fe()(re.endDate).format("DD-MM-YYYY"):"",organization_id:parseInt(Te)}:{first_name:re.firstName,last_name:re.lastName,email:te,mobile_number:re.mobile,status_id:parseInt(re.status2),start_date:re.startDate?Fe()(re.startDate).format("DD-MM-YYYY"):"",organization_id:parseInt(Te)};h(!0),B.a.put(q+"seededUser/",t,e).then((function(){Ce.info({description:"Details for"+Z+" have been changed successfully.",placement:"bottomLeft"}),h(!1),me(!1)}))},nt=function(e){return e&&e<Fe()().startOf("day")},lt=function(){se({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),b(!1),H(!1),K(!1),ge(!0)};ft.a.RangePicker;return l.a.createElement(l.a.Fragment,null,De,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Se,null),l.a.createElement(_r,null,l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Organization Details")),l.a.createElement(D.a,{spinning:g,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Organization Details"),l.a.createElement("div",null,l.a.createElement(Ie.a,{type:"link",className:"link pl-0 btn-link-primary ml-3",onClick:function(){return function(){var e="/amcc/editorg/".concat(Te);a.push(e,"viaOrgDetails")}()}},l.a.createElement("span",{className:"icon icon-pencil"}),l.a.createElement("span",{className:"pl-2 d-none d-block-md"},"Edit Details")))),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(M.a,null,Ee.name.charAt(0)),l.a.createElement("span",{className:"md-name"},Ee.name)),l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",onFinish:function(e){},form:xe},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Name",value:Ee.name},l.a.createElement(ht.a.Item,{className:"required",name:"name",id:"name"},l.a.createElement(N.a,{className:"input-control",id:"name",name:"name",htmlFor:"organization name",defaultValue:Ee.name,value:Ee.name,disabled:!0})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Id",value:Ee.identifier},l.a.createElement(ht.a.Item,{className:"required",name:"identifier",id:"identifier",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:"identifier",name:"identifier",htmlFor:"organization name",defaultValue:Ee.identifier,value:Ee.identifier,disabled:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:Ee.startDate,disabled:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:Ee.endDate,disabled:!0}))))),l.a.createElement("div",{className:"pt-3"},!!(Ue.cug1||Ue.cug2||Ue.cug3||Ue.cug4||Ue.cug5||ze.flex1||ze.flex2||ze.flex3||ze.flex4||ze.flex5)&&l.a.createElement(Ie.a,{type:"link",className:"link pl-0",onClick:function(){Ke(!0)}},"Configured CUG and ORG Attribute")),Ge&&l.a.createElement(Rt,{CUGModalvisible:Ge,flexAttribute:ze,CUGAttribute:Ue,viewOnly:!0,handleCancel:function(){Ke(!1)}})))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement(S.a,{className:"w-100"},l.a.createElement(C.a,{span:24,md:12},l.a.createElement("h6",{className:"py-3 mb-0"},"Seeded Users Details")),l.a.createElement(C.a,{span:24,md:12,className:"d-flex justify-content-left justify-content-md-end align-items-center my-3 my-md-0"},l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return lt()}},"Add Seeded User")))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Oe.length>0?l.a.createElement(Qt,{seededUsers:Oe,orgID:parseInt(Te),statusOnClicked:function(){m(!i)},handleEditUser:function(e){me(!0),b(!1),H(!1),K(!1),k(!1),A(!1);var t={};Oe.forEach((function(a){a.email===e&&(t=a)})),se(t),$(t.firstName),ae(t.email)},handleDelete:function(e){var t=null===Oe||void 0===Oe?void 0:Oe.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e})),a="";Oe.map((function(t){e===t.email&&(a=t.firstName)})),Ne(t);var n={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"seededUser/".concat(e),n).then((function(){Ce.info({description:a+" has been deleted successfully.",placement:"bottomLeft"})}))},addSeededUser:lt,viaEdit:!0,orgDetails:!0,seededUser:!0}):l.a.createElement(C.a,{span:24,lg:18},l.a.createElement(S.a,{className:"justify-content-center"},"No Seeded User")),ie?l.a.createElement(br,{error:v,handleEditOk:function(){re.firstName&&re.lastName&&re.status2&&re.mobile&&re.startDate&&re.email?(b(!1),O||T||We()):b(!0)},handleEditCancel:function(){me(!1)},seededUsers:Oe,fNameCount:z,lNameCount:G,seededUserName:Z,seededUserDetails:re,disabledDate:nt,handleSeededUserOnChange:Je,handleSeededUserDatePickerChange:Xe,handleMobile:Ze,handleSeededUserOnSelect:$e,validateEmailAddress:et,emailValidationError:O,validateMobile:tt,mobileValidationError:T,handleResetPasswordOk:function(){},handleResetPasswordCancel:function(){},loader:g}):pe?l.a.createElement(yr,{error:v,handleAddSeededUser:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={email:re.email,mobile_number:"+"+re.mobile,is_seeded_user:1,first_name:re.firstName,last_name:re.lastName,start_date:re.startDate?Fe()(re.startDate).format("DD-MM-YYYY"):"",end_date:re.endDate?Fe()(re.endDate).format("DD-MM-YYYY"):"",status_id:parseInt(re.status2),organization_id:parseInt(Te)},a={seeded_users:[t]},n=[].concat(Object(dt.a)(Oe),[{firstName:t.first_name,lastName:t.last_name,status2:t.status_id.toString(),email:t.email,startDate:Fe()(t.start_date,"YYYY-MM-DD"),endDate:Fe()(t.end_date).isValid()&&Fe()(t.end_date,"YYYY-MM-DD"),mobile:t.mobile_number}]);re.firstName&&re.lastName&&re.status2&&re.mobile&&re.startDate&&re.email?(b(!1),O||T||F||(Ne(n),h(!0),B.a.post(q+"seededUser/",a,e).then((function(e){Ce.info({description:re.firstName+" has been added successfully.",placement:"bottomLeft"}),h(!1),ge(!1)})))):b(!0)},handleAddSeededUserCancel:function(){ge(!1)},seededUsers:Oe,fNameCount:z,lNameCount:G,seededUserDetails:re,disabledDate:nt,handleSeededUserOnChange:Je,handleSeededUserDatePickerChange:Xe,handleMobile:Ze,handleSeededUserOnSelect:$e,validateEmailAddress:et,emailValidationError:O,validateMobile:tt,mobileValidationError:T,validatePassword:function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?P(!1):P(!0)},passwordValidationError:F,loader:g}):l.a.createElement(l.a.Fragment,null)))))))))))},Nr=a(41),jr=j.a.Content,wr=function(e){var t,a,r,s=w.a.useNotification(),i=Object(c.a)(s,2),d=i[0],p=i[1],g=Object(u.g)(),h=ht.a.useForm(),f=Object(c.a)(h,1)[0],E=Object(n.useState)(!1),v=Object(c.a)(E,2),y=v[0],_=v[1],O=Object(n.useState)(!1),k=Object(c.a)(O,2),x=k[0],I=k[1],T=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id,A=Object(n.useState)(!1),Y=Object(c.a)(A,2),U=Y[0],F=Y[1],P=Object(n.useState)(!1),R=Object(c.a)(P,2),L=R[0],z=R[1],H=Object(n.useState)(!1),V=Object(c.a)(H,2),Q=V[0],G=V[1],K=Object(n.useState)(!1),W=Object(c.a)(K,2),J=W[0],Z=W[1],$=Object(n.useState)(!1),X=Object(c.a)($,2),ee=X[0],te=X[1],ae=Object(n.useState)(""),ne=Object(c.a)(ae,2),le=ne[0],re=ne[1],se=Object(n.useState)(""),oe=Object(c.a)(se,2),ce=oe[0],me=oe[1],de=Object(n.useState)(""),pe=Object(c.a)(de,2),ge=pe[0],he=pe[1],fe=Object(n.useState)(),Ee=Object(c.a)(fe,2),ve=Ee[0],ye=Ee[1],_e=Object(n.useState)(""),Oe=Object(c.a)(_e,2),Ne=Oe[0],je=Oe[1],we=Object(n.useState)(""),Ce=Object(c.a)(we,2),De=Ce[0],ke=Ce[1],xe=Object(n.useState)(""),Te=Object(c.a)(xe,2),Ae=Te[0],Ye=Te[1],Ue=Object(n.useState)({name:"",identifier:"",org_id:"",status:"",startDate:"",endDate:""}),Pe=Object(c.a)(Ue,2),Re=Pe[0],Le=Pe[1],ze=Object(n.useState)({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),qe=Object(c.a)(ze,2),Ve=qe[0],Qe=qe[1],Ge=Object(n.useState)([]),Ke=Object(c.a)(Ge,2),We=Ke[0],Je=Ke[1],Ze=Object(n.useState)(!1),$e=Object(c.a)(Ze,2),Xe=$e[0],et=$e[1],tt=Object(n.useState)(!1),at=Object(c.a)(tt,2),nt=at[0],lt=at[1],rt=Object(n.useState)(!1),st=Object(c.a)(rt,2),ot=st[0],ct=st[1],it=Object(n.useState)(!1),mt=Object(c.a)(it,2),pt=mt[0],gt=mt[1],vt=Object(n.useState)(!1),bt=Object(c.a)(vt,2),jt=bt[0],wt=bt[1],St=Object(n.useState)(!1),Ct=Object(c.a)(St,2),Dt=Ct[0],kt=Ct[1],xt=Object(n.useState)(!1),It=Object(c.a)(xt,2),Tt=It[0],At=It[1],Yt=Object(n.useState)(""),Mt=Object(c.a)(Yt,2),Ut=Mt[0],Ft=Mt[1],Pt=Object(n.useState)(!1),Lt=Object(c.a)(Pt,2),zt=Lt[0],Bt=Lt[1],qt=Object(n.useState)({cug1:"",cug2:"",cug3:"",cug4:"",cug5:""}),Vt=Object(c.a)(qt,2),Gt=Vt[0],Kt=Vt[1],Wt=Object(n.useState)({flex1:"",flex2:"",flex3:"",flex4:"",flex5:""}),Jt=Object(c.a)(Wt,2),Zt=Jt[0],$t=Jt[1],Xt=Object(n.useState)(""),ea=Object(c.a)(Xt,2),ta=ea[0],aa=ea[1],na=Object(n.useState)(""),la=Object(c.a)(na,2),ra=la[0],sa=la[1];Object(n.useEffect)((function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};_(!0),B.a.get(q+"getOrganization/".concat(T,"/"),e).then((function(e){var t=null===e||void 0===e?void 0:e.data;Le({name:t.organization.name,identifier:t.organization.identifier,status:t.organization.status_id.toString(),startDate:t.organization.start_date?Fe()(t.organization.start_date,"YYYY-MM-DD"):"",endDate:t.organization.end_date?Fe()(t.organization.end_date,"YYYY-MM-DD"):""}),ye(t.organization.app_authentication_key_id),he(t.organization.name),je(t.organization.identifier),Ft(t.organization.status_id.toString()),f.setFieldsValue({name:t.organization.name,identifier:t.organization.identifier});var a=[];t.seeded_user.map((function(e){e.soft_delete||(a=[].concat(Object(dt.a)(a),[{firstName:e.first_name,lastName:e.last_name,status2:e.status_id.toString(),email:e.email,startDate:Fe()(e.start_date,"YYYY-MM-DD"),endDate:Fe()(e.end_date).isValid()&&Fe()(e.end_date,"YYYY-MM-DD"),mobile:e.mobile_number}]))})),Je(a);var n=t.cug_flex_fields.cug_parameters,l=t.cug_flex_fields.flex_parameters;Kt({cug1:n.cug_field_1,cug2:n.cug_field_2,cug3:n.cug_field_3,cug4:n.cug_field_4,cug5:n.cug_field_5}),$t({flex1:l.flex_field_1,flex2:l.flex_field_2,flex3:l.flex_field_3,flex4:l.flex_field_4,flex5:l.flex_field_5}),_(!1)}))}),[x]);var oa=function(){We.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(Ve)&&e.email===Ve.email){var t=We.indexOf(e),a=JSON.parse(JSON.stringify(We));a[t]=Ve;var n=[];a.map((function(e){e=Object(o.a)({},e,{startDate:Fe()(e.startDate,"YYYY-MM-DD"),endDate:Fe()(e.endDate).isValid()&&Fe()(e.endDate,"YYYY-MM-DD")}),n.push(e)})),Je(n)}})),ba()},ca=function(e){"identifier"===e.target.id&&20===e.target.value.length?wt(!0):"name"===e.target.id&&80===e.target.value.length?gt(!0):(gt(!1),wt(!1)),Le(Object(o.a)({},Re,Object(ut.a)({},e.target.id,e.target.value)))},ia=function(e,t){Le(Object(o.a)({},Re,Object(ut.a)({},t,e)))},ma=function(e){"firstName"===e.target.id&&50===e.target.value.length?kt(!0):"lastName"===e.target.id&&50===e.target.value.length?At(!0):(kt(!1),At(!1)),Qe(Object(o.a)({},Ve,Object(ut.a)({},e.target.id,e.target.value)))},ua=function(e){Qe(Object(o.a)({},Ve,{mobile:e}))},da=function(e,t){Qe(Object(o.a)({},Ve,Object(ut.a)({},t,e)))},pa=function(e,t){Qe(Object(o.a)({},Ve,Object(ut.a)({},t,e)))},ga=function(e){/\S+@\S+\.\S+/.test(e.target.value)?G(!1):G(!0),ha()},ha=function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkEmail/",{email:Ve.email},t).then((function(e){e.data&&aa(e.data.message)}))},fa=function(e){Ve.mobile.length>10||/^\+\d$/.test(e.target.value)?Z(!1):Z(!0),Ea()},Ea=function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkPhone/",{mobile_number:Ve.mobile},t).then((function(e){e.data&&sa(e.data.message)}))},va=function(){var e=JSON.parse(b("user")),t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};_(!0);var a={app_authentication_key_id:ve,organization_id:T,name:Re.name,identifier:Re.identifier,start_date:Re.startDate?Fe()(Re.startDate).format("DD-MM-YYYY"):null,end_date:Re.endDate?Fe()(Re.endDate).format("DD-MM-YYYY"):null,status_id:1,cug_flex_fields:{cug_parameters:{cug_field_1:Gt.cug1,cug_field_2:Gt.cug2,cug_field_3:Gt.cug3,cug_field_4:Gt.cug4,cug_field_5:Gt.cug5,updated_by:parseInt(Nr.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Nr.enc.Utf8))},flex_parameters:{flex_field_1:Zt.flex1,flex_field_2:Zt.flex2,flex_field_3:Zt.flex3,flex_field_4:Zt.flex4,flex_field_5:Zt.flex5,updated_by:parseInt(Nr.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Nr.enc.Utf8))}}};Re.name&&Re.identifier?"status: false"!==le&&Re.name!==ge||"status: false"!==ce&&Re.identifier!==Ne||(F(!1),B.a.put(q+"saveOrganization/",a,t).then((function(){_(!1),window.location="/amcc/manageorganizations"}))):(_(!1),F(!0))},ba=function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t=Ve.endDate?{first_name:Ve.firstName,last_name:Ve.lastName,email:Ae,mobile_number:Ve.mobile,status_id:parseInt(Ve.status2),start_date:Ve.startDate?Fe()(Ve.startDate).format("DD-MM-YYYY"):"",end_date:Ve.endDate?Fe()(Ve.endDate).format("DD-MM-YYYY"):"",organization_id:parseInt(T)}:{first_name:Ve.firstName,last_name:Ve.lastName,email:Ae,mobile_number:Ve.mobile,status_id:parseInt(Ve.status2),start_date:Ve.startDate?Fe()(Ve.startDate).format("DD-MM-YYYY"):"",organization_id:parseInt(T)};_(!0),B.a.put(q+"seededUser/",t,e).then((function(){d.info({description:"Details for"+De+" have been changed successfully.",placement:"bottomLeft"}),_(!1),et(!1)}))},ya=function(e){return e&&e<Fe()().startOf("day")},_a=function(){Qe({firstName:"",lastName:"",status2:"",email:"",mobile:"",startDate:"",endDate:""}),z(!1),kt(!1),At(!1),lt(!0)};ft.a.RangePicker;return l.a.createElement(l.a.Fragment,null,p,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Se,null),l.a.createElement(jr,null,l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Organization")),l.a.createElement(D.a,{spinning:y,size:"large"},l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Edit Organization"),l.a.createElement("div",null,l.a.createElement(Ie.a,{type:"link",className:"link pl-0 btn-link-primary ml-3 deleteOrg",onClick:function(){ct(!0)}},l.a.createElement("span",{className:"icon icon-delete"}),l.a.createElement("span",{className:"d-none d-md-inline-flex deleteOrg"},ue)),ot?l.a.createElement(Ht,{org:ge,handleDelete:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"deleteOrganization/".concat(T,"/"),e).then((function(){window.location="/amcc/manageorganizations"}))},handleCancel:function(){ct(!1)},deleteOrg:!0}):l.a.createElement(l.a.Fragment,null))),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(M.a,null,ge.charAt(0)),l.a.createElement("span",{className:"md-name"},ge)),l.a.createElement(ht.a,{className:"input-md floating-label w-100",form:f},U&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Name",value:Re.name},l.a.createElement(ht.a.Item,{className:"required edit-input",name:"name",id:"name"},l.a.createElement(N.a,(a={className:"input-control",id:"name",name:"name"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"defaultValue",Re.name),Object(ut.a)(a,"value",Re.name),Object(ut.a)(a,"onChange",(function(e){return ca(e)})),Object(ut.a)(a,"onBlur",(function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==ge?B.a.post(q+"checkOrganization/",{organization_name:Re.name},t).then((function(e){e.data&&re(e.data[0])})):re(!1)}(e)})),Object(ut.a)(a,"htmlFor","name"),Object(ut.a)(a,"autoComplete","off"),Object(ut.a)(a,"maxLength",80),a)),"status: false"===le&&Re.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&Re.name.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==le&&l.a.createElement(Et.a,{message:"Sorry! This organization already exists in the system. Please use a different name.",type:"error",showIcon:!0})),pt&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Organization Id",value:Re.identifier},l.a.createElement(ht.a.Item,{className:"required edit-input",name:"identifier",id:"identifier"},l.a.createElement(N.a,(r={className:"input-control edit-input",name:"identifier",id:"identifier",htmlFor:"identifier"},Object(ut.a)(r,"className","required"),Object(ut.a)(r,"defaultValue",Re.identifier),Object(ut.a)(r,"value",Re.identifier),Object(ut.a)(r,"onChange",(function(e){return ca(e)})),Object(ut.a)(r,"onBlur",(function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==Ne?B.a.post(q+"checkOrganizationID/",{orgId:Re.identifier},t).then((function(e){e.data&&me(e.data[0])})):me(!1)}(e)})),Object(ut.a)(r,"autoComplete","off"),Object(ut.a)(r,"maxLength",20),r)),"status: false"===ce&&Re.identifier.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&Re.identifier.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==ce&&l.a.createElement(Et.a,{message:"Sorry! This Org Id already exists in the system. Please use a different Id.",type:"error",showIcon:!0})),jt&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Nt,type:"error"})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:Re.startDate,onChange:function(e){return ia(e,"startDate")},disabledDate:ya})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:Re.endDate,onChange:function(e){return ia(e,"endDate")},disabledDate:ya})))))),l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:va},"Update"),l.a.createElement(Ie.a,{className:"ml-4",type:"secondary",onClick:function(){if(e.location.state){var t="/amcc/orgdetails/".concat(T);g.push(t)}else window.location="/amcc/manageorganizations"}},ie),l.a.createElement(Ie.a,{htmlType:"submit",type:"link",className:"link",onClick:function(){var e=JSON.parse(b("user")),t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},a={app_authentication_key_id:ve,organization_id:T,name:Re.name,identifier:Re.identifier,start_date:Re.startDate?Fe()(Re.startDate).format("DD-MM-YYYY"):null,end_date:Re.endDate?Fe()(Re.endDate).format("DD-MM-YYYY"):null,status_id:2,cug_flex_fields:{cug_parameters:{cug_field_1:Gt.cug1,cug_field_2:Gt.cug2,cug_field_3:Gt.cug3,cug_field_4:Gt.cug4,cug_field_5:Gt.cug5,updated_by:parseInt(Nr.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Nr.enc.Utf8))},flex_parameters:{flex_field_1:Zt.flex1,flex_field_2:Zt.flex2,flex_field_3:Zt.flex3,flex_field_4:Zt.flex4,flex_field_5:Zt.flex5,updated_by:parseInt(Nr.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Nr.enc.Utf8))}}},n=Fe()(Re.endDate).format("MM-DD-YYYY");if(Re.status!==Ut)if(new Date<new Date(n))Re.name&&Re.identifier?"status: false"!==le&&Re.name!==ge||"status: false"!==ce&&Re.identifier!==Ne||(F(!1),B.a.put(q+"saveOrganization/",a,t).then((function(){window.location="/amcc/manageorganizations"}))):F(!0);else{d.info({description:"Status can't be changed as the end date has been passed.",placement:"bottomLeft"})}else Re.name&&Re.identifier?(F(!1),_(!0),B.a.put(q+"saveOrganization/",a,t).then((function(){window.location="/amcc/manageorganizations"}))):F(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))),l.a.createElement("div",{className:"pt-3"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0",onClick:function(){Bt(!0)}},"Edit Configured CUG and ORG Attribute")),zt&&l.a.createElement(Rt,{CUGModalvisible:zt,flexAttribute:Zt,CUGAttribute:Gt,handleCancel:function(){Bt(!1)},handleSave:function(){Bt(!1),va()},handleCUGChange:function(e,t){/^[0-9a-zA-Z\s]*$/.test(e.target.value)&&("flex"===t?$t(Object(o.a)({},Zt,Object(ut.a)({},e.target.id,e.target.value))):Kt(Object(o.a)({},Gt,Object(ut.a)({},e.target.id,e.target.value))))},isEdit:!0,orgStatus:Re.status})))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:12,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Edit Seeded Users")),l.a.createElement(C.a,{span:24,md:12,className:"d-flex justify-content-left justify-content-md-end align-items-center my-3 my-md-0"},l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return _a()}},"Add Seeded User")),We.length>0?l.a.createElement(Qt,{seededUsers:We,statusOnClicked:function(){I(!x)},orgID:parseInt(T),handleEditUser:function(e){et(!0),z(!1),kt(!1),At(!1),G(!1),Z(!1);var t={};We.forEach((function(a){a.email===e&&(t=a)})),Qe(t),ke(t.firstName),Ye(t.email)},handleDelete:function(e){var t=null===We||void 0===We?void 0:We.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e})),a="";We.map((function(t){e===t.email&&(a=t.firstName)})),Je(t);var n={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"seededUser/".concat(e),n).then((function(){d.info({description:a+" has been deleted successfully.",placement:"bottomLeft"})}))},addSeededUser:_a,viaEdit:!0,seededUser:!0}):l.a.createElement(C.a,{span:24,lg:18},l.a.createElement(S.a,{className:"justify-content-center"},"No Seeded User")),Xe?l.a.createElement(br,{error:L,handleEditOk:function(){Ve.firstName&&Ve.lastName&&Ve.status2&&Ve.mobile&&Ve.startDate&&Ve.email?(z(!1),Q||J||oa()):z(!0)},handleEditCancel:function(){et(!1)},seededUsers:We,seededUserName:De,fNameCount:Dt,lNameCount:Tt,seededUserDetails:Ve,disabledDate:ya,handleSeededUserOnChange:ma,handleSeededUserDatePickerChange:pa,handleMobile:ua,handleSeededUserOnSelect:da,validateEmailAddress:ga,emailValidationError:Q,validateMobile:fa,mobileValidationError:J,handleResetPasswordOk:function(){},handleResetPasswordCancel:function(){},loader:y,orgMobErrorUpdated:ra}):nt?l.a.createElement(yr,{error:L,handleAddSeededUser:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t=Ve.endDate?{email:Ve.email,mobile_number:"+"+Ve.mobile,is_seeded_user:1,first_name:Ve.firstName,last_name:Ve.lastName,start_date:Ve.startDate?Fe()(Ve.startDate).format("DD-MM-YYYY"):"",end_date:Ve.endDate?Fe()(Ve.endDate).format("DD-MM-YYYY"):"",status_id:parseInt(Ve.status2),organization_id:parseInt(T)}:{email:Ve.email,mobile_number:"+"+Ve.mobile,is_seeded_user:1,first_name:Ve.firstName,last_name:Ve.lastName,start_date:Ve.startDate?Fe()(Ve.startDate).format("DD-MM-YYYY"):"",status_id:parseInt(Ve.status2),organization_id:parseInt(T)},a={seeded_users:[t]},n=[].concat(Object(dt.a)(We),[{firstName:t.first_name,lastName:t.last_name,status2:t.status_id.toString(),email:t.email,startDate:Fe()(t.start_date,"YYYY-MM-DD"),endDate:Fe()(t.end_date).isValid()&&Fe()(t.end_date,"YYYY-MM-DD"),mobile:t.mobile_number}]);Ve.firstName&&Ve.lastName&&Ve.status2&&Ve.mobile&&Ve.startDate&&Ve.email?(z(!1),Q||J||ee||(Je(n),_(!0),B.a.post(q+"seededUser/",a,e).then((function(e){d.info({description:Ve.firstName+" has been added successfully.",placement:"bottomLeft"}),_(!1),lt(!1)})))):z(!0)},handleAddSeededUserCancel:function(){lt(!1)},seededUsers:We,fNameCount:Dt,lNameCount:Tt,seededUserDetails:Ve,disabledDate:ya,handleSeededUserOnChange:ma,handleSeededUserDatePickerChange:pa,handleMobile:ua,handleSeededUserOnSelect:da,validateEmailAddress:ga,emailValidationError:Q,validatePassword:function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?te(!1):te(!0)},passwordValidationError:ee,validateMobile:fa,mobileValidationError:J,loader:y,orgEmailErrorUpdated:ta,orgMobErrorUpdated:ra}):l.a.createElement(l.a.Fragment,null)))))))))},Sr=j.a.Content,Cr=function(){var e=ft.a.RangePicker;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Se,null),l.a.createElement(Sr,null,l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Profile")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(M.a,null,"W"),l.a.createElement("span",{className:"md-name"},"Alan Charles")),l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"",onFinish:function(e){}},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"User Name"},l.a.createElement(ht.a.Item,{className:"required",name:"organization name",rules:[{required:!0,message:"Please enter user name "}]},l.a.createElement(N.a,{className:"input-control",htmlFor:"user name"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"User Id"},l.a.createElement(ht.a.Item,{className:"required",name:"user id",validateStatus:"success",rules:[{required:!0,message:"Please enter user id "}]},l.a.createElement(N.a,{className:"input-control",htmlFor:"user name"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Email Id"},l.a.createElement(ht.a.Item,{className:"required",name:"email id",rules:[{required:!0,message:"Please enter email id ",type:"email"}]},l.a.createElement(N.a,{className:"input-control",htmlFor:"email id"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Status"},l.a.createElement(ht.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please enter status "}]},l.a.createElement(N.a,{className:"input-control",htmlFor:"status"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Select Date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(e,{className:"w-100 "})))))),l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{type:"primary",htmlType:"submit"},"Update"),l.a.createElement(Ie.a,{className:"ml-4",type:"secondary"},"Cancel"))))))))))))},Dr=a(41),kr=N.a.TextArea,xr=j.a.Content,Ir=function(e){var t,a=Object(n.useState)({end_date:"",help_text:"",hotline_icon_id:"",hotline_id:"",name:"",statusMessage:"",start_date:"",status:!1,status_id:""}),r=Object(c.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!1),E=Object(c.a)(f,2),v=E[0],y=E[1],_=Object(n.useState)(""),O=Object(c.a)(_,2),N=O[0],C=O[1],k=w.a.useNotification(),x=Object(c.a)(k,2),I=x[0],T=x[1],A=Object(n.useState)(!1),Y=Object(c.a)(A,2),M=Y[0],U=Y[1],F=Object(n.useState)(!0),P=Object(c.a)(F,2),R=(P[0],P[1],ht.a.useForm()),L=Object(c.a)(R,1)[0],z=Object(u.h)(),H=Object(n.useState)(!1),V=Object(c.a)(H,2),Q=V[0],G=V[1],K=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}};Object(n.useEffect)((function(){var e=z.state.start_date?Fe()(z.state.start_date,"MM / DD / YYYY").format("YYYY-MM-DD"):"",t=z.state.end_date?Fe()(z.state.end_date,"MM / DD / YYYY").format("YYYY-MM-DD"):"";i({end_date:t&&Fe()(t,"YYYY/MM/DD"),help_text:z.state.help_text,hotline_icon_id:z.state.hotline_icon_id,hotline_id:z.state.hotline_id,name:z.state.name,start_date:Fe()(e,"YYYY/MM/DD"),status:4===z.state.status_id,status_id:z.state.status_id});var a=z.state.hotline_icon_id&&function(e){switch(e){case"1":return'<span class="icon icon-sexual-harassment-1 ant-tooltip-open"></span>';case"2":return'<span class="icon icon-violence ant-tooltip-open"></span>';case"3":return'<span class="icon icon-racism ant-tooltip-open"></span>';case"4":return'<span class="icon icon-cyber-bullying ant-tooltip-open"></span>';case"5":return'<span class="icon icon-fight ant-tooltip-open"></span>';case"6":return'<span class="icon icon-discrimination ant-tooltip-open"></span>';case"7":return'<span class="icon icon-slap ant-tooltip-open"></span>';default:return""}}(z.state.hotline_icon_id.toString());h(a),L.setFieldsValue({name:z.state.name,help_text:z.state.help_text})}),[]);var W=function(e){i(Object(o.a)({},s,Object(ut.a)({},e.target.id,e.target.value)))},J=function(e,t){var a,n,l,r=Fe()();if(e&&0===(null===(a=e[0])||void 0===a?void 0:a.diff(r,"days"))&&!s.status)i(Object(o.a)({},s,(l={},Object(ut.a)(l,t,e),Object(ut.a)(l,"statusMessage",ge),l)));else if(e&&(null===(n=e[0])||void 0===n?void 0:n.diff(r,"days"))>0&&!s.status){var c;i(Object(o.a)({},s,(c={},Object(ut.a)(c,t,e),Object(ut.a)(c,"statusMessage",he),c)))}else{var m;i(Object(o.a)({},s,(m={},Object(ut.a)(m,t,e),Object(ut.a)(m,"statusMessage",""),m)))}},Z=function(e){var t=Me(),a=s.hotline_id;delete s.hotline_id;var n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};y(!0),B.a.put(q+"hotline/"+a,e,n).then((function(e){if(200===e.status){I.info({description:"Hotline details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/hotlinedirectory"}}))},$=function(e){return e&&e<Fe()().startOf("day")};ft.a.RangePicker;return l.a.createElement(l.a.Fragment,null,T,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(xr,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Edit Hotline")),l.a.createElement(D.a,{spinning:v,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(ht.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:L},M&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),Q&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please fill directory name",type:"error",showIcon:!0})),l.a.createElement(yt,{label:"Directory Name",value:s.name},l.a.createElement(ht.a.Item,{className:"required",name:"name",id:"name",rules:[{required:!0,message:{ENTER_DIRECTORY_NAME:"Please enter directory name"}}]},l.a.createElement(kr,{showCount:!0,maxLength:80,value:s.name,onChange:function(e){return W(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==z.state.name?B.a.post(q+"checkhotline/",{hotline_name:e.target.value},t).then((function(e){e.data&&C(e.data[0])})):C(!1)}(e)},id:"name",name:"name",className:"input-control textarea-input",htmlFor:"name",autoComplete:"off"}),"status: false"==N&&s.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.name.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==N&&l.a.createElement(Et.a,{message:Ct,type:"error",showIcon:!0}))),l.a.createElement(yt,{label:"Description",value:s.help_text},l.a.createElement(ht.a.Item,{className:"required",name:"help_text",id:"help_text",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(kr,{className:"input-control textarea-input",value:s.help_text,onChange:function(e){return W(e)},id:"help_text",name:"help_text",htmlFor:"help_text",autoComplete:"off"})))),(null===(t=s.statusMessage)||void 0===t?void 0:t.length)>0?l.a.createElement(l.a.Fragment,null,s.statusMessage):null,l.a.createElement(yt,{label:He,value:"start_date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{disabled:5===s.status_id,className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"start_date",disabledDate:$,value:s.start_date,onChange:function(e){return J(e,"start_date")},rules:[{required:!0,message:{SELECT_DATE:Dt}}]}))),l.a.createElement(yt,{label:Be,value:"end_date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"end_date",disabledDate:$,value:s.end_date,onChange:function(e){return J(e,"end_date")}}))),l.a.createElement(ht.a.Item,{className:""},l.a.createElement(ht.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(Ya,{"data-test":"addIconComponent",addIcon:function(e,t){i(Object(o.a)({},s,{hotline_icon_id:t})),h(e)}}),s.hotline_icon_id&&K(s.hotline_icon_id.toString())&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},Ua()(g)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:K(s.hotline_icon_id.toString())},K(s.hotline_icon_id.toString())))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:function(e){if(s.name&&s.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.help_text&&s.help_text.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.hotline_icon_id&&s.start_date){U(!1),e.preventDefault();var t=JSON.parse(b("user")),a={end_date:s.end_date?Fe()(s.end_date).format("DD-MM-YYYY"):null,help_text:s.help_text,hotline_icon_id:s.hotline_icon_id,hotline_id:s.hotline_id,status_id:1,name:s.name,start_date:Fe()(s.start_date).format("DD-MM-YYYY"),updated_by:parseInt(Dr.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Dr.enc.Utf8))};Z(a),G(!1)}else U(!0),G(!1)},"data-test":"stepOneNext",className:"mr-4"},"Update"),l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:function(e){window.location="/orgcc/hotlinedirectory"},"data-test":"stepOneNext",className:"mr-4"},ie),5===s.status_id?l.a.createElement(l.a.Fragment,null):l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){if(s.name&&s.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0){U(!1),G(!1);var e=JSON.parse(b("user")),t={end_date:s.end_date?Fe()(s.end_date).format("DD-MM-YYYY"):null,help_text:s.help_text,hotline_icon_id:s.hotline_icon_id?s.hotline_icon_id:"",hotline_id:s.hotline_id,status_id:4,name:s.name,start_date:s.start_date?Fe()(s.start_date).format("DD-MM-YYYY"):null,updated_by:parseInt(Dr.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Dr.enc.Utf8))};Z(t)}else G(!0),U(!1)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))))))))},Tr=a(153),Ar=a.n(Tr),Yr=j.a.Content,Mr=function(e){var t=Object(u.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Yr,{className:"w-100"},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Add Employee"),l.a.createElement("div",{className:"d-block w-100 pl-3 pl-lg-0 pt-1"},"Please create all employees for your organization who are eligible to use the app. You can either integrate with existing system, import through CSV or add each employee manually.")),l.a.createElement("div",{className:"mid-content mt-0 mt-md-4 no-bg px-3 px-md-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"mt-5"},l.a.createElement(S.a,{className:"d-flex justify-content-center",gutter:{xs:8,sm:32,md:32,lg:100}},l.a.createElement(C.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement("div",{className:"d-flex flex-column ".concat(Ar.a.box_bordered)},l.a.createElement("span",{className:"icon-integrate ".concat(Ar.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Integrate with existing system"))),l.a.createElement(C.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement(m.b,{to:"/orgcc/importemployee"},l.a.createElement("div",{className:"d-flex flex-column ".concat(Ar.a.box_bordered)},l.a.createElement("span",{className:"icon-csv ".concat(Ar.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Import through CSV")))),l.a.createElement(C.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement(m.b,{to:"/orgcc/createemployee"},l.a.createElement("div",{className:"d-flex flex-column ".concat(Ar.a.box_bordered)},l.a.createElement("span",{className:"icon-add-user ".concat(Ar.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Create Manually")))))))),l.a.createElement(Ie.a,{type:"primary",onClick:function(){t.push("/orgcc/manageemployees")},className:"mt-3 ml-3 ml-lg-0"},ce)))))))},Ur=a(520),Fr=kn.a.Dragger,Pr=function(e){return l.a.createElement(Fr,{accept:".csv",name:"file",fileList:e.file,onChange:function(t){return e.onChange(t)},beforeUpload:function(t){return e.handleBeforeUpload(t)}},l.a.createElement("p",{className:"ant-upload-drag-icon"},l.a.createElement("span",{className:"icon icon-upload"})),l.a.createElement("p",{className:"ant-upload-text"},"Drop files to upload or Browse"))},Rr=(a(41),j.a.Content),Lr=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),d=i[0],p=i[1],g=Object(n.useState)(!1),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(""),y=Object(c.a)(v,2),_=y[0],O=y[1],N=Object(n.useState)(""),w=Object(c.a)(N,2),k=w[0],x=w[1],I=Object(n.useState)(!1),T=Object(c.a)(I,2),A=T[0],Y=T[1],M=Object(n.useState)(""),U=Object(c.a)(M,2),F=U[0],P=U[1],R=Object(u.g)(),L=JSON.parse(b("user")).user_data.organization_unique_identifier;return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Rr,{className:"w-100"},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/addemployee"},l.a.createElement(gt.a.Item,null,"Add Employee")),l.a.createElement(gt.a.Item,null,"Import CSV file"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Import CSV file"," ")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(D.a,{spinning:d,size:"large"},r&&l.a.createElement(Et.a,{message:"Please upload a csv file.",type:"error",showIcon:!0}),k&&l.a.createElement(Et.a,{message:_,type:"error",showIcon:!0}),l.a.createElement(S.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(C.a,{span:20,className:"mt-3 dragdrop"},l.a.createElement(Pr,{onChange:function(e){var t=e.fileList.slice(-1);t.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),P(t)},file:F,handleBeforeUpload:function(e){e.name.includes(".csv")?Y(!1):(Y(!0),Ur.b.error("".concat(e.name," is not a supported format file type.")))}})),l.a.createElement(C.a,{span:24,className:"justify-content-center d-flex mt-5"},l.a.createElement(Ie.a,{type:"link",href:"https://amstagingresources.s3-us-west-1.amazonaws.com/employees/".concat(L,"/employeesdata.csv"),className:"link pl-0"},l.a.createElement("span",{className:"icon icon-download-icon"}),"Download Sample File"))),l.a.createElement("div",{className:"mt-3 btn-row d-flex"},l.a.createElement(Ie.a,{type:"primary",className:"mr-4 mb-4",onClick:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"multipart/form-data"}};if(!A&&F){var t=new FormData;t.append("file",F[0].originFileObj),s(!1),p(!0),B.a.post(q+"uploadCsv/",t,e).then((function(){E(!0)})).catch((function(e){p(!1),E(!1),e.message.includes("400")&&(x(!0),O(e.response.data))}))}else s(!0)}},pe),l.a.createElement(Ie.a,{type:"secondary",className:"md",onClick:function(){R.push("/orgcc/addemployee")}},ie)),l.a.createElement(Ut.a,{visible:f,onOk:function(){window.location="/orgcc/manageemployees"},onCancel:function(){window.location="/orgcc/manageemployees"},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:se},l.a.createElement("p",null,"Your file has been uploaded successfully. You will soon receive an email on the status of imported employee(s)."))))))))))},zr=a(1077),Hr=zr.a.SHOW_PARENT,Br=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={treeData:[],value:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"App User",value:"0",key:"0",disabled:!0},{title:"Super User",value:"1",key:"1"},{title:"Control Center",value:"2",key:"2"},{title:"IDB",value:"3",key:"3"}];this.setState({treeData:e})}},{key:"componentDidUpdate",value:function(e){if(this.props!==e){var t,a=[];if(this.props.viaCreate)console.log("-----------not selected----",this.props.roles),this.setState({value:this.props.roles});else console.log("-----------roles----selected",this.props.roles),null===(t=Object.entries(this.props.roles))||void 0===t||t.map((function(e){"1"===e[1]&&a.push(e[0])})),this.setState({value:a})}}},{key:"render",value:function(){var e={value:this.state.value,treeData:this.state.treeData,onChange:this.props.handleRoleOnSelect,treeCheckable:!0,showCheckedStrategy:Hr,placeholder:"Select Role",style:{width:"100%"}};return l.a.createElement(zr.a,e)}}]),t}(l.a.Component),qr=a(1100),Vr=a(41),Qr=j.a.Content,Gr=function(e){var t=Object(n.useState)({firstName:"",lastName:"",status:"",email:"",mobile:"",empId:"",department:"",role:["0"],startDate:"",endDate:""}),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)({0:"1",1:"0",2:"0",3:"0"}),d=Object(c.a)(i,2),p=d[0],g=d[1],h=JSON.parse(b("user")),f=Vr.AES.decrypt(h.user_data.app_authentication_key_id,"anonymoose").toString(Vr.enc.Utf8),E=Object(u.g)(),v=Object(n.useState)(!1),y=Object(c.a)(v,2),_=y[0],O=y[1],w=Object(n.useState)(!1),k=Object(c.a)(w,2),x=k[0],I=k[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)(!1),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)(!1),z=Object(c.a)(L,2),H=(z[0],z[1]),V=Object(n.useState)(!1),Q=Object(c.a)(V,2),G=(Q[0],Q[1],Object(n.useState)({})),K=Object(c.a)(G,2),W=K[0],J=K[1],Z=Object(n.useState)({}),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)(""),ae=Object(c.a)(te,2),ne=ae[0],le=ae[1],re=Object(n.useState)(!1),se=Object(c.a)(re,2),oe=se[0],ce=se[1],me=Object(n.useState)(""),ue=Object(c.a)(me,2),de=ue[0],pe=ue[1],ge=Object(n.useState)(""),he=Object(c.a)(ge,2),fe=he[0],Ee=he[1];Object(n.useEffect)((function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getCUGFieldNames/",e).then((function(e){var t={},a={};if(0!==Object.keys(e.data.cug_flex_fields).length){var n,l,r=Object.values(null===(n=e.data.cug_flex_fields)||void 0===n?void 0:n.cug_fields).reduce((function(e,a){return t=Object(o.a)({},t,Object(ut.a)({},a,null))}),[]);J(r);var s=Object.values(null===(l=e.data.cug_flex_fields)||void 0===l?void 0:l.flex_fields).reduce((function(e,t){return a=Object(o.a)({},a,Object(ut.a)({},t,null))}),[]);ee(s)}}))}),[]),Object(n.useEffect)((function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getCUGFieldNames/",e).then((function(e){var t={},a={};if(0!==Object.keys(e.data.cug_flex_fields).length){var n,l,r=Object.values(null===(n=e.data.cug_flex_fields)||void 0===n?void 0:n.cug_fields).reduce((function(e,a){return t=Object(o.a)({},t,Object(ut.a)({},a,null))}),[]);J(r);var s=Object.values(null===(l=e.data.cug_flex_fields)||void 0===l?void 0:l.flex_fields).reduce((function(e,t){return a=Object(o.a)({},a,Object(ut.a)({},t,null))}),[]);ee(s)}}))}),[]);var ve=function(e){s(Object(o.a)({},r,Object(ut.a)({},e.target.id,e.target.value)))},ye=function(e,t){"cug"===t&&(""==e.target.value?J(Object(o.a)({},W,Object(ut.a)({},e.target.id,null))):J(Object(o.a)({},W,Object(ut.a)({},e.target.id,e.target.value)))),"flex"===t&&(""==e.target.value?ee(Object(o.a)({},X,Object(ut.a)({},e.target.id,null))):ee(Object(o.a)({},X,Object(ut.a)({},e.target.id,e.target.value))))},_e=function(e,t){Fe()().isSame(e,"day")?H(!0):H(!1),s(Object(o.a)({},r,Object(ut.a)({},t,e)))},Oe=function(e){return e&&e<Fe()().startOf("day")},Ne=function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkEmail/",{email:r.email},t).then((function(e){e.data&&pe(e.data.message)}))},we=function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkPhone/",{mobile_number:r.mobile},t).then((function(e){e.data&&Ee(e.data.message)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Qr,{className:"w-100"},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/addemployee"},l.a.createElement(gt.a.Item,null,"Add Employee")),l.a.createElement(gt.a.Item,null,"Create Manually"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Manually")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(D.a,{spinning:x,size:"large"},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:""},_&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),oe&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:ne,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"First Name",value:r.firstName},l.a.createElement(ht.a.Item,{className:"required",name:"firstName"},l.a.createElement(N.a,{className:"input-control",id:"firstName",htmlFor:"firstName",onChange:function(e){return ve(e)},autoComplete:"off"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Last Name",value:r.lastName},l.a.createElement(ht.a.Item,{className:"required",name:"lastName",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:"lastName",htmlFor:"lastName",onChange:function(e){return ve(e)},autoComplete:"off"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Pe,value:r.email},l.a.createElement(ht.a.Item,{className:"required",name:"email",validateStatus:"success"},l.a.createElement(N.a,{type:"email",className:"input-control",id:"email",htmlFor:"email",value:r.email,onChange:function(e){return ve(e)},onBlur:function(e){return function(e){/\S+@\S+\.\S+/.test(e.target.value)?M(!1):M(!0),Ne()}(e)},autoComplete:"off"}),Y&&l.a.createElement(Et.a,{message:jt,type:"error",showIcon:!0}),!de&&r.email.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.email.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),de&&l.a.createElement(Et.a,{message:At,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(yt,{label:Re,value:r.mobile},l.a.createElement(ht.a.Item,{className:"1"===f||"3"===f?"":"required",name:"mobile",validateStatus:"success"},l.a.createElement(Kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:r.mobile,onChange:function(e){s(Object(o.a)({},r,{mobile:e}))},onBlur:function(e){r.mobile.length>10||/^\+\d$/.test(e.target.value)?R(!1):R(!0),we()},autoComplete:"off"}),P&&l.a.createElement(Et.a,{message:wt,type:"error",showIcon:!0}),!fe&&r.mobile.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),fe&&l.a.createElement(Et.a,{message:Yt,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required",rules:[{required:!0,message:Dt}]},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:r.startDate,onChange:function(e){return _e(e,"startDate")},disabledDate:Oe})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:r.endDate,onChange:function(e){return _e(e,"endDate")},disabledDate:Oe})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(Br,{handleRoleOnSelect:function(e,t,a){console.log("----ttttttttttt----",e,t,a);var n=e.toString();if(1==a.triggerValue){var l={0:"1",1:n.includes("1")?"1":"0",2:n.includes("1")?"1":"0",3:n.includes("1")?"1":"0"};g(l)}else if(2==a.triggerValue){var r={0:"1",1:n.includes("2")&&n.includes("1")?"1":"0",2:n.includes("2")?"1":"0",3:n.includes("3")?"1":"0"};g(r)}else if(3==a.triggerValue){var s={0:"1",1:n.includes("3")&&n.includes("1")?"1":"0",2:n.includes("2")?"1":"0",3:n.includes("3")?"1":"0"};g(s)}},roles:p,viaEdit:!0}),l.a.createElement(qr.a,{className:"down-arrow-ico multiselect-arrow"})))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("span",{className:"mb-0"},"CUG Fields")),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.keys(W).map((function(e){return l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:e,value:W[e]},l.a.createElement(ht.a.Item,{name:e,validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:e,value:W[e],htmlFor:e,onChange:function(e){return ye(e,"cug")},autoComplete:"off"}))))})))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("span",{className:"mb-0"},"Flex fields")),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.keys(X).map((function(e){return l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:e,value:X[e]},l.a.createElement(ht.a.Item,{name:e,validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:e,value:X[e],htmlFor:e,onChange:function(e){return ye(e,"flex")},autoComplete:"off"}))))})))),l.a.createElement(ht.a.Item,{className:"mt-5"},l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"mr-4 mb-3",onClick:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(r.firstName&&r.lastName&&r.email&&r.startDate&&r.mobile.length>5){var t={};"1"===f||"3"===f?(O(!1),t={first_name:r.firstName,last_name:r.lastName,email:r.email,mobile_number:r.mobile?"+"+r.mobile:"",is_super_user:"1"==p[1],is_org_cc_user:"1"==p[2],is_idb_user:"1"==p[3],start_date:r.startDate?Fe()(r.startDate).format("DD-MM-YYYY"):null,end_date:r.endDate?Fe()(r.endDate).format("DD-MM-YYYY"):null,status_id:1,cug_fields:W,flex_fields:X},I(!0),B.a.post(q+"createUser/",t,e).then((function(){window.location="/orgcc/manageemployees"})).catch((function(e){e.message.includes("400")&&(ce(!0),le(e.response.data.email)),I(!1)}))):r.mobile?(O(!1),t={first_name:r.firstName,last_name:r.lastName,email:r.email,mobile_number:r.mobile?"+"+r.mobile:"",is_super_user:"1"==p[1],is_org_cc_user:"1"==p[2],is_idb_user:"1"==p[3],start_date:r.startDate?Fe()(r.startDate).format("DD-MM-YYYY"):null,end_date:r.endDate?Fe()(r.endDate).format("DD-MM-YYYY"):null,status_id:1,cug_fields:W,flex_fields:X},I(!0),B.a.post(q+"createUser/",t,e).then((function(){window.location="/orgcc/manageemployees"})).catch((function(e){e.message.includes("400")&&(ce(!0),le(e.response.data.email)),I(!1)}))):O(!0)}else O(!0)}},"Save"),l.a.createElement(Ie.a,{type:"secondary",className:"mr-4",onClick:function(){E.push("/orgcc/addemployee")}},ie),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(r.email){var t={first_name:r.firstName,last_name:r.lastName,email:r.email,mobile_number:r.mobile?"+"+r.mobile:"",is_super_user:"1"==p[1],is_org_cc_user:"1"==p[2],is_idb_user:"1"==p[3],start_date:r.startDate?Fe()(r.startDate).format("DD-MM-YYYY"):null,end_date:r.endDate?Fe()(r.endDate).format("DD-MM-YYYY"):null,status_id:2,cug_fields:W,flex_fields:X};O(!1),I(!0),B.a.post(q+"createUser/",t,e).then((function(){I(!1),window.location="/orgcc/manageemployees"})).catch((function(e){e.message.includes("400")&&(ce(!0),le(e.response.data.email)),I(!1)}))}else O(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))))))))))},Kr=a(56),Wr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.props.pollData.pollStartDate&&a.props.pollData.pollEndDate?(a.props.showError(!1),a.setState({visible:!1}),a.props.onPublish()):a.props.showError(!0)},a.handleCancel=function(){a.setState({visible:!1})},a.disabledStartDate=function(e){return e&&e<Fe()().startOf("day")},a.disabledEndDate=function(e){return a.props.pollData.pollStartDate?e&&e<Fe()(a.props.pollData.pollStartDate):e&&e<Fe()().startOf("day")},a.range=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a},a.onChangeStartDate=function(e){a.props.handlePollStartDatePickerChange(e,"pollStartDate")},a.onChangeEndDate=function(e){a.props.handlePollEndDatePickerChange(e,"pollEndDate")},a.onChangeStartTime=function(e){var t=e.target.value;a.setState({startTimeError:!1,startTime:t})},a.onBlurStartTime=function(e){new Date>a.state.startTime?a.setState({startTimeError:!0,startTime:a.props.pollData.pollStartTime}):(a.setState({startTimeError:!1}),a.props.handlePollStartTimePickerChange(a.state.startTime,"pollStartTime"))},a.onChangeEndTime=function(e){var t=e.target.value;a.setState({endTimeError:!1,endTime:t})},a.onBlurEndTime=function(e){new Date>a.state.endTime?a.setState({endTimeError:!0,endTime:a.props.pollData.pollEndTime}):(a.setState({endTimeError:!1}),a.props.handlePollEndTimePickerChange(a.state.endTime,"pollEndTime"))},a.state={visible:!1,startTimeError:!1,endTimeError:!1,startTime:new Date,endTime:new Date},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{type:"primary",className:"md mr-4",onClick:this.showModal},"Schedule"),l.a.createElement(Ut.a,{title:"Publish Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Publish",cancelText:"Cancel"},l.a.createElement(ht.a,{className:"input-md floating-label w-100"},l.a.createElement(C.a,{span:24,className:"gutter-row"}," ",this.props.error&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Dt,type:"error",showIcon:!0})),l.a.createElement("div",{className:"mb-4 subtext-md"},"Select Date and Time to publish the",l.a.createElement("span",{className:"pr-1 pr-1 font-weight-md6"}," ",this.props.pollData.pollName),"Poll"),l.a.createElement(yt,{label:"Select Start Date",value:"sDate"},l.a.createElement(ht.a.Item,{name:"sDate",rules:[{required:!0,message:Dt}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:12,className:"gutter-row"},l.a.createElement(ft.a,Object(ut.a)({value:this.props.pollData.pollStartDate,disabledDate:this.disabledStartDate,onChange:function(t){return e.onChangeStartDate(t)},className:"w-100",name:"sDate"},"className","required mb-3")),this.state.startTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:12},l.a.createElement(Kr.a,{value:this.state.startTime,onChange:this.onChangeStartTime}))))),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate",rules:[{required:!0,message:Dt}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:12,className:"gutter-row"},l.a.createElement(ft.a,Object(ut.a)({value:this.props.pollData.pollEndDate,disabledDate:this.disabledEndDate,onChange:function(t){return e.onChangeEndDate(t)},className:"w-100",name:"eDate"},"className","required mb-3")),this.state.endTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:12},l.a.createElement(Kr.a,{value:this.state.endTime,onChange:this.onChangeEndTime})))))))))}}]),t}(n.Component),Jr=a(46),Zr=a.n(Jr),$r=a(85),Xr=a.n($r),es=a(1101),ts=a(154),as=a.n(ts),ns={formatAsYYYYMMDDHHmmss:function(e){return as()(e,"MM/DD/YYYY").format("YYYY-MM-DD[T]HH:mm:ss")},formatAsHHmmss:function(e){return as()(e).format("HH:mm:ss")},formatAsMMMDDYYYY:function(e){return as()(e).format("MM-DD-YYYY")},formatAsHHmm:function(e){return as()(e).format("HH:mm")},formatAsYYYYMMDD:function(e){return as()(e).format("YYYY-MM-DD")},formatAsDDMMYYYY:function(e){return as()(e).format("DD-MM-YYYY")},format:function(e){return as()(e).format()}},ls=a(86),rs=a.n(ls),ss=a(87),os=a.n(ss),cs=a(88),is=a.n(cs),ms=a(89),us=a.n(ms),ds={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){}},ps=j.a.Content,gs=a(41),hs=function(e){var t,a=e.poll,r=e.setPollsDate,s=e.backtoEdit,i=e.isImage,u=e.data,d=e.attachmentName,p=e.showError,g=e.error,h=Object(n.useState)(!1),f=Object(c.a)(h,2),E=f[0],v=f[1],y=Object(n.useState)({pollName:a.pollName,pollHelpText:a.pollHelpText,pollDocument:a.pollDocument,showResult:a.showResult,pollChartType:a.pollChartType,pollQuestion:a.pollQuestion,pollQuestionType:a.pollQuestionType,pollRatingResponse:a.pollRatingResponse,pollStartDate:a.pollStartDate,pollEndDate:a.pollEndDate,attachmentName:a.attachmentName,pollStartTime:a.pollStartTime,pollEndTime:a.pollEndTime,pollResponse:a.pollResponse,pollImageValidation:a.pollImageValidation,previewVisible:a.previewVisible,previewImage:a.previewImage,previewTitle:a.previewTitle,pollRatingType:a.pollRatingType}),_=Object(c.a)(y,2),O=_[0],N=_[1],w=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:u}),l.a.createElement(ps,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(gt.a.Item,null,ae)),l.a.createElement(gt.a.Item,null,"Preview Poll"))),l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Preview Poll"),l.a.createElement(C.a,{span:24,lg:18,className:"d-flex align-items-center justify-content-end"})),l.a.createElement(D.a,{spinning:E,size:"large"},l.a.createElement(C.a,{span:24,className:"mb-3 px-3 px-md-0 ".concat(Zr.a.poll_info)},l.a.createElement("h6",null,a.pollName,l.a.createElement(Aa.a,{placement:"top",title:a.pollHelpText},l.a.createElement("span",{className:"pl-2 icon icon-info-circle"})))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},a.pollQuestion),l.a.createElement(S.a,{className:"preview-que",disabled:!0},l.a.createElement("div",{className:"d-flex flex-column flex-gap chk-opt ".concat(Zr.a.rating_img_wrapper)},"1"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(vt.a,null,e)})):"2"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(bt.a,null,e)})):"3"===a.pollQuestionType?"1"===a.pollRatingType?l.a.createElement(Xr.a,Object.assign({},ds,{value:a.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return handlePollOnSelect(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===a.pollRatingType?l.a.createElement("img",{src:is.a,alt:"send message"}):"3"===a.pollRatingType?l.a.createElement("img",{src:rs.a,alt:"send message"}):"4"===a.pollRatingType?l.a.createElement("img",{src:os.a,alt:"send message"}):"5"===a.pollRatingType?l.a.createElement("img",{className:"".concat(Zr.a.steps_img),src:us.a,alt:"send message"}):null:null)),l.a.createElement(S.a,{className:"mt-2"},l.a.createElement("div",{class:"ant-upload-list-item"},l.a.createElement("div",{class:"ant-upload-list-item-info"},l.a.createElement("span",{class:"ant-upload-span"},O.pollDocument?l.a.createElement("div",{class:"ant-upload-text-icon"},l.a.createElement(es.a,null)):null,l.a.createElement("span",{class:"ant-upload-list-item-name",title:"add-user-doc"},l.a.createElement(kn.a,{listType:"picture",fileList:O.pollDocument,onPreview:function(e){return function(e){var t,a,n,l,r,s;return z.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!((null===(t=e.name)||void 0===t?void 0:t.includes("jpeg"))||(null===(a=e.name)||void 0===a?void 0:a.includes("jpg"))||(null===(n=e.name)||void 0===n?void 0:n.includes("png"))||(null===(l=e.name)||void 0===l?void 0:l.includes("gif"))||(null===(r=e.name)||void 0===r?void 0:r.includes("jfif"))||(null===(s=e.name)||void 0===s?void 0:s.includes("tiff")))){c.next=7;break}return c.next=3,z.a.awrap(w(e.originFileObj));case 3:e.preview=c.sent,N(Object(o.a)({},O,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})),c.next=8;break;case 7:return c.abrupt("return",!1);case 8:case"end":return c.stop()}}))}(e)}}),l.a.createElement(Ut.a,{visible:O.previewVisible,title:O.previewTitle,centered:!0,onOk:function(e){return N(Object(o.a)({},O,{previewVisible:!1}))},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:O.previewImage}))),l.a.createElement("span",{class:"ant-upload-list-item-card-actions"},l.a.createElement("button",{type:"button",class:"ant-btn"}))))))))),l.a.createElement("div",{className:"mt-5 px-3"},l.a.createElement(Ie.a,(t={type:"secondary"},Object(ut.a)(t,"type","secondary"),Object(ut.a)(t,"htmlType","submit"),Object(ut.a)(t,"className","mr-4"),Object(ut.a)(t,"onClick",(function(){s(a)})),t),ce),l.a.createElement(Wr,{pollData:a,handlePollStartDatePickerChange:function(e,t){r(e,t)},handlePollEndDatePickerChange:function(e,t){r(e,t)},handlePollStartTimePickerChange:function(e,t){r(e,t)},handlePollEndTimePickerChange:function(e,t){r(e,t)},onPublish:function(){var e,t=JSON.parse(b("user")),n=Me();v(!0);var l=[],r={};a.pollResponse.map((function(e){l.push({option_text:e})})),r=i?{create_poll:{title:a.pollName,help_text:a.pollHelpText,image:a.pollDocument&&a.pollDocument[0]?a.pollDocument[0].base64:"",show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,image_name:d,poll_question_type:parseInt(a.pollQuestionType),question:a.pollQuestion,poll_question_rating_type:a.pollRatingType?parseInt(a.pollRatingType):"",start_date:ns.formatAsDDMMYYYY(a.pollStartDate),start_time:ns.formatAsHHmmss(a.pollStartTime),end_date:ns.formatAsDDMMYYYY(a.pollEndDate),end_time:ns.formatAsHHmmss(a.pollEndTime),created_by:parseInt(gs.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(gs.enc.Utf8))},option:l}:0===(null===(e=a.pollDocument)||void 0===e?void 0:e.length)?{create_poll:{title:a.pollName,help_text:a.pollHelpText,show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,poll_question_type:parseInt(a.pollQuestionType),poll_question_rating_type:a.pollRatingType?parseInt(a.pollRatingType):"",question:a.pollQuestion,start_date:ns.formatAsDDMMYYYY(a.pollStartDate),start_time:ns.formatAsHHmmss(a.pollStartTime),end_date:ns.formatAsDDMMYYYY(a.pollEndDate),end_time:ns.formatAsHHmmss(a.pollEndTime),created_by:parseInt(gs.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(gs.enc.Utf8))},option:l}:{create_poll:{title:a.pollName,help_text:a.pollHelpText,document:a.pollDocument&&a.pollDocument[0]?a.pollDocument[0].base64:"",document_name:d,show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,poll_question_type:parseInt(a.pollQuestionType),poll_question_rating_type:a.pollRatingType?parseInt(a.pollRatingType):"",question:a.pollQuestion,start_date:ns.formatAsDDMMYYYY(a.pollStartDate),start_time:ns.formatAsHHmmss(a.pollStartTime),end_date:ns.formatAsDDMMYYYY(a.pollEndDate),end_time:ns.formatAsHHmmss(a.pollEndTime),created_by:parseInt(gs.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(gs.enc.Utf8))},option:l};var s={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"poll/",r,s).then((function(){v(!1),window.location="/orgcc/pollsdirectory"})).catch((function(e){v(!1)}))},showError:p,error:g}))))))))))},fs=a(505),Es=a.n(fs),vs=j.a.Content,bs=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0}),l.a.createElement(vs,{"data-test":"Broadcast",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Manage Broadcast")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"c-vector-area d-flex justify-content-center"},l.a.createElement("img",{src:Es.a,alt:"Create Broadcast"})),l.a.createElement("p",{className:"text-center pt-3"},"Create broadcasts and publish them for all employees from here."),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(ct.a,{className:"mt-1"})),l.a.createElement(C.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ie.a,{type:"primary"},"Create Broadcast")))))))))))},ys=zr.a.SHOW_PARENT,_s=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={value:void 0,treeData:[]},a.onChange=function(e){a.setState({value:e}),a.props.handleOnCUGSelect(a.props.item,e)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=0,n=[];this.props.pollCug&&(null===(e=Object.entries(this.props.pollCug))||void 0===e||e.map((function(e){var l;(null===(l=Object.values(e[1]))||void 0===l?void 0:l.length)>0&&(a=1,e[0]===t.props.item&&(n=Object.values(e[1])))})));if(this.setState({value:1===a?n:void 0}),!this.props.viaStep3){var l,r=[];null===(l=this.props.cugData[this.props.item])||void 0===l||l.map((function(e){r.push({title:e,value:e,key:e})})),this.setState({treeData:r})}}},{key:"componentDidUpdate",value:function(e){this.props.itemRemoved!==e.itemRemoved&&this.props.item===this.props.itemRemoved&&this.setState({value:void 0})}},{key:"render",value:function(){var e="Select "+"".concat(this.props.item.substring(this.props.item.indexOf("_")+1,this.props.item.length)),t={disabled:this.props.viaStep3||5===this.props.pollStatusId||8===this.props.pollStatusId,treeData:this.state.treeData,value:this.state.value,onChange:this.onChange,treeCheckable:!0,placeholder:e,showCheckedStrategy:ys,style:{width:"100%"}};return l.a.createElement(zr.a,t)}}]),t}(l.a.Component),Os=a(506),Ns=a.n(Os),js=(a(948),a(139)),ws=a.n(js);a(949),a(950),a(951);window.jQuery=ws.a,window.jquery=ws.a,window.$=ws.a;var Ss=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"onChange",value:function(e){}},{key:"render",value:function(){return l.a.createElement("div",{className:"editor"},l.a.createElement(Ns.a,{value:this.props.value,options:{height:350,dialogsInBody:!0,toolbar:[["style",["bold","italic","underline"]],["font"],["insert",["link"]],["para",["ul"]]]},onChange:this.props.onChange}))}}]),t}(n.Component),Cs=function(e){var t=e.file,a=e.handleStepOneUpload,n=e.handleBeforeUpload,r=e.handleOnRemove,s=e.handlePollImagePreview,o=e.handleCancel,c=e.broadcast,i=e.uploadtitle,m=e.disabledbutton;return console.log("------file---",t),l.a.createElement(l.a.Fragment,null,l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:t,maxCount:4,onChange:function(e){return a(e,"Image"===i?"broadCastImage":"broadCastDocument")},beforeUpload:function(e){return n(e,"Image"===i?"broadCastImage":"broadCastDocument")},onRemove:function(e){return r(e,"Image"===i?"pollImageValidation":"document")},onPreview:function(e){return s(e)},className:"upload-list-inline c-upload upload-list-block",accept:"Image"===i?"image/png, image/jpeg, image/gif":"application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel, .csv "},l.a.createElement(Ie.a,{type:"link",className:"link pl-0",disabled:m},"Image"===i?l.a.createElement("span",{className:"icon icon-image pr-2"}):l.a.createElement("span",{className:"icon icon-doc pr-2"}),i)),l.a.createElement(ct.a,{type:"vertical"}),l.a.createElement(Ut.a,{className:"modal-openline",visible:c.previewVisible,title:c.previewTitle,centered:!0,onOk:function(e){return o(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:c.previewImage})))},Ds=function(){return function(e){return sa.getCUGValues().then((function(t){return e({type:"CUG_SUCCESS",payload:{cug:t.data}}),Promise.resolve()}),(function(t){return e({type:"CUG_FAILURE"}),Promise.reject()}))}},ks=j.a.Content,xs=N.a.TextArea,Is=Fe.a.tz.guess();var Ts=Object(i.b)((function(e){return{cug:e.cug.cug}}))((function(e){var t,a,r=Fe()(ns.formatAsDDMMYYYY(new Date),"DD_MM_YYYY"),s=Object(n.useState)({messageTittle:"",meesage:"",startDate:r,startTime:new Date,attachmentType:"",attachments:[],broadCastImage:[],broadCastDocument:[],previewVisible:!1,previewImage:"",previewTitle:"",mapLoction:""}),i=Object(c.a)(s,2),u=i[0],d=i[1],p=Object(n.useState)(!0),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)(!1),v=Object(c.a)(E,2),b=(v[0],v[1]),y=Object(n.useState)(!1),_=Object(c.a)(y,2),O=_[0],N=_[1],w=Object(n.useState)(!1),k=Object(c.a)(w,2),x=k[0],I=k[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)(""),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)(!1),H=Object(c.a)(L,2),V=H[0],Q=H[1],G=Object(n.useState)(Is),K=Object(c.a)(G,2),W=K[0],J=K[1],Z=Object(n.useState)(""),$=Object(c.a)(Z,2),X=$[0],ee=($[1],Object(n.useState)({})),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=function(){M(!0);var e,t,a,n,l={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r={};u.mapLoction?r={documents:null===(e=u.broadCastDocument)||void 0===e?void 0:e.map((function(e){return{url:e.base64,name:e.name}})),images:null===(t=u.broadCastImage)||void 0===t?void 0:t.map((function(e){return{url:e.base64,name:e.name}})),location:u.mapLoction}:r={documents:null===(a=u.broadCastDocument)||void 0===a?void 0:a.map((function(e){return{url:e.base64,name:e.name}})),images:null===(n=u.broadCastImage)||void 0===n?void 0:n.map((function(e){return{url:e.base64,name:e.name}}))};var s={};if(s=0!==u.broadCastDocument.length||0!==u.broadCastImage.length||u.mapLoction?{title:u.messageTittle,message:u.meesage,attachments:r,scheduled_date:ns.formatAsDDMMYYYY(u.startDate),scheduled_time:ns.formatAsHHmmss(u.startTime),scheduled_date_timezone:W}:{title:u.messageTittle,message:u.meesage,scheduled_date:ns.formatAsDDMMYYYY(u.startDate),scheduled_time:ns.formatAsHHmmss(u.startTime),scheduled_date_timezone:W},ae){var o={},c=Object.keys(ae);c&&c.forEach((function(e,t){var a=ae[e],n=e.split("_")[1];Object.values(a).length>0&&(o[n]=Object.values(a))})),s.cug_filters=o}var i=W||"Asia/Calcutta",m=Fe.a.utc().tz("".concat(i)).utcOffset();s.offset=-m,B.a.post(q+"broadcast/",s,l).then((function(){M(!1),window.location="/orgcc/broadcastmessages"})).catch((function(e){e.message.includes("400")&&(Q(!0),R(e.response.data.title)),M(!1)}))},re=function(e){var t=e.includes("image");b(!!t)},se=function(e){var t=u.broadCastDocument.length,a=u.broadCastImage.length+t;I("removed"===e?a-1===5:4===a)},oe=function(e){return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.awrap(me(e.originFileObj));case 2:e.preview=t.sent,d(Object(o.a)({},u,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},ce=function(e){return d(Object(o.a)({},u,{previewVisible:!1}))},me=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},ue=function(e,t){};Object(n.useEffect)((function(){(0,e.dispatch)(Ds())}),[]),Object(n.useEffect)((function(){if(null!==e.cug){var t={};Object.keys(e.cug.cug_field).forEach((function(e){t=Object(o.a)({},t,Object(ut.a)({},e,[]))})),ne(t)}}),[e.cug]);var de=function(e,t){var a=ae;a[e]=t,ne(a)};return console.log("-----props.cug----",ae),l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(ks,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/broadcastmessages"},l.a.createElement(gt.a.Item,null,"Manage Broadcast Messages")),l.a.createElement(gt.a.Item,null,"Create Broadcast Message"))),l.a.createElement(D.a,{spinning:Y,size:"large"},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Broadcast Message")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},O&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),V&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:P,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message Title",value:u.messageTittle},l.a.createElement(ht.a.Item,{className:"required",name:"message title",validateStatus:"success"},l.a.createElement(xs,{showCount:!0,className:"input-control",id:"messageTittle",name:"messageTittle",htmlFor:"helptext",maxLength:80,value:u.messageTittle,autoComplete:"off",onChange:function(e){!function(e){d(Object(o.a)({},u,Object(ut.a)({},e.target.id,e.target.value)))}(e)}})))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message",value:u.message},l.a.createElement(ht.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(Ss,{value:u.meesage,onChange:function(e){return function(e,t){d((function(a){return Object(o.a)({},a,Object(ut.a)({},t,e))}))}(e,"meesage")},id:"message"})))))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{className:"align-items-center d-flex",gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(yt,{label:"Time Zone",value:W},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"scheduled_date_timezone"},l.a.createElement(zt.a,{className:"",htmlFor:"scheduled_date_timezone",onSelect:function(e){return function(e){J(e);var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t),n=Fe()(ns.formatAsDDMMYYYY(a),"DD_MM_YYYY");d(Object(o.a)({},u,{startDate:n,startTime:a}))}(e)},defaultValue:W},Fe.a.tz.names().map((function(e){var t=Fe()().format("YYYY-MM-DDTHH:mm:ss"),a=Fe.a.utc(t).tz("".concat(e)),n=a?a.format("Z"):"",r="(UTC ".concat(n,") ")+e;return l.a.createElement(zt.a.Option,{value:e},r)})))))),l.a.createElement(C.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(yt,{label:"Schedule Date",value:"date"},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"date"},l.a.createElement(ft.a,{defaultValue:u.startDate,disabledDate:function(e){return e&&e<Fe()().startOf("day")},onChange:function(e){return function(e,t){u.startTime?u.startTime:new Date;var a=u;a.startDate=e,d(a)}(e)}})))),l.a.createElement(C.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(yt,{label:"Schedule Time",value:"date"},l.a.createElement(ht.a.Item,{className:"required timepicker mb-0",name:"time"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Kr.a,{value:u.startTime,onChange:function(e){return function(e,t){var a=e.target.value,n=Fe()(a).format("HH:mm"),l=u.startDate?Fe()(u.startDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),r=new Date(l+"T"+n),s=Fe()().tz(W).format("YYYY-MM-DDTHH:mm");r<new Date(s)?N(!0):d(Object(o.a)({},u,Object(ut.a)({},t,r)))}(e,"startTime")}}))))),l.a.createElement(C.a,{span:18,className:"gutter-row mt-3"},e.cug&&Object.keys(null===(t=e.cug)||void 0===t?void 0:t.cug_field).length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mb-4"},"Configure CUG"),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.keys(e.cug.cug_field).map((function(t,a){var n;return l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row mb-3"},l.a.createElement(ht.a.Item,{className:"mb-0",name:t},l.a.createElement(_s,{cugData:null===(n=e.cug)||void 0===n?void 0:n.cug_field,pollCug:ae,item:t,handleOnCUGSelect:de,itemRemoved:X}),l.a.createElement(qr.a,{className:"down-arrow-ico multiselect-arrow"})))})))):null),l.a.createElement(C.a,{span:24,className:"6gutter-row mt-3"},!h&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Tt,type:"error",showIcon:!0})),l.a.createElement("h6",null,pe),l.a.createElement("span",null,at," "),l.a.createElement(ht.a.Item,{name:"help text",className:"upload-list mt-3"},l.a.createElement(S.a,null,l.a.createElement(Cs,{file:u.broadCastImage,handleStepOneUpload:function(e,t){se(),"removed"===e.file.status&&(f(!0),se(e.file.status));var a=e.fileList;re(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),d(Object(o.a)({},u,Object(ut.a)({},t,a)))},handleBeforeUpload:function(e,t){var a="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,n=e.size/1024/1024<10;e.size;return a?f(!0):(f(!1),Ur.b.error("".concat(e.name," is not a supported format file type."))),a&&(!n&&a?(f(!1),Ur.b.error("Image must smaller than 5MB!")):f(!0)),a&&n},handleOnRemove:ue,handlePollImagePreview:oe,handleCancel:ce,broadcast:u,uploadtitle:"Image",disabledbutton:x}),l.a.createElement(Cs,{file:u.broadCastDocument,handleStepOneUpload:function(e,t){se(),"removed"===e.file.status&&(f(!0),se(e.file.status));var a=e.fileList;re(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)}));d(Object(o.a)({},u,Object(ut.a)({},"broadCastDocument",a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".ppt"),r=e.name.includes(".doc"),s=e.name.includes(".csv"),o="application/pdf"===e.type||a||n||l||r||s;o?f(!0):(f(!1),Ur.b.error("".concat(e.name," is not a supported format file type.")));var c=e.size/1024/1024<10;return o&&(!c&&o?(f(!1),Ur.b.error("Document must smaller than 10MB!")):f(!0)),o&&c},handleOnRemove:ue,handlePollImagePreview:oe,handleCancel:ce,broadcast:u,uploadtitle:"Document",disabledbutton:x}),l.a.createElement(tl,{setLocation:function(e,t,a){var n=t.toString().substring(0,9),l=e.toString().substring(0,9),r={location_latitude:parseFloat(l),location_longitude:parseFloat(n),address:a};d(Object(o.a)({},u,{mapLoction:r}))},disabledLocation:!!x,locationName:u.mapLoction.address}))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ie.a,(a={type:"secondary"},Object(ut.a)(a,"type","secondary"),Object(ut.a)(a,"htmlType","submit"),Object(ut.a)(a,"className","md mr-4"),Object(ut.a)(a,"onClick",(function(e){window.location="/orgcc/broadcastmessages"})),a),ie),l.a.createElement(Ie.a,{type:"primary",onClick:function(e){e.preventDefault(),h&&u.messageTittle&&u.messageTittle.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.meesage&&u.startTime&&u.startDate?(le(),N(!1)):N(!0)}},"Schedule")))))))))))))})),As=function(e,t,a){return function(n){return sa.getBroadCastMessages(e,t,a).then((function(e){return n({type:"BROADCAST_SUCCESS",payload:{broadcast:e.data}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return n({type:"BROADCAST_FAIL"}),n({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}},Ys=j.a.Content,Ms=N.a.TextArea;var Us=Object(i.b)((function(e){var t=e.broadcastMessages.broadcastmessagedetailsdata;return{cug:e.cug.cug,broadcastmessagedetailsdata:t}}))((function(e){var t,a,r,s,i,m,u,d,p,g,h,f,E,v,b,y,_,O,N,k,x,I=Object(n.useState)(!1),T=Object(c.a)(I,2),A=T[0],Y=T[1],M=Object(n.useState)([]),U=Object(c.a)(M,2),F=U[0],P=U[1],R=Object(n.useState)([]),L=Object(c.a)(R,2),H=L[0],V=(L[1],ht.a.useForm()),Q=Object(c.a)(V,1)[0],G=Object(n.useState)(!1),K=Object(c.a)(G,2),W=K[0],J=K[1],Z=Object(n.useState)(!0),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=(ae[0],ae[1],Object(n.useState)(!1)),le=Object(c.a)(ne,2),re=le[0],se=le[1],oe=Object(n.useState)(Fe()(ns.formatAsDDMMYYYY(null===e||void 0===e?void 0:null===(t=e.location)||void 0===t?void 0:null===(a=t.state)||void 0===a?void 0:a.scheduled_date),"DD_MM_YYYY")),ce=Object(c.a)(oe,2),me=ce[0],ue=ce[1],de=Object(n.useState)(new Date((null===e||void 0===e?void 0:null===(r=e.location)||void 0===r?void 0:null===(s=r.state)||void 0===s?void 0:s.scheduled_date.split("-")[0])+"-"+(null===e||void 0===e?void 0:null===(i=e.location)||void 0===i?void 0:null===(m=i.state)||void 0===m?void 0:m.scheduled_date.split("-")[1])+"-"+(null===e||void 0===e?void 0:null===(u=e.location)||void 0===u?void 0:null===(d=u.state)||void 0===d?void 0:d.scheduled_date.split("-")[2])+"T"+(null===e||void 0===e?void 0:null===(p=e.location)||void 0===p?void 0:null===(g=p.state)||void 0===g?void 0:g.scheduled_time))),ge=Object(c.a)(de,2),he=ge[0],fe=ge[1],Ee=Object(n.useState)(new Date((null===e||void 0===e?void 0:null===(h=e.location)||void 0===h?void 0:null===(f=h.state)||void 0===f?void 0:f.scheduled_date.split("-")[0])+"-"+(null===e||void 0===e?void 0:null===(E=e.location)||void 0===E?void 0:null===(v=E.state)||void 0===v?void 0:v.scheduled_date.split("-")[1])+"-"+(null===e||void 0===e?void 0:null===(b=e.location)||void 0===b?void 0:null===(y=b.state)||void 0===y?void 0:y.scheduled_date.split("-")[2])+"T"+(null===e||void 0===e?void 0:null===(_=e.location)||void 0===_?void 0:null===(O=_.state)||void 0===O?void 0:O.scheduled_time))),ve=Object(c.a)(Ee,2),ye=(ve[0],ve[1],Object(n.useState)({messageTittle:"",meesage:"",attachmentType:"",location_latitude:"",location_longitude:"",broadCastImage:"",broadCastDocument:"",previewVisible:!1,previewImage:"",previewTitle:"",statusId:"",mapLoction:"",brodcastId:"",address:"",pastStartTimeError:!1,selectedTimeZoneData:""})),_e=Object(c.a)(ye,2),Oe=_e[0],Ne=_e[1],we=Object(n.useState)(""),Se=Object(c.a)(we,2),Ce=Se[0],De=Se[1],ke=Object(n.useState)(!1),xe=Object(c.a)(ke,2),Te=xe[0],Ae=xe[1],Ye=w.a.useNotification(),Ue=Object(c.a)(Ye,2),Pe=Ue[0],Re=Ue[1],Le=Object(n.useState)(0),ze=Object(c.a)(Le,2),He=ze[0],Be=ze[1],qe=Object(n.useState)(""),Ve=Object(c.a)(qe,2),Qe=Ve[0],Ge=Ve[1],Ke=Object(n.useState)(""),We=Object(c.a)(Ke,2),Je=We[0],Ze=We[1],$e=Object(n.useState)({}),Xe=Object(c.a)($e,2),et=Xe[0],tt=Xe[1],nt=null===(N=e.computedMatch)||void 0===N?void 0:N.params.id;Object(n.useEffect)((function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};Y(!0),B.a.get(q+"getBroadcast/".concat(nt),e).then((function(e){var t,a,n,l,r,s,c,i,m,u,d,p,g,h,f;return z.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:console.log("Check the get getBroadcast api call ",e),n=e.data,l=n.scheduled_date+"T"+n.scheduled_time+"Z",r=n.scheduled_date_timezone,s=Fe()(l).tz(r).format("YYYY-MM-DDTHH:mm:ss"),c=new Date(s),i=Fe()(ns.formatAsDDMMYYYY(s),"DD_MM_YYYY"),ue(i),fe(c),m={location_latitude:n.location_latitude?parseFloat(n.location_latitude):n.location_latitude,location_longitude:n.location_longitude?parseFloat(n.location_longitude):n.location_longitude,address:n.address},u=[],d=[],null===(t=n.broadcast_images)||void 0===t||t.map((function(e){var t="broadcastimg"+Math.floor(100*Math.random());u.push({uid:t,name:e.name,status:"done",url:e.url})})),null===(a=n.broadcast_documents)||void 0===a||a.map((function(e){var t="broadcastdoc"+Math.floor(100*Math.random());d.push({uid:t,name:e.name,status:"done",url:e.url})})),Ne(Object(o.a)({},Oe,{brodcastId:n.broadcast_id,messageTittle:n.title,meesage:n.message,location_longitude:n.location_longitude,location_latitude:n.location_latitude,statusId:n.status_id,address:n.address,mapLoction:m,broadCastImage:u,broadCastDocument:d,selectedTimeZoneData:n.scheduled_date_timezone})),Ge(n.scheduled_date_timezone),tt(n.cug_fields),p=u&&u.length?u.length:0,g=d&&d.length?d.length:0,h=parseInt(p)+parseInt(g),Be(h),console.log("count check ",n.broadcast_images.length+n.broadcast_documents.length),n.broadcast_images.length+n.broadcast_documents.length>4&&J(!0),Q.setFieldsValue({messageTittle:n.title,message:n.message}),f=[],[],mt(d[0].url),null===u||void 0===u||u.forEach((function(e){st(e.url,(function(t){console.log("base64Img: ",t),f.push({name:e.name,url:t}),console.log("imgArray: ",f),P([].concat(Object(dt.a)(F),[f]))}))})),Y(!1);case 29:case"end":return E.stop()}}))})).catch((function(e){console.log("Error in  get getBroadcast api call ",e),Y(!1)}))}),[]),Object(n.useEffect)((function(){var t,a,n,l,r,s,o,c,i=new Date((null===e||void 0===e?void 0:null===(t=e.location)||void 0===t?void 0:null===(a=t.state)||void 0===a?void 0:a.scheduled_date.split("-")[0])+"-"+(null===e||void 0===e?void 0:null===(n=e.location)||void 0===n?void 0:null===(l=n.state)||void 0===l?void 0:l.scheduled_date.split("-")[1])+"-"+(null===e||void 0===e?void 0:null===(r=e.location)||void 0===r?void 0:null===(s=r.state)||void 0===s?void 0:s.scheduled_date.split("-")[2])+"T"+(null===e||void 0===e?void 0:null===(o=e.location)||void 0===o?void 0:null===(c=o.state)||void 0===c?void 0:c.scheduled_time));fe(i)}),[e.location.state.scheduled_time]);var lt=function(){var e=Oe.broadCastDocument.length,t=Oe.broadCastImage.length+e+He;"removed"===status?J(t-1>=5):J(t>5)},rt=function(e){return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.uid.includes("broadcast")){t.next=4;break}st(e.url,(function(t){console.log("Check the broadcast details -----6 handlePollImagePreview upload---",e.name),Ne(Object(o.a)({},Oe,{previewImage:t,previewVisible:!0,previewTitle:e.name}))})),t.next=8;break;case 4:return t.next=6,z.a.awrap(ct(e.originFileObj));case 6:e.preview=t.sent,Ne(Object(o.a)({},Oe,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 8:case"end":return t.stop()}}))};function st(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}var ot=function(e){return Ne(Object(o.a)({},Oe,{previewVisible:!1}))},ct=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},it=function(e,t){console.log("document delete ------value------",e,"------name----",t),vt(e,t)};function mt(e){var t=btoa(e),a=new Blob([t]);return new Promise((function(e,t){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){return e(n.result)},n.onerror=function(e){return t(e)}}))}var pt=function(e,t){var a,n,l,r,s,o,c,i,m,u,d,p,g,h,f,E,v,b,y={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},_={},O=null!==(null===(a=Oe.mapLoction)||void 0===a?void 0:a.location_latitude)&&null!==(null===(n=Oe.mapLoction)||void 0===n?void 0:n.location_longitude)&&null!==(null===(l=Oe.mapLoction)||void 0===l?void 0:l.address),N={};(N=(null===(E=(_=0===(null===(r=Oe.broadCastDocument)||void 0===r?void 0:r.length)&&0===(null===(s=Oe.broadCastImage)||void 0===s?void 0:s.length)&&O?{location:Oe.mapLoction}:(null===(o=Oe.broadCastDocument)||void 0===o?void 0:o.length)>0&&(null===(c=Oe.broadCastImage)||void 0===c?void 0:c.length)>0&&!O?{documents:e,images:t}:(null===(i=Oe.broadCastDocument)||void 0===i?void 0:i.length)>0&&0===(null===(m=Oe.broadCastImage)||void 0===m?void 0:m.length)&&!O?{documents:e}:0===(null===(u=Oe.broadCastDocument)||void 0===u?void 0:u.length)&&(null===(d=Oe.broadCastImage)||void 0===d?void 0:d.length)>0&&!O?{images:t}:0===(null===(p=Oe.broadCastDocument)||void 0===p?void 0:p.length)&&(null===(g=Oe.broadCastImage)||void 0===g?void 0:g.length)>0&&O?{images:t,location:Oe.mapLoction}:(null===(h=Oe.broadCastDocument)||void 0===h?void 0:h.length)>0&&0===(null===(f=Oe.broadCastImage)||void 0===f?void 0:f.length)&&O?{documents:e,location:Oe.mapLoction}:{documents:e,images:t,location:Oe.mapLoction}).documents)||void 0===E?void 0:E.length)>0||(null===(v=_.images)||void 0===v?void 0:v.length)>0||(null===(b=_.location)||void 0===b?void 0:b.location_latitude)?{title:Oe.messageTittle,message:Oe.meesage,attachments:_,scheduled_date:ns.formatAsDDMMYYYY(me),scheduled_time:ns.formatAsHHmmss(he),status_id:Oe.statusId}:{title:Oe.messageTittle,message:Oe.meesage,scheduled_date:ns.formatAsDDMMYYYY(me),scheduled_time:ns.formatAsHHmmss(he),status_id:Oe.statusId}).scheduled_date_timezone=Qe;var j=Qe||"Asia/Calcutta",w=Fe.a.utc().tz("".concat(j)).utcOffset();if(N.offset=-w,et){var S={},C=Object.keys(et);C&&C.forEach((function(e,t){var a=et[e],n=e.split("_")[1];a.length>0&&(S[n]=a)})),N.cug_filters=S}B.a.put(q+"broadcast/"+Oe.brodcastId+"/",N,y).then((function(){Pe.info({description:"Broadcast message has been updated successfully",placement:"bottomLeft"}),Y(!1),window.location="/orgcc/broadcastmessages"})).catch((function(e){e.message.includes("400")&&(Ae(!0),De(e.response.data.title)),Y(!1)}))},gt=function(){Y(!0);var e,t=[],a=[];if(Oe.broadCastDocument.length>0&&Oe.broadCastImage.length>0)console.log("------",JSON.stringify(Oe)),Oe.broadCastDocument.forEach((function(e){e.uid.includes("broadcastdoc")?H.forEach((function(a){a.uid===e.uid&&t.push(a)})):t.push({name:e.name,url:e.base64})})),null===(e=Oe.broadCastImage)||void 0===e||e.forEach((function(e){e.uid.includes("broadcastimg")?F.forEach((function(t){t.uid===e.uid&&a.push(t)})):a.push({name:e.name,url:e.base64})})),pt(t,a);else if(0===Oe.broadCastDocument.length&&Oe.broadCastImage.length>0){var n;null===(n=Oe.broadCastImage)||void 0===n||n.forEach((function(e){e.uid.includes("broadcastimg")?F.forEach((function(t){t.uid===e.uid&&a.push(t)})):a.push({name:e.name,url:e.base64})})),pt(t,a)}else Oe.broadCastDocument.length>0&&0===Oe.broadCastImage.length?Oe.broadCastDocument.forEach((function(e){e.uid.includes("broadcastdoc")?H.forEach((function(a){a.uid===e.uid&&t.push(a)})):t.push({name:e.name,url:e.base64}),pt(t,a)})):pt(t,a)},vt=function(e,t){var a,n,l;return z.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:Y(!0),console.log("--broadCastImageArray---",e,t),{},a="pollImageValidation"==t||"broadCastImage"==t?{broadcast_id:Oe.brodcastId,broadcast_image:{name:e.name}}:{broadcast_id:Oe.brodcastId,broadcast_document:{name:e.name}},console.log("data",a),n=Me(),l={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},B.a.post(q+"deleteAttachment/",a,l).then((function(e){console.log("response",e);Pe.info({description:"Selected file is delete successfully",placement:"bottomLeft"}),J(!1),Y(!1)})).catch((function(e){J(!1),console.log("error",e),e.message.includes("400"),Y(!1)}));case 8:case"end":return r.stop()}}))};Object(n.useEffect)((function(){var t,a=e.dispatch;a((t=nt,function(e){return sa.getBroadCastMessagesDetailsByID(t).then((function(t){return e({type:"BROADCAST_DETAILS_SUCCESS",payload:{broadcastDetailsData:t.data.cug_fields}}),Promise.resolve()}),(function(t){return t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),e({type:"BROADCAST_DETAILS_FAIL",payload:{}}),Promise.reject()}))})),a(Ds())}),[]),Object(n.useEffect)((function(){if(null!==e.cug){var t=e.broadcastmessagedetailsdata?e.broadcastmessagedetailsdata:{};Object.keys(e.cug.cug_field).forEach((function(e){t=Object(o.a)({},t,Object(ut.a)({},e,[]))})),e.broadcastmessagedetailsdata&&Object.keys(e.broadcastmessagedetailsdata).length>0&&(Object.keys(e.broadcastmessagedetailsdata).forEach((function(a){t=Object(o.a)({},t,Object(ut.a)({},a,e.broadcastmessagedetailsdata[a]))})),console.log("----------------values--------",t)),tt(t)}}),[e.cug,e.broadcastmessagedetailsdata]);var bt=function(e,t){var a=et;a[e]=t,tt(a)};return l.a.createElement(l.a.Fragment,null,Re,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Ys,null,l.a.createElement(D.a,{spinning:A,size:"large"},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Broadcast Message")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",form:Q},re&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),Te&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ce,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message Title",value:Oe.messageTittle},l.a.createElement(ht.a.Item,{className:"required",name:"messageTittle",id:"messageTittle",validateStatus:"success"},l.a.createElement(Ms,{showCount:!0,className:"input-control",id:"messageTittle",name:"messageTittle",htmlFor:"helptext",autoComplete:"off",value:Oe.messageTittle,maxLength:80,onChange:function(e){!function(e){console.log("Check the broadcast details -----1---",e.target.id,e.target.value),Ne(Object(o.a)({},Oe,Object(ut.a)({},e.target.id,e.target.value)))}(e)}})))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message",value:Oe.meesage},l.a.createElement(ht.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(Ss,{value:Oe.meesage,onChange:function(e){return function(e,t){console.log("Check the broadcast details -----2---",t,e),Ne((function(a){return Object(o.a)({},a,Object(ut.a)({},t,e))}))}(e,"meesage")},id:"message"})))))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{className:"align-items-center d-flex",gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(yt,{label:"Time Zone",value:Qe},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"selectedTimeZone"},Qe&&l.a.createElement(zt.a,{className:"",htmlFor:"selectedTimeZone",onSelect:function(e){return function(e){Ge(e);var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t),n=Fe()(ns.formatAsDDMMYYYY(a),"DD_MM_YYYY");ue(n),fe(a),Ne(Object(o.a)({},Oe,{scheduled_date_timezone:e}))}(e)},defaultValue:Qe},Fe.a.tz.names().map((function(e){var t=Fe()().format("YYYY-MM-DDTHH:mm:ss"),a=Fe.a.utc(t).tz("".concat(e)),n=a?a.format("Z"):"",r="(UTC ".concat(n,") ")+e;return l.a.createElement(zt.a.Option,{value:e},r)})))))),l.a.createElement(C.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(yt,{label:"Select Date",value:me},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"startDate"},l.a.createElement(ft.a,{defaultValue:me,disabledDate:function(e){return e&&e<Fe()().startOf("day")},name:"startDate",onChange:function(e){return function(e,t){ue(e)}(e)}})))),Oe.pastStartTimeError&&l.a.createElement(Et.a,{message:PAST_TIME,type:"error",showIcon:!0}),l.a.createElement(C.a,{span:24,md:9,lg:6,className:"gutter-row"},l.a.createElement(yt,{label:"Select Time",value:he},l.a.createElement(ht.a.Item,{className:"required timepicker mb-0",name:"time"},l.a.createElement(l.a.Fragment,null),l.a.createElement(Kr.a,{value:he,onChange:function(e){return function(e,t){var a=e.target.value,n=Fe()(a).format("HH:mm"),l=Oe.startDate?Fe()(Oe.startDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),r=new Date(l+"T"+n),s=Fe()().tz(Qe).format("YYYY-MM-DDTHH:mm");r<new Date(s)||fe(r)}(e)}})))),l.a.createElement(C.a,{span:24,className:"6gutter-row mt-3"},e.cug&&Object.keys(null===(k=e.cug)||void 0===k?void 0:k.cug_field).length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mb-4"},"Configure CUG"),Object.keys(e.cug.cug_field).map((function(t,a){var n;return l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,lg:5,className:"gutter-row"},l.a.createElement(yt,{label:t})),l.a.createElement(C.a,{span:24,lg:5,className:"gutter-row"},l.a.createElement(ht.a.Item,{className:"mb-0",name:t},e.broadcastmessagedetailsdata&&l.a.createElement(_s,{cugData:null===(n=e.cug)||void 0===n?void 0:n.cug_field,pollCug:e.broadcastmessagedetailsdata?e.broadcastmessagedetailsdata:{},item:t,handleOnCUGSelect:bt,itemRemoved:Je}))),l.a.createElement(C.a,{span:4,lg:2,className:"gutter-row d-flex align-items-center mt-2 mt-lg-0"},l.a.createElement(Ie.a,{onClick:function(){Ze(t)}},"Clear All")))}))):null),l.a.createElement(C.a,{span:24,className:"6gutter-row mt-3"},!X&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Tt,type:"error",showIcon:!0})),l.a.createElement("h6",null,pe),l.a.createElement("span",null,at),l.a.createElement(ht.a.Item,{name:"help text",className:"upload-list mt-3"},l.a.createElement(S.a,null,l.a.createElement(Cs,{file:Oe.broadCastImage,handleStepOneUpload:function(e,t){console.log("-----handleStepOneUpload--",e,"---name---",t),lt(),"removed"===e.file.status&&(vt(e.file,t),ee(!0),lt(e.file.status));var a=e.fileList;a.forEach((function(e,t){if(!e.uid.includes("broadcastimg")){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)}}));var n=a&&a.name?a.name:"";console.log("Check the broadcast details -----5 handleStepOneUpload upload---",n,a),console.log("Check the broadcast details -----5 handleStepOneUpload upload---",Oe),Ne(Object(o.a)({},Oe,Object(ut.a)({},t,a)))},handleBeforeUpload:function(e,t){console.log("handleBeforeUpload------- ",e,"------name----",t);var a="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,n=e.size/1024/1024<10;return a?ee(!0):(ee(!1),message.error("".concat(e.name," is not a supported format file type."))),a&&(!n&&a?(ee(!1),message.error("Image must smaller than 5MB!")):ee(!0)),a&&n},handleOnRemove:it,handlePollImagePreview:rt,handleCancel:ot,broadcast:Oe,uploadtitle:"Image",disabledbutton:W,countDocument:He}),l.a.createElement(Cs,{file:Oe.broadCastDocument,handleStepOneUpload:function(e,t){lt(),"removed"===e.file.status&&(ee(!0),lt(e.file.status));var a=e.fileList;a.forEach((function(e,t){if(!e.uid.includes("broadcastdoc")){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)}}));console.log("Check the broadcast details -----4 for document upload---","broadCastDocument",a),Ne(Object(o.a)({},Oe,Object(ut.a)({},"broadCastDocument",a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=(e.name.includes(".ppt"),e.name.includes(".doc")),r=e.name.includes(".csv"),s="application/pdf"===e.type||a||n||l||r;s?ee(!0):(ee(!1),message.error("".concat(e.name," is not a supported format file type.")));var o=e.size/1024/1024<10;return s&&(!o&&s?(ee(!1),message.error("Document must smaller than 10MB!")):ee(!0)),s&&o},handleOnRemove:it,handlePollImagePreview:rt,handleCancel:ot,broadcast:Oe,uploadtitle:"Document",disabledbutton:W,countDocument:He}),l.a.createElement(tl,{setLocation:function(e,t,a){var n=t.toString().substring(0,9),l=e.toString().substring(0,9),r={location_latitude:parseFloat(l),location_longitude:parseFloat(n),address:a};Ne(Object(o.a)({},Oe,{address:a})),Ne(Object(o.a)({},Oe,{mapLoction:r}))},longitude:Oe.location_longitude,latitude:Oe.location_latitude,locationName:Oe.mapLoction.address,isEdit:!0}))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ie.a,{type:"primary",className:"md mr-4",onClick:function(e){e.preventDefault(),X&&Oe.messageTittle&&Oe.messageTittle.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&he&&Oe.meesage&&me?(gt(),se(!1)):se(!0)}},"Update"),l.a.createElement(Ie.a,(x={type:"secondary"},Object(ut.a)(x,"type","secondary"),Object(ut.a)(x,"htmlType","submit"),Object(ut.a)(x,"onClick",(function(){window.location="/orgcc/broadcastmessages"})),x),ie))))))))))))))})),Fs=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"deleteHotline",value:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"broadcast/"+this.props.broadcastId,e).then((function(){window.location="/orgcc/broadcastmessages"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},ue),l.a.createElement(Ut.a,{title:"Delete Broadcast",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this broadcast message?")))}}]),t}(n.Component),Ps=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,"7"===e.status_id?l.a.createElement(m.b,{to:{pathname:"/orgcc/editbroadcast/".concat(e.broadcast_id),state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editbroadcast/".concat(e.broadcast_id)},me)," ")):null,l.a.createElement("li",null,l.a.createElement(Fs,{broadcastId:e.broadcast_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),Rs=a(242),Ls=a.n(Rs),zs=a(1102),Hs=zr.a.SHOW_PARENT,Bs=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={value:void 0,treeData:[]},a.onChange=function(e){a.setState({value:e});var t="";t=a.props.cug?"cug_filter":"status_id",a.props.handlePollOnSelect(e,t,a.props.item)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e,t="broadCast"==this.props.type?[{title:"Published",value:"9",key:"2"},{title:X,value:"7",key:"5"}]:[{title:J,value:"5",key:"1"},{title:ee,value:"8",key:"3"},{title:Z,value:"4",key:"4"},{title:X,value:"7",key:"5"}],a=[];this.props.status?this.setState({treeData:t}):(null===(e=this.props.cugData[this.props.item])||void 0===e||e.map((function(e){a.push({title:e,value:e,key:e})})),this.setState({treeData:a}))}},{key:"componentDidUpdate",value:function(e){this.props.reset!==e.reset&&this.props.reset&&this.setState({value:void 0})}},{key:"render",value:function(){var e={treeData:this.state.treeData,value:this.state.value,onChange:this.onChange,treeCheckable:!0,placeholder:"Apply Filter",showCheckedStrategy:Hs,style:{width:"100%"}};return l.a.createElement(zr.a,e)}}]),t}(l.a.Component),qs=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,reset:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e,reset:!1})},a.handleReset=function(){a.setState({reset:!0,visible:!1}),a.props.reset()},a.applyFilters=function(){a.setState({visible:!1}),a.props.applyFilters()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props,t=this.hide,a=this.handleReset,n=this.state.reset,r=this.applyFilters,l.a.createElement("div",null,l.a.createElement(C.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(C.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return a()}},"Reset"))),l.a.createElement(ct.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,Le)),l.a.createElement(C.a,{span:"24"},l.a.createElement(Bs,{status:!0,handlePollOnSelect:e.handlePollOnSelect,reset:n,type:e.type?e.type:"poll"}),l.a.createElement(qr.a,{className:"down-arrow-ico"}))),e.cug&&Object.keys(e.cug).map((function(t){if(t.length>0)return l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,t.substring(t.indexOf("_")+1,t.length))),l.a.createElement(C.a,{span:"24"},l.a.createElement(Bs,{cug:!0,reset:n,cugData:e.cug,item:t,handlePollOnSelect:e.handlePollOnSelect}),l.a.createElement(qr.a,{className:"down-arrow-ico"})))}))))),l.a.createElement(S.a,null,l.a.createElement(C.a,{span:"24",className:"btn-row actions"},l.a.createElement(Ie.a,{type:"primary",className:"mr-2",onClick:function(){return r()}},"Apply"),l.a.createElement(Ie.a,{type:"secondary",onClick:function(){return t()}},ie)))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement(zs.a,{className:"".concat(Zr.a.filter_wrapper_ico),title:"Apply Filter"})));var e,t,a,n,r}}]),t}(l.a.Component),Vs=j.a.Content,Qs=(_n.a.Paragraph,N.a.Search),Gs=function(e){var t=e.setFilterOptions,a=(e.setSearchValue,e.setSortOptions,e.data),r=e.broadcastmessages,s=e.loader,o=e.cug,i=e.updateBroadCastArray,u=Object(n.useState)(!1),d=Object(c.a)(u,2),p=(d[0],d[1],Object(n.useState)(0)),g=Object(c.a)(p,2),h=(g[0],g[1],Object(n.useState)("")),f=Object(c.a)(h,2),E=f[0],v=f[1],b=Object(n.useState)(!1),y=Object(c.a)(b,2),_=y[0],O=y[1],N=Object(n.useState)(""),w=Object(c.a)(N,2),k=w[0],x=w[1],I=Object(n.useState)(""),T=Object(c.a)(I,2),A=T[0],Y=T[1],M=Object(n.useState)(""),U=Object(c.a)(M,2),F=U[0],P=U[1],R=Object(n.useState)([]),L=Object(c.a)(R,2),z=L[0],H=L[1],B=Object(n.useState)({}),q=Object(c.a)(B,2),V=q[0],Q=q[1],G=Object(n.useState)(!1),K=Object(c.a)(G,2),W=(K[0],K[1],Object(n.useState)({status_id:[],sort:"",cug_fliter:{}})),J=Object(c.a)(W,2),Z=J[0],$=J[1],X=function(e,t){return t?e.replace(new RegExp(t,"gi"),(function(e){return"<mark>".concat(e,"</mark>")})):e},ee=function(e,t){return i(e,t)};return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:a}),l.a.createElement(Vs,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Broadcast Messages")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Qs,{placeholder:"Search",onSearch:function(e){t({status_id:z,cug_fliter:V,search:e}),v(e)}})),l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(qs,{handlePollOnSelect:function(e,t,a){if(console.log(e,t,a),"status_id"==t){var n=Z;n.status_id=e,H(e),$(n)}if("cug_filter"==t){var l=a.split("_")[1],r=V;r[l]=e,e.value>0?Q(r):r&&r[l]&&e.value>0&&(delete r[l],Q(r));var s=Z;s.cug_fliter=r,$(s),Q(r)}},cug:o,applyFilters:function(){t({status_id:z,cug_fliter:V})},reset:function(){H([]),Q({}),Q({status_id:[],sort:"",search:"",cug_fliter:{}}),t({status_id:[],sort:"",search:"",cug_fliter:{}}),console.log("reset filter ")},type:"broadCast"})),l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(zt.a,{className:"w-100 w-md-75",defaultValue:"Sort",onSelect:function(e){return function(e){t({status_id:z,cug_fliter:V,sort:e})}(e)}},l.a.createElement(Option,{value:"DESC"},"Newest at top"),l.a.createElement(Option,{value:"ASC"},"Oldest at top"))))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(m.b,{to:"/orgcc/createbroadcast"},l.a.createElement(Ie.a,{type:"primary"},"Create Broadcast"))))),l.a.createElement(D.a,{spinning:s,size:"large"},l.a.createElement("div",{className:"mid-content"},null===r||void 0===r?void 0:r.map((function(e){var t,a,n=Object.keys(e).filter((function(e){return e.includes("cugField")})),r="";n.forEach((function(t){var a=e[t],n=t.split("_");r+=a&&a.length>0?" ".concat(n[1]," : ").concat(a.toString(),",   "):""}));var s=e.message,o=s.replace(/<[^>]+>/g,"").slice(0,500),c=!(o.length<500),i=Fe()().format("YYYY-MM-DDTHH:mm:ss"),m=Fe.a.utc(i).tz("".concat(e.scheduled_date_timezone)),u=m?m.format("Z"):"",d="(UTC ".concat(u,") ")+e.scheduled_date_timezone,p=e.scheduled_date+"T"+e.scheduled_time+"".concat(e.scheduled_time.includes("Z")?"":"Z"),g=e.scheduled_date_timezone,h=p?Fe()(p).tz(g).format("MM/DD/YYYY hh:mm A"):"",f=null!=e.address&&null!=e.location_latitude?e.address.replace(/<[^>]+>/g,""):"",v=f.slice(0,100);return l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22},l.a.createElement("h6",{className:"font-weight-md mb-1"},Ua()(X(e.title,E))),l.a.createElement("div",null,l.a.createElement("small",null,r?"CUG Parameters - ":""),l.a.createElement("small",null,l.a.createElement("i",null,r||""))),l.a.createElement("div",null,l.a.createElement("small",null," Time Zone - "),l.a.createElement("small",null,l.a.createElement("i",null,d||""))),l.a.createElement("div",{style:{paddingBottom:8}},"7"===e.status_id?l.a.createElement("small",null,"Scheduled on: ",h):l.a.createElement("small",null,"Published on: ",h)),l.a.createElement("div",{style:{paddingBottom:8}},l.a.createElement("div",null,0==e.showText&&l.a.createElement("p",null," ",Ua()(X(o,E)),c&&l.a.createElement("a",{onClick:function(){return ee(!0,e.broadcast_id)}},"...Show More")),1==e.showText&&l.a.createElement("p",{style:{justifyContent:"center"}},Ua()(X(s,E)),l.a.createElement("a",{onClick:function(){return ee(!1,e.broadcast_id)}}," ...Show Less")))),null!=e.address&&null!=e.location_latitude?l.a.createElement("div",{className:"attachment-wrapper"},l.a.createElement("span",{className:"icon icon-location pr-1"}),l.a.createElement("a",{className:"text-truncate w-75",title:f,onClick:function(){var t,a,n;t=e.location_latitude,a=e.location_longitude,n=e.address,x(n),Y(a),P(t),O(!0)}},v)):null,null!=e.broadcast_images?null===(t=e.broadcast_images)||void 0===t?void 0:t.map((function(e){return l.a.createElement(Dn.a,{width:100,src:e.url,className:"pr-3",placeholder:e.name,alt:e.name})})):null,null!=e.broadcast_documents?null===(a=e.broadcast_documents)||void 0===a?void 0:a.map((function(e){return l.a.createElement("div",{className:"attachment-wrapper"},l.a.createElement("span",{className:"icon icon-doc pr-2"}),l.a.createElement("a",{href:e.url,target:"_blank"},e.name))})):null),l.a.createElement(C.a,{span:2,className:"d-flex justify-content-end align-items-start"},l.a.createElement(Ps,{data:e})),l.a.createElement(ct.a,{className:"w-100 mt-2"}))})))),l.a.createElement(Ut.a,{title:"Selected Location",visible:_,onCancel:function(){return O(!1)},centered:!0,width:800,okButtonProps:{style:{display:"none"}}},l.a.createElement(S.a,{className:"py-4 map-container"},l.a.createElement(el,{getMapLocation:"",getCurrenLocationName:"",longitude:A,latitude:F,viaModal:"",locationOnBroadCastList:k}))))))))};var Ks=Object(i.b)((function(e){return{broadcastmessagedata:e.broadcastMessages.broadcastmessagedata,cug:e.cug.cug}}))((function(e){var t,a=Object(n.useState)(!1),r=Object(c.a)(a,2),s=r[0],o=r[1],i=Object(n.useState)([]),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(""),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)("DESC"),v=Object(c.a)(E,2),b=v[0],y=v[1],_=Object(n.useState)([]),O=Object(c.a)(_,2),N=O[0],j=O[1];Object(n.useEffect)((function(){(0,e.dispatch)(Ds())}),[]),Object(n.useEffect)((function(){(0,e.dispatch)(As(u,h,b))}),[u,h,b]),Object(n.useEffect)((function(){if(null===e.broadcastmessagedata)o(!0);else if(null!==e.broadcastmessagedata){console.log("-------check useEffect called ");var t=e.broadcastmessagedata&&e.broadcastmessagedata.map((function(e){return e.showText=!1,e}));j(t),o(!1)}}),[e.broadcastmessagedata]);return l.a.createElement(Gs,{broadcastmessages:N,statusOnClicked:function(){setStatusClicked(!statusClicked)},setFilterOptions:function(e){d(e),o(!0)},setSearchValue:function(e){f(e)},setSortOptions:function(e){y(e),o(!0)},updateBroadCastArray:function(t,a){console.log("-------check data ",t,a);var n=e.broadcastmessagedata&&e.broadcastmessagedata.map((function(e){return a==e.broadcast_id&&(e.showText=t),e}));j(n)},data:e,loader:s,cug:null===(t=e.cug)||void 0===t?void 0:t.cug_field})})),Ws=(a(318),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){if(a.state.endDate&&null!==a.state.endDate&&a.state.endTime){a.setState({error:!1,visible:!1});var e={poll_id:a.props.pollsData.poll_id,pollName:a.props.pollsData.title};a.props.extendPollDate(e,a.state)}else a.setState({error:!0})},a.handleCancel=function(){a.setState({visible:!1}),window.location="/orgcc/pollsdirectory"},a.onChangeEndDate=function(e){var t=Fe()().tz(a.props.pollsData.timezone).format("YYYY-MM-DDTHH:mm:ss");a.setState({endDate:e,endTime:new Date(t)})},a.onChangeEndTime=function(e){var t=e.target.value,n=Fe()(t).format("HH:mm"),l=a.state.endDate?Fe()(a.state.endDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),r=new Date(l+"T"+n),s=Fe()().tz(a.props.pollsData.timezone).format("YYYY-MM-DDTHH:mm");r<new Date(s)||a.setState({endTimeError:!1,endTime:r})},a.onBlurEndTime=function(e){new Date>a.state.endTime&&a.state.endTime.getTime()!==a.state.end_time.getTime()?a.setState({endTimeError:!0,endTime:a.state.end_time}):a.setState({endTimeError:!1})},a.disabledDate=function(e){return e&&e<Fe()().startOf("day")},a.range=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a},a.state={visible:!1,endDate:"",error:!1,endTime:new Date,end_time:new Date,endTimeError:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pollsData,t=e.end_date,a=(e.end_time,e.timezone),n=a||"Asia/Kolkata",l=t?Fe()(t).tz(n).format("YYYY-MM-DDTHH:mm:ss"):Fe()().tz(n).format("YYYY-MM-DDTHH:mm:ss"),r=new Date(l);this.setState({endDate:Fe()(r,"DD-MM-YYYY"),endTime:r,end_time:r})}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Extend End Date"),l.a.createElement(Ut.a,{title:"Extend End Date",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Extend Date",cancelText:ie},l.a.createElement(ht.a,{className:"input-md floating-label w-100"},l.a.createElement(C.a,{span:24,className:"gutter-row"},this.state.error&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Dt,type:"error",showIcon:!0})),l.a.createElement("div",{className:"mb-4 subtext-md font-weight-md6"},"Select Date and Time to "," ",l.a.createElement("span",{className:"pr-1"}," ","extend the"),this.props.pollsData.title," ","Poll"),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate",rules:[{required:!0,message:Dt}]},l.a.createElement(ft.a,Object(ut.a)({defaultValue:this.state.endDate,disabledDate:this.disabledDate,onChange:function(t){return e.onChangeEndDate(t)},className:"w-100",name:"eDate"},"className","required")),this.state.endTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0}),l.a.createElement(Kr.a,{value:this.state.endTime,onChange:this.onChangeEndTime,onBlur:this.onBlurEndTime})))))))}}]),t}(n.Component)),Js=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deletePoll()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"deletePoll",value:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"poll/"+this.props.pollId,e).then((function(){window.location="/orgcc/pollsdirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},ue),l.a.createElement(Ut.a,{title:"Delete Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this Poll?")))}}]),t}(n.Component),Zs=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props.data,t=this.props.extendPollDate,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(m.b,{to:{pathname:"/orgcc/duplicatepoll/".concat(e.poll_id),state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/duplicatepoll/".concat(e.poll_id)},"Create Duplicate")," ")," "),1010101010!=e.poll_id&&2020202020!=e.poll_id?l.a.createElement(m.b,{to:{pathname:"/orgcc/editpoll/".concat(e.poll_id),state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editpoll/".concat(e.poll_id)},8===e.status_id?"View":me)," ")):null,8===e.status_id?l.a.createElement(m.b,{to:{pathname:"/orgcc/pollresponse",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/pollresponse"},"Show Final Results")," ")," "):null,5===e.status_id?l.a.createElement(m.b,{to:{pathname:"/orgcc/pollresponse",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/pollresponse"},"Show Interim Results")," ")," "):null,5!==e.status_id&&4!==e.status_id&&7!==e.status_id||1010101010==e.poll_id||2020202020==e.poll_id?null:l.a.createElement("li",null,l.a.createElement(Ws,{extendPollDate:t,pollsData:e})),1010101010==e.poll_id||2020202020==e.poll_id||4!==e.status_id&&7!==e.status_id?null:l.a.createElement("li",null,l.a.createElement(Js,{pollId:e.poll_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon"}))));var e,t}}]),t}(l.a.Component),$s=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Show"),this.props.selectedRows.cug_fields&&Object.keys(this.props.selectedRows.cug_fields).length>0?l.a.createElement(Ut.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("div",{className:"font-18"},"CUG Fields"),l.a.createElement(S.a,{className:"mb-2 autocomplete"},Object.entries(this.props.selectedRows.cug_fields).map((function(e){if(e[1].length>0)return l.a.createElement(C.a,{span:24,className:"mt-4"},e[0].substring(e[0].indexOf("_")+1,e[0].length),":",l.a.createElement("span",{className:"font-weight-normal pl-2"},e[1].toString()))})))):l.a.createElement(Ut.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("div",null,"No CUG Fields are configured for this poll.")))}}]),t}(n.Component),Xs=N.a.Search,eo=(l.a.createElement(ke.a,{style:{fontSize:16,color:"#1890ff"}}),j.a.Content),to=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).bindTableColoumns=function(){var e=[];return e=[{title:"",dataIndex:"",key:"name",width:"5%",render:function(e){return{children:e.image||e.document?l.a.createElement(es.a,null):null,props:{"data-title":""}}}},{title:"Poll Name",dataIndex:"title",key:"name",width:"15%",render:function(e,t){return{children:2020202020!=t.poll_id&&1010101010!=t.poll_id?l.a.createElement(m.b,{to:{pathname:"/orgcc/editpoll/".concat(t.poll_id),state:t}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editpoll/".concat(t.poll_id)},e)," ")):e,props:{"data-title":"Poll Name"}}}},{title:"Start Date & Time",dataIndex:"",key:"start_date",width:"18%",render:function(e){e.start_date&&e.start_date;var t=e.timezone?e.timezone:"America/New_York";return{children:e.start_date?Fe()(e.start_date).tz(t).format("MM/DD/YYYY hh:mm A"):"",props:{"data-title":"Start Date"}}}},{title:"End Date & Time",dataIndex:"",key:"end_date",width:"14%",render:function(e){e.end_date&&e.end_date;var t=e.timezone?e.timezone:"America/New_York";return{children:e.end_date?Fe()(e.end_date).tz(t).format("MM/DD/YYYY hh:mm A"):"",props:{"data-title":"Start Date"}}}},{title:"Timezone",dataIndex:"",key:"timezone",width:"10%",render:function(e){var t=Fe()().format("YYYY-MM-DDTHH:mm:ss"),a=Fe.a.utc(t).tz("".concat(e.timezone)),n=a?a.format("Z"):"";return{children:"(UTC ".concat(n,") ")+e.timezone}}},{title:"Status",dataIndex:"",key:"x",width:"8%",render:function(e){return{children:1010101010!=e.poll_id&&2020202020!=e.poll_id?4===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},Z):5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):7===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),X):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),ee):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Sample"),props:{"data-title":"Status"}}}},{title:ze,dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(Zs,{extendPollDate:a.extendPollDate,data:e,cugData:a.state.cug}),props:{"data-title":"Action"}}}}],a.state.cug&&Object.keys(a.state.cug).length>0&&e.splice(e.length-3,0,{title:"CUG Details",dataIndex:"",key:"x",width:"8%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement($s,{selectedRows:e})),props:{"data-title":"CUG Details"}}}}),l.a.createElement(xe,{rowKey:"poll_id",columns:e,data:a.state.data})},a.extendPollDate=function(e,t){var a=t.timezone?t.timezone:"Asia/Calcutta",n=Fe.a.utc().tz("".concat(a)).utcOffset();t.offset=-n;var l={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r={end_date:ns.formatAsDDMMYYYY(t.endDate),end_time:ns.formatAsHHmmss(t.endTime),offset:t.offset};B.a.put(q+"extendEndDate/"+e.poll_id+"/",r,l).then((function(){w.a.config({placement:"bottomLeft"}),w.a.open({description:e.pollName+Ge}),window.location="/orgcc/pollsdirectory"}))},a.onSearch=function(e){var t=Object(o.a)({},a.state.filterData,{search:e});a.setState({filterData:t}),a.props.setFilterOptions("search",t)},a.applyFilters=function(){a.props.setFilterOptions("filters",a.state.filterData)},a.reset=function(){a.setState({filterData:{}}),a.props.setFilterOptions("reset",{search:"",status_id:[],cug_filter:{}})},a.handlePollOnSelect=function(e,t,n){var l=e.map((function(e){return"status_id"===t?parseInt(e):e})),r={};if(n)if(0===e.length){var s=a.state.filterData.cug_filter,c=Object.keys(s).filter((function(e){return e!==n})).reduce((function(e,t){return e[t]=s[t],e}),{});r=Object(o.a)({},a.state.filterData,Object(ut.a)({},t,Object(o.a)({},c)))}else r=Object(o.a)({},a.state.filterData,Object(ut.a)({},t,Object(o.a)({},a.state.filterData[t],Object(ut.a)({},n,l))));else r=Object(o.a)({},a.state.filterData,Object(ut.a)({},t,l));a.setState({filterData:r})},a.handleCheck=function(e){e.target.checked?a.setState({showTimezones:!0}):a.setState({showTimezones:!1})},a.statusClicked=function(e,t){var n={};if(0===t.length)w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.title+$e});else if("Scheduled"===t||"Active"===t)n={status_id:4};else if("inActive"===t){var l=e.start_date,r=l.split("/")[1],s=l.split("/")[0],o=l.split("/")[2],c=new Date(s+"-"+r+"-"+o),i=new Date;if(c>i)n={status_id:7};else if(c<i)n={status_id:5};else if(c===i){var m=e.start_time,u=new Date(s+"-"+r+"-"+o+m);u>new Date?n={status_id:7}:u<=new Date&&(n={status_id:5})}}var d={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.put(q+"changePollStatus/"+e.poll_id+"/",n,d).then((function(){w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.title+Je}),a.props.statusOnClicked()}))},a.state={data:[],cug:{},filterData:{},showTimezones:!1,coloumns:[],userType:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.polls,a=e.cug,n=e.filter,l=e.data;l&&"amidb"==l.userType?this.setState({userType:"amidb"}):this.setState({userType:""}),null===t||void 0===t||t.forEach((function(e){e.start_date=Fe()(e.start_date).utc().local().format("MM/DD/YYYY"),e.end_date=Fe()(e.start_date).isValid()?Fe()(e.end_date).utc().local().format("MM/DD/YYYY"):""})),this.setState({data:t,cug:null===a||void 0===a?void 0:a.cug_field,filterData:n})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a;this.props.polls!==e.polls&&(null===(t=e.polls)||void 0===t||t.forEach((function(e){})),this.setState({data:e.polls}));this.props.cug!==e.cug&&this.setState({cug:null===(a=e.cug)||void 0===a?void 0:a.cug_field});this.props.filter!==e.filter&&this.setState({filterData:e.filter})}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this.props.loader;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:this.props.data}),l.a.createElement(eo,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Manage Polls")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(ht.a,{form:this.props.form},l.a.createElement(ht.a.Item,{name:"search",id:"search"},l.a.createElement(Xs,{name:"search",id:"search",placeholder:re,onSearch:this.onSearch,autoComplete:"off"})))),l.a.createElement(C.a,{span:24,lg:9,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(qs,{handlePollOnSelect:this.handlePollOnSelect,cug:this.state.cug,applyFilters:this.applyFilters,reset:this.reset})))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(m.b,{to:{pathname:"/orgcc/createpoll",state:this.state.cug}},l.a.createElement(Te,{value:"Create Poll"}))))),l.a.createElement(D.a,{spinning:e,size:"large"},this.bindTableColoumns()))))))}}]),t}(l.a.Component),ao=[{title:"Impact of Microaggressions",help_text:"Description of what a Harbinger is",start_date:Fe()().utc().local().format("MM/DD/YYYY"),end_date:Fe()().utc().local().format("MM/DD/YYYY"),start_time:Fe()().utc().local().format("hh:mm:ss"),created_by:12,created_on:"2021-02-09T07:39:50.743345Z",document:null,document_name:null,end_time:Fe()().utc().local().format("hh:mm:ss"),image:null,image_name:null,is_out_of_the_box:!1,option_text:[],poll_id:1010101010,poll_question_rating_type:null,poll_question_type:"2",poll_result_chart_type:2,question:"1. The technique for selecting a new point depends upon",show_result_to_users:!1,status_id:4,update_on:null},{created_by:12,created_on:"2021-02-09T07:39:50.743345Z",document:null,document_name:null,end_date:Fe()().utc().local().format("MM/DD/YYYY"),end_time:Fe()().utc().local().format("hh:mm:ss"),help_text:"Description of what a Harbinger is",image:null,image_name:null,is_out_of_the_box:!1,option_text:[],poll_id:2020202020,poll_question_rating_type:null,poll_question_type:"2",poll_result_chart_type:2,question:"1. The technique for selecting a new point depends upon",show_result_to_users:!1,start_date:Fe()().utc().local().format("MM/DD/YYYY"),start_time:Fe()().utc().local().format("hh:mm:ss"),status_id:4,title:"Experience of Work From Home (WFH)",update_on:null}],no=function(e,t){return function(a){return sa.getPolls(e,t).then((function(e){return a({type:"POLL_SUCCESS",payload:{pollsdata:e.data}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:"POLL_FAIL"}),a({type:"SET_MESSAGE",payload:t}),Promise.reject()}))}};var lo=Object(i.b)((function(e){return{pollsdata:e.poll.pollsdata,cug:e.cug.cug}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=ht.a.useForm(),i=Object(c.a)(o,1)[0],m=Object(n.useState)(!1),u=Object(c.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)({search:"",status_id:[],cug_filter:{}}),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(!1),b=Object(c.a)(v,2),y=b[0],_=b[1],O=Object(n.useState)([]),N=Object(c.a)(O,2),j=N[0],w=N[1];Object(n.useEffect)((function(){(0,e.dispatch)(Ds())}),[]),Object(n.useEffect)((function(){(0,e.dispatch)(no(f)),s(!0)}),[d,f]),Object(n.useEffect)((function(){var t,a;null===e.pollsdata?s(!0):null!==e.pollsdata&&s(!1);var n=null!==e.pollsdata?e.pollsdata:[],l=null===f||void 0===f?void 0:null===(t=f.status_id)||void 0===t?void 0:t.includes(4);(null===f||void 0===f?void 0:null===(a=f.search)||void 0===a?void 0:a.length)>0||Object.values(null===f||void 0===f?void 0:f.status_id).length>0&&!l?w(n):w(function(e){var t=[];t=e;for(var a=0;a<ao.length;a++)t.push(ao[a]);return t}(n))}),[e.pollsdata]);return l.a.createElement(to,{polls:j,cug:e.cug,data:e,loader:r,checked:y,form:i,filter:f,setLoader:s,statusOnClicked:function(){p(!d)},setFilterOptions:function(e,t){"reset"===e&&i.setFieldsValue({search:""}),E(t)},handleCheck:function(e){_(!y),E(e)}})})),ro=a(119),so=function(e){var t=Object(n.useState)({labels:[],datasets:[]}),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)({title:{display:!0,text:e.chartTitle}}),m=Object(c.a)(i,2),u=m[0],d=m[1];Object(n.useEffect)((function(){var t,a;d({title:{display:!0,text:e.chartTitle},legend:{onClick:null},scales:{xAxes:[{title:{display:!0,text:e.chartTitle}}],yAxes:[{title:{display:!0,text:e.chartTitle}}]}});var n,l=[],c=[],i=[],m=[],u=["rgba(234, 80, 55)","rgba(32, 50, 92)","rgba(96,110,141,1)","rgba(236,131,123,1)"];null===(t=e.data)||void 0===t||t.forEach((function(e){i.push(Object(ut.a)({},e.poll_option_id.toString(),0)),m.push(e.count)})),null===(a=e.data)||void 0===a||a.map((function(e,t){var a=[];i.map((function(t,n){JSON.parse(Object.keys(t))===e.poll_option_id?(i[n]=Object(ut.a)({},e.poll_option_id,e.count),a.push(e.count)):a.push(0)}));var n={label:e.option_text,data:a,backgroundColor:u[t],borderWidth:0};c.push(e.option_text),l.push(n),a})),n=Object(o.a)({},r,{labels:c,datasets:l}),s(n),e.sendBackData(c,m)}),[e.data]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ro.a,{id:"barChart",data:r,options:u}))},oo=function(e){var t=Object(n.useState)({labels:[],datasets:[]}),a=Object(c.a)(t,2),r=a[0],s=a[1],i={title:{display:!0,text:e.chartTitle},legend:{onClick:null}};Object(n.useEffect)((function(){var t,a,n=[],l=[],c=[],i=[];e.data.map((function(e){n.push(e.option_text),l.push(parseInt(e.percentage.substring(0,e.percentage.length-1))),c.push("rgba(255, 255, 255)"),i.push(e.percentage)})),a=[{label:"",data:l,backgroundColor:["rgba(234, 80, 55)","rgba(32, 50, 92)","rgba(96,110,141,1)","rgba(236,131,123,1)"],borderColor:c,borderWidth:0}],t=Object(o.a)({},r,{labels:n,datasets:a}),s(t),e.sendBackData(n,i)}),[e.data]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ro.c,{id:"pieChart",data:r,options:i}))},co=a(122),io=a.n(co),mo=a(133),uo=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(Ie.a,{onClick:function(){e.forGreed?e.showDownloadOptions("gridPDF"):e.showDownloadOptions("pdf")}},"Download PDF")),l.a.createElement("li",null,l.a.createElement(Ie.a,{onClick:function(){e.forGreed?e.showDownloadOptions("gridCSV"):e.showDownloadOptions("csv")}},"Download CSV"))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement(Ie.a,{type:"primary",className:"w-md-100 mt-3 mt-lg-0"},"Download"),l.a.createElement(qr.a,{className:"down-arrow-ico white btn-arrow"})));var e}}]),t}(l.a.Component),po=j.a.Content,go=function(e){var t,a,r=Object(u.h)(),s=Object(n.useState)(!1),i=Object(c.a)(s,2),d=i[0],p=i[1],g=Object(n.useState)({}),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)("1"),b=Object(c.a)(v,2),y=b[0],_=b[1],O=Object(n.useState)([]),N=Object(c.a)(O,2),w=N[0],k=N[1];Object(n.useEffect)((function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};p(!0);var t={poll_id:r.state.poll_id};B.a.post(q+"pollResult/",t,e).then((function(e){console.log("CONST data--",e.data);var t={},a=[];e.data.map((function(e){t=Object(o.a)({},e,{option_text:"1"===e.option_text?"Definitely Not":"2"===e.option_text?"Better If Not":"3"===e.option_text?"Does Not Matter":"4"===e.option_text?"I am Ok":"5"===e.option_text?"Excited":e.option_text}),a.push(t)})),E(a),p(!1)}))}),[]);var x=function(){var e,t,a,n=[],l="";w[0].forEach((function(e,t){w[1].forEach((function(a,r){var s;t===r&&(l="1"===y?"Count":"Percentage",n.push((s={},Object(ut.a)(s,"Poll Option Text",e),Object(ut.a)(s,l,a),s)))}))}));var s="".concat("Poll Name"," for,").concat(r.state.title,"\n");s+='"",""\n',null!=(s+=function(e){var t,a,n;return null!=(e=e||null)&&e.length?(",","\n",n=Object.keys(e[0]),t="",t+=n.join(","),t+="\n",e.forEach((function(e){a=0,n.forEach((function(n){a>0&&(t+=","),t+=e[n],a++})),t+="\n"})),t):null}(n))&&(t=r.state.title+".csv",s.match(/^data:text\/csv/i)||(s="data:text/csv;charset=utf-8,"+s),e=encodeURI(s),(a=document.createElement("a")).setAttribute("href",e),a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a))},I=function(e,t){k([e,t])};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(po,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(gt.a.Item,null,ae)),l.a.createElement(gt.a.Item,null,"Poll Name"))),l.a.createElement(D.a,{spinning:d,size:"large"},l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},r.state.title),l.a.createElement(C.a,{span:24,md:24,lg:12,className:"search-row column d-block d-lg-flex align-items-center justify-content-start justify-content-lg-end px-3 px-lg-0 my-4 my-lg-0"},f&&f.length>0?l.a.createElement("span",{className:"pr-3 w-md-100"},"Total audience",": ",null===(t=f[0])||void 0===t?void 0:t.total_employee_count):null,f&&f.length>0?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0 mr-3"},l.a.createElement(zt.a,{className:"w-100",defaultValue:"1",onSelect:function(e){_(e)}},l.a.createElement(Option,{value:"1",defaultValue:!0},"Bar Chart"),l.a.createElement(Option,{value:"2"},"Pie Chart"))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(uo,{showDownloadOptions:function(e){"pdf"===e?function(){var e="1"===y?document.getElementById("barChart"):document.getElementById("pieChart");io()(e).then((function(e){var t=e.toDataURL("image/png"),a="";(a=e.width>e.height?new mo.a("l","mm",[e.width,e.height]):new mo.a("p","mm",[e.height,e.width])).addImage(t,"JPEG",0,0,e.width,e.height);var n=r.state.title+".pdf";a.save(n)}))}():x()}}))):null)),l.a.createElement("div",{className:""},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},r.state.question),f&&f.length>0?l.a.createElement("span",{className:"font-weight-md6 pt-3 d-flex"},null===(a=f[0])||void 0===a?void 0:a.total_response," ","Response(s)"):null,l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement("h1",{className:"text-center pt-3"},f&&0===f.length&&"Results for this poll are not available at this moment."),f&&f.length>0?"1"===y?l.a.createElement(so,{data:f,chartTitle:"Poll Name for "+r.state.title,sendBackData:I}):l.a.createElement(oo,{data:f,chartTitle:"Poll Name for "+r.state.title,sendBackData:I}):null)))))))))))},ho=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={tags:[],inputVisible:!1,inputValue:"",editInputIndex:-1,editInputValue:""},a.handleClose=function(e){var t=a.state.tags.filter((function(t){return t!==e}));a.props.setSingleChoiceResponse(t),a.setState({tags:t})},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue,t=a.state.tags;e&&-1===t.indexOf(e)&&(t=[].concat(Object(dt.a)(t),[e])),a.setState({tags:t,inputVisible:!1,inputValue:""}),a.props.setSingleChoiceResponse(t)},a.handleEditInputChange=function(e){a.setState({editInputValue:e.target.value})},a.handleEditInputConfirm=function(){a.setState((function(e){var t=e.tags,a=e.editInputIndex,n=e.editInputValue,l=Object(dt.a)(t);return l[a]=n,{tags:l,editInputIndex:-1,editInputValue:""}}))},a.saveInputRef=function(e){a.input=e},a.saveEditInputRef=function(e){a.editInput=e},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pollResponse;this.setState({tags:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tags,n=t.inputVisible,r=t.inputValue,s=t.editInputIndex,o=t.editInputValue;return l.a.createElement(l.a.Fragment,null,a.map((function(t,a){if(s===a)return l.a.createElement(N.a,{ref:e.saveEditInputRef,key:t,size:"small",className:"tag-input",value:o,onChange:e.handleEditInputChange,onBlur:e.handleEditInputConfirm,onPressEnter:e.handleEditInputConfirm});var n=t.length>20,r=l.a.createElement(Nn.a,{className:"".concat(Zr.a.edit_tag),key:t,closable:!e.props.disabled,onClose:function(){return e.handleClose(t)}},"1"==e.props.pollQuestionType?l.a.createElement(vt.a,{disabled:!0}):l.a.createElement(bt.a,{disabled:!0}),l.a.createElement("span",{onDoubleClick:function(n){e.setState({editInputIndex:a,editInputValue:t},(function(){e.editInput.focus()})),n.preventDefault()}},n?"".concat(t.slice(0,20),"..."):t));return n?l.a.createElement(Aa.a,{title:t,key:t},r):r})),n&&l.a.createElement(N.a,{ref:this.saveInputRef,type:"text",size:"small",className:"tag-input",value:r,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!this.props.disabled&&l.a.createElement(C.a,{span:12,className:"mb-4"},l.a.createElement(Nn.a,{onClick:this.showInput,className:"".concat(Zr.a.add_tag)},l.a.createElement(Ie.a,{type:"link",className:"link pl-0",onClick:this.showModal,disabled:this.props.disabled},l.a.createElement("span",{className:"icon icon-add-filled"}),"Add Option"))))}}]),t}(n.Component),fo=function(e){return e.pollResponse.map((function(t,a){var n=t.length>20;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,{key:a,closable:!1,className:"".concat(Zr.a.edit_tag)},"1"===e.pollQuestionType?l.a.createElement(vt.a,{value:a,disabled:e.hide}):l.a.createElement(bt.a,{disabled:!0}),l.a.createElement("span",null,n?"".concat(t.slice(0,20),"..."):t)))}))},Eo={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",emptyIcon:l.a.createElement("i",{class:"far fa-smile"}),fullIcon:l.a.createElement("i",{class:"fa fa-smile"}),onChange:function(e){}},vo=N.a.TextArea,bo=function(e){var t,a,r=e.next,s=e.poll,o=e.setOptionsError,i=e.pollError,u=e.chartError,d=e.handlePollOnSelect,p=e.setSingleChoiceResponse,g=e.onCreateChange,h=e.setpollError,f=e.optionsError,E=e.form,v=e.location,b=e.editPoll,y=Object(n.useState)(!1),_=Object(c.a)(y,2),O=_[0],j=_[1],w=function(e,t){e.preventDefault(),s.pollName&&s.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollHelpText&&s.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollQuestionType&&s.pollQuestionType.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollQuestion?"1"!==s.pollQuestionType&&"2"!==s.pollQuestionType||0!==s.pollResponse.length?"3"===s.pollQuestionType&&"3"===s.pollQuestionType&&0===s.pollRatingType.length?(j(!0),o(!1)):(j(!1),o(!1),"next"===t?r():b()):(o(!0),j(!1)):(j(!0),o(!1))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",form:E},O&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),f&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please add options",type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Poll Title",value:s.pollName},l.a.createElement(vo,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:s.pollName,id:"pollName",onChange:function(e){return g(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==v.state.title?B.a.post(q+"checkpoll/",{title:e.target.value},t).then((function(e){e.data&&h(e.data[0])})):h("status: true")}(e)},autoComplete:"off",disabled:8===s.status_id,className:"required ".concat(Zr.a.sm_textarea)}),"status: false"===i&&s.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollName.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==i&&l.a.createElement(Et.a,{message:kt,type:"error",showIcon:!0}))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Description",value:s.pollHelpText},l.a.createElement(ht.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"pollHelpText",id:"pollHelpText",name:"pollHelpText",value:s.pollHelpText,autoComplete:"off",maxLength:500,disabled:8===s.status_id,onChange:function(e){return g(e)}}))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:4}},l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:10,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(yt,{label:"Question Type",value:s.pollQuestionType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(t={className:"",htmlFor:"questiontype"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"id","pollQuestionType"),Object(ut.a)(t,"value",s.pollQuestionType),Object(ut.a)(t,"disabled",8===s.status_id),Object(ut.a)(t,"onSelect",(function(e){return d(e,"pollQuestionType")})),t),l.a.createElement(zt.a.Option,{value:"1"},"Select Single"),l.a.createElement(zt.a.Option,{value:"2"},"Select Multiple"),l.a.createElement(zt.a.Option,{value:"3"},"Rating Type"),l.a.createElement(zt.a.Option,{value:"4"},"Select Short Answer Type"),l.a.createElement(zt.a.Option,{value:"5"},"Select Long Answer Type")))))),"3"===s.pollQuestionType?l.a.createElement(C.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Rating Type",value:s.pollRatingType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(a={className:"",htmlFor:"ratingtype"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"id","pollRatingType"),Object(ut.a)(a,"value",s.pollRatingType),Object(ut.a)(a,"disabled",8===s.status_id),Object(ut.a)(a,"onSelect",(function(e){return d(e,"pollRatingType")})),a),l.a.createElement(zt.a.Option,{value:"1"},"Stars"),l.a.createElement(zt.a.Option,{value:"2"},"Smiley"),l.a.createElement(zt.a.Option,{value:"3"},"Thermometer"),l.a.createElement(zt.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(zt.a.Option,{value:"5"},"Ladder"))))),u&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please select the Chart type as Star",type:"error",showIcon:!0}))):null)),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Question",value:s.pollQuestion},l.a.createElement(ht.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:s.pollQuestion,value:s.pollQuestion,disabled:8===s.status_id,autoComplete:"off",maxLength:500,onChange:function(e){return g(e)}}))))),l.a.createElement(C.a,{span:24,md:11,className:"white-bg ml-5 p-4 ".concat(Zr.a.rating_img_wrapper)},s.pollQuestionType.length>0?null:l.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},lt),"3"===s.pollQuestionType&&s.pollRatingType?"1"===s.pollRatingType?l.a.createElement(Xr.a,Object.assign({},Eo,{value:s.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return d(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:is.a,alt:"send message"}):"3"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:rs.a,alt:"send message"}):"4"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:os.a,alt:"send message"}):"5"===s.pollRatingType?l.a.createElement("img",{className:"font-size ".concat(Zr.a.steps_img),src:us.a,alt:"send message"}):null:"1"===s.pollQuestionType||"2"===s.pollQuestionType?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(ho,{pollQuestionType:s.pollQuestionType,setSingleChoiceResponse:p,pollResponse:s.pollResponse,disabled:8===s.status_id}))):null),l.a.createElement(ht.a.Item,null,l.a.createElement(Ie.a,{type:"primary",className:"mr-4",htmlType:"submit",onClick:function(e){return w(e,"next")},"data-test":"stepOneNext"},oe),8===s.status_id?null:l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){return w(e,"draft")}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))))))))},yo=a(1084),_o=function(e){var t=e.file,a=e.handleStepOneUpload,n=e.handleBeforeUpload,r=e.handleOnRemove,s=e.handlePollImagePreview,o=e.handleCancel,c=e.poll,i=e.disabled;return l.a.createElement(l.a.Fragment,null,l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:t,onChange:function(e){return a(e,"pollDocument")},beforeUpload:function(e){return n(e,"pollDocument")},onRemove:function(e){return r(e,"pollImageValidation")},onPreview:function(e){return s(e)},className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif, application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel, .csv "},i?null:l.a.createElement(Ie.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"})," Document Or Image")),l.a.createElement(Ut.a,{className:"modal-openline",visible:c.previewVisible,title:c.previewTitle,centered:!0,onOk:function(e){return o(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:c.previewImage})))},Oo=a(101),No=a.n(Oo),jo=a(102),wo=a.n(jo),So=function(e){var t,a,r=e.next,s=e.prev,o=e.uploadError,i=e.poll,u=e.cug,d=e.handleStepOneUpload,p=e.handleBeforeUpload,g=e.handleOnRemove,h=e.handlePollImagePreview,f=e.handleCancel,E=e.onChange,v=e.setPoll,b=e.onSwitchChange,y=e.setPollsDate,_=e.handleOnSelect,O=e.handleOnCUGSelect,N=e.itemCleared,j=e.editPoll,w=Object(n.useState)(!1),D=Object(c.a)(w,2),k=D[0],x=D[1],I=Object(n.useState)(!1),T=Object(c.a)(I,2),A=T[0],Y=T[1],M=Object(n.useState)(new Date),U=Object(c.a)(M,2),F=U[0],P=U[1],R=Object(n.useState)(new Date),L=Object(c.a)(R,2),z=(L[0],L[1]),H=Object(n.useState)(new Date),B=Object(c.a)(H,2),q=B[0],V=B[1],Q=Object(n.useState)(new Date),G=Object(c.a)(Q,2),K=(G[0],G[1]),W=Object(n.useState)(""),J=Object(c.a)(W,2),Z=J[0],$=J[1],X=Object(n.useState)(i.timezone1?i.timezone1:"Asia/Kolkata"),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){console.log("-------poll.timezone----",i,i.timezone),P(i.pollEndTime),z(i.pollEndTime),V(i.pollStartTime),K(i.pollStartTime)}),[]);var ne=function(e,t){e.preventDefault(),o?Y(!0):i.pollStartDate&&0!==i.timezone1.length?(x(!1),Y(!1),"next"===t?r():j()):"next"===t?x(!0):(x(!1),j())},le=function(e){ae(e),_("timezone1",e),function(e){var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t);V(a);var n=i;n.pastStartTimeError=!1,n.pollStartTime=a,v(n)}(e),function(e){var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t);P(a);var n=i;n.pastEndTimeError=!1,n.pollEndTime=a,v(n)}(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(C.a,{span:24},u&&u.cug_field&&Object.keys(null===u||void 0===u?void 0:u.cug_field).length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mb-4"},"Configure CUG"),Object.keys(u.cug_field).map((function(e,t){if(e.length>0)return l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,lg:5,className:"gutter-row"},l.a.createElement(yt,{label:e.substring(e.indexOf("_")+1,e.length)})),l.a.createElement(C.a,{span:24,lg:5,className:"gutter-row"},l.a.createElement(ht.a.Item,{className:"mb-0",name:e},l.a.createElement(_s,{cugData:null===u||void 0===u?void 0:u.cug_field,pollCug:i.cugDetails,item:e,pollStatusId:i.status_id,handleOnCUGSelect:O,itemRemoved:Z}))),l.a.createElement(C.a,{span:4,lg:2,className:"gutter-row d-flex align-items-center mt-2 mt-lg-0"},l.a.createElement(Ie.a,{disabled:8===i.status_id,onClick:function(){return $(t=e),void N(t);var t}},"Clear All")))}))):null,l.a.createElement(S.a,null,l.a.createElement("h6",null,pe),l.a.createElement(C.a,{span:24,className:"gutter-row"},A&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Tt,type:"error",showIcon:!0})),l.a.createElement(ht.a.Item,{name:"upload",className:"upload-list"},l.a.createElement(_o,{file:i.pollDocument,handleStepOneUpload:d,handleBeforeUpload:p,handleOnRemove:g,handlePollImagePreview:h,handleCancel:f,poll:i,disabled:8===i.status_id})))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:8,lg:8,xl:6,className:"mb-3 t-2 mb-y-0"},l.a.createElement(ht.a.Item,{label:"Show result to users",className:"mb-0"},l.a.createElement(yo.a,{id:"showResult",checked:i.showResult,onChange:function(e,t){return E(e,t)},disabled:8===i.status_id}))),i.showResult?l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:24,lg:12},i.switch?l.a.createElement("img",{className:"w-100",src:No.a,alt:"Pie Chart"}):l.a.createElement("img",{className:"w-100",src:wo.a,alt:"Bar Chart"})),l.a.createElement(C.a,{className:"toggle-switch mt-3 pl-5"},l.a.createElement(yo.a,{id:"showChart",checkedChildren:"Bar Chart",unCheckedChildren:"Pie Chart",onChange:function(e,t){return b(e,t)},disabled:8===i.status_id}))):l.a.createElement(C.a,null))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-4 mb-3"},l.a.createElement("h6",null,"Schedule"),k&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(yt,{label:"Time Zone",value:i.timezone},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"timezone1"},l.a.createElement(zt.a,{className:"",htmlFor:"timezone1",onSelect:function(e){return le(e)},disabled:8===i.status_id,defaultValue:i.timezone},Fe.a.tz.names().map((function(e){var t=Fe()().format("YYYY-MM-DDTHH:mm:ss"),a=Fe.a.utc(t).tz("".concat(e)),n=a?a.format("Z"):"",r="(UTC ".concat(n,") ")+e;return l.a.createElement(zt.a.Option,{value:e},r)})))))),l.a.createElement(yt,{label:"Select Start Date",value:"sDate"},l.a.createElement(ht.a.Item,{name:"sDate",rules:[{required:!0}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row mb-3 mb-lg-0"},l.a.createElement(ft.a,(t={className:"w-100",name:"sDate"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"value",i.pollStartDate),Object(ut.a)(t,"disabledDate",(function(e){return e&&e<Fe()().startOf("day")})),Object(ut.a)(t,"disabled",8===i.status_id),Object(ut.a)(t,"onChange",(function(e){return y("pollStartDate",e)})),t)),i.pastStartTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(Kr.a,{value:q,onChange:function(e){var t=e.target.value,a=Fe()(t).format("HH:mm"),n=i.pollStartDate?Fe()(i.pollStartDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),l=new Date(n+"T"+a),r=Fe()().tz(te).format("YYYY-MM-DDTHH:mm");if(l<new Date(r));else{V(l);var s=i;s.pollStartTime=l,v(s)}},disabled:8===i.status_id}))))),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row mb-3 mb-lg-0"},l.a.createElement(ft.a,{className:"w-100",name:"eDate",value:i.pollEndDate,disabledDate:function(e){return i.pollStartDate?e&&e<Fe()(i.pollStartDate,"DD-MM-YYYY"):e&&e<Fe()().startOf("day")},disabled:0===(null===(a=i.pollStartDate)||void 0===a?void 0:a.length)||!i.pollStartDate||8===i.status_id,onChange:function(e){return y("pollEndDate",e)}}),i.pastEndTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(Kr.a,{value:F,onChange:function(e){var t=e.target.value,a=Fe()(t).format("HH:mm"),n=i.pollEndDate?Fe()(i.pollEndDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),l=new Date(n+"T"+a),r=Fe()().tz(te).format("YYYY-MM-DDTHH:mm");if(l<new Date(r));else{P(l);var s=i;s.pollEndTime=l,v(s)}},disabled:8===i.status_id})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"}))))),l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:s,"data-test":"steptwoPrev"},ce),l.a.createElement(Ie.a,{className:"mr-4",type:"primary",onClick:function(e){return ne(e,"next")},"data-test":"steptwoNext"},oe),8===i.status_id?null:l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){return ne(e,"draft")}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))))},Co={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",emptyIcon:l.a.createElement("i",{class:"far fa-smile"}),fullIcon:l.a.createElement("i",{class:"fa fa-smile"}),onChange:function(e){}},Do=N.a.TextArea,ko=function(e){var t,a,n,r,s=e.poll,o=e.prev,c=e.handleCancel,i=e.handlePollImagePreview,m=e.editPoll,u="";return s.cugDetails&&Object.values(s.cugDetails).some((function(e){e.length>0&&(u="Configure CUG")})),l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Poll Title",value:s.pollName},l.a.createElement(ht.a.Item,{className:"required",name:"polltitle",id:"polltitle"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Do,{htmlFor:"polltitle",value:s.pollName,id:"polltitle",name:"polltitle",disabled:!0}))))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Description",value:s.pollHelpText},l.a.createElement(ht.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"pollHelpText",id:"pollHelpText",name:"pollHelpText",value:s.pollHelpText,disabled:!0}))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:4}},l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:10,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(yt,{label:"Question Type",value:s.pollQuestionType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"pollQuestionType"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(t={className:"",htmlFor:"pollQuestionType"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"id","pollQuestionType"),Object(ut.a)(t,"value",s.pollQuestionType),Object(ut.a)(t,"disabled",!0),t),l.a.createElement(zt.a.Option,{value:"1",disabled:""!==s.pollChartType&&"4"===s.pollChartType},"Select Single"),l.a.createElement(zt.a.Option,{value:"2",disabled:""!==s.pollChartType&&"4"===s.pollChartType},"Select Multiple"),l.a.createElement(zt.a.Option,{value:"3",disabled:""!==s.pollChartType&&"4"!==s.pollChartType},"Rating Type")))))),"3"===s.pollQuestionType?l.a.createElement(C.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Rating Type",value:s.pollRatingType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(a={className:"",htmlFor:"ratingtype"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"id","ratingtype"),Object(ut.a)(a,"value",s.pollRatingType),Object(ut.a)(a,"disabled",!0),a),l.a.createElement(zt.a.Option,{value:"1"},"Stars"),l.a.createElement(zt.a.Option,{value:"2"},"Smiley"),l.a.createElement(zt.a.Option,{value:"3"},"Thermometer"),l.a.createElement(zt.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(zt.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Question",value:s.pollQuestion},l.a.createElement(ht.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:s.pollQuestion,value:s.pollQuestion,disabled:!0}))))),l.a.createElement(C.a,{span:24,md:11,className:"white-bg ml-5 p-4 ".concat(Zr.a.rating_img_wrapper)},"3"===s.pollQuestionType&&s.pollRatingType?"1"===s.pollRatingType?l.a.createElement(Xr.a,Object.assign({},Co,{value:s.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return handlePollOnSelect(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:is.a,alt:"send message"}):"3"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:rs.a,alt:"send message"}):"4"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:os.a,alt:"send message"}):"5"===s.pollRatingType?l.a.createElement("img",{className:"font-size ".concat(Zr.a.steps_img),src:us.a,alt:"send message"}):null:"1"===s.pollQuestionType||"2"===s.pollQuestionType?l.a.createElement("div",null,l.a.createElement(fo,{hide:!0,pollResponse:s.pollResponse,pollQuestionType:s.pollQuestionType})):null))))),l.a.createElement(C.a,{span:24},s.cugDetails&&Object.keys(s.cugDetails).length>0?l.a.createElement(l.a.Fragment,null,u.length>0?l.a.createElement("h6",{className:"mb-4"},u):null,l.a.createElement(S.a,null,Object.entries(s.cugDetails).map((function(e){var t;if((null===(t=Object.values(e[1]))||void 0===t?void 0:t.length)>0)return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24,lg:8},l.a.createElement("label",null,e[0].substring(e[0].indexOf("_")+1,e[0].length)),l.a.createElement(C.a,{span:24,className:"tags-wrapper tag-view align-items-center"},l.a.createElement(_s,{pollCug:s.cugDetails,item:e[0],viaStep3:!0}))))})))):null,s.pollDocument.length>0?l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement("h6",null,pe),l.a.createElement(ht.a.Item,{name:"upload",className:"upload-list"},l.a.createElement(kn.a,{listType:"picture",fileList:s.pollDocument,onPreview:function(e){return i(e)}}),l.a.createElement(Ut.a,{visible:s.previewVisible,title:s.previewTitle,centered:!0,onOk:function(e){return c(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:s.previewImage})))):null,l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:8,lg:8,xl:6,className:"mb-3 t-2 mb-y-0"},l.a.createElement(ht.a.Item,{name:"showresult",label:"Show result to users",className:"mb-0"},l.a.createElement(yo.a,{id:"showResult",checked:s.showResult,disabled:!0}))),s.showResult?l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:12},s.switch?l.a.createElement("img",{className:"w-100",src:No.a,alt:"Pie Chart"}):l.a.createElement("img",{className:"w-100",src:wo.a,alt:"Bar Chart"})),l.a.createElement(C.a,{className:"toggle-switch mt-3 pl-5"},l.a.createElement(yo.a,{checkedChildren:"Bar Chart",unCheckedChildren:"Pie Chart",disabled:!0}))):l.a.createElement(C.a,null))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-4 mb-3"},l.a.createElement("h6",null,"Schedule"),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(yt,{label:"Time Zone",value:s.timezone1},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"timezone1"},l.a.createElement(zt.a,{className:"",htmlFor:"timezone1",disabled:!0,defaultValue:s.timezone1})))),l.a.createElement(yt,{label:"Select Start Date",value:"sDate"},l.a.createElement(ht.a.Item,{name:"sDate",rules:[{required:!0}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row"},l.a.createElement(ft.a,(n={className:"w-100",name:"sDate"},Object(ut.a)(n,"className","required"),Object(ut.a)(n,"disabled",!0),Object(ut.a)(n,"value",s.pollStartDate),n))),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(Kr.a,{value:s.pollStartTime,disabled:!0}))))),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row"},l.a.createElement(ft.a,(r={className:"w-100",name:"eDate"},Object(ut.a)(r,"className","required"),Object(ut.a)(r,"disabled",!0),Object(ut.a)(r,"value",s.pollEndDate),r))),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(Kr.a,{value:s.pollEndTime,disabled:!0}))))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ie.a,{type:"secondary",htmlType:"submit",onClick:function(){return o()},className:"mr-4"},ce),l.a.createElement(Ie.a,{type:"primary",className:"md",onClick:m,disabled:8===s.status_id},"Publish")))))},xo=j.a.Content,Io=pt.a.Step,To=[{title:"Add Details",content:"First-content"},{title:"Schedule Poll",content:"Second-content"},{title:"Review Details",content:"Last-content"}],Ao=a(41);var Yo=Object(i.b)((function(e){return{cug:e.cug.cug}}))((function(e){Object(u.g)();var t,a=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:[],showResult:!1,pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingType:"",pollRatingResponse:0,pollStartDate:"",pollEndDate:"",pollStartTime:"",pollEndTime:"",pollResponse:[],pollOptionText:[],pollId:"",cugData:{},cugDetails:{},status_id:"",switch:!1,timezone1:"",timezone:Fe.a.tz.guess(),pastStartTimeError:!1,pastEndTimeError:!1,pollOffsets:Fe.a.tz.zone(Fe.a.tz.guess()).offsets[Fe.a.tz.zone(Fe.a.tz.guess()).offsets.length-1]}),r=Object(c.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(0),E=Object(c.a)(f,2),v=E[0],y=E[1],_=Object(n.useState)(""),O=Object(c.a)(_,2),N=O[0],w=O[1],C=Object(n.useState)(!1),k=Object(c.a)(C,2),x=k[0],I=k[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)(!1),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)(""),H=Object(c.a)(L,2),V=H[0],Q=H[1],G=ht.a.useForm(),K=Object(c.a)(G,1)[0],W=Object(u.h)(),J=Object(n.useState)(!1),Z=Object(c.a)(J,2),$=Z[0],X=Z[1],ee=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){(0,e.dispatch)(Ds())}),[]),Object(n.useEffect)((function(){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};h(!0),B.a.get(q+"getPoll/".concat(ee,"/"),t).then((function(t){var a,n,l,r,c=t.data,m=(ns.formatAsDDMMYYYY(c.start_date).split("-")[0],ns.formatAsDDMMYYYY(c.start_date).split("-")[1],ns.formatAsDDMMYYYY(c.start_date).split("-")[2],ns.formatAsDDMMYYYY(c.end_date).split("-")[0],ns.formatAsDDMMYYYY(c.end_date).split("-")[1],ns.formatAsDDMMYYYY(c.end_date).split("-")[2],{});e.cug&&null!==e.cug&&Object.keys(null===(r=e.cug)||void 0===r?void 0:r.cug_field).forEach((function(e){c.cug_fields&&Object.entries(c.cug_fields).forEach((function(t){t[0]===e&&(m=Object(o.a)({},m,Object(ut.a)({},e,t[1])))}))}));console.log("------",c);var u=c.timezone?c.timezone:"Asia/Kolkata",d=c.start_date?Fe()(c.start_date).tz(u).format("YYYY-MM-DDTHH:mm:ss"):Fe()().tz(u).format("YYYY-MM-DDTHH:mm:ss"),p=c.end_date?Fe()(c.end_date).tz(u).format("YYYY-MM-DDTHH:mm:ss"):Fe()().tz(u).format("YYYY-MM-DDTHH:mm:ss"),g=new Date(d),f=new Date(p);i(Object(o.a)({},s,{pollId:c.poll_id,pollName:c.title,pollHelpText:c.help_text,pollDocument:null!==c.image||null!==c.document?[{uid:"1",name:null!==c.image_name?c.image_name:null!==c.document_name?c.document_name:"",status:"done",url:c.image?c.image:c.document}]:"",showResult:c.show_result_to_users,pollChartType:c.poll_result_chart_type.toString(),pollQuestion:c.question,pollQuestionType:c.poll_question_type.toString(),pollRatingType:c.poll_question_rating_type?c.poll_question_rating_type.toString():"",pollRatingResponse:c.poll_question_rating_type,pollStartDate:null===c.start_date?"":Fe()(ns.formatAsDDMMYYYY(c.start_date),"DD-MM-YYYY"),pollEndDate:null===c.end_date?"":Fe()(ns.formatAsDDMMYYYY(c.end_date),"DD-MM-YYYY"),pollStartTime:g,timezone1:c.timezone,timezone:c.timezone,pollEndTime:f,status_id:c.status_id,cugData:m,cugDetails:c.cug_fields,pollResponse:c.option_text.map((function(e){return e.option_text})),pollOptionText:c.option_text})),Q(null!==c.image_name?c.image_name:null!==c.document_name?c.document_name:"");var E=(null===(a=c.image)||void 0===a?void 0:a.slice(c.image.lastIndexOf("."),c.image.length).includes("jpg"))||(null===(n=c.image)||void 0===n?void 0:n.slice(c.image.lastIndexOf("."),c.image.length).includes("jpeg"))||(null===(l=c.image)||void 0===l?void 0:l.slice(c.image.lastIndexOf("."),c.image.length).includes("png"));R(!!E),h(!1),K.setFieldsValue({pollName:c.title,pollHelpText:c.help_text,pollQuestion:c.question})}))}),[e.cug]);var te=function(e){var t=null===e||void 0===e?void 0:e.includes("image");R(!!t)},ne=function(e){var t,a,n,l,r,c;return z.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(!((null===(t=e.name)||void 0===t?void 0:t.includes("jpeg"))||(null===(a=e.name)||void 0===a?void 0:a.includes("jpg"))||(null===(n=e.name)||void 0===n?void 0:n.includes("png"))||(null===(l=e.name)||void 0===l?void 0:l.includes("gif"))||(null===(r=e.name)||void 0===r?void 0:r.includes("jfif"))||(null===(c=e.name)||void 0===c?void 0:c.includes("tiff")))){m.next=7;break}return m.next=3,z.a.awrap(oe(e.originFileObj));case 3:e.preview=m.sent,i(Object(o.a)({},s,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})),m.next=8;break;case 7:return m.abrupt("return",!1);case 8:case"end":return m.stop()}}))},le=function(){y(v+1)},re=function(){y(v-1)},se=function(e){return i(Object(o.a)({},s,{previewVisible:!1}))};function oe(e){var t=btoa(e),a=new Blob([t]);return new Promise((function(e,t){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){return e(n.result)},n.onerror=function(e){return t(e)}}))}var ce=function(){var e,t;h(!0);var a=JSON.parse(b("user")),n={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},l=[];s.pollResponse.map((function(e){return l.push({option_text:e})}));var r,o,c,i=l.map((function(e){var t=Object.assign({},e);return s.pollOptionText.map((function(a){a.option_text===e.option_text?(t.poll_option_id=a.poll_option_id,t.poll=s.pollId):a.option_text===e.option_text||t.poll_option_id||(t.poll_option_id="",t.poll=s.pollId)})),t})),m={},u=Fe.a.isMoment(s.pollStartDate)?ns.formatAsDDMMYYYY(s.pollStartDate):s.pollStartDate,d=Fe.a.isMoment(s.pollEndDate)?ns.formatAsDDMMYYYY(s.pollEndDate):s.pollEndDate,p=s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollStartTime):s.pollStartTime,g=s.pollEndTime instanceof Date?ns.formatAsHHmmss(s.pollEndTime):s.pollEndTime;0===(null===(e=s.pollDocument)||void 0===e?void 0:e.length)||0===(null===(t=s.pollDocument[0].url)||void 0===t?void 0:t.length)?(m={update_poll:{title:s.pollName,help_text:s.pollHelpText,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1.length>0?s.timezone1:"",end_date:(null===d||void 0===d?void 0:d.length)>0?d:null,end_time:g.length>0?g:null,status_id:s.status_id,poll_id:s.pollId,cug_filters:s.cugData,created_by:parseInt(Ao.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Ao.enc.Utf8))},option:i},B.a.put(q+"poll/"+s.pollId+"/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"}))):(null===(r=s.pollDocument[0])||void 0===r?void 0:r.url)?P?function(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}(null===(o=s.pollDocument[0])||void 0===o?void 0:o.url,(function(e){m={update_poll:{title:s.pollName,help_text:s.pollHelpText,image:e,image_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1.length>0?s.timezone1:"",end_date:d.length>0?d:null,end_time:g.length>0?g:null,status_id:s.status_id,poll_id:s.pollId,cug_filters:s.cugData,created_by:parseInt(Ao.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Ao.enc.Utf8))},option:i},B.a.put(q+"poll/"+s.pollId+"/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"}))})):oe(null===(c=s.pollDocument[0])||void 0===c?void 0:c.url).then((function(e){m={update_poll:{title:s.pollName,help_text:s.pollHelpText,image_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1.length>0?s.timezone1:"",end_date:d.length>0?d:null,end_time:g.length>0?g:null,status_id:s.status_id,poll_id:s.pollId,cug_filters:s.cugData,created_by:parseInt(Ao.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Ao.enc.Utf8))},option:i},B.a.put(q+"poll/"+s.pollId+"/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"}))})):(m=P?{update_poll:{title:s.pollName,help_text:s.pollHelpText,image:s.pollDocument.base64,image_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1.length>0?s.timezone1:"",end_date:d.length>0?d:null,end_time:g.length>0?g:null,status_id:s.status_id,poll_id:s.pollId,cug_filters:s.cugData,created_by:parseInt(Ao.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Ao.enc.Utf8))},option:i}:{update_poll:{title:s.pollName,help_text:s.pollHelpText,document:s.pollDocument.base64,document_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1.length>0?s.timezone1:"",end_date:d.length>0?d:null,end_time:g.length>0?g:null,status_id:s.status_id,poll_id:s.pollId,cug_filters:s.cugData,created_by:parseInt(Ao.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Ao.enc.Utf8))},option:i},B.a.put(q+"poll/"+s.pollId+"/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(xo,null,l.a.createElement(D.a,{spinning:g,size:"large"},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(gt.a.Item,null,ae)),l.a.createElement(gt.a.Item,null,8===s.status_id?"View Poll":"Edit Poll"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},8===s.status_id?"View Poll":"Edit Poll")),l.a.createElement(pt.a,{className:"mt-2",current:v},To.map((function(e){return l.a.createElement(Io,{key:e.title,title:e.title})}))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,0===v?l.a.createElement(bo,{next:le,poll:s,form:K,setOptionsError:X,pollError:N,chartError:x,handlePollOnSelect:function(e,t){var a;("3"===e&&"pollQuestionType"===t?function(e){"3"===e&&"4"!=s.pollChartType&&I(!0)}(e):I(!1),"pollRatingType"===t)?i(Object(o.a)({},s,(a={},Object(ut.a)(a,t,e),Object(ut.a)(a,"pollResponse",["1","2","3","4","5"]),a))):i(Object(o.a)({},s,Object(ut.a)({},t,e)))},setSingleChoiceResponse:function(e){i(Object(o.a)({},s,Object(ut.a)({},"pollResponse",e)))},onCreateChange:function(e){i(Object(o.a)({},s,Object(ut.a)({},e.target.id,e.target.value)))},setpollError:w,optionsError:$,location:W,editPoll:ce}):1===v?l.a.createElement(So,{next:le,prev:re,poll:s,uploadError:Y,setPollsDate:function(e,t){i(Object(o.a)({},s,Object(ut.a)({},e,t)))},handleStepOneUpload:function(e,t){if(8===s.status_id)return null;"removed"===e.file.status&&M(!1);var a=e.fileList.slice(-1);te(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),Q(e.file.name),i(Object(o.a)({},s,Object(ut.a)({},t,a)))},handleBeforeUpload:function(e,t){if(8===s.status_id)return null;var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),o="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;o?M(!1):(M(!0),Ur.b.error("".concat(e.name," is not a supported format file type.")));var c="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,i="application/pdf"===e.type||a||n||l||r,m=e.size/1024/1024<5,u=e.size/1024/1024<10;return c&&(!m&&c?(M(!0),Ur.b.error("Image must smaller than 5MB!")):M(!1)),i&&(!u&&i?(M(!0),Ur.b.error("Document must smaller than 10MB!")):M(!1)),o&&m||u},handleOnRemove:function(){if(8===s.status_id)return null;i(Object(o.a)({},s,{pollImageValidation:!0}))},handlePollImagePreview:ne,handleCancel:se,onChange:function(e,t){i(Object(o.a)({},s,Object(ut.a)({},t.target.id,e)))},setPoll:i,cug:e.cug,onSwitchChange:function(e,t){i(Object(o.a)({},s,{switch:e}))},handleOnSelect:function(e,t){var a=Fe.a.tz.zone(t).offsets,n=a[a.length-1];i(Object(o.a)({},s,{pollOffsets:n})),i(Object(o.a)({},s,Object(ut.a)({},e,t)))},handleOnCUGSelect:function(e,t){i(Object(o.a)({},s,{cugDetails:Object(o.a)({},s.cugDetails,Object(ut.a)({},e,Object(dt.a)(t))),cugData:Object(o.a)({},s.cugData,Object(ut.a)({},e,Object(dt.a)(t)))}))},itemCleared:function(e){var t=Object.keys(s.cugDetails).reduce((function(t,a){return t[a]=a===e?[]:s.cugDetails[a],t}),{});i(Object(o.a)({},s,{cugDetails:t,cugData:t}))},editPoll:ce}):2===v?l.a.createElement(ko,{prev:re,poll:s,handlePollImagePreview:ne,handleCancel:se,editPoll:ce}):""))))))))})),Mo=N.a.Search,Uo=j.a.Content,Fo=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})};return a.state={columns:[{title:"Poll Name",dataIndex:"title",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Poll Name"}}}}],data:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(no())}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.pollsdata;e.pollsdata!==a&&this.setState({data:a},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:this.props}),l.a.createElement(Uo,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(gt.a.Item,null,ae)),l.a.createElement(m.c,{to:"/createpoll"},l.a.createElement(gt.a.Item,null,"Create Poll")),l.a.createElement(gt.a.Item,null,"OOTB Poll"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Out Of The Box (OOTB) Poll")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Mo,{placeholder:re,onSearch:this.onSearch})))))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(xe,{rowKey:"hotline_id",columns:this.state.columns,data:this.state.filterData})))))))}}]),t}(l.a.Component);var Po=Object(i.b)((function(e){return{pollsdata:e.poll.pollsdata}}))(Fo),Ro={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",emptyIcon:l.a.createElement("i",{class:"far fa-smile"}),fullIcon:l.a.createElement("i",{class:"fa fa-smile"}),onChange:function(e){}},Lo=N.a.TextArea,zo=function(e){var t,a,r=e.next,s=(e.chartError,e.poll),o=e.setOptionsError,i=e.pollError,u=e.handlePollOnSelect,d=e.setSingleChoiceResponse,p=e.onCreateChange,g=e.setpollError,h=e.optionsError,f=e.form,E=e.location,v=e.createDuplicatePoll,b=Object(n.useState)(!1),y=Object(c.a)(b,2),_=y[0],O=y[1],j=function(e,t){"draft"==t&&(s.status_id=4),s.pollName===E.state.title?g("status: true"):w(e,t)},w=function(e,t){e.preventDefault(),s.pollName&&s.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollHelpText&&s.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollQuestionType&&s.pollQuestionType.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollQuestion?"1"!==s.pollQuestionType&&"2"!==s.pollQuestionType||0!==s.pollResponse.length?"3"===s.pollQuestionType&&"3"===s.pollQuestionType&&0===s.pollRatingType.length?(O(!0),o(!1)):(O(!1),o(!1),"next"===t?r():v()):(o(!0),O(!1)):(O(!0),o(!1))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",initialValues:{remember:!0},form:f},_&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),h&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please add options",type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Poll Title",value:s.pollName},l.a.createElement(Lo,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:s.pollName,id:"pollName",onChange:function(e){return p(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==E.state.title?B.a.post(q+"checkpoll/",{title:e.target.value},t).then((function(e){e.data&&g(e.data[0])})):g("status: true")}(e)},autoComplete:"off",className:"required ".concat(Zr.a.sm_textarea)}),"status: false"===i&&s.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollName.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==i&&l.a.createElement(Et.a,{message:kt,type:"error",showIcon:!0}))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Description",value:s.pollHelpText},l.a.createElement(ht.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"pollHelpText",id:"pollHelpText",name:"pollHelpText",value:s.pollHelpText,autoComplete:"off",maxLength:500,onChange:function(e){return p(e)}}))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:4}},l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:10,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(yt,{label:"Question Type",value:s.pollQuestionType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(t={className:"",htmlFor:"questiontype"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"id","pollQuestionType"),Object(ut.a)(t,"value",s.pollQuestionType),Object(ut.a)(t,"onSelect",(function(e){return u(e,"pollQuestionType")})),t),l.a.createElement(zt.a.Option,{value:"1"},"Select Single"),l.a.createElement(zt.a.Option,{value:"2"},"Select Multiple"),l.a.createElement(zt.a.Option,{value:"3"},"Rating Type"),l.a.createElement(zt.a.Option,{value:"4"},"Select Short Answer Type"),l.a.createElement(zt.a.Option,{value:"5"},"Select Long Answer Type")))))),"3"===s.pollQuestionType?l.a.createElement(C.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Rating Type",value:s.pollRatingType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(a={className:"",htmlFor:"ratingtype"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"id","pollRatingType"),Object(ut.a)(a,"value",s.pollRatingType),Object(ut.a)(a,"onSelect",(function(e){return u(e,"pollRatingType")})),a),l.a.createElement(zt.a.Option,{value:"1"},"Stars"),l.a.createElement(zt.a.Option,{value:"2"},"Smiley"),l.a.createElement(zt.a.Option,{value:"3"},"Thermometer"),l.a.createElement(zt.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(zt.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Question",value:s.pollQuestion},l.a.createElement(ht.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:s.pollQuestion,value:s.pollQuestion,autoComplete:"off",maxLength:500,onChange:function(e){return p(e)}}))))),l.a.createElement(C.a,{span:24,md:11,className:"white-bg ml-5 p-4 ".concat(Zr.a.rating_img_wrapper)},s.pollQuestionType.length>0?null:l.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},lt),"3"===s.pollQuestionType&&s.pollRatingType?"1"===s.pollRatingType?l.a.createElement(Xr.a,Object.assign({},Ro,{value:s.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return u(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:is.a,alt:"send message"}):"3"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:rs.a,alt:"send message"}):"4"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:os.a,alt:"send message"}):"5"===s.pollRatingType?l.a.createElement("img",{className:"font-size ".concat(Zr.a.steps_img),src:us.a,alt:"send message"}):null:"1"===s.pollQuestionType||"2"===s.pollQuestionType?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(ho,{setSingleChoiceResponse:d,pollResponse:s.pollResponse})),l.a.createElement(fo,{pollResponse:s.pollResponse,questionType:s.pollQuestionType})):null),l.a.createElement(ht.a.Item,null,l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"mr-4",onClick:function(e){return j(e,"next")},"data-test":"stepOneNext"},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){return j(e,"draft")}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))))))))},Ho=function(e){var t,a,r=e.next,s=e.cug,o=e.prev,i=e.uploadError,u=e.poll,d=e.handleStepOneUpload,p=e.handleBeforeUpload,g=e.handleOnRemove,h=e.handlePollImagePreview,f=e.handleCancel,E=e.onChange,v=e.setPoll,b=e.onSwitchChange,y=e.setPollsDate,_=e.handleOnSelect,O=e.handleOnCUGSelect,N=(e.itemCleared,e.createDuplicatePoll),j=Object(n.useState)(!1),w=Object(c.a)(j,2),D=w[0],k=w[1],x=Object(n.useState)(!1),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(n.useState)(u.pollStartTime?u.pollStartTime:new Date),M=Object(c.a)(Y,2),U=M[0],F=M[1],P=Object(n.useState)(u.pollEndTime?u.pollEndTime:new Date),R=Object(c.a)(P,2),L=R[0],z=R[1],H=Object(n.useState)(""),B=Object(c.a)(H,2),q=B[0],V=(B[1],Object(n.useState)(u.timezone1?u.timezone1:"Asia/Kolkata")),Q=Object(c.a)(V,2),G=Q[0],K=Q[1],W=function(e,t){e.preventDefault(),"draft"==t&&(u.status_id=4),i?A(!0):!u.pollStartDate||u.timezone1&&0===u.timezone1.length?"next"===t?k(!0):(k(!1),N()):(k(!1),A(!1),"next"===t?r():N())},J=function(e){K(e),_("timezone1",e),function(e){var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t);z(a);var n=u;n.pastStartTimeError=!1,n.pollStartTime=a,v(n)}(e),function(e){var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t);F(a);var n=u;n.pastEndTimeError=!1,n.pollEndTime=a,v(n)}(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(C.a,{span:24},s&&s.cug_field&&Object.keys(null===s||void 0===s?void 0:s.cug_field).length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mb-4"},"Configure CUG"),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.keys(s.cug_field).map((function(e,t){if(e.length>0)return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row mb-3"},l.a.createElement(ht.a.Item,{className:"mb-0",name:e},l.a.createElement(_s,{cugData:null===s||void 0===s?void 0:s.cug_field,pollCug:u.cugDetails,item:e,handleOnCUGSelect:O,itemRemoved:q}))))})))):null,l.a.createElement(S.a,null,l.a.createElement("h6",null,pe),l.a.createElement(C.a,{span:24,className:"gutter-row"},T&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Tt,type:"error",showIcon:!0})),l.a.createElement(ht.a.Item,{name:"upload",className:"upload-list"},l.a.createElement(_o,{file:u.pollDocument,handleStepOneUpload:d,handleBeforeUpload:p,handleOnRemove:g,handlePollImagePreview:h,handleCancel:f,poll:u})))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:8,lg:8,xl:6,className:"mb-3 t-2 mb-y-0"},l.a.createElement(ht.a.Item,{label:"Show result to users",className:"mb-0"},l.a.createElement(yo.a,{id:"showResult",checked:u.showResult,onChange:function(e,t){return E(e,t)}}))),u.showResult?l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:24,lg:12},u.switch?l.a.createElement("img",{className:"w-100",src:No.a,alt:"Pie Chart"}):l.a.createElement("img",{className:"w-100",src:wo.a,alt:"Bar Chart"})),l.a.createElement(C.a,{className:"toggle-switch mt-3 pl-5"},l.a.createElement(yo.a,{id:"showChart",checkedChildren:"Bar Chart",unCheckedChildren:"Pie Chart",onChange:function(e,t){return b(e,t)}}))):l.a.createElement(C.a,null))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-4 mb-3"},l.a.createElement("h6",null,"Schedule"),D&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(yt,{label:"Time Zone",value:u.timezone1},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"timezone1"},l.a.createElement(zt.a,{className:"",htmlFor:"timezone1",onSelect:function(e){return J(e)},defaultValue:u.timezone1},Fe.a.tz.names().map((function(e){var t=Fe()().format("YYYY-MM-DDTHH:mm:ss"),a=Fe.a.utc(t).tz("".concat(e)),n=a?a.format("Z"):"",r="(UTC ".concat(n,") ")+e;return l.a.createElement(zt.a.Option,{value:e},r)})))))),l.a.createElement(yt,{label:"Select Start Date",value:"sDate"},l.a.createElement(ht.a.Item,{name:"sDate",rules:[{required:!0}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row mb-3 mb-lg-0"},l.a.createElement(ft.a,(t={className:"w-100",name:"sDate"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"value",u.pollStartDate),Object(ut.a)(t,"disabledDate",(function(e){return e&&e<Fe()().startOf("day")})),Object(ut.a)(t,"onChange",(function(e){return y("pollStartDate",e)})),t)),u.pastStartTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(Kr.a,{value:L,onChange:function(e){var t=e.target.value,a=Fe()(t).format("HH:mm"),n=u.pollStartDate?Fe()(u.pollStartDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),l=new Date(n+"T"+a),r=Fe()().tz(G).format("YYYY-MM-DDTHH:mm");if(l<new Date(r));else{z(l);var s=u;s.pollStartTime=l,v(s)}}}))))),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row mb-3 mb-lg-0"},l.a.createElement(ft.a,{className:"w-100",name:"eDate",value:u.pollEndDate,disabledDate:function(e){return u.pollStartDate?e&&e<Fe()(u.pollStartDate,"DD-MM-YYYY"):e&&e<Fe()().startOf("day")},disabled:0===(null===(a=u.pollStartDate)||void 0===a?void 0:a.length)||!u.pollStartDate,onChange:function(e){return y("pollEndDate",e)}}),u.pastEndTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(Kr.a,{value:U,onChange:function(e){var t=e.target.value,a=Fe()(t).format("HH:mm"),n=u.pollEndDate?Fe()(u.pollEndDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),l=new Date(n+"T"+a),r=Fe()().tz(G).format("YYYY-MM-DDTHH:mm");if(l<new Date(r));else{F(l);var s=u;s.pollEndTime=l,v(s)}}})))))),l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:o,"data-test":"steptwoPrev"},ce),l.a.createElement(Ie.a,{className:"mr-4",type:"primary",onClick:function(e){return W(e,"next")},"data-test":"steptwoNext"},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){return W(e,"draft")}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))))},Bo={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",emptyIcon:l.a.createElement("i",{class:"far fa-smile"}),fullIcon:l.a.createElement("i",{class:"fa fa-smile"}),onChange:function(e){}},qo=N.a.TextArea,Vo=function(e){var t,a,n,r,s=e.poll,o=e.prev,c=e.handleCancel,i=e.handlePollImagePreview,m=e.createDuplicatePoll,u="";return s.cugDetails&&Object.values(s.cugDetails).some((function(e){e.length>0&&(u="Configure CUG")})),console.log("-----------poll------"),l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Poll Title",value:s.pollName},l.a.createElement(ht.a.Item,{className:"required",name:"polltitle",id:"polltitle"},l.a.createElement(l.a.Fragment,null,l.a.createElement(qo,{htmlFor:"polltitle",value:s.pollName,id:"polltitle",name:"polltitle",disabled:!0}))))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Description",value:s.pollHelpText},l.a.createElement(ht.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"pollHelpText",id:"pollHelpText",name:"pollHelpText",value:s.pollHelpText,disabled:!0}))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:4}},l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:10,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(yt,{label:"Question Type",value:s.pollQuestionType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"pollQuestionType"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(t={className:"",htmlFor:"pollQuestionType"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"id","pollQuestionType"),Object(ut.a)(t,"value",s.pollQuestionType),Object(ut.a)(t,"disabled",!0),t),l.a.createElement(zt.a.Option,{value:"1",disabled:""!==s.pollChartType&&"4"===s.pollChartType},"Select Single"),l.a.createElement(zt.a.Option,{value:"2",disabled:""!==s.pollChartType&&"4"===s.pollChartType},"Select Multiple"),l.a.createElement(zt.a.Option,{value:"3",disabled:""!==s.pollChartType&&"4"!==s.pollChartType},"Rating Type")))))),"3"===s.pollQuestionType?l.a.createElement(C.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Rating Type",value:s.pollRatingType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(a={className:"",htmlFor:"ratingtype"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"id","ratingtype"),Object(ut.a)(a,"value",s.pollRatingType),Object(ut.a)(a,"disabled",!0),a),l.a.createElement(zt.a.Option,{value:"1"},"Stars"),l.a.createElement(zt.a.Option,{value:"2"},"Smiley"),l.a.createElement(zt.a.Option,{value:"3"},"Thermometer"),l.a.createElement(zt.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(zt.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Question",value:s.pollQuestion},l.a.createElement(ht.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:s.pollQuestion,value:s.pollQuestion,disabled:!0}))))),l.a.createElement(C.a,{span:24,md:11,className:"white-bg ml-5 p-4 ".concat(Zr.a.rating_img_wrapper)},"3"===s.pollQuestionType&&s.pollRatingType?"1"===s.pollRatingType?l.a.createElement(Xr.a,Object.assign({},Bo,{value:s.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return handlePollOnSelect(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:is.a,alt:"send message"}):"3"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:rs.a,alt:"send message"}):"4"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:os.a,alt:"send message"}):"5"===s.pollRatingType?l.a.createElement("img",{className:"font-size ".concat(Zr.a.steps_img),src:us.a,alt:"send message"}):null:"1"===s.pollQuestionType||"2"===s.pollQuestionType?l.a.createElement("div",null,l.a.createElement(fo,{pollResponse:s.pollResponse,questionType:s.pollQuestionType})):null))))),l.a.createElement(C.a,{span:24},s.cugDetails&&Object.keys(s.cugDetails).length>0?l.a.createElement(l.a.Fragment,null,u.length>0?l.a.createElement("h6",{className:"mb-4"},u):null,l.a.createElement(S.a,null,Object.entries(s.cugDetails).map((function(e){var t;if((null===(t=Object.values(e[1]))||void 0===t?void 0:t.length)>0)return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24,lg:8},l.a.createElement("label",null,e[0].substring(e[0].indexOf("_")+1,e[0].length)),l.a.createElement(C.a,{span:24,className:"tags-wrapper tag-view align-items-center"},l.a.createElement(_s,{pollCug:s.cugDetails,item:e[0],viaStep3:!0}))))})))):null,s.pollDocument.length>0?l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement("h6",null,pe),l.a.createElement(ht.a.Item,{name:"upload",className:"upload-list"},l.a.createElement(kn.a,{listType:"picture",fileList:s.pollDocument,onPreview:function(e){return i(e)}}),l.a.createElement(Ut.a,{visible:s.previewVisible,title:s.previewTitle,centered:!0,onOk:function(e){return c(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:s.previewImage})))):null,l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:8,lg:8,xl:6,className:"mb-3 t-2 mb-y-0"},l.a.createElement(ht.a.Item,{name:"showresult",label:"Show result to users",className:"mb-0"},l.a.createElement(yo.a,{id:"showResult",checked:s.showResult,disabled:!0}))),s.showResult?l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:12},s.switch?l.a.createElement("img",{className:"w-100",src:No.a,alt:"Pie Chart"}):l.a.createElement("img",{className:"w-100",src:wo.a,alt:"Bar Chart"})),l.a.createElement(C.a,{className:"toggle-switch mt-3 pl-5"},l.a.createElement(yo.a,{checkedChildren:"Bar Chart",unCheckedChildren:"Pie Chart",disabled:!0}))):l.a.createElement(C.a,null))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-4 mb-3"},l.a.createElement("h6",null,"Schedule"),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(yt,{label:"Time Zone",value:s.timezone1},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"timezone1"},l.a.createElement(zt.a,{className:"",htmlFor:"timezone1",disabled:!0,defaultValue:s.timezone1})))),l.a.createElement(yt,{label:"Select Start Date",value:"sDate"},l.a.createElement(ht.a.Item,{name:"sDate",rules:[{required:!0}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row"},l.a.createElement(ft.a,(n={className:"w-100",name:"sDate"},Object(ut.a)(n,"className","required"),Object(ut.a)(n,"disabled",!0),Object(ut.a)(n,"value",s.pollStartDate),n))),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(Kr.a,{value:s.pollStartTime,disabled:!0}))))),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row"},l.a.createElement(ft.a,(r={className:"w-100",name:"eDate"},Object(ut.a)(r,"className","required"),Object(ut.a)(r,"disabled",!0),Object(ut.a)(r,"value",s.pollEndDate),r))),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(Kr.a,{value:s.pollEndTime,disabled:!0}))))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ie.a,{type:"secondary",htmlType:"submit",onClick:function(){return o()},className:"mr-4"},ce),l.a.createElement(Ie.a,{type:"primary",className:"md",onClick:m},"Publish")))))},Qo=j.a.Content,Go=pt.a.Step,Ko=[{title:"Add Details",content:"First-content"},{title:"Schedule Poll",content:"Second-content"},{title:"Review Details",content:"Last-content"}],Wo=a(41);var Jo=Object(i.b)((function(e){return{cug:e.cug.cug}}))((function(e){Object(u.g)();var t,a=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:[],showResult:!1,pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingType:"",pollRatingResponse:0,pollStartDate:"",pollEndDate:"",pollStartTime:"",pollEndTime:"",pollResponse:[],pollOptionText:[],pollId:"",cugDetails:{},cugData:{},status_id:"",switch:!1,timezone1:Fe.a.tz.guess(),pastStartTimeError:!1,pastEndTimeError:!1,pollOffsets:Fe.a.tz.zone(Fe.a.tz.guess()).offsets[Fe.a.tz.zone(Fe.a.tz.guess()).offsets.length-1]}),r=Object(c.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(0),E=Object(c.a)(f,2),v=E[0],y=E[1],_=Object(n.useState)(""),O=Object(c.a)(_,2),N=O[0],w=O[1],C=Object(n.useState)(!1),k=Object(c.a)(C,2),x=k[0],I=k[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)(!1),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)(""),H=Object(c.a)(L,2),V=H[0],Q=H[1],G=ht.a.useForm(),K=Object(c.a)(G,1)[0],W=Object(n.useState)(!1),J=Object(c.a)(W,2),Z=J[0],$=J[1],X=Object(u.h)(),ee=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){(0,e.dispatch)(Ds())}),[]),Object(n.useEffect)((function(){if(1010101010==ee||2020202020==ee)te(X.state);else{var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};h(!0),B.a.get(q+"getPoll/".concat(ee,"/"),e).then((function(e){var t=e.data;ne(t),h(!1)}))}}),[e.cug]);var te=function(t){var a,n,l,r,c=ns.formatAsDDMMYYYY(t.start_date).split("-")[0],m=ns.formatAsDDMMYYYY(t.start_date).split("-")[1],u=ns.formatAsDDMMYYYY(t.start_date).split("-")[2],d=ns.formatAsDDMMYYYY(t.end_date).split("-")[0],p=ns.formatAsDDMMYYYY(t.end_date).split("-")[1],g=ns.formatAsDDMMYYYY(t.end_date).split("-")[2],h={};e.cug&&null!==e.cug&&Object.keys(null===(r=e.cug)||void 0===r?void 0:r.cug_field).forEach((function(e){h=Object(o.a)({},h,Object(ut.a)({},e,[]))}));i(Object(o.a)({},s,{pollId:t.poll_id,pollName:t.title,pollHelpText:t.help_text,showResult:t.show_result_to_users,pollChartType:t.poll_result_chart_type.toString(),pollQuestion:t.question,pollQuestionType:t.poll_question_type.toString(),pollRatingType:t.poll_question_rating_type?t.poll_question_rating_type.toString():"",pollRatingResponse:t.poll_question_rating_type,pollStartDate:null===t.start_date?"":Fe()(ns.formatAsDDMMYYYY(t.start_date),"DD-MM-YYYY"),pollEndDate:null===t.end_date?"":Fe()(ns.formatAsDDMMYYYY(t.end_date),"DD-MM-YYYY"),pollStartTime:null===t.start_date?new Date:new Date(u+"-"+m+"-"+c+"T"+t.start_time),timezone1:t.start_date_timezone?t.start_date_timezone:Fe.a.tz.guess(),pollEndTime:null===t.end_date?new Date:new Date(g+"-"+p+"-"+d+"T"+t.end_time),status_id:t.status_id,cugData:h,cugDetails:{},pollResponse:t.option_text.map((function(e){return e.option_text})),pollOptionText:t.option_text})),Q(null!==t.image_name?t.image_name:null!==t.document_name?t.document_name:"");var f=(null===(a=t.image)||void 0===a?void 0:a.slice(t.image.lastIndexOf("."),t.image.length).includes("jpg"))||(null===(n=t.image)||void 0===n?void 0:n.slice(t.image.lastIndexOf("."),t.image.length).includes("jpeg"))||(null===(l=t.image)||void 0===l?void 0:l.slice(t.image.lastIndexOf("."),t.image.length).includes("png"));R(!!f),K.setFieldsValue({pollName:t.title,pollHelpText:t.help_text,pollQuestion:t.question})},ne=function(t){var a,n,l,r,c=ns.formatAsDDMMYYYY(t.start_date).split("-")[0],m=ns.formatAsDDMMYYYY(t.start_date).split("-")[1],u=ns.formatAsDDMMYYYY(t.start_date).split("-")[2],d=ns.formatAsDDMMYYYY(t.end_date).split("-")[0],p=ns.formatAsDDMMYYYY(t.end_date).split("-")[1],g=ns.formatAsDDMMYYYY(t.end_date).split("-")[2],h={};e.cug&&null!==e.cug&&Object.keys(null===(r=e.cug)||void 0===r?void 0:r.cug_field).forEach((function(e){t.cug_fields&&Object.entries(t.cug_fields).forEach((function(t){t[0]===e&&(h=Object(o.a)({},h,Object(ut.a)({},e,t[1])))}))}));i(Object(o.a)({},s,{pollId:t.poll_id,pollName:t.title,pollHelpText:t.help_text,showResult:t.show_result_to_users,pollChartType:t.poll_result_chart_type.toString(),pollQuestion:t.question,pollQuestionType:t.poll_question_type.toString(),pollRatingType:t.poll_question_rating_type?t.poll_question_rating_type.toString():"",pollRatingResponse:t.poll_question_rating_type,pollStartDate:null===t.start_date?"":Fe()(ns.formatAsDDMMYYYY(t.start_date),"DD-MM-YYYY"),pollEndDate:null===t.end_date?"":Fe()(ns.formatAsDDMMYYYY(t.end_date),"DD-MM-YYYY"),pollStartTime:null===t.start_date?new Date:new Date(u+"-"+m+"-"+c+"T"+t.start_time),timezone1:t.start_date_timezone?t.start_date_timezone:Fe.a.tz.guess(),pollEndTime:null===t.end_date?new Date:new Date(g+"-"+p+"-"+d+"T"+t.end_time),status_id:t.status_id,cugData:h,cugDetails:t.cug_fields,pollResponse:t.option_text.map((function(e){return e.option_text})),pollOptionText:t.option_text})),Q(null!==t.image_name?t.image_name:null!==t.document_name?t.document_name:"");var f=(null===(a=t.image)||void 0===a?void 0:a.slice(t.image.lastIndexOf("."),t.image.length).includes("jpg"))||(null===(n=t.image)||void 0===n?void 0:n.slice(t.image.lastIndexOf("."),t.image.length).includes("jpeg"))||(null===(l=t.image)||void 0===l?void 0:l.slice(t.image.lastIndexOf("."),t.image.length).includes("png"));R(!!f),K.setFieldsValue({pollName:t.title,pollHelpText:t.help_text,pollQuestion:t.question})},le=function(e){var t=null===e||void 0===e?void 0:e.includes("image");R(!!t)},re=function(e){var t,a,n,l,r,c;return z.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(!((null===(t=e.name)||void 0===t?void 0:t.includes("jpeg"))||(null===(a=e.name)||void 0===a?void 0:a.includes("jpg"))||(null===(n=e.name)||void 0===n?void 0:n.includes("png"))||(null===(l=e.name)||void 0===l?void 0:l.includes("gif"))||(null===(r=e.name)||void 0===r?void 0:r.includes("jfif"))||(null===(c=e.name)||void 0===c?void 0:c.includes("tiff")))){m.next=7;break}return m.next=3,z.a.awrap(ie(e.originFileObj));case 3:e.preview=m.sent,i(Object(o.a)({},s,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})),m.next=8;break;case 7:return m.abrupt("return",!1);case 8:case"end":return m.stop()}}))},se=function(){y(v+1)},oe=function(){y(v-1)},ce=function(e){return i(Object(o.a)({},s,{previewVisible:!1}))};function ie(e){var t=btoa(e),a=new Blob([t]);return new Promise((function(e,t){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){return e(n.result)},n.onerror=function(e){return t(e)}}))}var me=function(){var e,t;h(!0);var a=JSON.parse(b("user")),n={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},l=[];s.pollResponse.map((function(e){return l.push({option_text:e})}));var r,o,c,i=l.map((function(e){var t=Object.assign({},e);return s.pollOptionText.map((function(a){a.option_text===e.option_text?(t.poll_option_id=a.poll_option_id,t.poll=s.pollId):a.option_text===e.option_text||t.poll_option_id||(t.poll_option_id="",t.poll=s.pollId)})),t})),m={},u=Fe.a.isMoment(s.pollStartDate)?ns.formatAsDDMMYYYY(s.pollStartDate):s.pollStartDate,d=Fe.a.isMoment(s.pollEndDate)?ns.formatAsDDMMYYYY(s.pollEndDate):s.pollStartDate,p=s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollStartTime):s.pollStartTime,g=s.pollEndTime instanceof Date?ns.formatAsHHmmss(s.pollEndTime):s.pollEndTime;0===(null===(e=s.pollDocument)||void 0===e?void 0:e.length)||0===(null===(t=s.pollDocument[0].url)||void 0===t?void 0:t.length)?(m={create_poll:{title:s.pollName,help_text:s.pollHelpText,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:(null===d||void 0===d?void 0:d.length)>0?d:null,end_time:g.length>0?g:null,status_id:s.status_id,poll_id:s.pollId,cug_filters:s.cugData,created_by:parseInt(Wo.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Wo.enc.Utf8))},option:i},B.a.post(q+"poll/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"}))):(null===(r=s.pollDocument[0])||void 0===r?void 0:r.url)?P?function(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}(null===(o=s.pollDocument[0])||void 0===o?void 0:o.url,(function(e){m={create_poll:{title:s.pollName,help_text:s.pollHelpText,image:e,image_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:(null===d||void 0===d?void 0:d.length)>0?d:null,end_time:g.length>0?g:null,cug_filters:s.cugData,created_by:parseInt(Wo.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Wo.enc.Utf8))},option:i},B.a.post(q+"poll/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"}))})):ie(null===(c=s.pollDocument[0])||void 0===c?void 0:c.url).then((function(e){m={create_poll:{title:s.pollName,help_text:s.pollHelpText,document:e,document_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:(null===d||void 0===d?void 0:d.length)>0?d:null,end_time:g.length>0?g:null,cug_filters:s.cugData,created_by:parseInt(Wo.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Wo.enc.Utf8))},option:i},B.a.post(q+"poll/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"}))})):(m=P?{create_poll:{title:s.pollName,help_text:s.pollHelpText,image:s.pollDocument.base64,image_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:(null===d||void 0===d?void 0:d.length)>0?d:null,end_time:g.length>0?g:null,cug_filters:s.cugData,created_by:parseInt(Wo.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Wo.enc.Utf8))},option:i}:{create_poll:{title:s.pollName,help_text:s.pollHelpText,document:s.pollDocument.base64,document_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:u.length>0?u:null,start_time:p.length>0?p:null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:(null===d||void 0===d?void 0:d.length)>0?d:null,end_time:g.length>0?g:null,cug_filters:s.cugData,created_by:parseInt(Wo.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(Wo.enc.Utf8))},option:i},B.a.post(q+"poll/",m,n).then((function(){h(!1),window.location="/orgcc/pollsdirectory"})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Qo,null,l.a.createElement(D.a,{spinning:g,size:"large"},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(gt.a.Item,null,ae)),l.a.createElement(gt.a.Item,null,"Create Poll"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Poll")),l.a.createElement(pt.a,{className:"mt-2",current:v},Ko.map((function(e){return l.a.createElement(Go,{key:e.title,title:e.title})}))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,0===v?l.a.createElement(zo,{next:se,chartError:x,poll:s,form:K,setOptionsError:$,pollError:N,handlePollOnSelect:function(e,t){var a;("3"===e&&"pollQuestionType"===t?function(e){"3"===e&&"4"!=s.pollChartType&&I(!0)}(e):I(!1),"pollRatingType"===t)?i(Object(o.a)({},s,(a={},Object(ut.a)(a,t,e),Object(ut.a)(a,"pollResponse",["1","2","3","4","5"]),a))):i(Object(o.a)({},s,Object(ut.a)({},t,e)))},setSingleChoiceResponse:function(e){i(Object(o.a)({},s,Object(ut.a)({},"pollResponse",e)))},onCreateChange:function(e){i(Object(o.a)({},s,Object(ut.a)({},e.target.id,e.target.value)))},setpollError:w,optionsError:Z,location:X,createDuplicatePoll:me}):1===v?l.a.createElement(Ho,{next:se,prev:oe,poll:s,uploadError:Y,setPollsDate:function(e,t){i(Object(o.a)({},s,Object(ut.a)({},e,t)))},handleStepOneUpload:function(e,t){if(8===s.status_id||5===s.status_id)return null;"removed"===e.file.status&&M(!1);var a=e.fileList.slice(-1);le(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),Q(e.file.name),i(Object(o.a)({},s,Object(ut.a)({},t,a)))},handleBeforeUpload:function(e,t){if(8===s.status_id||5===s.status_id)return null;var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),o="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;o?M(!1):(M(!0),Ur.b.error("".concat(e.name," is not a supported format file type.")));var c="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,i="application/pdf"===e.type||a||n||l||r,m=e.size/1024/1024<5,u=e.size/1024/1024<10;return c&&(!m&&c?(M(!0),Ur.b.error("Image must smaller than 5MB!")):M(!1)),i&&(!u&&i?(M(!0),Ur.b.error("Document must smaller than 10MB!")):M(!1)),o&&m||u},handleOnRemove:function(){if(8===s.status_id||5===s.status_id)return null;i(Object(o.a)({},s,{pollImageValidation:!0}))},handlePollImagePreview:re,handleCancel:ce,cug:e.cug,onChange:function(e,t){i(Object(o.a)({},s,Object(ut.a)({},t.target.id,e)))},setPoll:i,onSwitchChange:function(e,t){i(Object(o.a)({},s,{switch:e}))},handleOnSelect:function(e,t){var a=Fe()().format("YYYY-MM-DDTHH:mm:ss"),n=-Fe.a.utc(a).tz("".concat(t)).utcOffset(),l=Fe()().tz(t).format("YYYY-MM-DDTHH:mm:ss");new Date(l),new Date(l);s[e]=t,s.pollOffsets=n,i(s)},handleOnCUGSelect:function(e,t){i(Object(o.a)({},s,{cugDetails:Object(o.a)({},s.cugDetails,Object(ut.a)({},e,Object(dt.a)(t))),cugData:Object(o.a)({},s.cugData,Object(ut.a)({},e,Object(dt.a)(t)))}))},itemCleared:function(e){var t=Object.keys(s.cugDetails).reduce((function(t,a){return t[a]=a===e?[]:s.cugDetails[a],t}),{});i(Object(o.a)({},s,{cugDetails:t,cugData:t}))},createDuplicatePoll:me}):2===v?l.a.createElement(Vo,{prev:oe,poll:s,handlePollImagePreview:re,handleCancel:ce,createDuplicatePoll:me}):""))))))))})),Zo=j.a.Content,$o=function(e){var t,a=Object(n.useState)({firstName:"",lastName:"",status:"",email:"",mobile:"",empId:"",department:"",startDate:"",endDate:""}),r=Object(c.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),g=(p[0],p[1],Object(n.useState)([])),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(u.g)(),b=ht.a.useForm(),y=Object(c.a)(b,1)[0],_=Object(n.useState)(!1),O=Object(c.a)(_,2),w=O[0],k=O[1],x=Object(n.useState)(!1),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(n.useState)(!1),M=Object(c.a)(Y,2),U=M[0],F=M[1],P=Object(n.useState)(!1),R=Object(c.a)(P,2),L=R[0],z=R[1],H=Object(n.useState)(!1),V=Object(c.a)(H,2),Q=(V[0],V[1]),G=Object(n.useState)({}),K=Object(c.a)(G,2),W=K[0],J=K[1],Z=Object(n.useState)({}),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};E({0:"1",1:"0",2:"0",3:"0"}),A(!0),B.a.get(q+"employee/".concat(te,"/"),e).then((function(e){var t,a,n=e.data,l={0:"1",1:n.is_super_user?"1":"0",2:n.is_org_cc_user?"1":"0",3:n.is_idb_user?"1":"0"};E(l),i(Object(o.a)({},s,{firstName:n.details.first_name,lastName:n.details.last_name,status:n.status_id.toString(),email:n.email,mobile:n.mobile_number,empId:"",department:"",startDate:(null===(t=n.details.start_date)||void 0===t?void 0:t.length)>0?Fe()(n.details.start_date,"YYYY-MM-DD"):"",endDate:(null===(a=n.details.end_date)||void 0===a?void 0:a.length)>0?Fe()(n.details.end_date,"YYYY-MM-DD"):""})),A(!1),y.setFieldsValue({firstName:n.details.first_name,lastName:n.details.last_name,email:n.email}),2===n.status_id?Q(!0):Q(!1),ae(n.details)}))}),[]);var ae=function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getCUGFieldNames/",t).then((function(t){var a={},n={};if(0!==Object.keys(t.data.cug_flex_fields).length){var l,r,s=Object.values(null===(l=t.data.cug_flex_fields)||void 0===l?void 0:l.cug_fields).reduce((function(e,t){return a=Object(o.a)({},a,Object(ut.a)({},t,null))}),[]),c=e.cug_field,i={},m=Object.keys(c);m&&m.forEach((function(e,t){var a=c[e],n=e.split("_")[1];a&&(i[n]=a)}));var u=Object.keys(s),d={};u&&u.forEach((function(e,t){e&&(d[e]=i[e]?i[e]:"")})),J(d);var p=Object.values(null===(r=t.data.cug_flex_fields)||void 0===r?void 0:r.flex_fields).reduce((function(e,t){return n=Object(o.a)({},n,Object(ut.a)({},t,null))}),[]),g=e.flex_field,h={},f=Object.keys(g);f&&f.forEach((function(e,t){var a=g[e],n=e.split("_")[1];a&&(h[n]=a)})),console.log("--flexObjectData--",h);var E=Object.keys(p),v={};E&&E.forEach((function(e,t){e&&(v[e]=h[e]?h[e]:"")})),console.log("--actualFlexDATA--",v),ee(v)}}))},ne=function(e){i(Object(o.a)({},s,Object(ut.a)({},e.target.id,e.target.value)))},le=function(e,t){var a=e.target.value&&""!=e.target.value?e.target.value:null;"cug"===t&&J(Object(o.a)({},W,Object(ut.a)({},e.target.id,a))),"flex"===t&&ee(Object(o.a)({},X,Object(ut.a)({},e.target.id,a)))},re=function(e,t){i(Object(o.a)({},s,Object(ut.a)({},t,e)))},se=function(e){return e&&e<Fe()().startOf("day")},oe=function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(A(!0),null!==s.startDate&&s.firstName.length>0&&s.lastName.length>0&&s.mobile.length>4){k(!1);var t=Object.keys(X),a={};t&&t.forEach((function(e){a[e]=X[e]&&""!=X[e]?X[e]:null}));var n=Object.keys(W),l={};n&&n.forEach((function(e){l[e]=W[e]&&""!=W[e]?W[e]:null}));var r={first_name:s.firstName,last_name:s.lastName,status_id:1,is_super_user:"1"==f[1],is_org_cc_user:"1"==f[2],is_idb_user:"1"==f[3],mobile_number:s.mobile.includes("+")?s.mobile:"+"+s.mobile,start_date:s.startDate?Fe()(s.startDate).format("DD-MM-YYYY"):null,end_date:s.endDate?Fe()(s.endDate).format("DD-MM-YYYY"):null,cug_fields:l,flex_fields:a};B.a.put(q+"employee/".concat(te,"/"),r,e).then((function(){A(!1),v.push("/orgcc/manageemployees")}))}else k(!0),A(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Zo,{className:"w-100"},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/manageemployees"},l.a.createElement(gt.a.Item,null,"Manage Employees")),l.a.createElement(gt.a.Item,null,"Edit Profile"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Profile")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(D.a,{spinning:T,size:"large"},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"",form:y},w&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"First Name",value:s.firstName},l.a.createElement(ht.a.Item,{className:"required",name:"firstName"},l.a.createElement(N.a,{className:"input-control",id:"firstName",htmlFor:"firstName",onChange:function(e){return ne(e)},autoComplete:"off"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:"Last Name",value:s.lastName},l.a.createElement(ht.a.Item,{className:"required",name:"lastName",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:"lastName",htmlFor:"lastName",onChange:function(e){return ne(e)},autoComplete:"off"})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:Pe,value:s.email},l.a.createElement(ht.a.Item,{className:"required",name:"email",validateStatus:"success"},l.a.createElement(N.a,{type:"email",className:"input-control",id:"email",htmlFor:"email",disabled:!0,value:s.email,onChange:function(e){return ne(e)},onBlur:function(e){return function(e){/\S+@\S+\.\S+/.test(e.target.value)?F(!1):F(!0)}(e)},autoComplete:"off"}),U&&l.a.createElement(Et.a,{message:jt,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(yt,{label:Re,value:s.mobile},l.a.createElement(ht.a.Item,{className:"required",name:"mobile",validateStatus:"success"},l.a.createElement(Kt.a,{country:"us",id:"mobile",htmlFor:"mobile",value:s.mobile,onChange:function(e){i(Object(o.a)({},s,{mobile:e}))},onBlur:function(e){s.mobile.length>10||/^\+\d$/.test(e.target.value)?z(!1):z(!0)},autoComplete:"off"}),L&&l.a.createElement(Et.a,{message:wt,type:"error",showIcon:!0})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:He,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper required",rules:[{required:!0,message:Dt}]},l.a.createElement(ft.a,{className:"w-100 ",name:"startDate",value:s.startDate,onChange:function(e){return re(e,"startDate")},disabledDate:se})))),l.a.createElement(C.a,{span:24,md:4,className:"gutter-row"},l.a.createElement(yt,{label:Be,value:"date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"w-100 ",name:"endDate",value:s.endDate,onChange:function(e){return re(e,"endDate")},disabledDate:se})))),l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(Br,{handleRoleOnSelect:function(e,t,a){var n=e.toString();if(1==a.triggerValue){var l={0:"1",1:n.includes("1")?"1":"0",2:n.includes("1")?"1":"0",3:n.includes("1")?"1":"0"};E(l)}else if(2==a.triggerValue){var r={0:"1",1:n.includes("2")&&n.includes("1")?"1":"0",2:n.includes("2")?"1":"0",3:n.includes("3")?"1":"0"};E(r)}else if(3==a.triggerValue){var s={0:"1",1:n.includes("3")&&n.includes("1")?"1":"0",2:n.includes("2")?"1":"0",3:n.includes("3")?"1":"0"};E(s)}},roles:f,viaEdit:!0}),l.a.createElement(qr.a,{className:"down-arrow-ico"})))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("span",{className:"mb-0"},"CUG Fields")),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.keys(W).map((function(e){return l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:e,value:W[e]},l.a.createElement(ht.a.Item,{name:e,validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:e,defaultValue:W[e],value:W[e],htmlFor:e,onChange:function(e){return le(e,"cug")},autoComplete:"off"}))))})))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("span",{className:"mb-0"},"Flex fields")),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.keys(X).map((function(e){return l.a.createElement(C.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(yt,{label:e,value:X[e]},l.a.createElement(ht.a.Item,{name:e,validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",id:e,defaultValue:X[e],value:X[e],htmlFor:e,onChange:function(e){return le(e,"flex")},autoComplete:"off"}))))})))),l.a.createElement(ht.a.Item,{className:"mt-5"},l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"mr-4 mb-3",onClick:function(){oe()}},"Save"),l.a.createElement(Ie.a,{type:"secondary",className:"mr-4",onClick:function(){v.push("/orgcc/manageemployees")}},ie),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};A(!0);var t=Object.keys(X),a={};t&&t.forEach((function(e){a[e]=X[e]&&""!=X[e]?X[e]:null}));var n=Object.keys(W),l={};n&&n.forEach((function(e){l[e]=W[e]&&""!=W[e]?W[e]:null}));var r={first_name:s.firstName,last_name:s.lastName,status_id:2,is_super_user:"1"==f[1],is_org_cc_user:"1"==f[2],is_idb_user:"1"==f[3],mobile_number:s.mobile.includes("+")?s.mobile:"+"+s.mobile,start_date:s.startDate?Fe()(s.startDate).format("DD-MM-YYYY"):null,end_date:s.endDate?Fe()(s.endDate).format("DD-MM-YYYY"):null,cug_fields:l,flex_fields:a};B.a.put(q+"employee/".concat(te,"/"),r,e).then((function(){A(!1),v.push("/orgcc/manageemployees")}))}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))))))))))},Xo=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,isEmployeeAssociated:"",hotlineAssociated:!1,openlineAssociated:!1,hotlineData:[],openlineData:[],data:[]},a.showModal=function(){a.setState({visible:!0}),a.checkifEmployee()},a.handleOk=function(){a.setState({visible:!1}),a.deleteEmployee()},a.handleForceOk=function(){a.setState({visible:!1}),a.deleteEmployee()},a.handleCancel=function(){a.setState({visible:!1})},a.checkifEmployee=function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};a.props.setLoader(!0),B.a.get(q+"checkEmployeeDelete/"+a.props.userId+"/",e).then((function(e){a.props.setLoader(!1),0===e.data.assigned_hotlines.length&&0===e.data.assigned_openlines.length?a.setState({isEmployeeAssociated:!1}):(a.setState({isEmployeeAssociated:!0,data:e.data}),e.data.assigned_hotlines.length>0&&a.setState({hotlineAssociated:!0,hotlineData:e.data.assigned_hotlines}),e.data.assigned_openlines.length>0&&a.setState({openlineAssociated:!0,openlineData:e.data.assigned_openlines}),a.setState({data:e.data}))})).catch((function(e){a.setState({isEmployeeAssociated:""})}))},a.deleteEmployee=function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(a.state.isEmployeeAssociated){var t=Object(o.a)({},a.state.data,{user_id:a.props.userId});B.a.post(q+"deleteEmployee/",t,e).then((function(){window.location="/orgcc/manageemployees"})).catch((function(e){}))}else{var n={assigned_hotlines:[],assigned_openlines:[],user_id:a.props.userId};B.a.post(q+"deleteEmployee/",n,e).then((function(){window.location="/orgcc/manageemployees"})).catch((function(e){}))}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},ue),l.a.createElement(Ut.a,{title:"Delete Employee",visible:this.state.visible&&""!==this.state.isEmployeeAssociated&&!this.state.isEmployeeAssociated,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this employee?")),l.a.createElement(Ut.a,{title:"Delete Employee",visible:this.state.visible&&this.state.isEmployeeAssociated,onOk:this.handleForceOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,this.state.hotlineAssociated&&!this.state.openlineAssociated?"Please assign the below mentioned hotline(s) to some other user before deleting this user.":!this.state.hotlineAssociated&&this.state.openlineAssociated?"Please assign the below mentioned openline(s) to some other user before deleting this user.":this.state.hotlineAssociated&&this.state.openlineAssociated?"Please assign the below mentioned hotline(s) and openline(s) to some other user before deleting this user.":"",l.a.createElement("br",null),this.state.hotlineData.length>0?this.state.hotlineData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,e.name),l.a.createElement("br",null))})):this.state.openlineData.length>0?this.state.openlineData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,e.name),l.a.createElement("br",null))})):null,"Are you sure you want to delete this employee?")))}}]),t}(n.Component),ec=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(m.b,{to:{pathname:"/orgcc/editemployee/".concat(e.data.user_id),state:e.data}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editemployee/".concat(e.data.user_id)},me)," ")),l.a.createElement("li",null,l.a.createElement(Xo,{userId:e.data.user_id,name:e.data.first_name+" "+e.data.last_name,setLoader:e.setLoader}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),tc=zr.a.SHOW_PARENT,ac=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={value:void 0,treeData:[]},a.onChange=function(e){a.setState({value:e});var t="";t=a.props.cug?"cug_filter":"status_id",a.props.handlePollOnSelect(e,t,a.props.item)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e,t=[{title:"AM Web",value:"1",key:"1"},{title:$,value:"2",key:"2"},{title:"APP",value:"3",key:"3"},{title:"IDB",value:"4",key:"4"},{title:"Super User",value:"5",key:"5"}],a=[];this.props.status?this.setState({treeData:t}):(null===(e=this.props.cugData[this.props.item])||void 0===e||e.map((function(e){a.push({title:e,value:e,key:e})})),this.setState({treeData:a}))}},{key:"componentDidUpdate",value:function(e){this.props.reset!==e.reset&&this.props.reset&&this.setState({value:void 0})}},{key:"render",value:function(){var e={treeData:this.state.treeData,value:this.state.value,onChange:this.onChange,treeCheckable:!0,placeholder:"Apply Filter",showCheckedStrategy:tc,style:{width:"100%"}};return l.a.createElement(zr.a,e)}}]),t}(l.a.Component),nc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,reset:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e,reset:!1})},a.handleReset=function(){a.setState({reset:!0,visible:!1}),a.props.reset()},a.applyFilters=function(){a.setState({visible:!1}),a.props.applyFilters()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props,t=this.hide,a=this.handleReset,n=this.state.reset,r=this.applyFilters,l.a.createElement("div",null,l.a.createElement(C.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(C.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(C.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(Ie.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return a()}},"Reset"))),l.a.createElement(ct.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(Ft.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Role")),l.a.createElement(C.a,{span:"24"},l.a.createElement(ac,{status:!0,handlePollOnSelect:e.handlePollOnSelect,reset:n}),l.a.createElement(qr.a,{className:"down-arrow-ico"}))),e.cug&&Object.keys(e.cug).map((function(t){if(t.length>0)return l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(C.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,t.substring(t.indexOf("_")+1,t.length))),l.a.createElement(C.a,{span:"24"},l.a.createElement(ac,{cug:!0,reset:n,cugData:e.cug,item:t,handlePollOnSelect:e.handlePollOnSelect}),l.a.createElement(qr.a,{className:"down-arrow-ico"})))}))))),l.a.createElement(S.a,null,l.a.createElement(C.a,{span:"24",className:"btn-row actions"},l.a.createElement(Ie.a,{type:"primary",className:"mr-2",onClick:function(){return r()}},"Apply"),l.a.createElement(Ie.a,{type:"secondary",onClick:function(){return t()}},ie)))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement(zs.a,{className:"".concat(Zr.a.filter_wrapper_ico),title:"Apply Filter"})));var e,t,a,n,r}}]),t}(l.a.Component),lc=N.a.Search,rc=(l.a.createElement(ke.a,{style:{fontSize:16,color:"#1890ff"}}),j.a.Content),sc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t={search:e,filter:a.state.selectedRoll,cug_filter:a.state.setCug_fliterData};a.props.setFilterOptions("",t)},a.applyFilters=function(){var e={search:"",filter:a.state.selectedRoll,cug_filter:a.state.setCug_fliterData};a.props.setFilterOptions("",e)},a.reset=function(){a.setState({filterData:{}}),a.props.setFilterOptions("reset",{search:"",status_id:[],cug_filter:{}})},a.handlePollStatusOnSelect=function(e,t,n){if(console.log("----",e,t,n),console.log(e,t,n),"status_id"==t){var l={is_app_user:e.toString().includes(3)?1:0,is_am_web_user:e.toString().includes(1)?1:0,is_org_cc_user:e.toString().includes(2)?1:0,is_super_user:e.toString().includes(5)?1:0,is_idb_user:e.toString().includes(4)?1:0};a.setState({selectedRoll:l})}if("cug_filter"==t){var r=n.split("_")[1],s=a.state.setCug_fliterData;s[r]=e,e.value>0?a.setState({setCug_fliterData:s}):s&&s[r]&&e.value>0&&(delete s[r],a.setState({setCug_fliterData:s}))}},a.state={data:[],cug:{},filterData:{},selectedRoll:null,setCug_fliterData:{}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.employees,a=e.cug,n=e.filter;null===t||void 0===t||t.forEach((function(e){e.created_on=Fe()(hotline.created_on).utc().local().format("MM/DD/YYYY HH:mm")})),this.setState({data:t,cug:null===a||void 0===a?void 0:a.cug_field,filterData:n})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a;this.props.employees!==e.employees&&(null===(t=e.employees)||void 0===t||t.forEach((function(e){e.created_on=Fe()(e.created_on).utc().local().format("MM/DD/YYYY HH:mm")})),this.setState({data:e.employees}));this.props.cug!==e.cug&&this.setState({cug:null===(a=e.cug)||void 0===a?void 0:a.cug_field});this.props.filter!==e.filter&&this.setState({filterData:e.filter})}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t=this.props.loader,a=[{title:"First Name",dataIndex:"first_name",key:"first_name",width:"20%",render:function(e){return{children:e,props:{"data-title":"First Name"}}},sorter:function(e,t){return e.first_name.localeCompare(t.first_name)}},{title:"Last Name",dataIndex:"last_name",key:"last_name",width:"20%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}},sorter:function(e,t){return e.last_name.localeCompare(t.last_name)}},{title:Re,dataIndex:"mobile_number",key:"mobile_number",width:"20%",render:function(e){return{children:e,props:{"data-title":"Mobile Number"}}}},{title:"Access",dataIndex:"",key:"x",render:function(e){var t="",a="",n=!1;return e.is_am_web_user&&(a="AM Web",n=!0),e.is_org_cc_user&&(a=$,n=!0),e.is_idb_user&&(a="IDB",n=!0),e.is_super_user&&(a="Super User",n=!0),e.is_app_user&&(n||(a="APP")),0===t.length?t+=a:"APP"!==a&&(t.includes("APP")?t=a:t+=", "+a),{children:t,props:{"data-title":"Access"}}},width:"20%"},{title:"Created On",dataIndex:"created_on",key:"created_on",width:"20%",render:function(e){return{children:e,props:{"data-title":"Created On"}}},sorter:function(e,t){return Fe()(e.created_on).unix()-Fe()(t.created_on).unix()}},{title:Le,dataIndex:"",key:"x",width:"12%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):2===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Draft"):3===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),X):4===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),ee):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Deleted"),props:{"data-title":"Status"}}}},{title:ze,dataIndex:"",key:"x",width:"10%",render:function(t){return{children:l.a.createElement(ec,{data:t,setLoader:e.props.setLoader}),props:{"data-title":"Actions"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:this.props.data}),l.a.createElement(rc,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Manage Employees")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(lc,{placeholder:re,onSearch:this.onSearch})),l.a.createElement(C.a,{span:24,lg:9,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(nc,{dataIF:this.state.data,handlePollOnSelect:this.handlePollStatusOnSelect,cug:this.state.cug,applyFilters:this.applyFilters,reset:this.reset})))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(m.b,{to:"/orgcc/addemployee"},l.a.createElement(Te,{value:"Add Employee"}))))),l.a.createElement(D.a,{spinning:t,size:"large"},l.a.createElement(xe,{rowKey:"unique_identifier",columns:a,data:this.state.data})))))))}}]),t}(l.a.Component);var oc=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message,cug:e.cug.cug}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)({search:"",status_id:[],cug_filter:{}}),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(""),E=Object(c.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)([]),_=Object(c.a)(y,2),O=_[0],N=_[1],j=ht.a.useForm(),w=Object(c.a)(j,1)[0],S=Object(n.useState)(!1),C=Object(c.a)(S,2),D=C[0],k=C[1];Object(n.useEffect)((function(){(0,e.dispatch)(La(g,v)),u(!0)}),[r,g]),Object(n.useEffect)((function(){(0,e.dispatch)(Ds())}),[]),Object(n.useEffect)((function(){var t;null===e.manageEmpData?u(!0):null!==e.manageEmpData&&u(!1);null!==e.manageEmpData&&e.manageEmpData,null===g||void 0===g||null===(t=g.status_id)||void 0===t||t.includes(4);N(e.manageEmpData)}),[e.manageEmpData]);return l.a.createElement(sc,{statusOnClicked:function(){s(!r)},employees:O,data:e,form:w,checked:D,cug:e.cug,loader:m,setLoader:u,setFilterOptions:function(e,t){"reset"===e&&w.setFieldsValue({search:""}),h(t)},setSearchValue:function(e){b(e)},filter:g,handleCheck:function(e){k(!D),h(e)}})})),cc=(a(1056),function(e){var t=Object(n.useState)({labels:[],datasets:[]}),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)({title:{display:!0,text:e.chartTitle},legend:{onClick:null}}),m=Object(c.a)(i,2),u=m[0],d=m[1];Object(n.useEffect)((function(){var t={},a=[],n=[],l="months"===e.dateRange,c="years"===e.dateRange;d({title:{display:!0,text:e.chartTitle},legend:{onClick:null,labels:{filter:function(e,t){var a;return!(null===e||void 0===e?void 0:null===(a=e.text)||void 0===a?void 0:a.includes("Line"))}}},scales:{xAxes:[{title:{display:!0,text:e.chartTitle},scaleLabel:{display:!0,labelString:l?"Months":c?"Years":"Days"}}],yAxes:[{title:{display:!0,text:e.chartTitle},scaleLabel:{display:!0,labelString:"Number  of  Messages"}}]},plugins:{zoom:{zoom:{enabled:!0,drag:!1,mode:"x",limits:{max:10,min:.5}},pan:{enabled:!0,mode:"x",speed:100,threshold:100}}}});var i=[],m={},u={},g=[];g=Object.keys(e.report).map((function(e){return e.substring(e.indexOf("_")+1,e.length)}));var h=[];(g.forEach((function(e){var t=new Date(e),a=t.toLocaleString("en-us",{month:"short"}),n=t.getDate(),l=t.getFullYear().toString();h.push(n+"-"+a+"-"+l.substring(l.length-2,l.length))})),e.isAllSelected)?(i=Object.entries(e.report)).forEach((function(e){u=Object(o.a)({},u,Object(ut.a)({},e[0],e[1]))})):(Object.entries(e.report).forEach((function(e){e[1]&&i.push(e[1])})),g=[],h=[],i.forEach((function(e){var t={};Object.keys(e).forEach((function(a){t=Object(o.a)({},t,Object(ut.a)({},a.substring(0,a.indexOf("_")),e));var n=a.substring(a.indexOf("_")+1,a.length);g.includes(n)||g.push(n)})),m=Object(o.a)({},m,{},t)})),c||(g.sort((function(e,t){return new Date(e)-new Date(t)})),g.forEach((function(e){var t=new Date(e),a=t.toLocaleString("en-us",{month:"short"}),n=t.getDate(),l=t.getFullYear().toString();h.push(n+"-"+a+"-"+l.substring(l.length-2,l.length))}))));if(l){if(n=e.months,e.isAllSelected){for(var f=0;f<=e.months.length-1;f++)a.push(0);Object.keys(u).forEach((function(t){var n=t.substring(t.indexOf("_")+1);e.months.forEach((function(e,l){parseInt(n)-1===l&&(a[l]=u[t])}))}))}}else if(c){if(n=g,e.isAllSelected){for(var E=0;E<=g.length-1;E++)a.push(0);Object.keys(u).forEach((function(e){var t=e.substring(e.indexOf("_")+1);g.forEach((function(n,l){parseInt(t)===n&&(a[l]=u[e])}))}))}}else n=h,e.isAllSelected&&Object.values(u).forEach((function(e){a.push(e)}));var v=[];if(e.isAllSelected)t=Object(o.a)({},r,{labels:n,datasets:[{type:"bar",label:te,data:a,backgroundColor:p(te),borderWidth:0},{type:"line",fill:!1,pointRadius:0,label:"Line",data:a,borderColor:"rgb(54, 162, 235)",borderWidth:2}]}),s(t),v=a;else{var b,y=[];if(e.selectedLines.forEach((function(e){var t=[],a={};(l?n:g).forEach((function(n,r){var s,o,c,i,u="",d="",g="";m[e.line_id]&&(d=null===(s=u=Object.keys(m[e.line_id])[r])||void 0===s?void 0:s.substring(0,null===(o=u)||void 0===o?void 0:o.indexOf("_")));m[d]&&(g=null===(c=Object.keys(m[d])[r])||void 0===c?void 0:c.substring((null===(i=Object.keys(m[d])[r])||void 0===i?void 0:i.indexOf("_"))+1));var h=l?r:n;l?parseInt(g)-1===h?t.push(m[e.line_id][u]):t.push(0):g===h?t.push(m[e.line_id][u]):t.push(0),a={label:e.line_name,data:t,backgroundColor:p(e.line_name),borderWidth:0}})),0===g.length&&(a={label:e.line_name,data:t,backgroundColor:p(e.line_name),borderWidth:0}),y.push(a)})),t=Object(o.a)({},r,{labels:n,datasets:y}),e.selectedLines.length>0)v=null===(b=t.datasets[0])||void 0===b?void 0:b.data;else v=a;s(t)}e.sendBackData(n,v)}),[e.selectedLines,e.report]);var p=function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);var n="#";for(a=0;a<3;a++){n+=("00"+(t>>8*a&255).toString(16)).substr(-2)}return n};return l.a.createElement(ro.a,{id:"barChart",data:r,options:u})}),ic=function(e){var t=Object(n.useState)({labels:["High","Medium","Low"],datasets:[]}),a=Object(c.a)(t,2),r=a[0],s=a[1],i={title:{display:!0,text:e.chartTitle},legend:{onClick:null}};return Object(n.useEffect)((function(){var t=[{label:"",data:[e.urgencyLevels.high,e.urgencyLevels.medium,e.urgencyLevels.low],backgroundColor:["rgba(234, 80, 55)","rgba(32, 50, 92)","rgba(194, 194, 214)"],borderColor:["rgba(255, 255, 255)","rgba(255, 255, 255)","rgba(255, 255, 255)"],borderWidth:3}],a=Object(o.a)({},r,{datasets:t});s(a)}),[e.urgencyLevels]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ro.b,{id:"doughNutChart",data:r,options:i}))},mc=function(e){var t={labels:["Resolved Conversations","Unresolved Conversations"],datasets:[{label:"Resolved Conversations",data:[e.resolvedMessages,0],backgroundColor:"rgba(234, 80, 55)",borderColor:"rgba(255, 255, 255)"},{label:"Unresolved Conversations",data:[0,e.totalMessages-e.resolvedMessages],backgroundColor:"rgba(32, 50, 92)",borderColor:"rgba(255, 255, 255)"}]},a={title:{display:!0,text:e.chartTitle},legend:{onClick:null}};return l.a.createElement(ro.a,{id:"ResolvedUnresolvedChart",data:t,options:a})},uc=a(1103),dc=zr.a.SHOW_PARENT,pc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={value:te,treeData:[],treeLength:0,selectedLines:[]},a.onChange=function(e){a.setState({treeLength:e.length,selectedLines:e.filter((function(e){return"All"!==e}))});var t=a.state.treeData,n=[];0===(n=e.length>1&&"All"===e[0]?e.filter((function(e){return"All"!==e})):e.length>1&&e.includes("All")?e.filter((function(e){return"All"===e})):e).length?a.setState({value:te}):a.setState({value:n});var l=[];t.forEach((function(e){n.forEach((function(t){e.value===t&&l.push({line_name:e.title,line_id:e.value,start_date:e.start_date})}))})),a.props.setSelectedLines(l)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.props.lines!==e.lines||t.treeLength!==this.state.treeLength){var n=[{title:te,value:te,key:te,disableCheckbox:!1}];this.props.lines.map((function(e){a.state.treeLength<5?(n.push({title:e.line_name,value:e.line_id,key:e.line_id,start_date:e.start_date,disableCheckbox:!1}),a.props.setMaxLimitReached(!1)):(n.push({title:e.line_name,value:e.line_id,key:e.line_id,start_date:e.start_date,disableCheckbox:!a.state.selectedLines.includes(e.line_id)}),a.props.isAllSelected||a.props.setMaxLimitReached(!0))})),this.setState({treeData:n})}this.props.data.path!==e.data.path&&this.setState({value:te})}},{key:"render",value:function(){var e={treeData:this.state.treeData,value:this.state.value,onChange:this.onChange,treeCheckable:!0,placeholder:this.props.data.path.includes("hotline")?"Select hotline":"Select openline",showCheckedStrategy:dc,style:{width:"100%"}};return l.a.createElement(zr.a,e)}}]),t}(l.a.Component),gc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(Ie.a,{onClick:function(){return e.showDownloadOptions("pdf")}},"Download PDF")),l.a.createElement("li",null,l.a.createElement(Ie.a,{onClick:function(){return e.showDownloadOptions("csv")}},"Download CSV"))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement(Ie.a,{type:"primary"},"Download"),l.a.createElement(qr.a,{className:"down-arrow-ico white"})));var e}}]),t}(l.a.Component),hc=["January","February","March","April","May","June","July","August","September","October","November","December"],fc=j.a.Content,Ec=ft.a.RangePicker,vc=function(e){var t,a,r=Object(n.useState)(!1),s=Object(c.a)(r,2),o=s[0],i=s[1],m=Object(n.useState)(""),u=Object(c.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)("60days"),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(""),b=Object(c.a)(v,2),y=b[0],_=b[1],O=Object(n.useState)([]),N=Object(c.a)(O,2),w=N[0],k=N[1],x=Object(n.useState)([]),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(n.useState)([]),M=Object(c.a)(Y,2),U=M[0],F=M[1],P=Object(n.useState)(""),R=Object(c.a)(P,2),L=R[0],z=R[1],H=Object(n.useState)(!1),V=Object(c.a)(H,2),Q=V[0],G=V[1],K=Object(n.useState)("0"),W=Object(c.a)(K,2),J=W[0],Z=W[1],$=Object(n.useState)("0"),X=Object(c.a)($,2),ee=X[0],te=X[1],ae=Object(n.useState)("0"),ne=Object(c.a)(ae,2),le=ne[0],re=ne[1],se=Object(n.useState)({}),oe=Object(c.a)(se,2),ce=oe[0],ie=oe[1],me=Object(n.useState)([]),ue=Object(c.a)(me,2),pe=ue[0],ge=ue[1],he=Object(n.useState)([]),fe=Object(c.a)(he,2),Ee=(fe[0],fe[1],Object(n.useState)(!0)),ve=Object(c.a)(Ee,2),ye=ve[0],_e=ve[1],Oe=e.path.includes("hotline")?"Hotline conversations from ":"Openline conversations from ",Ne=e.path.includes("hotline")?"Hotline conversations from the last 60 days.":"Openline conversations from the last 60 days.",je=Object(n.useState)(Ne),we=Object(c.a)(je,2),Se=we[0],Ce=we[1];Object(n.useEffect)((function(){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},a=e.path.includes("hotline")?'hotline/?filter={"status_id":'.concat("[5,8]","}"):'openline/?filter={"status_id":'.concat("[5,8]","}");B.a.get(q+a,t).then((function(t){var a=[];t.data.map((function(t){a.push({line_name:(e.path.includes("hotline"),t.name),line_id:e.path.includes("hotline")?t.hotline_id:t.openline_id,start_date:t.start_date})})),A(a)})),p(""),G(!1),_e(!0),k([]),i(!1),_(""),z("days"),E("60days"),Ce(Ne),Z("0"),te("0"),re("0")}),[e.path]),Object(n.useEffect)((function(){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};i(!0);var a=[],n=[];0===w.length||1===w.length&&"All"===w[0].line_name?(_e(!0),G(!1),a=T.map((function(e){return e.line_id})),n=T.map((function(e){return new Date(e.start_date)}))):(_e(!1),a=w.map((function(e){return e.line_id})),n=T.map((function(e){return new Date(e.start_date)})));var l="",r="",s="",o=new Date("01-01-".concat((new Date).getFullYear())).toDateString().split(" "),c=o[1];o[1]=o[2],o[2]=c;var m=o.toString().replace(/,/g," "),u=m.substring(0,m.indexOf(" "))+", "+m.substring(m.indexOf(" "),m.length),p=new Date("".concat((new Date).getMonth()+1,"-01-").concat((new Date).getFullYear())).toDateString().split(" ");c=p[1];p[1]=p[2],p[2]=c;var g=p.toString().replace(/,/g," "),h=g.substring(0,g.indexOf(" "))+", "+g.substring(g.indexOf(" "),g.length),E="";if("monthly"===f)l="0",r="0",s="1",z("days"),Ce(Oe+h+" till date");else if("yearly"===f)l="0",r="1",s="0",z("months"),Ce(Oe+u+" till date");else if("beginning"===f){var v=n.reduce((function(e,t){return e<t?e:t})),b=Fe()(v,"YYYY-MM-DD"),y=Fe()(new Date,"YYYY-MM-DD"),_=Math.abs(b.diff(y,"days"));_<=31?(z("days"),l="0",r="0",s="1"):_>30&&_<=365?(z("months"),l="0",r="1",s="0"):(z("years"),l="1",r="0",s="0"),Ce(Oe+v.toDateString()+" till date"),E=v}else"dateRange"===f?(l="years"===L?"1":"0",r="months"===L?"1":"0",s="days"===L?"1":"0"):(l="0",r="0",s="1",z("days"),Ce(Ne));var O={},N=(new Date).setDate((new Date).getDate()-60),j=new Date(N);if(a.length>0){O=e.path.includes("hotline")?{years:l,month:r,days:s,filter:{start_date:d&&""!==d?Fe()(d[0],Fe.a.defaultFormat):"monthly"===f?new Date("".concat((new Date).getMonth()+1,"-01-").concat((new Date).getFullYear())):"yearly"===f?new Date("01-01-".concat((new Date).getFullYear())):"beginning"===f?E:j,end_date:d&&""!==d?Fe()(d[1],Fe.a.defaultFormat):new Date,hotline_ids:0===w.length||1===w.length&&"All"===w[0].line_name?"all":a}}:{years:l,month:r,days:s,filter:{start_date:d&&""!==d?Fe()(d[0],Fe.a.defaultFormat):"monthly"===f?new Date("".concat((new Date).getMonth()+1,"-01-").concat((new Date).getFullYear())):"yearly"===f?new Date("01-01-".concat((new Date).getFullYear())):"beginning"===f?E:j,end_date:d&&""!==d?Fe()(d[1],Fe.a.defaultFormat):new Date,openline_ids:0===w.length||1===w.length&&"All"===w[0].line_name?"all":a}};var S=e.path.includes("hotline")?"hotlineReporting/":"openlineReporting/";B.a.post(q+S,O,t).then((function(e){if(Z(e.data.total_conversation_count),e.data.avg_time_to_resolve_conversation>0?re(Math.round(e.data.avg_time_to_resolve_conversation)+1):re(e.data.avg_time_to_resolve_conversation),te(e.data.closed_conversation_count),ie(e.data.urgency_level),0===w.length||1===w.length&&"All"===w[0].line_name)ge(e.data.report);else{var t=[];T.map((function(a){var n="report_"+a.line_id;if(!e.data[n])return t;t.push(e.data[n])})),ge(t)}i(!1)})).catch((function(e){return i(!1)}))}}),[T,d,w,f]);var De=function(e){var t="",a="";"barChart"===e?(t=document.getElementById("barChart").toDataURL("image/jpg"),a=document.getElementById("downloadBarChart")):"barChart2"===e?(t=document.getElementById("barChart2").toDataURL("image/jpg"),a=document.getElementById("downloadBarChart2")):"doughNutChart"===e?(t=document.getElementById("doughNutChart").toDataURL("image/jpg"),a=document.getElementById("downloadDoughNutChart")):(t=document.getElementById("ResolvedUnresolvedChart").toDataURL("image/jpg"),a=document.getElementById("downloadResolvedUnresolvedChart")),a.href=t};var ke=function(){var t,a,n,l,r=document.getElementById("barChart"),s=document.getElementById("barChart2"),o=document.getElementById("doughNutChart"),c=document.getElementById("ResolvedUnresolvedChart");t=r,a=s,n=o,l=c,io()(t).then((function(t){var r=t.toDataURL("image/png");io()(a).then((function(a){var s=a.toDataURL("image/png");io()(n).then((function(n){var o=n.toDataURL("image/png");io()(l).then((function(l){for(var c,i=l.toDataURL("image/png"),m=[r,s,o,i],u=new mo.a,d=0;d<4;d++)0===d?t.height:1===d?a.height:2===d?n.height:l.height,0===d?t.width:1===d?a.width:2===d?n.width:l.width,u.addImage(m[d],"JPEG",0,0,200,100),3!==d&&u.addPage();var p=(null===(c=e.path)||void 0===c?void 0:c.includes("hotline"))?"hotline-report.pdf":"openline-report.pdf";u.save(p)}))}))}))}))};var xe=function(){var t,a,n,l,r=[],s="Month";U[0].forEach((function(e,t){U[1].forEach((function(a,n){var l;t===n&&(s="months"===L?"Month":"years"===L?"Year":"Day",r.push((l={},Object(ut.a)(l,s,e),Object(ut.a)(l,"Conversation Count",a),l)))}))}));var o="";null!=(o+=function(e){var t,a,n;return null!=(e=e||null)&&e.length?(",","\n",n=Object.keys(e[0]),t="",t+=n.join(","),t+="\n",e.forEach((function(e){a=0,n.forEach((function(n){a>0&&(t+=","),t+=e[n],a++})),t+="\n"})),t):null}(r))&&(n=(null===(t=e.path)||void 0===t?void 0:t.includes("hotline"))?"hotline-report.csv":"openline-report.csv",o.match(/^data:text\/csv/i)||(o="data:text/csv;charset=utf-8,"+o),a=encodeURI(o),(l=document.createElement("a")).setAttribute("href",a),l.setAttribute("download",n),document.body.appendChild(l),l.click(),document.body.removeChild(l))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amIDBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"reports"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(ka,{amIDBUser:!0,data:e}),l.a.createElement(fc,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},e.path.includes("hotline")?"Hotline Reports":"Openline Reports")),l.a.createElement(D.a,{spinning:o,size:"large"},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:12,className:"search-row mt-2 mt-lg-0"},Q?l.a.createElement(Et.a,{message:(null===(t=e.path)||void 0===t?void 0:t.includes("hotline"))?"Only 5 hotlines can be selected":"Only 5 openlines can be selected",type:"error",showIcon:!0}):null,l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row mt-2 mt-lg-0"},l.a.createElement(pc,{lines:T,setSelectedLines:k,data:e,setMaxLimitReached:G,isAllSelected:ye}),l.a.createElement(qr.a,{className:"down-arrow-ico multiselect-arrow sm-arrow"})),l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row mt-2 mt-lg-2 mt-xl-0"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,{className:"w-100",onSelect:function(e){return E(t=e),void("dateRange"!==t&&p(""));var t},placeholder:"Choose Duration",defaultValue:"60days",value:f},l.a.createElement(zt.a.Option,{value:"60days"},"Last 60 days"),l.a.createElement(zt.a.Option,{value:"monthly"},"Month till Date"),l.a.createElement(zt.a.Option,{value:"yearly"},"Year till Date"),l.a.createElement(zt.a.Option,{value:"dateRange"},"Select Date Range"),l.a.createElement(zt.a.Option,{value:"beginning"},"Since Beginning"))),"dateRange"===f?l.a.createElement(C.a,{span:24,className:"mt-2 mt-lg-0"},l.a.createElement(Ec,{name:"date",value:d,onChange:function(e){return function(e){if(p(e),e){var t=parseInt(e[0].format("M")),a=parseInt(e[0].format("D")),n=parseInt(e[0].format("YYYY")),l=[a,t-1,n],r=parseInt(e[1].format("M")),s=parseInt(e[1].format("D")),o=parseInt(e[1].format("YYYY")),c=[s,r-1,o],i=Math.abs(e[0].diff(e[1],"days"));z(i<=31?"days":i>30&&i<=365?"months":"years"),n!==o?n>o?(Ce(Oe+hc[c[1]]+" "+c[0]+", "+c[2]+tt+hc[l[1]]+" "+l[0]+", "+l[2]),_("greater year")):(Ce(Oe+hc[l[1]]+" "+l[0]+", "+l[2]+tt+hc[c[1]]+" "+c[0]+", "+c[2]),_("lesser year")):n===o&&t!==r?t>r?(Ce(Oe+hc[c[1]]+" "+c[0]+tt+hc[l[1]]+" "+l[0]),_("greater month")):(Ce(Oe+hc[l[1]]+" "+l[0]+tt+hc[c[1]]+" "+c[0]),_("lesser month")):n===o&&t===r&&a!==s?a>s?(Ce(Oe+hc[r-1]+" "+c[0]+tt+hc[t-1]+" "+l[0]),_("greater day")):(Ce(Oe+hc[t-1]+" "+l[0]+tt+hc[r-1]+" "+c[0]),_("lesser day")):n===o&&t===r&&a===s&&(Ce(Oe+hc[t-1]+" "+l[0]+tt+hc[r-1]+" "+c[0]),_("same day"))}else _(""),E("dateRange")}(e)},disabledDate:function(e){return e&&e>Fe()().endOf("day")}})):null))),l.a.createElement(C.a,{span:24,lg:12,className:"mt-2 mt-lg-0"},l.a.createElement(S.a,{className:"justify-content-end"},l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row d-flex align-items-center justify-content-end"},l.a.createElement(gc,{showDownloadOptions:function(e){"pdf"===e?ke():xe()}})))))),l.a.createElement(S.a,null,l.a.createElement("div",{className:"font-12 px-3 px-lg-0"},"Note: Total conversations resolved count represents the data for all conversations resolved during the selected period. These may or may not be initiated in the selected duration."),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-3 h-auto d-flex justify-content-center align-items-center text-center pt-3 pb-3"},l.a.createElement(C.a,{span:8,className:"divider-right font-weight-md6 pr-2 pr-lg-0"},l.a.createElement("div",{className:"font-18"},J),l.a.createElement("div",{className:"font-12"},de)),l.a.createElement(C.a,{span:8,className:"divider-right font-weight-md6 pr-2 pr-lg-0"},l.a.createElement("div",{className:"font-18"},ee),l.a.createElement("div",{className:"font-12"},"Total Conversations Resolved in this duration")),l.a.createElement(C.a,{span:8,className:"font-weight-md6 pr-2 pr-lg-0"},l.a.createElement("div",{className:"font-18"},le,"d"),l.a.createElement("div",{className:"font-12"},"Average Resolution Time"))))),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,lg:24,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(C.a,{className:"d-flex justify-content-between align-items-center mb-3"},l.a.createElement("h6",{className:"font-weight-md6 font-14 mb-0"},""!==y||""!==f?Se:Ne),l.a.createElement("span",null,l.a.createElement("a",{id:"downloadBarChart",download:(null===(a=e.path)||void 0===a?void 0:a.includes("hotline"))?"Hotline-report.jpg":"Openline-report.jpg",href:""},l.a.createElement(uc.a,{className:"font-18 cursor-pointer",onClick:function(){return De("barChart")}})))),l.a.createElement(cc,{months:hc,selectedLines:w,report:pe,sendBackData:function(e,t){F([e,t])},chartTitle:Se,dateRange:L,isAllSelected:ye})))),l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(C.a,{className:"d-flex justify-content-between align-items-center mb-3"},l.a.createElement("h6",{className:"font-weight-md6 my-3"},"Conversations based on Urgency Level"),l.a.createElement("span",null,l.a.createElement("a",{id:"downloadDoughNutChart",download:"Conversations-based-on-urgency-level.jpg",href:""},l.a.createElement(uc.a,{className:"font-18 cursor-pointer",onClick:function(){return De("doughNutChart")}})))),l.a.createElement(S.a,null,l.a.createElement("h6",{className:"font-weight-md6 my-3"},de,": ",J)),l.a.createElement(ic,{urgencyLevels:ce,chartTitle:"Conversations based on Urgency Level"})))),l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(C.a,{className:"d-flex justify-content-between align-items-center mb-3"},l.a.createElement("h6",{className:"font-weight-md6 my-3"},"Resolved Conversations"),l.a.createElement("span",null,l.a.createElement("a",{id:"downloadResolvedUnresolvedChart",download:"Resolved-conversations.jpg",href:""},l.a.createElement(uc.a,{className:"font-18 cursor-pointer",onClick:function(){return De("ResolvedUnresolvedChart")}})))),l.a.createElement(S.a,null,l.a.createElement("h6",{className:"font-weight-md6 my-3"},de,": ",J)),l.a.createElement(mc,{resolvedMessages:ee,totalMessages:J,chartTitle:"Resolved & Unresolved Conversations"})))))))))))},bc=j.a.Content,yc=function(e){var t=Object(u.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e.data}),l.a.createElement(bc,{"data-test":"Directory",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Openline Directory")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Xa.a,alt:"Create Hotline",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create Openline entries and assign them to managers,",l.a.createElement("br",null),"head of departments or leadership."),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(ct.a,{className:"mt-1"})),l.a.createElement(C.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ie.a,{"data-test":"createHotline",onClick:function(){t.push("/orgcc/createopenline")},type:"primary"},"Create"))))))))))},_c=function(e){var t=e.data,a=e.deleteRecord,r=e.handleCheck,s=Object(n.useState)(),o=Object(c.a)(s,2),i=o[0],m=o[1];Object(n.useEffect)((function(){u()}),[t]);var u=function(){m(t)},d=[{title:"Name",dataIndex:"first_name",key:"first_name",width:"30%",render:function(e,t){var a;return{children:null===t||void 0===t?void 0:null===(a=t.user)||void 0===a?void 0:a.first_name,props:{"data-title":"Name"}}}},{title:"Respond",dataIndex:"can_respond",key:"can_respond",width:"20%",editable:!0,render:function(e,t){return l.a.createElement(C.a,{span:12,className:"d-flex justify-content-end changeColor"},l.a.createElement(bt.a,{value:"reports",checked:e,onChange:function(e){return r(t)},disabled:!0}))}},{title:ze,dataIndex:"user_id",key:"user_id",width:"20%",render:function(e,t){return l.a.createElement("span",{onClick:function(e){!function(e,t){t.preventDefault(),a(e)}(t,e)},className:"uploaded-icon icon icon-close d-inline-flex justify-content-end align-items-center"})}}];return l.a.createElement("div",{className:"no-bordered-grid"},l.a.createElement(De.a,{className:"no-bg-table",locale:{emptyText:"  "},rowClassName:function(){return"editable-row"},columns:d,dataSource:i,rowKey:"rowkey"}))},Oc=function(e){var t=e.searchData,a=e.addAssignUser,r=e.data,s=Object(n.useState)(!1),o=Object(c.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(""),f=Object(c.a)(h,2),E=f[0],v=f[1];return l.a.createElement(l.a.Fragment,null,i&&l.a.createElement(Et.a,{"data-test":"alert",message:"".concat(p," is already assigned for this openline."),type:"error",showIcon:!0}),l.a.createElement(rn.a,{"data-test":"Searchuser",value:E,options:t,placeholder:"Search Employee",filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},onSelect:function(e,t){return function(e,t){r.filter((function(e){return e.user.user_id===t.user_id})).length>0?(m(!0),g(e),v("")):a(e,t)}(e,t)},onChange:function(){return m(!1),void g("")}}))},Nc=a(41),jc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,assignedOpenLines:"",hotLineName:"",assignedEmp:"",loader:!1,filter:{search:"",cug_filter:{},filter:{is_app_user:1,is_am_web_user:1,is_org_cc_user:1,is_super_user:0,is_idb_user:1}}},a.showModal=function(){a.setState({visible:!0,employeeData:[],hotLineName:a.props.selectedRows.name,openlineId:a.props.selectedRows.openline_id,loader:!0}),(0,a.props.dispatch)(La(a.state.filter,"")),a.getAssignedEmployee()},a.getAssignedEmployee=function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.get(q+"getOpenlineAssignEmpl/"+a.props.selectedRows.openline_id,e).then((function(e){a.setState({assignedOpenLines:e.data,loader:!1})}))},a.handleOk=function(e){a.setState({visible:!1});var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"openlineAssignEmpl/",a.state.assignedEmp,t).then((function(e){a.getAssignedEmployee(),a.setState({assignedEmp:""})})).catch((function(e){}))},a.handleCheck=function(e){var t=Object(dt.a)(a.state.assignedOpenLines),n=t.findIndex((function(t){return t.user_id===e.user_id}));t[n]=Object(o.a)({},t[n],{can_respond:!e.can_respond}),a.setState({assignedOpenLines:t});var l=Object(dt.a)(a.state.assignedEmp),r=l.findIndex((function(t){return t.user_id===e.user_id}));l[r]=Object(o.a)({},l[r],{can_respond:!e.can_respond}),a.setState({assignedEmp:l})},a.handleCancel=function(){a.setState({visible:!1})},a.deleteRecord=function(e){e.user.user_id;var t=a.state.assignedEmp&&a.state.assignedEmp.filter((function(t){return t.user_id!==e.user.user_id}));a.setState({assignedEmp:t});var n={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({user_id:e.user.user_id})};B.a.delete(q+"getOpenlineAssignEmpl/"+e.openline.openline_id,n).then((function(){a.getAssignedEmployee()})).catch((function(e){}))},a.addUser=function(e,t){var n=JSON.parse(b("user")),l=a.state,r=l.assignedOpenLines,s=l.assignedEmp,o={user:{user_id:parseInt(t.user_id),first_name:t.value},openline:{openline_id:a.state.openlineId},can_respond:!0,can_view_reports:!1},c={openline_id:a.state.openlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,created_by:parseInt(Nc.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Nc.enc.Utf8))};a.setState({assignedOpenLines:[].concat(Object(dt.a)(r),[o]),assignedEmp:[].concat(Object(dt.a)(s),[c])})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props.manageEmpData,a=[];if(e.manageEmpData!=t){for(var n=0;n<t.length;n++){var l,r,s;a.push({value:null===(l=t[n])||void 0===l?void 0:l.first_name.concat(" ",null===(r=t[n])||void 0===r?void 0:r.last_name),user_id:null===(s=t[n])||void 0===s?void 0:s.user_id})}this.setState({employeeData:a})}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Show"),l.a.createElement(Ut.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:ie},l.a.createElement("div",null,"Employees with permissions to "," ",this.state.hotLineName),l.a.createElement(S.a,{className:"mt-2 mt-lg-5 mb-3 thead-outer"},l.a.createElement(C.a,{span:10},Ke)),l.a.createElement(D.a,{spinning:this.state.loader,size:"large"},l.a.createElement(_c,{data:this.state.assignedOpenLines,deleteRecord:this.deleteRecord,handleCheck:this.handleCheck})),l.a.createElement(S.a,{className:"mb-2 autocomplete"},l.a.createElement(C.a,{span:24},l.a.createElement(Oc,{searchData:this.state.employeeData,addAssignUser:this.addUser,data:this.state.assignedOpenLines}),l.a.createElement("small",null,"Hit enter to add")))))}}]),t}(n.Component);var wc=Object(i.b)((function(e){return{assignhotlines:e.assignedHotline.assignhotlines,manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(jc),Sc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"deleteHotline",value:function(){this.props.history;var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"openline/"+this.props.openlineId,e).then((function(){window.location="/orgcc/openlinedirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},ue),l.a.createElement(Ut.a,{title:"Delete Openline",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this Openline?")))}}]),t}(n.Component),Cc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,8===e.status_id?"":l.a.createElement(m.b,{to:{pathname:"/orgcc/editopenline",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editopenline"},me)," ")),5===e.status_id?"":l.a.createElement("li",null,l.a.createElement(Sc,{openlineId:e.openline_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),Dc=N.a.Search,kc=(l.a.createElement(ke.a,{style:{fontSize:16,color:"#1890ff"}}),j.a.Content),xc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","/");if(new Date<new Date(n)){var l={status_id:"Active"===t?4:5},r={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.put(q+"changeOpenlineStatus/"+e.openline_id+"/",l,r).then((function(){w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.name+Je}),a.props.statusOnClicked()}))}else w.a.config({placement:"bottomLeft"}),w.a.open({description:We+e.name+Ze})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})},a.state={data:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.openlines;null===t||void 0===t||t.forEach((function(e){e.start_date=e.start_date?Fe()(e.start_date).utc().local().format("MM / DD / YYYY"):"",e.end_date=e.end_date?Fe()(e.end_date).utc().local().format("MM / DD / YYYY"):""})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a=this;this.props.openlines!==e.openlines&&(null===(t=e.openlines)||void 0===t||t.forEach((function(e){e.start_date=e.start_date?Fe()(e.start_date).utc().local().format("MM / DD / YYYY"):"",e.end_date=e.end_date?Fe()(e.end_date).utc().local().format("MM / DD / YYYY"):""})),this.setState({data:e.openlines},(function(){a.onSearch("")})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=[{title:"Openline Name",dataIndex:"name",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Openline Name"}}}},{title:He,dataIndex:"start_date",key:"start_date",width:"15%",render:function(e){return{children:e||"-",props:{"data-title":"Start Date"}}}},{title:Be,dataIndex:"end_date",key:"end_date",width:"15%",render:function(e){return{children:e||"-",props:{"data-title":"End Date"}}}},{title:"Permissions",dataIndex:"",key:"x",width:"10%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement(wc,{selectedRows:e})),props:{"data-title":"Permissions"}}}},{title:Le,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:4===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},Z):5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):7===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),X):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),ee),props:{"data-title":"Status"}}}},{title:ze,dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(Cc,{data:e}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:this.props.data}),l.a.createElement(kc,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Openline Directory")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Dc,{placeholder:re,onSearch:this.onSearch})))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(m.b,{to:"/orgcc/createopenline"},l.a.createElement(Te,{value:"Create Openline"}))))),l.a.createElement(D.a,{spinning:this.props.loader,size:"large"},l.a.createElement(xe,{rowKey:"openline_id",columns:e,data:this.state.filterData})))))))}}]),t}(l.a.Component);var Ic=Object(i.b)((function(e){return{openlinesdata:e.openline.openlinesdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return sa.getOpenlines().then((function(t){return e({type:"OPENLINE_SUCCESS",payload:{openlinesdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"OPENLINE_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[r]),Object(n.useEffect)((function(){null===e.openlinesdata?u(!0):null!==e.openlinesdata&&u(!1)}),[e.openlinesdata]);return m||null===e.openlinesdata||0!==e.openlinesdata.length?l.a.createElement(xc,{statusOnClicked:function(){s(!r)},openlines:e.openlinesdata,data:e,loader:m}):l.a.createElement(yc,{data:e})})),Tc=a(274),Ac=function(e){var t=e.next,a=e.imageError,r=e.stepOneOpenLineInfo,s=e.handleStepOneOnChange,o=(e.onChangeCheckbox,e.handleStepOneUpload),i=e.handleStepOnePreview,u=e.handleCancel,d=(e.handleBeforeUpload,e.handleStepOneDatePickerChange),p=(e.addIcon,e.getIconText),g=e.setNameValidHandle,h=e.hotlineErrorUpdated,f=e.createOpenline,E=Object(n.useState)({iconText:""}),v=Object(c.a)(E,2),b=(v[0],v[1],Object(n.useState)(!1)),y=Object(c.a)(b,2),_=y[0],O=y[1],N=Object(n.useState)(!1),j=Object(c.a)(N,2),w=j[0],S=(j[1],Object(n.useState)(!0)),C=Object(c.a)(S,2),D=(C[0],C[1]),k=ht.a.useForm(),x=Object(c.a)(k,1)[0],I=Object(n.useState)(!1),T=Object(c.a)(I,2),A=T[0],Y=T[1],M=function(e){return e&&e<Fe()().startOf("day")};ft.a.RangePicker;return l.a.createElement(ht.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:x},_&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),w&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please upload an image.",type:"error",showIcon:!0})),A&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please fill openline name",type:"error",showIcon:!0})),l.a.createElement(yt,{label:"Openline Name",value:r.openelineName},l.a.createElement(ht.a.Item,{className:"required",name:"openelineName",rules:[{required:!0,message:"Please enter directory name"}],autoComplete:"off"},l.a.createElement(Pa.a,{showCount:!0,maxLength:80,value:r.openelineName,onChange:function(e){return s(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkOpenline/",{openline_name:r.openelineName},t).then((function(e){e.data&&g(e.data[0])}))}()},id:"openelineName",className:"input-control",htmlFor:"openelineName",autoComplete:"off"}),"status: false"==h&&r.openelineName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.openelineName.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==h&&l.a.createElement(Et.a,{message:It,type:"error",showIcon:!0}))),l.a.createElement(yt,{label:"Description",value:r.description},l.a.createElement(ht.a.Item,{name:"description",className:"required"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Pa.a,{className:"input-control",value:r.description,onChange:function(e){return s(e)},id:"description",htmlFor:"description",autoComplete:"off"})))),r.statusMessage.length>0?l.a.createElement(l.a.Fragment,null,r.statusMessage):null,l.a.createElement(yt,{label:He,value:"startDate"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"startDate",value:r.startDate,onChange:function(e){return d(e,"startDate")},disabledDate:M,rules:[{required:!0,message:{SELECT_DATE:Dt}}]}))),l.a.createElement(yt,{label:Be,value:"endDate"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"endDate",value:r.endDate,onChange:function(e){return d(e,"endDate")},disabledDate:M}))),l.a.createElement(ht.a.Item,{className:""},l.a.createElement(ht.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(Tc.a,{rotate:!0,modalOk:"Upload"},l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:r.file,onChange:function(e){return o(e,"file")},onPreview:function(e){return i(e)},accept:"image/png, image/jpeg, image/gif"},0===r.file.length&&l.a.createElement(Ie.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"}),"Upload Image"))),l.a.createElement(Ut.a,{className:"modal-openline",visible:r.previewVisible,title:r.previewTitle,centered:!0,onOk:function(e){return u(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:r.previewImage})),p(r.hotlineIconId)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},Ua()(r.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:p(r.hotlineIconId)},p(r.hotlineIconId)))))))),a&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please upload an image.",type:"error",showIcon:!0})),l.a.createElement(ht.a.Item,null,l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),r.openelineName&&r.openelineName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.description&&r.description.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.file&&r.file.length>0&&r.startDate?a||"status: false"!=h||(O(!1),D(!1),Y(!1),t()):(O(!0),Y(!1))},"data-test":"stepOneNext",className:"mr-4"},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){r.openelineName&&r.openelineName.replace(/^\s*/,"").replace(/\s*$/,"").length>0?"status: false"==h&&(O(!1),Y(!1),f(!0)):(O(!1),Y(!0))}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))},Yc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.employeeData,n=a.filterIt(t,e);a.setState({filterData:n})},a.start=function(){a.setState({showAssigntoModal:!0})},a.stepTwoPrev=function(){a.props.prev()},a.stepTwoNext=function(){0!==a.props.stepTwoOpenLine.chekedValues.length?a.props.next():a.setState({showAlert:!0})},a.state={employeeData:"",showAssigntoModal:"false",showAlert:!1,loader:!1,filter:{search:"",cug_filter:{},filter:{is_app_user:1,is_am_web_user:1,is_org_cc_user:1,is_super_user:0,is_idb_user:1}}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;this.setState({loader:!0}),e(La(this.state.filter,""))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.manageEmpData,n=[];null!==a&&(n=a.filter((function(e){return 1===e.status_id}))),e.manageEmpData!=a&&this.setState({employeeData:n,loader:!1},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.props.stepTwoOpenLine.selectedRowKeys,onChange:this.props.handleStepTwoOnSelect},a=[{title:"First Name",dataIndex:"first_name",key:"first_name",width:"22%"},{title:"Last Name",dataIndex:"last_name",key:"last_name",width:"22%"},{title:Re,dataIndex:"mobile_number",key:"mobile_number",width:"21%"},{title:"Access",dataIndex:"",key:"x",render:function(e){var t="",a="",n=!1;return e.is_am_web_user&&(a="AM Web",n=!0),e.is_org_cc_user&&(a=$,n=!0),e.is_idb_user&&(a="IDB",n=!0),e.is_super_user&&(a="Super User",n=!0),e.is_app_user&&(n||(a="APP")),0===t.length?t+=a:"APP"!==a&&(t.includes("APP")?t=a:t+=", "+a),{children:l.a.createElement("span",null,t),props:{"data-title":"Access"}}},width:"20%"},{title:Le,dataIndex:"",key:"x",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):2===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},DRAFT):3===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),SCHEDULED):4===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),COMPLETED):null,props:{"data-title":"Status"}}}}];return l.a.createElement("div",null,l.a.createElement(C.a,{"data-test":"createHotlineStepTwo",span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Ha.a,{placeholder:"Search User",onSearch:this.onSearch})))))),this.state.showAlert&&l.a.createElement(Et.a,{message:"Please select user(s).",type:"error",showIcon:!0}),l.a.createElement(D.a,{spinning:this.state.loader,size:"large"},l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(De.a,{rowSelection:t,columns:a,dataSource:this.state.filterData,rowKey:"unique_identifier"})),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{className:"mr-4",type:"secondary",onClick:function(){return e.stepTwoPrev()},"data-test":"steptwoPrev"},ce),l.a.createElement(Ie.a,{className:"md mr-4",type:"primary",onClick:function(){return e.stepTwoNext()},"data-test":"steptwoNext"},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){return e.props.createOpenline(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))}}]),t}(l.a.Component);var Mc=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(Yc),Uc=N.a.TextArea,Fc=function(e){var t,a=e.prev,n=e.createNewOpenLine,r=e.stepOneOpenLine,s=e.stepTwoOpenLine,o=e.handleStepOnePreview,i=e.handleCancel,u=ht.a.useForm(),d=Object(c.a)(u,1)[0],p=s.selectedRows.map((function(e){return e.first_name+" "+e.last_name}));ft.a.RangePicker;return l.a.createElement(ht.a,{"data-test":"createHotlineStepThree",className:"input-md w-md-100 w-75",name:"validate_other",form:d},l.a.createElement(ht.a.Item,{name:"openelineName"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Uc,{showCount:!0,disabled:!0,maxLength:80,value:r.openelineName,id:"openelineName",className:"input-control textarea-input",htmlFor:"openelineName"}))),l.a.createElement(ht.a.Item,{name:"description"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Uc,{disabled:!0,className:"input-control textarea-md",value:r.description,id:"description",htmlFor:"description"}))),l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"startDate",value:r.startDate,disabled:!0}),l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"endDate",value:r.endDate,disabled:!0})),l.a.createElement("div",{className:"d-block d-lg-flex"},l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(ht.a.Item,{name:"userNames"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"assigned to",id:p,disabled:!0,value:p.join(", ")}))))),l.a.createElement(ht.a.Item,{className:"w-100 w-lg-50"},l.a.createElement(ht.a.Item,{className:"upload-control required"},l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",disabled:!0,fileList:r.file,onPreview:function(e){return o(e)}}),l.a.createElement(Ut.a,{className:"modal-openline",visible:r.previewVisible,title:r.previewTitle,centered:!0,onOk:function(e){return i(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:r.previewImage})))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,(t={type:"secondary",className:"mr-4"},Object(ut.a)(t,"type","secondary"),Object(ut.a)(t,"htmlType","submit"),Object(ut.a)(t,"onClick",(function(e){e.preventDefault(),a()})),Object(ut.a)(t,"data-test","stepThreePrev"),t),ce),l.a.createElement(Ie.a,{type:"primary",className:"md mr-4",htmlType:"submit",onClick:function(e){n()},"data-test":"stepThreeNext"},"Create"),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){return n(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))},Pc=j.a.Content,Rc=pt.a.Step,Lc=[{title:"Add Details",content:"First-content"},{title:"Assign Employee",content:"Second-content"},{title:"Review Details",content:"Last-content"}],zc=a(41),Hc=function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),u=Object(c.a)(i,2),d=u[0],p=u[1],g=Object(n.useState)(!1),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)({openelineName:"",description:"",status:!1,statusMessage:"",startDate:"",endDate:"",hotlineIconId:"",file:"",previewVisible:!1,previewImage:"",previewTitle:"",imagename:""}),y=Object(c.a)(v,2),_=y[0],O=y[1],N=Object(n.useState)(""),w=Object(c.a)(N,2),k=w[0],x=w[1],I=Object(n.useState)({selectedRows:"",selectedRowKeys:[],chekedValues:[]}),T=Object(c.a)(I,2),A=T[0],Y=T[1],M=function(){s(r+1)},U=function(){s(r-1)},F=function(e){return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.awrap(R(e.originFileObj));case 2:e.preview=t.sent,O(Object(o.a)({},_,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)}));case 4:case"end":return t.stop()}}))},P=function(e){return O(Object(o.a)({},_,{previewVisible:!1}))},R=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},L=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}},H=function(){var e,t,a,n,l,r=arguments;return z.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:e=r.length>0&&void 0!==r[0]&&r[0],t=JSON.parse(b("user")),a=Me(),n={create_openline:{name:_.openelineName,help_text:_.description,openline_image:_.file?_.file[0].base64:null,openline_image_name:_.imagename,status_id:e?4:1,start_date:_.startDate?Fe()(_.startDate).format("DD-MM-YYYY"):null,end_date:_.endDate?Fe()(_.endDate).format("DD-MM-YYYY"):null,created_by:parseInt(zc.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(zc.enc.Utf8))},permissions:A.chekedValues},l={headers:{Authorization:a,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},E(!0),B.a.post(q+"openline/",n,l).then((function(){window.location="/orgcc/openlinedirectory"}));case 7:case"end":return s.stop()}}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"hotlineCreation"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Pc,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/openlinedirectory"},l.a.createElement(gt.a.Item,null,"Openline Directory")),l.a.createElement(gt.a.Item,null,"Create Openline Directory"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Openline Directory Entries")),l.a.createElement(pt.a,{className:"mt-2",current:r},Lc.map((function(e){return l.a.createElement(Rc,{key:e.title,title:e.title})}))),l.a.createElement(D.a,{spinning:f,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"steps-content"},0==r?l.a.createElement(Ac,{next:M,imageError:d,stepOneOpenLineInfo:_,handleStepOneOnChange:function(e){O(Object(o.a)({},_,Object(ut.a)({},e.target.id,e.target.value)))},handleStepOneOnSelect:function(e,t){O(Object(o.a)({},_,Object(ut.a)({},t,e)))},handleStepOneUpload:function(e,t){var a,n=e.fileList.slice(-1),l=e.file.name;n.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),O(Object(o.a)({},_,(a={},Object(ut.a)(a,t,n),Object(ut.a)(a,"imagename",l),a)))},onChangeCheckbox:function(e){if(e.target.checked)O(Object(o.a)({},_,{status:e.target.checked,statusMessage:""}));else{var t,a,n=Fe()(),l=_.sDate;l&&0===(null===(t=l[0])||void 0===t?void 0:t.diff(n,"days"))?O(Object(o.a)({},_,{status:e.target.checked,statusMessage:ge})):l&&(null===(a=l[0])||void 0===a?void 0:a.diff(n,"days"))>0&&O(Object(o.a)({},_,{status:e.target.checked,statusMessage:he}))}},handleBeforeUpload:function(e){return e.type.includes("image")?(p(!1),e.type):(p(!0),Ur.b.error("The file that you attemped to upload ".concat(e.name," is not supported")),!1)},handleStepOnePreview:F,handleCancel:P,handleStepOneDatePickerChange:function(e,t){var a,n=Fe()();if(e&&0===(null===e||void 0===e?void 0:e.diff(n,"days"))&&!_.status)O(Object(o.a)({},_,(a={},Object(ut.a)(a,t,e),Object(ut.a)(a,"statusMessage",ge),a)));else if(e&&(null===e||void 0===e?void 0:e.diff(n,"days"))>0&&!_.status){var l;O(Object(o.a)({},_,(l={},Object(ut.a)(l,t,e),Object(ut.a)(l,"statusMessage",he),l)))}else{var r;O(Object(o.a)({},_,(r={},Object(ut.a)(r,t,e),Object(ut.a)(r,"statusMessage",""),r)))}},addIcon:function(e,t){O(Object(o.a)({},_,{hotlineIconId:t,iconHtml:e}))},getIconText:L,setNameValidHandle:function(e){x(e)},hotlineErrorUpdated:k,"data-test":"CreateHotlineStepOne",createOpenline:H}):1==r?l.a.createElement(Mc,{next:M,prev:U,stepOneHotLine:_,stepTwoOpenLine:A,handleStepTwoOnSelect:function(e,t){var a,n=[],l=JSON.parse(b("user")),r=t.filter((function(e){var t,a=e.user_id;return!(null===(t=n)||void 0===t?void 0:t.some((function(e){return e.user_id===a})))})).reduce((function(e,t){return e.push({user_id:t.user_id,can_respond:1,can_view_reports:0,created_by:parseInt(zc.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(zc.enc.Utf8))}),e}),[]);n=null===(a=n)||void 0===a?void 0:a.concat(r),Y(Object(o.a)({},A,{selectedRowKeys:e,selectedRows:t,chekedValues:n}))},createOpenline:H}):2==r?l.a.createElement(Fc,{prev:U,createNewOpenLine:H,stepOneOpenLine:_,stepTwoOpenLine:A,getIconText:L,handleStepOnePreview:F,handleCancel:P}):""))))))))))},Bc=a(41),qc=N.a.TextArea,Vc=j.a.Content,Qc=function(e){var t,a=Object(n.useState)(!1),r=Object(c.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)({end_date:"",help_text:"",openline_id:"",name:"",start_date:"",openline_image:"",openline_image_name:"",statusMessage:"",status:!1,iconHtml:"",ImgfileList:[],status_id:""}),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!1),E=Object(c.a)(f,2),v=E[0],y=E[1],_=ht.a.useForm(),O=Object(c.a)(_,1)[0],N=Object(n.useState)(!1),w=Object(c.a)(N,2),C=w[0],k=w[1],x=Object(n.useState)(""),I=Object(c.a)(x,2),T=I[0],A=I[1],Y=Object(u.h)(),M=Object(n.useState)(!1),U=Object(c.a)(M,2),F=U[0],P=U[1];Object(n.useEffect)((function(){var e=[],t=Y.state.start_date?Fe()(Y.state.start_date).format("YYYY-MM-DD"):"",a=Y.state.end_date?Fe()(Y.state.end_date).format("YYYY-MM-DD"):"";Y.state.openline_image_name&&Y.state.openline_image&&(e=[{uid:"1",name:Y.state.openline_image_name,status:"done",url:Y.state.openline_image}]),h({status_id:Y.state.status_id,end_date:a&&Fe()(a,"YYYY/MM/DD"),help_text:Y.state.help_text,openline_id:Y.state.openline_id,name:Y.state.name,start_date:Fe()(t,"YYYY/MM/DD"),openline_image:Y.state.openline_image,openline_image_name:Y.state.openline_image_name,status:4===Y.state.status_id,ImgfileList:e}),O.setFieldsValue({name:Y.state.name,help_text:Y.state.help_text})}),[]);var R=function(e){h(Object(o.a)({},g,Object(ut.a)({},e.target.id,e.target.value)))},L=function(e,t){var a,n=Fe()();if(e&&0===(null===e||void 0===e?void 0:e.diff(n,"days"))&&!g.status)h(Object(o.a)({},g,(a={},Object(ut.a)(a,t,e),Object(ut.a)(a,"statusMessage",ge),a)));else if(e&&(null===e||void 0===e?void 0:e.diff(n,"days"))>0&&!g.status){var l;h(Object(o.a)({},g,(l={},Object(ut.a)(l,t,e),Object(ut.a)(l,"statusMessage",he),l)))}else{var r;h(Object(o.a)({},g,(r={},Object(ut.a)(r,t,e),Object(ut.a)(r,"statusMessage",""),r)))}};function H(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}var V=function(e){var t=Me(),a=g.openline_id;delete g.hotline_id;var n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.put(q+"openline/"+a+"/",e,n).then((function(e){200===e.status&&(i(!1),window.location="/orgcc/openlinedirectory")}))};var Q=function(e){switch(e){case"1":return"Sexual Harrasment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}},G=function(e){return e&&e<Fe()().startOf("day")};ft.a.RangePicker;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Vc,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Edit Openline")),l.a.createElement(D.a,{spinning:s,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(ht.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:O},v&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),C&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please upload an image.",type:"error",showIcon:!0})),F&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please fill openline name",type:"error",showIcon:!0})),l.a.createElement(yt,{label:"Directory Name",value:g.name},l.a.createElement(ht.a.Item,{className:"required",name:"name",id:"name",rules:[{required:!0,message:"Please enter directory name"}]},l.a.createElement(qc,{showCount:!0,maxLength:80,value:g.name,onChange:function(e){return R(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==Y.state.name?B.a.post(q+"checkOpenline/",{openline_name:e.target.value},t).then((function(e){e.data&&A(e.data[0])})):A(!1)}(e)},name:"name",id:"name",className:"input-control textarea-input",htmlFor:"name",autoComplete:"off"}),"status: false"==T&&g.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&g.name.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==T&&l.a.createElement(Et.a,{message:It,type:"error",showIcon:!0}))),l.a.createElement(yt,{label:"Description",value:g.help_text},l.a.createElement(ht.a.Item,{className:"required",name:"help_text",id:"help_text",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(qc,{className:"input-control textarea-input",value:g.help_text,onChange:function(e){return R(e)},name:"help_text",id:"help_text",htmlFor:"help_text",autoComplete:"off"})))),(null===(t=g.statusMessage)||void 0===t?void 0:t.length)>0?l.a.createElement(l.a.Fragment,null,g.statusMessage):null,l.a.createElement(yt,{label:He,value:"start_date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{disabled:5===g.status_id,className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"start_date",value:g.start_date,disabledDate:G,onChange:function(e){return L(e,"start_date")},rules:[{required:!0,message:Dt}]}))),l.a.createElement(yt,{label:Be,value:"end_date"},l.a.createElement(ht.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(ft.a,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"end_date",value:g.end_date,disabledDate:G,onChange:function(e){return L(e,"end_date")}}))),l.a.createElement(ht.a.Item,{className:""},l.a.createElement(ht.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(Tc.a,{rotate:!0,modalOk:"Upload"},l.a.createElement(kn.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:g.ImgfileList,onChange:function(e){return function(e,t){var a=e.fileList.slice(-1),n=e.file.name;a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),h(Object(o.a)({},g,{ImgfileList:a,openline_image:a,openline_image_name:n})),"removed"===e.file.status&&h(Object(o.a)({},g,{ImgfileList:[],openline_image:"",openline_image_name:""}))}(e)},onPreview:function(e){return t=e,z.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:"1"===t.uid?H(t.url,(function(e){h(Object(o.a)({},g,{previewImage:e,previewVisible:!0,previewTitle:t.name}))})):h(Object(o.a)({},g,{previewImage:t.base64,previewVisible:!0,previewTitle:t.name}));case 1:case"end":return e.stop()}}));var t},handleOnRemove:function(e,t){h(Object(o.a)({},g,{fileList:[]}))},accept:"image/png, image/jpeg, image/gif"},(null===g.openline_image||0===g.openline_image.length)&&l.a.createElement(Ie.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"})," ","Upload Image"))),l.a.createElement(Ut.a,{visible:g.previewVisible,title:g.previewTitle,centered:!0,onOk:function(e){return h(Object(o.a)({},g,{previewVisible:!1}))},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:g.previewImage})),Q(g.openline_id)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},ReactHtmlParser(g.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:Q(g.openline_id)},Q(g.openline_id)))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:function(e){if(g.name&&g.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&g.help_text&&g.help_text.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&g.start_date){var t,a;e.preventDefault();var n=JSON.parse(b("user")),l={};"status: false"!=T&&g.name!==Y.state.name||!g.openline_image||(i(!0),y(!1),V(l)),g.openline_image&&0!==g.openline_image.length||(y(!1),k(!0)),(null===(t=g.openline_image)||void 0===t?void 0:t.length)>0&&"1"===(null===(a=g.ImgfileList[0])||void 0===a?void 0:a.uid)?H(g.openline_image,(function(e){l={end_date:Fe()(g.end_date).format("DD-MM-YYYY"),help_text:g.help_text,openline_id:g.openline_id,openline_image:e,name:g.name,openline_image_name:g.openline_image_name,start_date:Fe()(g.start_date).format("DD-MM-YYYY"),status_id:1,updated_by:parseInt(Bc.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Bc.enc.Utf8)),created_by:parseInt(Bc.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Bc.enc.Utf8))},"status: false"!=T&&g.name!==Y.state.name||V(l)})):g.ImgfileList[0]&&(l={end_date:Fe()(g.end_date).format("DD-MM-YYYY"),help_text:g.help_text,openline_id:g.openline_id,openline_image:g.ImgfileList[0].base64,name:g.name,openline_image_name:g.openline_image_name,start_date:Fe()(g.start_date).format("DD-MM-YYYY"),status_id:g.status?4:1,updated_by:parseInt(Bc.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Bc.enc.Utf8)),created_by:parseInt(Bc.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Bc.enc.Utf8))})}else y(!0)},"data-test":"stepOneNext",className:"mr-4"},"Update"),l.a.createElement(Ie.a,{type:"primary",htmlType:"submit",onClick:function(e){window.location="/orgcc/openlinedirectory"},"data-test":"stepOneNext",className:"mr-4"},ie),5===g.status_id?l.a.createElement(l.a.Fragment,null," "):l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(){if(g.name&&g.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0){y(!1),P(!1);var e=JSON.parse(b("user")),t={end_date:g.start_date?Fe()(g.start_date).format("DD-MM-YYYY"):null,help_text:g.help_text,openline_id:g.openline_id,openline_image:g.ImgfileList.length>0?g.ImgfileList[0].base64:null,name:g.name,openline_image_name:g.openline_image_name,start_date:g.end_date?Fe()(g.end_date).format("DD-MM-YYYY"):null,status_id:4,updated_by:parseInt(Bc.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Bc.enc.Utf8)),created_by:parseInt(Bc.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Bc.enc.Utf8))};"status: false"!=T&&g.name!==Y.state.name||V(t)}else y(!1),P(!0)}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))))))))},Gc=a(273),Kc=j.a.Content;var Wc=Object(i.b)((function(e){return{createhelpdata:e.help.createhelpdata}}))((function(e){var t=Object(u.g)(),a=Object(Gc.useForm)(),r=Object(c.a)(a,1)[0],s=Object(n.useState)({title:"",message:"",help_id:""}),i=Object(c.a)(s,2),d=i[0],p=i[1],g=Object(n.useState)("Create Help"),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(!1),b=Object(c.a)(v,2),y=b[0],_=b[1],O=Object(n.useState)(!1),N=Object(c.a)(O,2),w=N[0],k=N[1];Object(n.useEffect)((function(){e.location.state&&e.location.state.help&&(p({title:e.location.state.help.title,message:e.location.state.help.message,help_id:e.location.state.help.help_id}),E("Edit Help"),r.setFieldsValue({title:e.location.state.help.title,message:e.location.state.help.message}))}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Kc,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/help"},l.a.createElement(gt.a.Item,null,ne)),l.a.createElement(gt.a.Item,null,f))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},f)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(D.a,{spinning:w,size:"large"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",form:r},y?l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})):"",l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message Title",value:d.title},l.a.createElement(ht.a.Item,{className:"required",name:"title",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(Pa.a,{showCount:!0,maxLength:80,value:d.title,onChange:function(e){return function(e){p(Object(o.a)({},d,Object(ut.a)({},e.target.id,e.target.value)))}(e)},id:"title",name:"title",className:"input-control",htmlFor:"directoryName",autoComplete:"off"})))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message",value:d.message},l.a.createElement(ht.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(Ss,{value:d.message,onChange:function(e){return function(e,t){p((function(a){return Object(o.a)({},a,Object(ut.a)({},t,e))}))}(e,"message")},id:"message"})))))),l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(Ie.a,{onClick:function(){k(!0);var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(d.title&&d.message){_(!1);var t=d;"Create Help"===f?B.a.post(q+"createhelp/",t,e).then((function(){k(!1),window.location="/orgcc/help"})):"Edit Help"===f&&B.a.put(q+"createhelp/",t,e).then((function(e){200===e.status&&(k(!1),window.location="/orgcc/help")}))}else _(!0)},type:"primary",htmlType:"submit"},"Save"),l.a.createElement(Ie.a,{onClick:function(){t.push("/orgcc/help")},className:"ml-4",type:"secondary"},ie))))))))))))))})),Jc=a(510),Zc=a.n(Jc),$c=j.a.Content,Xc=function(e){var t=Object(u.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e.data}),l.a.createElement($c,{"data-test":"Broadcast",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Help")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"c-vector-area d-flex justify-content-center"},l.a.createElement("img",{src:Zc.a,alt:"Create Help"})),l.a.createElement("p",{className:"text-center pt-3"},'Populate information that employees will see in "Help" section under Settings in the app.'),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(ct.a,{className:"mt-1"})),l.a.createElement(C.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ie.a,{onClick:function(){t.push("/orgcc/createhelp")},type:"primary"},"Create Help"))))))))))},ei=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!0},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHelp()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"deleteHelp",value:function(){if(this.props.help){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"deletehelp/"+this.props.help.help_id,e).then((function(){window.location="/orgcc/help"})).catch((function(e){}))}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ut.a,{title:"Delete Help",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this help?")))}}]),t}(n.Component),ti=j.a.Content,ai=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1];return l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(m.b,{to:{pathname:"/orgcc/edithelp",state:{help:e&&e.helps&&e.helps[0]?e.helps[0]:{}}}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/edithelp"},me))),l.a.createElement(m.b,{onClick:function(){s(!0)}},l.a.createElement("li",null,l.a.createElement("a",null,ue),r?l.a.createElement(ei,{help:e&&e.helps&&e.helps[0]?e.helps[0]:{}}):""))))},ni=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=e.loader;return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e.data}),l.a.createElement(ti,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},ne)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(D.a,{spinning:o,size:"large"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22,className:"editor-data"},l.a.createElement("h6",{className:"font-weight-md mb-1"},e.helps&&e.helps[0]&&e.helps[0].title?e.helps[0].title:"")),l.a.createElement(C.a,{span:2,className:"d-flex justify-content-end"},l.a.createElement(U.a,{placement:"bottom",content:ai(e),trigger:"click",visible:r,onVisibleChange:function(){s(!r)}},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon",className:"pr-4"})))),l.a.createElement("p",{className:"pt-2 mt-3"},e.helps&&e.helps[0]&&e.helps[0].message?Ua()(e.helps[0].message):"")))))))))},li=function(){return function(e){return sa.getHelps().then((function(t){return e({type:"HELP_SUCCESS",payload:{helpsdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"HELP_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}};var ri=Object(i.b)((function(e){return{helpsdata:e.help.helpsdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1];Object(n.useEffect)((function(){var t=e.dispatch;s(!1),t(li()),s(!0)}),[m]),Object(n.useEffect)((function(){null===e.helpsdata?s(!0):null!==e.helpsdata&&s(!1)}),[e.helpsdata]);return r||null===e.helpsdata||0!==e.helpsdata.length?l.a.createElement(ni,{helps:e.helpsdata,data:e,loader:r,statusOnClicked:function(){u(!m)}}):l.a.createElement(Xc,{data:e})})),si=j.a.Content,oi=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=(a[0],a[1],e.loader);return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amWEBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Ca,{amWEBUser:!0,data:e.data}),l.a.createElement(si,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},ne)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(D.a,{spinning:r,size:"large"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22,className:"editor-data"},l.a.createElement("h6",{className:"font-weight-md mb-1"},e.helps&&e.helps[0]&&e.helps[0].title?e.helps[0].title:"")),l.a.createElement(C.a,{span:2,className:"d-flex justify-content-end"}),l.a.createElement("p",{className:"pt-2 mt-3"},e.helps&&e.helps[0]&&e.helps[0].message?Ua()(e.helps[0].message):"")))))))))};var ci=Object(i.b)((function(e){return{helpsdata:e.help.helpsdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1];Object(n.useEffect)((function(){var t=e.dispatch;s(!1),t(li()),s(!0)}),[m]),Object(n.useEffect)((function(){null===e.helpsdata?s(!0):null!==e.helpsdata&&s(!1)}),[e.helpsdata]);return r||null===e.helpsdata||0!==e.helpsdata.length?l.a.createElement(oi,{helps:e.helpsdata,data:e,loader:r,statusOnClicked:function(){u(!m)}}):l.a.createElement(l.a.Fragment,null)})),ii=function(e){return function(t){return sa.getInfos(e).then((function(e){return t({type:"INFO_SUCCESS",payload:{infosdata:e.data}}),Promise.resolve()}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return t({type:"INFO_FAIL"}),t({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}},mi=j.a.Content;var ui=Object(i.b)((function(e){return{createinfodata:e.info.createinfodata}}))((function(e){var t=Object(u.g)(),a=Object(Gc.useForm)(),r=Object(c.a)(a,1)[0],s=Object(n.useState)({title:"",message:"",info_id:""}),i=Object(c.a)(s,2),d=i[0],p=i[1],g=Object(n.useState)("Create Info"),h=Object(c.a)(g,2),f=h[0],E=h[1],v=Object(n.useState)(!1),b=Object(c.a)(v,2),y=b[0],_=b[1],O=Object(n.useState)(!1),N=Object(c.a)(O,2),w=N[0],k=N[1];Object(n.useEffect)((function(){e.location.state&&e.location.state&&(p(e.location.state),E("Edit Info"),r.setFieldsValue({title:e.location.state.title,message:e.location.state.message}))}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(mi,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/info"},l.a.createElement(gt.a.Item,null,le)),l.a.createElement(gt.a.Item,null,f))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},f)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(D.a,{spinning:w,size:"large"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",form:r},y?l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})):"",l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message Title",value:d.title},l.a.createElement(ht.a.Item,{className:"required",name:"title",rules:[{required:!0,message:"Please enter title"}]},l.a.createElement(Pa.a,{showCount:!0,maxLength:80,value:d.title,onChange:function(e){return function(e){p(Object(o.a)({},d,Object(ut.a)({},e.target.id,e.target.value)))}(e)},id:"title",name:"title",className:"input-control",htmlFor:"directoryName",autoComplete:"off"})))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(yt,{label:"Message",value:d.message},l.a.createElement(ht.a.Item,{className:"required",name:"message",validateStatus:"success"},l.a.createElement(Ss,{value:d.message,onChange:function(e){return function(e,t){p((function(a){return Object(o.a)({},a,Object(ut.a)({},t,e))}))}(e,"message")},id:"message"})))))),l.a.createElement(ht.a.Item,null,l.a.createElement("div",{className:"mt-5"},l.a.createElement(Ie.a,{onClick:function(){k(!0);var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};if(d.title&&d.message){_(!1);var t=d;"Create Info"===f?B.a.post(q+"createinfo/",t,e).then((function(){k(!1),window.location="/orgcc/info"})):"Edit Info"===f&&B.a.put(q+"createinfo/",t,e).then((function(){k(!1),window.location="/orgcc/info"}))}else _(!0)},type:"primary",htmlType:"submit"},"SAVE"),l.a.createElement(Ie.a,{onClick:function(){t.push("/orgcc/info")},className:"ml-4",type:"secondary"},"Cancel"))))))))))))))})),di=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteInfo()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"deleteInfo",value:function(){var e={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.delete(q+"deleteInfo/"+this.props.infoId,e).then((function(){window.location="/orgcc/info"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},ue),l.a.createElement(Ut.a,{title:"Delete Info",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this info?")))}}]),t}(n.Component),pi=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(m.b,{to:{pathname:"/orgcc/editinfo",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editinfo"},me)," ")),l.a.createElement("li",null,l.a.createElement(di,{infoId:e.info_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:qt.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),gi=j.a.Content,hi=_n.a.Paragraph,fi=function(e){var t=e.location.state?e.location.state:{},a=Object(n.useState)(!1),r=Object(c.a)(a,2),s=r[0],o=r[1],i=Object(n.useState)(0),u=Object(c.a)(i,2),d=u[0],p=u[1],g=function(e){o(!0),p(s?d+1:d+0)};return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(gi,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/info"},l.a.createElement(gt.a.Item,null,le)),l.a.createElement(gt.a.Item,null,t.title))),l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"}," ",t.title)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22,className:"editor-data"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"mb-2"},l.a.createElement("div",{className:"show-less show-more-wrapper"},function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:d},l.a.createElement(hi,{ellipsis:{rows:8,expandable:!0,symbol:"Show more",onExpand:g}},Ua()(e)))}(t.message),s&&l.a.createElement("span",null,l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:function(e){o(!1),p(s?d+1:d+0)}},"Show less")))))),l.a.createElement(C.a,{span:2,className:"d-flex justify-content-end"},l.a.createElement(pi,{data:t})))))))))},Ei=j.a.Content,vi=N.a.Search,bi=function(e){var t=Object(u.g)(),a=Object(n.useState)(""),r=Object(c.a)(a,2),s=r[0],o=r[1],i=e.loader,d=[{title:"",dataIndex:"title",key:"title",width:"22%",render:function(e,t){return{children:l.a.createElement("h6",{className:"font-weight-md6 mb-1"},l.a.createElement(m.b,{to:{pathname:"/orgcc/infodetails",state:t}},t.title)),props:{"data-title":"title"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(pi,{data:e}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e.data}),l.a.createElement(Ei,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},le)),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(vi,{onChange:function(e){o(e.target.value)},onBlur:function(){e.setSearchValue(s)},placeholder:"Search"})),l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"}))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(Ie.a,{onClick:function(){t.push("/orgcc/createinfo")},type:"primary"},"Create")))),l.a.createElement(D.a,{spinning:i,size:"large"},l.a.createElement(xe,{rowKey:"info_id",columns:d,data:e.infos}))))))))},yi=a(511),_i=a.n(yi),Oi=j.a.Content,Ni=function(e){var t=Object(u.g)();return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e.data}),l.a.createElement(Oi,{"data-test":"Broadcast",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Info")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("div",{className:"c-vector-area d-flex justify-content-center"},l.a.createElement("img",{src:_i.a,alt:"Create Info"})),l.a.createElement("p",{className:"text-center pt-3"},'Populate information that employees will see in "Info" section under Settings in the app. This section enables employees to use AnonyMoose more effectively.'),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(ct.a,{className:"mt-1"})),l.a.createElement(C.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(Ie.a,{onClick:function(){t.push("/orgcc/createinfo")},type:"primary"},"Create Info"))))))))))};var ji=Object(i.b)((function(e){var t=e.info;return{infosdata:t.infosdata,createinfodata:t.createinfodata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),g=p[0],h=p[1];Object(n.useEffect)((function(){(0,e.dispatch)(ii(g))}),[m,e.createinfodata,g]),Object(n.useEffect)((function(){null===e.infosdata?s(!0):null!==e.infosdata&&s(!1)}),[e.infosdata]);return r||null===e.infosdata||0!==e.infosdata.length||0!==g.length?l.a.createElement(bi,{infos:e.infosdata?e.infosdata:[],data:e,loader:r,statusOnClicked:function(){u(!m)},setSearchValue:function(e){h(e)}}):l.a.createElement(Ni,{data:e})})),wi={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",emptyIcon:l.a.createElement("i",{class:"far fa-smile"}),fullIcon:l.a.createElement("i",{class:"fa fa-smile"}),onChange:function(e){}},Si=N.a.TextArea,Ci=function(e){var t,a,r=e.next,s=e.poll,o=e.setOptionsError,i=e.pollError,u=(e.chartError,e.handlePollOnSelect),d=e.setSingleChoiceResponse,p=e.onCreateChange,g=e.setpollError,h=e.optionsError,f=e.form,E=e.createPoll,v=Object(n.useState)(!1),b=Object(c.a)(v,2),y=b[0],_=b[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other",form:f},y&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),h&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:"Please add options",type:"error",showIcon:!0})),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Poll Title",value:s.pollName},l.a.createElement(Si,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:s.pollName,id:"pollName",onChange:function(e){return p(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};B.a.post(q+"checkpoll/",{title:e.target.value},t).then((function(e){e.data&&g(e.data[0])}))}(e)},autoComplete:"off",className:"required ".concat(Zr.a.sm_textarea)}),"status: false"===i&&s.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollName.length>0&&l.a.createElement(_t.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==i&&l.a.createElement(Et.a,{message:kt,type:"error",showIcon:!0}))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Description",value:s.pollHelpText},l.a.createElement(ht.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"pollHelpText",id:"pollHelpText",name:"pollHelpText",value:s.pollHelpText,autoComplete:"off",maxLength:500,onChange:function(e){return p(e)}}))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:4}},l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:10,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(yt,{label:"Question Type",value:s.pollQuestionType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(t={className:"",htmlFor:"questiontype"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"id","pollQuestionType"),Object(ut.a)(t,"value",s.pollQuestionType),Object(ut.a)(t,"onSelect",(function(e){return u(e,"pollQuestionType")})),t),l.a.createElement(zt.a.Option,{value:"1"},"Select Single"),l.a.createElement(zt.a.Option,{value:"2"},"Select Multiple"),l.a.createElement(zt.a.Option,{value:"3"},"Rating Type"),l.a.createElement(zt.a.Option,{value:"4"},"Select Short Answer Type"),l.a.createElement(zt.a.Option,{value:"5"},"Select Long Answer Type")))))),"3"===s.pollQuestionType?l.a.createElement(C.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Rating Type",value:s.pollRatingType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(a={className:"",htmlFor:"ratingtype"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"id","pollRatingType"),Object(ut.a)(a,"value",s.pollRatingType),Object(ut.a)(a,"onSelect",(function(e){return u(e,"pollRatingType")})),a),l.a.createElement(zt.a.Option,{value:"1"},"Stars"),l.a.createElement(zt.a.Option,{value:"2"},"Smiley"),l.a.createElement(zt.a.Option,{value:"3"},"Thermometer"),l.a.createElement(zt.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(zt.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Question",value:s.pollQuestion},l.a.createElement(ht.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:s.pollQuestion,value:s.pollQuestion,autoComplete:"off",maxLength:500,onChange:function(e){return p(e)}}))))),l.a.createElement(C.a,{span:24,md:11,className:"white-bg ml-0 ml-lg-5 p-4 mb-4 mb-lg-0 ".concat(Zr.a.rating_img_wrapper)},s.pollQuestionType.length>0?null:l.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},lt),"3"===s.pollQuestionType&&s.pollRatingType?"1"===s.pollRatingType?l.a.createElement(Xr.a,Object.assign({},wi,{value:s.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return u(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:is.a,alt:"send message"}):"3"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:rs.a,alt:"send message"}):"4"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:os.a,alt:"send message"}):"5"===s.pollRatingType?l.a.createElement("img",{className:"font-size ".concat(Zr.a.steps_img),src:us.a,alt:"send message"}):null:"1"===s.pollQuestionType||"2"===s.pollQuestionType?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(ho,{setSingleChoiceResponse:d,pollResponse:s.pollResponse,questionType:s.pollQuestionType}))):null),l.a.createElement("div",{span:24,className:"btn-row-full-width"},l.a.createElement(Ie.a,{type:"primary",className:"mr-4 mb-3",htmlType:"submit",onClick:function(e){return function(e,t){e.preventDefault(),s.pollName&&s.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollHelpText&&s.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollQuestionType&&s.pollQuestionType.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&s.pollQuestion?"1"!==s.pollQuestionType&&"2"!==s.pollQuestionType||0!==s.pollResponse.length?"3"===s.pollQuestionType&&"3"===s.pollQuestionType&&0===s.pollRatingType.length?(_(!0),o(!1)):(_(!1),o(!1),"next"===t?r():E()):(o(!0),_(!1)):(_(!0),o(!1))}(e,"next")},"data-test":"stepOneNext"},oe),l.a.createElement(Ie.a,{type:"link",className:"link",onClick:function(e){s.pollName&&s.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0?(_(!1),o(!1),E()):(_(!1),o(!1))}},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft")))))))))))},Di=function(e){var t,a,r=e.next,s=e.prev,o=e.uploadError,i=e.poll,u=e.cug,d=e.handleStepOneUpload,p=e.handleBeforeUpload,g=e.handleOnRemove,h=e.handlePollImagePreview,f=e.handleCancel,E=e.onChange,v=e.setPoll,b=e.onSwitchChange,y=e.setPollsDate,_=e.handleOnSelect,O=e.handleOnCUGSelect,N=e.disabledStartDate,j=e.disabledEndDate,w=(e.itemCleared,e.createPoll),D=Object(n.useState)(!1),k=Object(c.a)(D,2),x=k[0],I=k[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)(i.pollStartTime?i.pollStartTime:new Date),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)(i.pollEndTime?i.pollEndTime:new Date),z=Object(c.a)(L,2),H=z[0],B=z[1],q=Object(n.useState)(""),V=Object(c.a)(q,2),Q=V[0],G=(V[1],Object(n.useState)(i.timezone1?i.timezone1:"Asia/Kolkata")),K=Object(c.a)(G,2),W=K[0],J=K[1],Z=function(e,t){e.preventDefault(),o?M(!0):0===i.pollStartDate.length||0===i.timezone1.length?"next"===t?I(!0):(I(!1),w()):(I(!1),M(!1),"next"===t?r():w())},$=function(e){J(e),_("timezone1",e),function(e){var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t);B(a);var n=i;n.pastStartTimeError=!1,n.pollStartTime=a,v(n)}(e),function(e){var t=Fe()().tz(e).format("YYYY-MM-DDTHH:mm:ss"),a=new Date(t);R(a);var n=i;n.pastEndTimeError=!1,n.pollEndTime=a,v(n)}(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(C.a,{span:24,lg:18},u&&Object.keys(u).length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mb-4"},"Configure CUG"),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.keys(u).map((function(e,t){if(e.length>0)return l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row mb-3"},l.a.createElement(ht.a.Item,{className:"mb-0",name:e},l.a.createElement(_s,{cugData:u,pollCug:i.cugDetails,item:e,handleOnCUGSelect:O,itemRemoved:Q}),l.a.createElement(qr.a,{className:"down-arrow-ico multiselect-arrow"})))})))):null,l.a.createElement(S.a,{className:"mt-4"},l.a.createElement("h6",null,pe),l.a.createElement(C.a,{span:24,className:"gutter-row"},Y&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Tt,type:"error",showIcon:!0})),l.a.createElement(ht.a.Item,{name:"upload",className:"upload-list"},l.a.createElement(_o,{file:i.pollDocument,handleStepOneUpload:d,handleBeforeUpload:p,handleOnRemove:g,handlePollImagePreview:h,handleCancel:f,poll:i})))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-3"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:8,lg:8,xl:6,className:"mb-3 t-2 mb-y-0"},l.a.createElement(ht.a.Item,{label:"Show result to users",className:"mb-0"},l.a.createElement(yo.a,{id:"showResult",checked:i.showResult,onChange:function(e,t){return E(e,t)}}))),i.showResult?l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:24,lg:12},i.switch?l.a.createElement("img",{className:"w-100",src:No.a,alt:"Pie Chart"}):l.a.createElement("img",{className:"w-100",src:wo.a,alt:"Bar Chart"})),l.a.createElement(C.a,{className:"toggle-switch mt-3 pl-5"},l.a.createElement(yo.a,{id:"showChart",checkedChildren:"Pie Chart",unCheckedChildren:"Bar Chart",onChange:function(e,t){return b(e,t)}}))):l.a.createElement(C.a,null))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-4 mb-3"},l.a.createElement("h6",null,"Schedule"),x&&l.a.createElement(ht.a.Item,null,l.a.createElement(Et.a,{message:Ot,type:"error",showIcon:!0})),l.a.createElement(yt,{label:"Time Zone",value:i.timezone1},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"timezone1"},l.a.createElement(zt.a,{className:"",htmlFor:"timezone1",onSelect:function(e){return $(e)},defaultValue:i.timezone1},Fe.a.tz.names().map((function(e){var t=Fe()().format("YYYY-MM-DDTHH:mm:ss"),a=Fe.a.utc(t).tz("".concat(e)),n=a?a.format("Z"):"",r="(UTC ".concat(n,") ")+e;return l.a.createElement(zt.a.Option,{value:e},r)}))))),l.a.createElement(yt,{label:"Select Start Date",value:"sDate"},l.a.createElement(ht.a.Item,{name:"sDate",rules:[{required:!0}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row mb-3 mb-lg-0"},l.a.createElement(ft.a,(t={className:"w-100",name:"sDate"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"value",i.pollStartDate),Object(ut.a)(t,"disabledDate",N),Object(ut.a)(t,"onChange",(function(e){return y("pollStartDate",e)})),t)),i.pastStartTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(Kr.a,{value:H,onChange:function(e){var t=e.target.value,a=Fe()(t).format("HH:mm"),n=i.pollStartDate?Fe()(i.pollStartDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),l=new Date(n+"T"+a),r=Fe()().tz(W).format("YYYY-MM-DDTHH:mm");if(l<new Date(r));else{B(l);var s=i;s.pollStartTime=l,v(s)}}})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"})))),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate",rules:[{required:!0,message:Dt}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row mb-3 mb-lg-0"},l.a.createElement(ft.a,{className:"w-100",name:"eDate",value:i.pollEndDate,disabledDate:j,disabled:0===(null===(a=i.pollStartDate)||void 0===a?void 0:a.length)||!i.pollStartDate,onChange:function(e){return y("pollEndDate",e)}}),i.pastEndTimeError&&l.a.createElement(Et.a,{message:xt,type:"error",showIcon:!0})),l.a.createElement(C.a,{span:"24",lg:8,className:"mb-3 mb-lg-0"},l.a.createElement(Kr.a,{value:P,onChange:function(e){var t=e.target.value,a=Fe()(t).format("HH:mm"),n=i.pollEndDate?Fe()(i.pollEndDate).format("YYYY-MM-DD"):Fe()().format("YYYY-MM-DD"),l=new Date(n+"T"+a),r=Fe()().tz(W).format("YYYY-MM-DDTHH:mm");if(l<new Date(r));else{R(l);var s=i;s.pollEndTime=l,v(s)}}})))))),l.a.createElement("div",{span:24,className:"btn-row-full-width"},l.a.createElement(Ie.a,{className:"mr-4 mb-3",type:"secondary",onClick:s,"data-test":"steptwoPrev"},ce),l.a.createElement(Ie.a,{type:"secondary",className:"mr-4 mb-3",htmlType:"submit",onClick:function(e){return Z(e,"next")}},oe),l.a.createElement(Ie.a,{htmlType:"submit",type:"link",className:"link",onClick:function(e){return Z(e,"draft")},"data-test":"steptwoNext"},l.a.createElement(m.b,null,l.a.createElement("b",{className:"pl-1"}," ","Save as Draft"))))))))},ki={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",emptyIcon:l.a.createElement("i",{class:"far fa-smile"}),fullIcon:l.a.createElement("i",{class:"fa fa-smile"}),onChange:function(e){}},xi=N.a.TextArea,Ii=function(e){var t,a,r,s=e.poll,o=e.prev,c=e.handleCancel,i=e.handlePollImagePreview,m=e.createPoll;Object(n.useEffect)((function(){console.log("----pollStartTime----",s.pollStartTime,"----pollStartDate----",s.pollStartDate),console.log("----pollEndTime----",s.pollEndTime,"----pollEndDate----",s.pollEndDate)}),[{poll:s,prev:o,handleCancel:c,handlePollImagePreview:i,createPoll:m}]);var u="";return s.cugDetails&&Object.values(s.cugDetails).some((function(e){e.length>0&&(u="Configure CUG")})),l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24},l.a.createElement(ht.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Poll Title",value:s.pollName},l.a.createElement(ht.a.Item,{className:"required",name:"polltitle",id:"polltitle"},l.a.createElement(l.a.Fragment,null,l.a.createElement(xi,{htmlFor:"polltitle",value:s.pollName,id:"polltitle",name:"polltitle",disabled:!0}))))),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Description",value:s.pollHelpText},l.a.createElement(ht.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText"},l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{className:"input-control",htmlFor:"pollHelpText",id:"pollHelpText",name:"pollHelpText",value:s.pollHelpText,disabled:!0}))))),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:4}},l.a.createElement(C.a,{span:24,lg:12,className:"gutter-row"},l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:24,md:10,className:"mb-3 t-2 mb-y-0 gutter-row"},l.a.createElement(yt,{label:"Question Type",value:s.pollQuestionType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"pollQuestionType"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(t={className:"",htmlFor:"pollQuestionType"},Object(ut.a)(t,"className","required"),Object(ut.a)(t,"id","pollQuestionType"),Object(ut.a)(t,"value",s.pollQuestionType),Object(ut.a)(t,"disabled",!0),t),l.a.createElement(zt.a.Option,{value:"1",disabled:""!==s.pollChartType&&"4"===s.pollChartType},"Select Single"),l.a.createElement(zt.a.Option,{value:"2",disabled:""!==s.pollChartType&&"4"===s.pollChartType},"Select Multiple"),l.a.createElement(zt.a.Option,{value:"3",disabled:""!==s.pollChartType&&"4"!==s.pollChartType},"Rating Type")))))),"3"===s.pollQuestionType?l.a.createElement(C.a,{span:24,md:10,lg:8,className:"gutter-row"},l.a.createElement(yt,{label:"Rating Type",value:s.pollRatingType},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"ratingtype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,(a={className:"",htmlFor:"ratingtype"},Object(ut.a)(a,"className","required"),Object(ut.a)(a,"id","ratingtype"),Object(ut.a)(a,"value",s.pollRatingType),Object(ut.a)(a,"disabled",!0),a),l.a.createElement(zt.a.Option,{value:"1"},"Stars"),l.a.createElement(zt.a.Option,{value:"2"},"Smiley"),l.a.createElement(zt.a.Option,{value:"3"},"Thermometer"),l.a.createElement(zt.a.Option,{value:"4"},"ThumbsUp"),l.a.createElement(zt.a.Option,{value:"5"},"Ladder")))))):null)),l.a.createElement(C.a,{span:24,className:"gutter-row"},l.a.createElement(yt,{label:"Question",value:s.pollQuestion},l.a.createElement(ht.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(N.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:s.pollQuestion,value:s.pollQuestion,disabled:!0}))))),l.a.createElement(C.a,{span:24,md:11,className:"white-bg ml-5 p-4 ".concat(Zr.a.rating_img_wrapper)},"3"===s.pollQuestionType&&s.pollRatingType?"1"===s.pollRatingType?l.a.createElement(Xr.a,Object.assign({},ki,{value:s.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return handlePollOnSelect(e,"pollRatingResponse")},classNames:"mt-3"})):"2"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:is.a,alt:"send message"}):"3"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:rs.a,alt:"send message"}):"4"===s.pollRatingType?l.a.createElement("img",{className:"font-size",src:os.a,alt:"send message"}):"5"===s.pollRatingType?l.a.createElement("img",{className:"font-size ".concat(Zr.a.steps_img),src:us.a,alt:"send message"}):null:"1"===s.pollQuestionType||"2"===s.pollQuestionType?l.a.createElement("div",null,l.a.createElement(fo,{pollResponse:s.pollResponse,questionType:s.pollQuestionType})):null))))),l.a.createElement(C.a,{span:24},s.cugDetails&&Object.keys(s.cugDetails).length>0?l.a.createElement(l.a.Fragment,null,u.length>0?l.a.createElement("h6",{className:"mb-4"},u):null,l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Object.entries(s.cugDetails).map((function(e){var t;if((null===(t=Object.values(e[1]))||void 0===t?void 0:t.length)>0)return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{span:24,lg:8,className:"gutter-row mb-3"},l.a.createElement("label",null,e[0].substring(e[0].indexOf("_")+1,e[0].length)),l.a.createElement(C.a,{span:24,className:"tags-wrapper tag-view align-items-center"},l.a.createElement(_s,{pollCug:s.cugDetails,item:e[0],viaStep3:!0}))))})))):null,s.pollDocument.length>0?l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement("h6",null,pe),l.a.createElement(ht.a.Item,{name:"upload",className:"upload-list"},l.a.createElement(kn.a,{listType:"picture",fileList:s.pollDocument,onPreview:function(e){return i(e)}}),l.a.createElement(Ut.a,{visible:s.previewVisible,title:s.previewTitle,centered:!0,onOk:function(e){return c(e)},okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Close"},l.a.createElement("img",{alt:"image",style:{width:"100%"},src:s.previewImage})))):null,l.a.createElement(C.a,{span:24,className:"gutter-row mt-5"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,md:8,lg:8,xl:6,className:"mb-3 t-2 mb-y-0"},l.a.createElement(ht.a.Item,{name:"showresult",label:"Show result to users",className:"mb-0"},l.a.createElement(yo.a,{id:"showResult",checked:s.showResult,disabled:!0}))),s.showResult?l.a.createElement(C.a,{span:24},l.a.createElement(C.a,{span:12},s.switch?l.a.createElement("img",{className:"w-100",src:No.a,alt:"Pie Chart"}):l.a.createElement("img",{className:"w-100",src:wo.a,alt:"Bar Chart"})),l.a.createElement(C.a,{className:"toggle-switch mt-3 pl-5"},l.a.createElement(yo.a,{checkedChildren:"Bar Chart",unCheckedChildren:"Pie Chart",disabled:!0}))):l.a.createElement(C.a,null))),l.a.createElement(C.a,{span:24,className:"gutter-row mt-4 mb-3"},l.a.createElement("h6",null,"Schedule"),l.a.createElement(yt,{label:"Time Zone",value:s.timezone1},l.a.createElement(ht.a.Item,{className:"required mb-0",name:"timezone1"},l.a.createElement(zt.a,{className:"",htmlFor:"timezone1",disabled:!0,defaultValue:s.timezone1}))),l.a.createElement(yt,{label:"Select Start Date",value:"sDate"},l.a.createElement(ht.a.Item,{name:"sDate",rules:[{required:!0}]},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row"},l.a.createElement(ft.a,(r={className:"w-100",name:"sDate"},Object(ut.a)(r,"className","required"),Object(ut.a)(r,"disabled",!0),Object(ut.a)(r,"value",s.pollStartDate),r))),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(Kr.a,{value:s.pollStartTime,disabled:!0})),l.a.createElement(C.a,{span:"24",lg:8})))),l.a.createElement(yt,{label:"Select End Date",value:"eDate"},l.a.createElement(ht.a.Item,{name:"eDate"},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(C.a,{span:"24",lg:8,className:"gutter-row"},l.a.createElement(ft.a,{className:"w-100",name:"eDate",disabled:!0,value:s.pollEndDate})),l.a.createElement(C.a,{span:"24",lg:8},l.a.createElement(Kr.a,{value:s.pollEndTime,disabled:!0}))))))),l.a.createElement("div",{span:24,className:"mt-5 btn-row-full-width"},l.a.createElement(Ie.a,{type:"secondary",htmlType:"submit",onClick:o,className:"mr-4 mb-3"},ce),l.a.createElement(Ie.a,{type:"primary",className:"md",onClick:m},"Publish")))))},Ti=j.a.Content,Ai=pt.a.Step,Yi=[{title:"Add Details",content:"First-content"},{title:"Schedule Poll",content:"Second-content"},{title:"Review Details",content:"Last-content"}],Mi=a(41);var Ui=Object(i.b)((function(e){return{cug:e.cug.cug}}))((function(e){Object(u.g)();var t=Object(u.h)(),a=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:"",showResult:!1,switch:!1,timezone1:Fe.a.tz.guess(),pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingResponse:0,pollStartDate:Fe()(ns.formatAsDDMMYYYY(new Date),"DD_MM_YYYY"),pollEndDate:"",attachmentName:"",pollStartTime:new Date,pollEndTime:new Date,pastStartTimeError:!1,pastEndTimeError:!1,pollResponse:[],pollImageValidation:!0,previewVisible:!1,previewImage:"",previewTitle:"",pollRatingType:"",cugDetails:{},cugData:{},pollOffsets:Fe.a.tz.zone(Fe.a.tz.guess()).offsets[Fe.a.tz.zone(Fe.a.tz.guess()).offsets.length-1]}),r=Object(c.a)(a,2),s=r[0],i=r[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(0),E=Object(c.a)(f,2),v=E[0],y=E[1],_=Object(n.useState)(""),O=Object(c.a)(_,2),N=O[0],w=O[1],C=Object(n.useState)(!1),k=Object(c.a)(C,2),x=k[0],I=k[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),Y=A[0],M=A[1],U=Object(n.useState)(!1),F=Object(c.a)(U,2),P=F[0],R=F[1],L=Object(n.useState)(""),H=Object(c.a)(L,2),V=H[0],Q=H[1],G=ht.a.useForm(),K=Object(c.a)(G,1)[0],W=Object(n.useState)(!1),J=Object(c.a)(W,2),Z=J[0],$=J[1];Object(n.useEffect)((function(){if(null!==t.state&&void 0!==t.state){var e={};Object.keys(t.state).forEach((function(t){e=Object(o.a)({},e,Object(ut.a)({},t,[]))})),i(Object(o.a)({},s,{cugDetails:e,cugData:t.state}))}}),[t.state]);var X=function(){var e,t=JSON.parse(b("user")),a={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=[],l={};s.pollResponse.map((function(e){n.push({option_text:e})})),h(!0),l=P?{create_poll:{title:s.pollName,help_text:s.pollHelpText,image:s.pollDocument&&s.pollDocument[0]?s.pollDocument[0].base64:"",show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,image_name:V,poll_question_type:parseInt(s.pollQuestionType),question:s.pollQuestion,poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",start_date:""!==s.pollStartDate?ns.formatAsDDMMYYYY(s.pollStartDate):null,start_time:s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollStartTime):null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:""!==s.pollEndDate?ns.formatAsDDMMYYYY(s.pollEndDate):null,end_time:s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollEndTime):null,cug_filters:s.cugDetails,created_by:parseInt(Mi.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Mi.enc.Utf8))},option:n}:0===(null===(e=s.pollDocument)||void 0===e?void 0:e.length)?{create_poll:{title:s.pollName,help_text:s.pollHelpText,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:""!==s.pollStartDate?ns.formatAsDDMMYYYY(s.pollStartDate):null,start_time:s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollStartTime):null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:""!==s.pollEndDate?ns.formatAsDDMMYYYY(s.pollEndDate):null,end_time:s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollEndTime):null,cug_filters:s.cugDetails,created_by:parseInt(Mi.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Mi.enc.Utf8))},option:n}:{create_poll:{title:s.pollName,help_text:s.pollHelpText,document:s.pollDocument&&s.pollDocument[0]?s.pollDocument[0].base64:"",document_name:V,show_result_to_users:s.showResult?1:0,poll_result_chart_type:s.pollChartType?parseInt(s.pollChartType):2,poll_question_type:parseInt(s.pollQuestionType),poll_question_rating_type:s.pollRatingType?parseInt(s.pollRatingType):"",question:s.pollQuestion,start_date:""!==s.pollStartDate?ns.formatAsDDMMYYYY(s.pollStartDate):null,start_time:s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollStartTime):null,offset:s.pollOffsets,timezone:s.timezone1&&s.timezone1.length>0?s.timezone1:"",end_date:""!==s.pollEndDate?ns.formatAsDDMMYYYY(s.pollEndDate):null,end_time:s.pollStartTime instanceof Date?ns.formatAsHHmmss(s.pollEndTime):null,cug_filters:s.cugDetails,created_by:parseInt(Mi.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Mi.enc.Utf8))},option:n};var r=s.cugDetails;if(r){var o={},c=Object.keys(r);c&&c.forEach((function(e,t){var a=r[e],n=e.split("_")[1];Object.values(a).length>0&&(o[n]=Object.values(a))})),l.create_poll.cug_filters=o}B.a.post(q+"poll/",l,a).then((function(){h(!1),window.location="/orgcc/pollsdirectory"})).catch((function(e){h(!1)}))},ee=function(e){var t=e.includes("image");R(!!t)},te=function(e){var t,a,n,l,r,c;return z.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(!((null===(t=e.name)||void 0===t?void 0:t.includes("jpeg"))||(null===(a=e.name)||void 0===a?void 0:a.includes("jpg"))||(null===(n=e.name)||void 0===n?void 0:n.includes("png"))||(null===(l=e.name)||void 0===l?void 0:l.includes("gif"))||(null===(r=e.name)||void 0===r?void 0:r.includes("jfif"))||(null===(c=e.name)||void 0===c?void 0:c.includes("tiff")))){m.next=7;break}return m.next=3,z.a.awrap(se(e.originFileObj));case 3:e.preview=m.sent,i(Object(o.a)({},s,{previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})),m.next=8;break;case 7:return m.abrupt("return",!1);case 8:case"end":return m.stop()}}))},ne=function(){y(v+1)},le=function(){y(v-1)},re=function(e){return i(Object(o.a)({},s,{previewVisible:!1}))},se=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Ti,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(gt.a.Item,null,ae)),l.a.createElement(gt.a.Item,null,"Create Poll"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Poll")),l.a.createElement(pt.a,{className:"mt-2",current:v},Yi.map((function(e){return l.a.createElement(Ai,{key:e.title,title:e.title})}))),l.a.createElement(D.a,{spinning:g,size:"large"},l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,0===v?l.a.createElement(Ci,{next:ne,poll:s,setOptionsError:$,pollError:N,form:K,chartError:x,handlePollOnSelect:function(e,t){var a;("3"===e&&"pollQuestionType"===t?function(e){"3"===e&&"4"!=s.pollChartType&&I(!0)}(e):I(!1),"pollRatingType"===t)?i(Object(o.a)({},s,(a={},Object(ut.a)(a,t,e),Object(ut.a)(a,"pollResponse",["1","2","3","4","5"]),a))):i(Object(o.a)({},s,Object(ut.a)({},t,e)))},setSingleChoiceResponse:function(e){i(Object(o.a)({},s,Object(ut.a)({},"pollResponse",e)))},onCreateChange:function(e){i(Object(o.a)({},s,Object(ut.a)({},e.target.id,e.target.value)))},setpollError:w,optionsError:Z,createPoll:X}):1===v?l.a.createElement(Di,{next:ne,prev:le,poll:s,uploadError:Y,setOptionsError:$,setPollsDate:function(e,t){i(Object(o.a)({},s,Object(ut.a)({},e,t)))},disabledStartDate:function(e){return e&&e<Fe()().startOf("day")},disabledEndDate:function(e){return s.pollStartDate?e&&e<Fe()(s.pollStartDate):e&&e<Fe()().startOf("day")},handleStepOneUpload:function(e,t){"removed"===e.file.status&&M(!1);var a=e.fileList.slice(-1);ee(e.file.type),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result,e.response="Uploaded successfully"},a.readAsDataURL(e.originFileObj)})),Q(e.file.name),i(Object(o.a)({},s,Object(ut.a)({},t,a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;s?M(!1):(M(!0),Ur.b.error("".concat(e.name," is not a supported format file type.")));var o="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,c="application/pdf"===e.type||a||n||l||r,i=e.size/1024/1024<5,m=e.size/1024/1024<10;return o&&(!i&&o?(M(!0),Ur.b.error("Image must smaller than 5MB!")):M(!1)),c&&(!m&&c?(M(!0),Ur.b.error("Document must smaller than 10MB!")):M(!1)),s&&i||m},handleOnRemove:function(e,t){i(Object(o.a)({},s,{pollImageValidation:!0}))},handlePollImagePreview:te,handleCancel:re,onChange:function(e,t){i(Object(o.a)({},s,Object(ut.a)({},t.target.id,e)))},setPoll:i,onSwitchChange:function(e,t){i(Object(o.a)({},s,{switch:e}))},handleOnSelect:function(e,t){var a=Fe()().format("YYYY-MM-DDTHH:mm:ss"),n=-Fe.a.utc(a).tz("".concat(t)).utcOffset(),l=Fe()().tz(t).format("YYYY-MM-DDTHH:mm:ss");new Date(l),new Date(l);s[e]=t,s.pollOffsets=n,i(s)},handleOnCUGSelect:function(e,t){i(Object(o.a)({},s,{cugDetails:Object(o.a)({},s.cugDetails,Object(ut.a)({},e,Object(dt.a)(t)))}))},cug:s.cugData,itemCleared:function(e){var t=Object.keys(s.cugDetails).reduce((function(t,a){return t[a]=a===e?[]:s.cugDetails[a],t}),{});i(Object(o.a)({},s,{cugDetails:t}))},createPoll:X}):2===v?l.a.createElement(Ii,{prev:le,poll:s,handlePollImagePreview:te,handleCancel:re,createPoll:X}):""))))))))})),Fi=j.a.Content,Pi=(_n.a.Paragraph,N.a.Search),Ri=function(e){e.setFilterOptions;var t=e.setSearchValue,a=e.setSortOptions,r=e.data,s=e.broadcastmessages,o=e.loader,i=Object(n.useState)(!1),m=Object(c.a)(i,2),u=(m[0],m[1],Object(n.useState)(0)),d=Object(c.a)(u,2),p=d[0],g=(d[1],Object(n.useState)("")),h=Object(c.a)(g,2),f=h[0],E=h[1];return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amIDBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(ka,{amIDBUser:!0,data:r}),l.a.createElement(Fi,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Broadcast Messages")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Pi,{placeholder:"Search",onSearch:function(e){t(e),E(e)}})),l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(zt.a,{className:"w-100 w-md-75",defaultValue:"Sort",onSelect:function(e){return function(e){a(e)}(e)}},l.a.createElement(Option,{value:"DESC"},"Newest at top"),l.a.createElement(Option,{value:"ASC"},"Oldest at top"))))))),l.a.createElement(D.a,{spinning:o,size:"large"},l.a.createElement("div",{className:"mid-content"},null===s||void 0===s?void 0:s.map((function(e){var t,a;return l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22},l.a.createElement("h6",{className:"font-weight-md mb-1"},Ua()(function(e,t){return t?e.replace(new RegExp(t,"gi"),(function(e){return"<mark>".concat(e,"</mark>")})):e}(e.title,f))),"7"===e.status_id?l.a.createElement("small",null,"Scheduled on: ",Fe()(e.scheduled_date).utc().local().format("MM/DD/YYYY")):l.a.createElement("small",null,"Published on: ",Fe()(e.scheduled_date).utc().local().format("MM/DD/YYYY")),l.a.createElement("div",{className:"show-less show-more-wrapper"},l.a.createElement(Ls.a,{lines:3,more:"Show more",less:"Show less",className:"content-css"},function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:p},Ua()(e))}(e.message))),null!=e.broadcast_images?null===(t=e.broadcast_images)||void 0===t?void 0:t.map((function(e){return l.a.createElement(Dn.a,{width:100,src:e.url,className:"pr-3",placeholder:e.name,alt:e.name})})):null,null!=e.broadcast_documents?null===(a=e.broadcast_documents)||void 0===a?void 0:a.map((function(e){return l.a.createElement("div",{className:"attachment-wrapper"},l.a.createElement("span",{className:"icon icon-doc pr-2"}),l.a.createElement("a",{href:e.url,target:"_blank"},e.name))})):null),l.a.createElement(ct.a,{className:"w-100 mt-2"}))})))))))))};var Li=Object(i.b)((function(e){return{broadcastmessagedata:e.broadcastMessages.broadcastmessagedata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)({status_id:[9]}),i=Object(c.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)("DESC"),E=Object(c.a)(f,2),v=E[0],b=E[1];Object(n.useEffect)((function(){var t=e.dispatch;console.log("filter",m),t(As(m,g,v))}),[m,g,v]),Object(n.useEffect)((function(){null===e.broadcastmessagedata?s(!0):null!==e.broadcastmessagedata&&s(!1)}),[e.broadcastmessagedata]);return l.a.createElement(Ri,{broadcastmessages:e.broadcastmessagedata,statusOnClicked:function(){setStatusClicked(!statusClicked)},setFilterOptions:function(e){u(e),s(!0)},setSearchValue:function(e){h(e)},setSortOptions:function(e){b(e),s(!0)},data:e,loader:r})})),zi=N.a.Search,Hi=(l.a.createElement(ke.a,{style:{fontSize:16,color:"#1890ff"}}),j.a.Content),Bi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=Object(o.a)({},a.state.filterData,{search:e});a.setState({filterData:t}),a.props.setFilterOptions(t)},a.applyFilters=function(){a.props.setFilterOptions(a.state.filterData)},a.reset=function(){a.setState({filterData:{}}),a.props.setFilterOptions({status_id:[],cug_filter:{}})},a.handlePollOnSelect=function(e,t,n){var l=e.map((function(e){return"status_id"===t?parseInt(e):e})),r={};if(n)if(0===e.length){var s=a.state.filterData.cug_filter,c=Object.keys(s).filter((function(e){return e!==n})).reduce((function(e,t){return e[t]=s[t],e}),{});r=Object(o.a)({},a.state.filterData,Object(ut.a)({},t,Object(o.a)({},c)))}else r=Object(o.a)({},a.state.filterData,Object(ut.a)({},t,Object(o.a)({},a.state.filterData[t],Object(ut.a)({},n,l))));else r=Object(o.a)({},a.state.filterData,Object(ut.a)({},t,l));a.setState({filterData:r})},a.handleCheck=function(e){var t={};t=e.target.checked?{status_id:[5,4,7,8]}:{status_id:[5,7]},a.props.handleCheck(t)},a.state={data:[],cug:{},filterData:{}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.polls,a=e.cug,n=e.filter;null===t||void 0===t||t.forEach((function(e){e.start_date=Fe()(e.start_date).utc().local().format("MM/DD/YYYY"),e.end_date=Fe()(e.start_date).isValid()?Fe()(e.end_date).utc().local().format("MM/DD/YYYY"):""})),this.setState({data:t,cug:null===a||void 0===a?void 0:a.cug_field,filterData:n})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a;this.props.polls!==e.polls&&(null===(t=e.polls)||void 0===t||t.forEach((function(e){e.start_date=Fe()(e.start_date).utc().local().format("MM/DD/YYYY"),e.end_date=Fe()(e.end_date).utc().local().format("MM/DD/YYYY")})),this.setState({data:e.polls}));this.props.cug!==e.cug&&this.setState({cug:null===(a=e.cug)||void 0===a?void 0:a.cug_field});this.props.filter!==e.filter&&this.setState({filterData:e.filter})}},{key:"render",value:function(){var e=this,t=this.props.loader,a=[{title:"",dataIndex:"",key:"name",width:"5%",render:function(e){return{children:e.image||e.document?l.a.createElement(es.a,null):null,props:{"data-title":""}}}},{title:"Poll Name",dataIndex:"title",key:"name",width:"22%",render:function(e,t){return{children:2020202020!=t.poll_id&&1010101010!=t.poll_id?l.a.createElement(m.b,{to:{pathname:"/idb/pollresponse",state:t}},l.a.createElement("li",null,l.a.createElement("a",{href:"/idb/pollresponse"},e)," ")):e,props:{"data-title":"Poll Name"}}}},{title:"Start Date & Time",dataIndex:"",key:"start_date",width:"22%",render:function(t){var a="Invalid date"!==t.start_date?t.start_date:"-",n=t.start_date.split("/")[1],l=t.start_date.split("/")[0],r=t.start_date.split("/")[2],s=new Date(r+"-"+l+"-"+n+"T"+t.start_time),o=r+"-"+l+"-"+n+"T"+t.start_time,c=t.start_date_timezone?t.start_date_timezone:"Asia/Calcutta",i=Fe.a.utc(o).tz("".concat(c)).format("Z");return{children:"-"===a?a:e.state.showTimezones&&t.start_date_timezone&&t.start_date_timezone.length>0?a+" "+s.toLocaleString([],{hour:"2-digit",minute:"2-digit"})+" (UTC ".concat(i,") ")+" "+t.start_date_timezone:a+" "+s.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),props:{"data-title":"Start Date & Time"}}}},{title:"End Date & Time",dataIndex:"",key:"end_date",width:"21%",render:function(t){var a="Invalid date"!==t.end_date?t.end_date:"-",n=t.end_date.split("/")[1],l=t.end_date.split("/")[0],r=t.end_date.split("/")[2],s=r+"-"+l+"-"+n+"T"+t.end_time,o=new Date(r+"-"+l+"-"+n+"T"+t.end_time),c=t.end_date_timezone?t.end_date_timezone:"Asia/Calcutta",i=Fe.a.utc(s).tz("".concat(c)),m=i?i.format("Z"):"";return{children:"-"===a?a:e.state.showTimezones&&t.start_date_timezone?a+" "+a==="-"?null:a+"(UTC ".concat(m,") ")+o.toLocaleString([],{hour:"2-digit",minute:"2-digit"})+" (UTC ".concat(m,") ")+" "+t.end_date_timezone:a+" "+o.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),props:{"data-title":"Start Date & Time"}}}},{title:"Timezone",dataIndex:"",key:"timezone",width:"21%",render:function(e){return{children:e.timezone}}},{title:"CUG Details",dataIndex:"",key:"x",width:"20%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement($s,{selectedRows:e})),props:{"data-title":"CUG Details"}}}},{title:"Created By",dataIndex:"",key:"end_date",width:"21%",render:function(e){return{children:1010101010!=e.poll_id&&2020202020!=e.poll_id?e.first_name+" "+e.last_name:"",props:{"data-title":"Created By"}}}},{title:"Status",dataIndex:"",key:"x",width:"15%",render:function(e){return{children:1010101010!=e.poll_id&&2020202020!=e.poll_id?4===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"):5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),J):7===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),X):l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),ee):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Sample"),props:{"data-title":"Status"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amIDBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(ka,{amIDBUser:!0,data:this.props.data}),l.a.createElement(Hi,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Poll Results")),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(zi,{placeholder:re,onSearch:this.onSearch})),l.a.createElement(C.a,{span:24,lg:9,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(qs,{handlePollOnSelect:this.handlePollOnSelect,cug:this.state.cug,applyFilters:this.applyFilters,reset:this.reset})))))),l.a.createElement(D.a,{spinning:t,size:"large"},l.a.createElement(xe,{rowKey:"poll_id",columns:a,data:this.state.data})))))))}}]),t}(l.a.Component);var qi=Object(i.b)((function(e){return{pollsdata:e.poll.pollsdata,cug:e.cug.cug}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)({search:"",status_id:[],cug_filter:{}}),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(!1),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)([]),v=Object(c.a)(E,2),b=v[0],y=v[1];Object(n.useEffect)((function(){(0,e.dispatch)(Ds())}),[]),Object(n.useEffect)((function(){(0,e.dispatch)(no(u))}),[u]),Object(n.useEffect)((function(){var t;null===e.pollsdata?s(!0):null!==e.pollsdata&&s(!1);var a=null!==e.pollsdata?e.pollsdata:[],n=null===u||void 0===u?void 0:null===(t=u.status_id)||void 0===t?void 0:t.includes(4);y(a),(u.search.length>0||Object.values(null===u||void 0===u?void 0:u.status_id).length>0&&!n)&&y(a)}),[e.pollsdata]);return l.a.createElement(Bi,{polls:b,data:e,cug:e.cug,loader:r,filter:u,checked:h,setLoader:s,setFilterOptions:function(e){d(Object(o.a)({},u,{},e))},handleCheck:function(e){f(!h),d(e)}})})),Vi=j.a.Content,Qi=N.a.Search,Gi=function(e){Object(u.g)();var t=Object(n.useState)(""),a=Object(c.a)(t,2),r=a[0],s=a[1],o=e.loader,i=[{title:"Info Name",dataIndex:"title",key:"title",width:"22%",render:function(e,t){return{children:l.a.createElement("h6",{className:"font-weight-md6 mb-1"},l.a.createElement(m.b,{to:{pathname:"/idb/infodetails",state:t}},t.title)),props:{"data-title":"title"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amIDBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(ka,{amIDBUser:!0,data:e.data}),l.a.createElement(Vi,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},le)),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Qi,{onChange:function(e){s(e.target.value)},onBlur:function(){e.setSearchValue(r)},placeholder:"Search"})),l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"}))))),l.a.createElement(D.a,{spinning:o,size:"large"},l.a.createElement(xe,{rowKey:"info_id",columns:i,data:e.infos}))))))))};var Ki=Object(i.b)((function(e){var t=e.info;return{infosdata:t.infosdata,createinfodata:t.createinfodata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),g=p[0],h=p[1];Object(n.useEffect)((function(){(0,e.dispatch)(ii(g))}),[m,e.createinfodata,g]),Object(n.useEffect)((function(){null===e.infosdata?s(!0):null!==e.infosdata&&s(!1)}),[e.infosdata]);return r||null===e.infosdata||0!==e.infosdata.length||0!==g.length?l.a.createElement(Gi,{infos:e.infosdata?e.infosdata:[],data:e,loader:r,statusOnClicked:function(){u(!m)},setSearchValue:function(e){h(e)}}):l.a.createElement(Ni,{data:e})})),Wi=j.a.Content,Ji=_n.a.Paragraph,Zi=function(e){var t=e.location.state?e.location.state:{},a=Object(n.useState)(!1),r=Object(c.a)(a,2),s=r[0],o=r[1],i=Object(n.useState)(0),u=Object(c.a)(i,2),d=u[0],p=u[1],g=function(e){o(!0),p(s?d+1:d+0)};return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(je,{amORGUser:!0,data:e}),l.a.createElement(Wi,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/idb/info"},l.a.createElement(gt.a.Item,null,le)),l.a.createElement(gt.a.Item,null,t.title))),l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"}," ",t.title)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22,className:"editor-data"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"mb-2"},l.a.createElement("div",{className:"show-less show-more-wrapper"},function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:d},l.a.createElement(Ji,{ellipsis:{rows:8,expandable:!0,symbol:"Show more",onExpand:g}},Ua()(e)))}(t.message),s&&l.a.createElement("span",null,l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:function(e){o(!1),p(s?d+1:d+0)}},"Show less")))))))))))))},$i=j.a.Content,Xi=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=(a[0],a[1],e.loader);return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amIDBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(ka,{amIDBUser:!0,data:e.data}),l.a.createElement($i,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},ne)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(D.a,{spinning:r,size:"large"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22,className:"editor-data"},l.a.createElement("h6",{className:"font-weight-md mb-1"},e.helps&&e.helps[0]&&e.helps[0].title?e.helps[0].title:"")),l.a.createElement("p",{className:"pt-2 mt-3"},e.helps&&e.helps[0]&&e.helps[0].message?Ua()(e.helps[0].message):"")))))))))};var em=Object(i.b)((function(e){return{helpsdata:e.help.helpsdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1];Object(n.useEffect)((function(){var t=e.dispatch;s(!1),t(li()),s(!0)}),[m]),Object(n.useEffect)((function(){null===e.helpsdata?s(!0):null!==e.helpsdata&&s(!1)}),[e.helpsdata]);return r||null===e.helpsdata||0!==e.helpsdata.length?l.a.createElement(Xi,{helps:e.helpsdata,data:e,loader:r,statusOnClicked:function(){u(!m)}}):l.a.createElement(Xc,{data:e})})),tm=(j.a.Content,_n.a.Paragraph,N.a.Search),am=function(e){var t=e.data,a=(e.showDownloadOptions,Object(n.useState)(!1)),r=Object(c.a)(a,2),s=(r[0],r[1],Object(n.useState)("")),o=Object(c.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)([]),d=Object(c.a)(u,2),p=d[0],g=d[1];Object(n.useEffect)((function(){var e=t&&t.users&&t.users.length>0&&t.users.map((function(e){return e.showText=!1,e}));g(e)}),[t]);var h=function(e,t){return t?e.replace(new RegExp(t,"gi"),(function(e){return"<mark>".concat(e,"</mark>")})):e},f=function(e,t,a){console.log("---------showTextArray----------",p);var n=p&&p.map((function(n){return n.first_name==t&&n.last_name==a&&(n.showText=e),n}));g(n)};return l.a.createElement(l.a.Fragment,null,p&&p&&p.length>0&&l.a.createElement(S.a,{className:"w-100"},l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(tm,{placeholder:"Search",onSearch:function(e){console.log("-----value------",e),m(e)}})))))),l.a.createElement("div",{className:"w-100"},p&&(null===p||void 0===p?void 0:p.map((function(e,t){var a=e.Answer,n=(a?a.replace(/<[^>]+>/g,""):"No Data").slice(0,500),r=!(n.length<500),s=(e.first_name,e.last_name,t+1);return l.a.createElement(S.a,{className:"w-100"},l.a.createElement(C.a,{span:22},l.a.createElement("h6",{className:"font-weight-md mb-1"},"User "+s),l.a.createElement("div",{style:{paddingBottom:8}},l.a.createElement("small",null,"created On: ",Fe()(e.created_on).utc().local().format("MM/DD/YYYY"))),l.a.createElement("div",{style:{paddingBottom:8}},l.a.createElement("div",null,0==e.showText&&l.a.createElement("p",null," ",Ua()(h(n,i)),r&&l.a.createElement("a",{onClick:function(){f(!0,e.first_name,e.last_name)}},"...Show More")),1==e.showText&&l.a.createElement("p",{style:{justifyContent:"center"}},Ua()(h(a,i)),l.a.createElement("a",{onClick:function(){f(!1,e.first_name,e.last_name)}}," ","...Show Less"))))),l.a.createElement(ct.a,{className:"w-100 mt-2"}))}))))),p&&p.length<1&&l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement("p",null," Results for this poll are not available at this moment. "))))},nm=j.a.Content,lm=function(e){var t,a,r=Object(u.h)(),s=Object(n.useState)(!1),i=Object(c.a)(s,2),d=(i[0],i[1]),p=Object(n.useState)({}),g=Object(c.a)(p,2),h=g[0],f=g[1],E=Object(n.useState)({}),v=Object(c.a)(E,2),b=v[0],y=v[1],_=Object(n.useState)("1"),O=Object(c.a)(_,2),N=O[0],w=O[1],D=Object(n.useState)([]),k=Object(c.a)(D,2),x=k[0],I=k[1];Object(n.useEffect)((function(){var t={headers:{Authorization:Me(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};d(!0);var a={poll_id:r.state.poll_id};B.a.post(q+"pollResult/",a,t).then((function(t){console.log("------props---",e.location.state.poll_question_type),console.log("------res.data---",t.data);var a={},n=[];t&&t.data&&t.data.length>0&&t.data.map((function(e){a=Object(o.a)({},e,{option_text:"1"===e.option_text?"Definitely Not":"2"===e.option_text?"Better If Not":"3"===e.option_text?"Does Not Matter":"4"===e.option_text?"I am Ok":"5"===e.option_text?"Excited":e.option_text}),n.push(a)})),f(n),Object.keys(t.data)&&Object.keys(t.data).length>0&&y(t.data),d(!1)}))}),[]);var T=function(){var e,t,a,n=[],l="";x[0].forEach((function(e,t){x[1].forEach((function(a,r){var s;t===r&&(l="1"===N?"Count":"Percentage",n.push((s={},Object(ut.a)(s,"Poll Option Text",e),Object(ut.a)(s,l,a),s)))}))}));var s="".concat("Poll Name"," for,").concat(r.state.title,"\n");s+='"",""\n',null!=(s+=function(e){var t,a,n;return null!=(e=e||null)&&e.length?(",","\n",n=Object.keys(e[0]),t="",t+=n.join(","),t+="\n",e.forEach((function(e){a=0,n.forEach((function(n){a>0&&(t+=","),t+=e[n],a++})),t+="\n"})),t):null}(n))&&(t=r.state.title+".csv",s.match(/^data:text\/csv/i)||(s="data:text/csv;charset=utf-8,"+s),e=encodeURI(s),(a=document.createElement("a")).setAttribute("href",e),a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a))},A=function(e,t){I([e,t])},Y=function(e){console.log("---",e),"pdf"===e?function(){var e="1"===N?document.getElementById("barChart"):document.getElementById("pieChart");io()(e).then((function(e){var t=e.toDataURL("image/png"),a="";(a=e.width>e.height?new mo.a("l","mm",[e.width,e.height]):new mo.a("p","mm",[e.height,e.width])).addImage(t,"JPEG",0,0,e.width,e.height);var n=r.state.title+".pdf";a.save(n)}))}():"gridPDF"===e?function(){var e=new mo.a;e.rect(20,20,e.internal.pageSize.width-40,e.internal.pageSize.height-40,"S"),e.text("".concat("Poll Name",": ").concat(r.state.title,"\n"),18.5,17);var t="";t+="\n",t+="Total Audience: ".concat(b.total_employee_count,"\n"),t+="Total Response(s): ".concat(b.count,"\n"),t+="\n",b.users&&b.users.forEach((function(e,a){t+="Responsed By: ".concat("User "," ",a+1),t+="\n",t+="Responded On: ".concat(Fe()(e.created_on).format("MM-DD-YYYY")),t+="\n",t+="Response: ".concat(e.Answer,"\n"),t+="-------------------------------------------------------------------------------------",t+="\n"})),e.setFontSize(8);var a=t.replace(/<[^>]+>/g,""),n=e.splitTextToSize("".concat(a),160);e.text(25,25,n);var l=r.state.title+".pdf";e.save(l)}():"gridCSV"===e?function(){var e,t,a,n="Poll Name".concat(" ,",r.state.title,"\n");n+='"",""\n',n+='"Total Audience ","'.concat(b.total_employee_count,'"\n'),n+='"Total Response(s) ","'.concat(b.count,'"\n'),n+='"",""\n',n+='"Responsed By","Responded On","Response", \n',b.users&&b.users.forEach((function(e,t){n+='"User '.concat(t+1,'","').concat(Fe()(e.created_on).format("MM-DD-YYYY"),'","').concat(e.Answer,'",\n')})),null!=n&&(t=r.state.title+".csv",n.match(/^data:text\/csv/i)||(n="data:text/csv;charset=utf-8,"+n),e=encodeURI(n),(a=document.createElement("a")).setAttribute("href",e),a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a))}():T()};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amIDBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(ka,{amIDBUser:!0,data:e}),l.a.createElement(nm,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/idb/pollsdirectory"},l.a.createElement(gt.a.Item,null,ae)),l.a.createElement(gt.a.Item,null,"Poll Name"))),l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},r.state.title),l.a.createElement(C.a,{span:24,md:24,lg:12,className:"search-row column d-block d-lg-flex align-items-center justify-content-start justify-content-lg-end px-3 px-lg-0 my-4 my-lg-0"},(4==r.state.poll_question_type||5==r.state.poll_question_type)&&l.a.createElement("span",{className:"pr-3 w-md-100"},"Total audience",": ",b.total_employee_count),h&&h.length>0?l.a.createElement("span",{className:"pr-3 w-md-100"},"Total audience",": ",null===(t=h[0])||void 0===t?void 0:t.total_employee_count):null,h&&h.length>0&&(4!=r.state.poll_question_type||5!=r.state.poll_question_type)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0 mr-3"},l.a.createElement(zt.a,{className:"w-100",defaultValue:"1",onSelect:function(e){w(e)}},l.a.createElement(Option,{value:"1",defaultValue:!0},"Bar Chart"),l.a.createElement(Option,{value:"2"},"Pie Chart"))),l.a.createElement(C.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(uo,{showDownloadOptions:Y}))):null,(4==r.state.poll_question_type||5==r.state.poll_question_type)&&l.a.createElement(C.a,null,l.a.createElement(uo,{forGreed:!0,showDownloadOptions:Y})))),l.a.createElement("div",{className:""},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},r.state.question),b&&b.count&&l.a.createElement(l.a.Fragment,null,b.count," ","Response(s)"),h&&h.length>0?l.a.createElement("span",{className:"font-weight-md6 pt-3 d-flex"},null===(a=h[0])||void 0===a?void 0:a.total_response," ","Response(s)"):null,l.a.createElement("div",{className:4==r.state.poll_question_type||5==r.state.poll_question_type?"mid-content pt-0":"mid-content d-flex justify-content-center align-items-center"},l.a.createElement("h1",{className:"text-center pt-3"},h&&0===h.length&&4!=r.state.poll_question_type&&5!=r.state.poll_question_type&&"Results for this poll are not available at this moment."),4!=r.state.poll_question_type&&5!=r.state.poll_question_type&&l.a.createElement(l.a.Fragment,null,h&&h.length>0?"1"===N?l.a.createElement(so,{data:h,chartTitle:"Poll Name for "+r.state.title,sendBackData:A}):l.a.createElement(oo,{data:h,chartTitle:"Poll Name for "+r.state.title,sendBackData:A}):null),(4==r.state.poll_question_type||5==r.state.poll_question_type)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"w-100"},l.a.createElement(am,{data:b,showDownloadOptions:Y}))))))),">"))))))},rm=j.a.Content,sm=N.a.Search,om=function(e){Object(u.g)();var t=Object(n.useState)(""),a=Object(c.a)(t,2),r=a[0],s=a[1],o=e.loader,i=[{title:"",dataIndex:"title",key:"title",width:"22%",render:function(e,t){return{children:l.a.createElement("h6",{className:"font-weight-md6 mb-1"},l.a.createElement(m.b,{to:{pathname:"/amweb/infodetails",state:t}},t.title)),props:{"data-title":"title"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amWEBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Ca,{amWEBUser:!0,data:e.data}),l.a.createElement(rm,null,l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},le)),l.a.createElement(C.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(C.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,lg:9,className:"search-box"},l.a.createElement(sm,{onChange:function(e){s(e.target.value)},onBlur:function(){e.setSearchValue(r)},placeholder:"Search"})),l.a.createElement(C.a,{span:24,lg:6,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"}))))),l.a.createElement(D.a,{spinning:o,size:"large"},l.a.createElement(xe,{rowKey:"info_id",columns:i,data:e.infos}))))))))};var cm=Object(i.b)((function(e){var t=e.info;return{infosdata:t.infosdata,createinfodata:t.createinfodata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),g=p[0],h=p[1];Object(n.useEffect)((function(){(0,e.dispatch)(ii(g))}),[m,e.createinfodata,g]),Object(n.useEffect)((function(){null===e.infosdata?s(!0):null!==e.infosdata&&s(!1)}),[e.infosdata]);return r||null===e.infosdata||0!==e.infosdata.length||0!==g.length?l.a.createElement(om,{infos:e.infosdata?e.infosdata:[],data:e,loader:r,statusOnClicked:function(){u(!m)},setSearchValue:function(e){h(e)}}):l.a.createElement(l.a.Fragment,null)})),im=j.a.Content,mm=_n.a.Paragraph,um=function(e){var t=e.location.state?e.location.state:{},a=Object(n.useState)(!1),r=Object(c.a)(a,2),s=r[0],o=r[1],i=Object(n.useState)(0),u=Object(c.a)(i,2),d=u[0],p=u[1],g=function(e){o(!0),p(s?d+1:d+0)};return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement(be,{amWEBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(j.a,null,l.a.createElement(j.a,null,l.a.createElement(Ca,{amWEBUser:!0,data:e}),l.a.createElement(im,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(gt.a,{separator:">"},l.a.createElement(m.c,{to:"/amweb/info"},l.a.createElement(gt.a.Item,null,le)),l.a.createElement(gt.a.Item,null,t.title))),l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"}," ",t.title)),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:22,className:"editor-data"},l.a.createElement(S.a,null,l.a.createElement(C.a,{span:24,className:"mb-2"},l.a.createElement("div",{className:"show-less show-more-wrapper"},function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:d},l.a.createElement(mm,{ellipsis:{rows:8,expandable:!0,symbol:"Show more",onExpand:g}},Ua()(e)))}(t.message),s&&l.a.createElement("span",null,l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:function(e){o(!1),p(s?d+1:d+0)}},"Show less")))))))))))))},dm=a(41);var pm,gm,hm,fm,Em,vm,bm,ym,_m,Om,Nm,jm=function(e){var t=b("user"),a=JSON.parse(b("user")),n=!1,r=!1,s=!1,o=!1;t||(n=!0,r=!0,s=!0,o=!0),t&&a&&"null"!=a.user_data&&(n="true"===dm.AES.decrypt(a.user_data.is_amcc_user,"anonymoose").toString(dm.enc.Utf8),r="true"===dm.AES.decrypt(a.user_data.is_org_cc_user,"anonymoose").toString(dm.enc.Utf8),s="true"===dm.AES.decrypt(a.user_data.is_am_web_user,"anonymoose").toString(dm.enc.Utf8),o="true"===dm.AES.decrypt(a.user_data.is_idb_user,"anonymoose").toString(dm.enc.Utf8));var c=window.location.pathname;return l.a.createElement(m.a,null,l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/editprofile",component:Cr}),l.a.createElement(u.b,{path:"/managebroadcast",component:bs}),l.a.createElement(O,{path:"/changepassword",component:Ta}),l.a.createElement(u.b,{exact:!0,path:"/amcc/login",component:wa}),l.a.createElement(u.b,{exact:!0,path:"/org/login",component:_a}),l.a.createElement(u.b,{exact:!0,path:"/forgotpassword",component:da}),l.a.createElement(u.b,{exact:!0,path:"/resetpassword",component:ga}),r&&("/orgcc/createhotline"===c||"/orgcc/edithotline"===c||"/orgcc/editopenline"===c||"/orgcc/manageemployees"===c||"/orgcc/assignhotline"===c||"/orgcc/hotlinedirectory"===c||"/orgcc/createopenline"===c||"/orgcc/openlinedirectory"===c||"/orgcc/pollsdirectory"===c||"/orgcc/createpoll"===c||c.includes("/orgcc/editpoll")||"/orgcc/previewpoll"===c||"/orgcc/pollresponse"===c||"/orgcc/existingpolls"===c||c.includes("/orgcc/duplicatepoll")||"/orgcc/addemployee"===c||"/orgcc/createemployee"===c||"/orgcc/help"===c||"/orgcc/createhelp"===c||"/orgcc/edithelp"===c||"/orgcc/info"===c||"/orgcc/infodetails"===c||"/orgcc/createinfo"===c||"/orgcc/editinfo"===c||"/orgcc/importemployee"===c||c.includes("/orgcc/editemployee")||"/orgcc/broadcastmessages"===c||"/orgcc/createbroadcast"===c||c.includes("/orgcc/editbroadcast")||"/"===c||"/amcc/login"===c||"/org/login"===c)?l.a.createElement(u.d,null,l.a.createElement(O,{exact:!0,path:"/orgcc/createhotline",amorg:!0,component:Za}),l.a.createElement(O,{exact:!0,path:"/orgcc/manageemployees",amorg:!0,component:oc}),l.a.createElement(O,{exact:!0,path:"/orgcc/importemployee",amorg:!0,component:Lr}),l.a.createElement(O,{exact:!0,path:"/orgcc/addemployee",amorg:!0,component:Mr}),l.a.createElement(O,{exact:!0,path:"/orgcc/createemployee",amorg:!0,component:Gr}),l.a.createElement(O,{exact:!0,path:"/orgcc/assignhotline",amorg:!0,component:fn}),l.a.createElement(O,{exact:!0,path:"/orgcc/hotlinedirectory",amorg:!0,component:hn}),l.a.createElement(O,{exact:!0,path:"/orgcc/edithotline",amorg:!0,component:Ir}),l.a.createElement(O,{exact:!0,path:"/orgcc/createopenline",amorg:!0,component:Hc}),l.a.createElement(O,{exact:!0,path:"/orgcc/openlinedirectory",amorg:!0,component:Ic}),l.a.createElement(O,{exact:!0,path:"/orgcc/editopenline",amorg:!0,component:Qc}),l.a.createElement(O,{exact:!0,path:"/orgcc/pollsdirectory",amorg:!0,component:lo}),l.a.createElement(O,{exact:!0,path:"/orgcc/previewpoll",amorg:!0,component:hs}),l.a.createElement(O,{exact:!0,path:"/orgcc/createpoll",amorg:!0,component:Ui}),l.a.createElement(O,{exact:!0,path:"/orgcc/pollresponse",amorg:!0,component:go}),l.a.createElement(O,{exact:!0,path:"/orgcc/editpoll/:id",amorg:!0,component:Yo}),l.a.createElement(O,{exact:!0,path:"/orgcc/existingpolls",amorg:!0,component:Po}),l.a.createElement(O,{exact:!0,path:"/orgcc/createhelp",amorg:!0,component:Wc}),l.a.createElement(O,{exact:!0,path:"/orgcc/help",amorg:!0,component:ri}),l.a.createElement(O,{exact:!0,path:"/orgcc/info",amorg:!0,component:ji}),l.a.createElement(O,{exact:!0,path:"/orgcc/createinfo",amorg:!0,component:ui}),l.a.createElement(O,{exact:!0,path:"/orgcc/editinfo",amorg:!0,component:ui}),l.a.createElement(O,{exact:!0,path:"/orgcc/edithelp",amorg:!0,component:Wc}),l.a.createElement(O,{exact:!0,path:"/orgcc/infodetails",amorg:!0,component:fi}),l.a.createElement(O,{exact:!0,path:"/orgcc/duplicatepoll/:id",amorg:!0,component:Jo}),l.a.createElement(O,{exact:!0,path:"/orgcc/editemployee/:id",amorg:!0,component:$o}),l.a.createElement(O,{exact:!0,path:"/orgcc/broadcastmessages",amorg:!0,component:Ks}),l.a.createElement(O,{exact:!0,path:"/orgcc/createbroadcast",amorg:!0,component:Ts}),l.a.createElement(O,{exact:!0,path:"/orgcc/editbroadcast/:id",amorg:!0,component:Us})):!s||"/amweb/hotlinemessages"!==c&&"/org/login"!==c&&"/amcc/login"!==c&&"/"!==c&&"/amweb/openlinemessages"!==c&&"/hotlinereports"!==c&&"/openlinereports"!==c&&"/amweb/help"!==c&&"/orgcc/createhelp"!==c&&"/orgcc/edithelp"!==c&&"/amweb/info"!==c&&"/amweb/infodetails"!==c&&"/orgcc/createinfo"!==c&&"/orgcc/editinfo"!==c?n&&("/amcc/manageorganizations"===c||"/amcc/createorg"===c||"/"===c||c.includes("/amcc/editorg")||c.includes("/amcc/orgdetails")||"/org/login"===c||"/amcc/login"===c)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(u.d,null,l.a.createElement(O,{exact:!0,path:"/amcc/orgdetails/:id",amcc:!0,component:Or}),l.a.createElement(O,{exact:!0,path:"/amcc/manageorganizations",amcc:!0,component:oa}),l.a.createElement(O,{exact:!0,path:"/amcc/createorg",amcc:!0,component:ta}),l.a.createElement(O,{exact:!0,path:"/amcc/editorg/:id",amcc:!0,component:wr}))," "):!o||"/org/login"!==c&&"/amcc/login"!==c&&"/"!==c&&"/idb/hotlinereports"!==c&&"/idb/openlinereports"!==c&&"/idb/pollsdirectory"!==c&&"/idb/broadcastmessages"!==c&&"/idb/help"!==c&&"/idb/createhelp"!==c&&"/idb/edithelp"!==c&&"/idb/info"!==c&&"/idb/infodetails"!==c&&"/idb/createinfo"!==c&&"/idb/editinfo"!==c&&"/idb/pollresponse"!==c?t&&l.a.createElement(u.b,{component:Er}):l.a.createElement(u.d,null," ",l.a.createElement(O,{exact:!0,path:"/idb/hotlinereports",amidb:!0,component:vc}),l.a.createElement(O,{exact:!0,path:"/idb/openlinereports",amidb:!0,component:vc})," ",l.a.createElement(O,{exact:!0,path:"/idb/help",amidb:!0,component:em}),l.a.createElement(O,{exact:!0,path:"/idb/info",amidb:!0,component:Ki}),l.a.createElement(O,{exact:!0,path:"/idb/infodetails",amidb:!0,component:Zi}),l.a.createElement(O,{exact:!0,path:"/idb/pollsdirectory",amidb:!0,component:qi}),l.a.createElement(O,{exact:!0,path:"/idb/pollresponse",amidb:!0,component:lm}),l.a.createElement(O,{exact:!0,path:"/idb/broadcastmessages",amidb:!0,component:Li})):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(u.d,null,l.a.createElement(O,{exact:!0,path:"/amweb/hotlinemessages",amweb:!0,component:Ml}),l.a.createElement(O,{exact:!0,path:"/amweb/openlinemessages",amweb:!0,component:gr}),l.a.createElement(O,{exact:!0,path:"/orgcc/createhelp",amweb:!0,component:Wc}),l.a.createElement(O,{exact:!0,path:"/orgcc/edithelp",amweb:!0,component:Wc}),l.a.createElement(O,{exact:!0,path:"/amweb/help",amweb:!0,component:ci}),l.a.createElement(O,{exact:!0,path:"/amweb/info",amweb:!0,component:cm}),l.a.createElement(O,{exact:!0,path:"/orgcc/createinfo",amweb:!0,component:ui}),l.a.createElement(O,{exact:!0,path:"/orgcc/editinfo",amorg:!0,component:ui}),l.a.createElement(O,{exact:!0,path:"/amweb/infodetails",amweb:!0,component:um})))))},wm=a(140),Sm=a(512),Cm=a(513),Dm=a(41),km="",xm=b("current");km=xm?Dm.AES.decrypt(xm,"anonymoose"):"";var Im=JSON.parse(b("user")),Tm=Im?Dm.AES.decrypt(null===Im||void 0===Im?void 0:null===(pm=Im.user_details)||void 0===pm?void 0:pm.first_name,"anonymoose").toString(Dm.enc.Utf8):"",Am=Im?Dm.AES.decrypt(null===Im||void 0===Im?void 0:null===(gm=Im.user_details)||void 0===gm?void 0:gm.last_name,"anonymoose").toString(Dm.enc.Utf8):"",Ym=Im?Dm.AES.decrypt(null===Im||void 0===Im?void 0:null===(hm=Im.user_data)||void 0===hm?void 0:hm.email,"anonymoose").toString(Dm.enc.Utf8):"",Mm=Im?Dm.AES.decrypt(null===Im||void 0===Im?void 0:null===(fm=Im.user_data)||void 0===fm?void 0:fm.mobile_number,"anonymoose").toString(Dm.enc.Utf8):"",Um=!!Im&&"true"===Dm.AES.decrypt(null===(Em=Im.user_data)||void 0===Em?void 0:Em.is_am_web_user,"anonymoose").toString(Dm.enc.Utf8),Fm=!!Im&&"true"===Dm.AES.decrypt(null===(vm=Im.user_data)||void 0===vm?void 0:vm.is_amcc_user,"anonymoose").toString(Dm.enc.Utf8),Pm=!!Im&&"true"===Dm.AES.decrypt(null===(bm=Im.user_data)||void 0===bm?void 0:bm.is_super_user,"anonymoose").toString(Dm.enc.Utf8),Rm=!!Im&&"true"===Dm.AES.decrypt(null===(ym=Im.user_data)||void 0===ym?void 0:ym.is_org_cc_user,"anonymoose").toString(Dm.enc.Utf8),Lm=!!Im&&"true"===Dm.AES.decrypt(null===(_m=Im.user_data)||void 0===_m?void 0:_m.is_idb_user,"anonymoose").toString(Dm.enc.Utf8),zm=!!Im&&"true"===Dm.AES.decrypt(null===(Om=Im.user_data)||void 0===Om?void 0:Om.is_seeded_user,"anonymoose").toString(Dm.enc.Utf8),Hm=!!Im&&"true"===Dm.AES.decrypt(null===(Nm=Im.user_data)||void 0===Nm?void 0:Nm.is_app_user,"anonymoose").toString(Dm.enc.Utf8),Bm=Object(o.a)({},Im,{user_data:Object(o.a)({},null===Im||void 0===Im?void 0:Im.user_data,{email:Ym,mobile_number:Mm,is_am_web_user:Um,is_amcc_user:Fm,is_super_user:Pm,is_app_user:Hm,is_org_cc_user:Rm,is_idb_user:Lm,is_seeded_user:zm}),user_details:Object(o.a)({},null===Im||void 0===Im?void 0:Im.user_details,{first_name:Tm,last_name:Am})}),qm=km.toString(Dm.enc.Utf8),Vm=Im?{isLoggedIn:!0,user:Bm,current:qm.replaceAll('^"+|"+$',"")}:{isLoggedIn:!1,user:null,current:null},Qm={},Gm={manageOrgData:null},Km={manageEmpData:null},Wm={hotlinesdata:null,assignhotlinedata:[]},Jm={assignhotlinedata:[]},Zm={openlinesdata:null},$m={pollsdata:null},Xm={helpsdata:null,createhelpdata:null},eu={broadcastmessagedata:null},tu={infosdata:null,createinfodata:null},au={cug:null},nu=Object(wm.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vm,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOGIN_SUCCESS":return Object(o.a)({},e,{isLoggedIn:!0,user:n.user,current:n.current});case"LOGIN_FAIL":case"LOGOUT":return Object(o.a)({},e,{isLoggedIn:!1,user:null,current:null});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qm,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_MESSAGE":return{message:n};case"CLEAR_MESSAGE":return{message:""};default:return e}},manageOrg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gm,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MANAGEORG_SUCCESS":return Object(o.a)({},e,{manageOrgData:n.manageOrgData});case"MANAGEORG_FAIL":return Object(o.a)({},e,{manageOrgData:[]});default:return e}},manageEmp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Km,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MANAGEEMP_SUCCESS":return Object(o.a)({},e,{manageEmpData:n.manageEmpData});case"MANAGEEMP_FAIL":return Object(o.a)({},e,{manageEmpData:[]});default:return e}},hotlinedata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wm,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HOTLINE_SUCCESS":return Object(o.a)({},e,{hotlinesdata:n.hotlinesdata});case"HOTLINE_FAIL":return Object(o.a)({},e,{hotlinesdata:[]});case"HOTLINE_SUCCESS":return Object(o.a)({},e,{assignhotlinedata:n.assignhotlinedata});case"HOTLINE_FAIL":return Object(o.a)({},e,{assignhotlinedata:[]});default:return e}},assignedHotline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jm,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HOTLINE_SUCCESS":return Object(o.a)({},e,{assignhotlinedata:n.assignhotlinedata});case"HOTLINE_FAIL":return Object(o.a)({},e,{assignhotlinedata:[]});default:return e}},openline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zm,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"OPENLINE_SUCCESS":return Object(o.a)({},e,{openlinesdata:n.openlinesdata});case"OPENLINE_FAIL":return Object(o.a)({},e,{openlinesdata:[]});default:return e}},poll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$m,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"POLL_SUCCESS":return Object(o.a)({},e,{pollsdata:n.pollsdata});case"POLL_FAIL":return Object(o.a)({},e,{pollsdata:[]});default:return e}},help:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xm,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HELP_SUCCESS":return Object(o.a)({},e,{helpsdata:n.helpsdata});case"HELP_FAIL":return Object(o.a)({},e,{helpsdata:[]});case"CREATEHELP_SUCCESS":return Object(o.a)({},e,{createhelpdata:n.createhelpdata});case"CREATEHELP_FAIL":return Object(o.a)({},e,{createhelpdata:[]});default:return e}},broadcastMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eu,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"BROADCAST_SUCCESS":return Object(o.a)({},e,{broadcastmessagedata:n.broadcast});case"BROADCAST_FAIL":return Object(o.a)({},e,{broadcastmessagedata:[]});case"BROADCAST_DETAILS_SUCCESS":return Object(o.a)({},e,{broadcastmessagedetailsdata:n.broadcastDetailsData});case"BROADCAST_DETAILS_FAIL":return Object(o.a)({},e,{broadcastmessagedetailsdata:[]});default:return e}},info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tu,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"INFO_SUCCESS":return Object(o.a)({},e,{infosdata:n.infosdata});case"INFO_FAIL":return Object(o.a)({},e,{infosdata:[]});case"CREATEINFO_SUCCESS":return Object(o.a)({},e,{createinfodata:n.createinfodata});case"CREATEINFO_FAIL":return Object(o.a)({},e,{createinfodata:[]});default:return e}},cug:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:au,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"CUG_SUCCESS":return Object(o.a)({},e,{cug:n.cug});case"CUG_FAILURE":return Object(o.a)({},e,{cug:[]});default:return e}}}),lu=[Cm.a],ru=Object(wm.createStore)(nu,Object(Sm.composeWithDevTools)(wm.applyMiddleware.apply(void 0,lu))),su=a(514);var ou=function(){var e=null,t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],m=Object(n.useState)(!1),u=Object(c.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(!1),h=Object(c.a)(g,2),f=h[0],E=h[1];return B.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.config,a=function(){var e=JSON.parse(b("user"));return e&&e.user_data.tokens.refresh?e.user_data.tokens.refresh:{}}(),n=JSON.parse(b("user"));return a&&401===e.response.status&&!t._retry?(t._retry=!0,B.a.post(q+"tokenRefresh/",{refresh:a}).then((function(e){if(200===e.status){var a=Object(o.a)({},n,{user_data:Object(o.a)({},n.user_data,{tokens:Object(o.a)({},n.user_data.tokens,{access:e.data.access})})});return v("user",JSON.stringify(a)),t.headers.Authorization="Bearer "+e.data.access,B()(t)}}))):Promise.reject(e)})),l.a.createElement(i.a,{store:ru},l.a.createElement(su.a,{ref:function(t){e=t},element:document,onIdle:function(t){b("user")&&(f?(s(!1),p(!0)):(s(!0),e.reset(),E(!0)))},onAction:function(e){E(!1)},onActive:function(e){E(!1)},debounce:250,timeout:f?6e4:12e5}),l.a.createElement("div",{className:"App"},l.a.createElement("div",null,l.a.createElement("div",{className:"content"},l.a.createElement(Ut.a,{visible:r,onOk:function(){s(!1)},onCancel:function(){s(!1)},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:se},l.a.createElement("p",null,Xe)),l.a.createElement(Ut.a,{visible:d,onOk:function(){b("user")&&W.logout()},onCancel:function(){b("user")&&W.logout()},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:se},l.a.createElement("p",null,et)),l.a.createElement(jm,null)))))};s.a.render(l.a.createElement(ou,null),document.getElementById("root"))},145:function(e,t,a){e.exports=a.p+"static/media/amcc-vector.042c9163.svg"},153:function(e,t,a){e.exports={no_sidebar:"manageEmp_no_sidebar__2uv3-",box_bordered:"manageEmp_box_bordered__20QUh",icon:"manageEmp_icon__3jMQO",box_bordered_active:"manageEmp_box_bordered_active__1eDgI"}},190:function(e,t,a){e.exports=a.p+"static/media/create-hotline.7fcce0f6.svg"},203:function(e,t,a){},204:function(e,t,a){},231:function(e,t,a){},270:function(e,t,a){e.exports=a.p+"static/media/send.5a28702a.svg"},271:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAIkElEQVR42u1cC3AUVRa9t7tnJsYkEJGAmF1W+biSJSgIhIC7YFkKogiIlqWgKLgiLMRFqJKPH6wSYcXFDwJaKgh+UFChFtRad/mUho8RiBuCAhK+WVgpEvIhyWS63933ejIhM5nMdCc9k5nM3KrJdL+57773Tt933n23040Ql4CCrd2BSJcWAbQks7sS7g4TEcwuOKqGqz1TAG3KznT0T02egojjeUd78SK7bgRR77iXYZ8yq3SEFF0oWzQk98AzEQVQ/q0D0jsl2Lfww8xwdCyQHDpfSjLiizfvDD1IhgDakPUHR3aHdt/zw956JS7U4LL6nodSR8jhkgui32EByRBA/x05OId/LQ314M0AJMrE9As1SEYByuNf/SINoLrfQwqSIYDO3Dmkin9dFooONEc4B/kWhWy6GfUg5lUpgjzIoxMqkNoMQKHipDYFUN2xpSC1OYCsBskoSZMRvXCJH5L2J5ZwUpv0IE+ZFSBFJUBHOEDMYL2WTreoBOhEWQXWqKrhei0BKSo5qKS6Bs5VVZut1qzpFpUexE+QexE5VdWU7eaAFJUAiTKXxuh0RSUIkMzYNjvdohYgqiu8UOOEcmct1mqaT1pNHxs1dW6TpBcH5xYEBSmqAQqkEwwgIV225EqWABRpJG2VXLX5u6Djb7MeZETHMg+KAxQHqGUAxTkoiMQ9KA5QHKA4QHGStl7iJC02p5IkTtxjFQXs0lBifopB4uWkLFgKkNYZ4Nz/UF08n+jXs3GA9DJJQnnms4Q39AeorgL1hdlIp47HSdoj8gOTULpjLIGmgfbKAqDikyiPG0/a26/W/79RzJI0B0YApAPBVi8HSEoBadS9AIoN1EdGA9TxUEyStDT0dpAnzxADQ3bsCGFyCsCVnQQoyDZvILZ+jfUeFC0ASf2zQZ4+h6Mkecam61DRYWCr3uSA/RK7HIR9biL5yXn6NKrXYYzYFx8B2/SJ7kExGyhiZj+Qn5wPaLfXl1GtE7Rli4H27WmyXkxwkNR3IMgz5iD3nEs6mspXrheQ/WdvbO/FpOyhID8+E1BRvHS0d18H2v7P2N6sSrcMJ2niNH0b0VCH9nwLKp9aYhWLTYDEjb/R96N0z/jG9WqqQZ31GNCF0hjdzfPlW35kGkjDhvv9Wdu4DtiGtYbNtSmSxuR2IE+dBdi7r/96qkpqzkTuPSWGbYdkimFd6iCcAGHPXiQ/8ZQ7IhbCYxruTV71WH4eqS8/Z8q25QCJ3Io87yXQVi5FOnc25ACJuEYaNwGlEWOoLqcDlJ8HeG1PhJR2XvW01ctJ+2Zz6wBUz0EcIGXVFwDOWmCfrga29av6jZ/Vghk3gDxxKuBVV7uB4YEfW/s296KOIN99fyN919zpACeLTLVhOQcJD1JeeQcwrbP7apw+Adr6tUD79+hhvZfhZnoQpHcl+d6HAHkAWK9TfIrUZYsAVBWUhcsAbTZfW6g+OpYEiGbaDw0HybJYRfgy+yABJ063winUvt5E9N1W8HTSFAGLWKZnL5BGjEbsN6h+OoFIV2z9CtnH7xE5a0B56jkQCbBGtpxOdE0aG1l3NUQ6U+RdpNtHAV6W6G68shzYzh1AeblAR37SV5YmO2yzAXbthpjZl6SsP/Le/sY74CvYB9onqwFOFLmj5u7Xgfz83/0PtqYaXZPHRRZAnsYwKVkkqFAaeQ8B966GV5VOFhGcLQYqLxf7IwS7g7B9KkCnLoDpXQUJe3da7Lj37ib25efAfvlZ9yBPW8r0pwEH3ux/sLXcgx5tRQ9qGCjKOfMALk8C7NARICGBD4r/dLGClyUDpl5hxJyXiLsMVHRE9zq2cxtAaUljpZT2oLz+vthzNWGEwCUyhaq5R1mtJ2nuIWIVQ1kxR8CaJlZABKYRlJwHOnMa6PhRkchCOnSQqKIsoB3ptlEkTfgzNNWeOHf9ZQJR6fmAOuGJg6bMBDp2FOnXM5xzuOeoLj54mXNSIkGHNEDBJdd057FKDwSb3d0hl0tsIlH7x3qi4pOmBiHK5LkLCa/PDFhPXTCL2OGDrQuQqYElJOgrkjxiDMDvurl1nDXEPvsQBMdQA34JaIcvAMrKdV785q+etupN0v61pXUAaulmlQMFMp8ieGWafs527QBx+wVctcHrZvQBZc7CoHps53bQlr9sql+RtVnlniA/lkM4YIh+TocKQVvyPFJ1VeD7W6PuQ+m+h4OvUBVlpE4bDyT4zmAfIy4fJHCRHpjEA8IxbpAO5CMHiUjwWBN2lKmzEbOHGlrCtUXzgR3YH70AeaJmSeR0bhnh5o5vNpMmbu41BdCCpYjdehqyTbnbQF2xJLoB0o9lBeRnFoPU43r3lV/Mr3zBfr92bG+sQUjtYMw25zR1xkQQYUNYASoeOZgkNKRqXDp3AeWl5fqWg0fcoM6dAT7/CK+LHnfZ7IbNahs+ALbx46B6jGN19ZZca0j62PAs5giyzDYnHyQ/NIUHgXfpZYI/qDC/0X5NWbWx0SMEAW1frAR15mSAqsqA7Ts5mV/z9W5rPOjHYX1Zx8RL7xWwLFuY1hmVv71FIs8kckvs/RW+Kx8ob63Tb1D46Tc1dc7+/SWwNSsDti+eN+uzbZ81AO0YlFHVtV1ygr3Oi6xMp9anTsVf8rk9LNIgYovSeO4FfVDF91Zzw/ZrufecKKuo+dOuwkRLANo+KCNPkfCm9OQkcChhf6eSpSKeLxPPmamMfhi6q7C/JQBty+qlv/1FEHX7BAekOOzIvYnQ2475q9w8HdP1xB/uNVjurCXxfBlzO9Jfh+0++JolAC36/W8dA9sneb0/KESDDwlAnvMGU67gYGX1gGkHjjkhiBheu9fd2CO9k8MmdoO9reQgszoW2C4odWkjx+49dNrIuE0FN8KTslKTn+CHD/JPBkTQK3OCiHhEupB/Pvyx/OKKnMLjQT3HI/8HuD0V7skadxYAAAAASUVORK5CYII="},316:function(e,t,a){},318:function(e,t,a){},411:function(e,t,a){},439:function(e,t,a){},440:function(e,t,a){},441:function(e,t,a){},442:function(e,t,a){},46:function(e,t,a){e.exports={sm_textarea:"managePoll_sm_textarea__3nkFR",poll_info:"managePoll_poll_info__1ojZa",circle_white:"managePoll_circle_white__1uaCi",select_md:"managePoll_select_md__13um9","ant-select-dropdown":"managePoll_ant-select-dropdown__28tj6",edit_tag:"managePoll_edit_tag__1rhNS","ant-checkbox-inner":"managePoll_ant-checkbox-inner__c_gNG",add_tag:"managePoll_add_tag__n7gkH","ant-tag":"managePoll_ant-tag__zesSw",rating_img_wrapper:"managePoll_rating_img_wrapper__hrXkQ",steps_img:"managePoll_steps_img__37tTu",filter_wrapper_ico:"managePoll_filter_wrapper_ico__1eC3K"}},465:function(e,t,a){e.exports=a.p+"static/media/anonymoose-logo.c7b270ba.svg"},466:function(e,t,a){e.exports=a.p+"static/media/logo.c7b270ba.svg"},467:function(e,t,a){e.exports=a.p+"static/media/expand-more.2d8e2c25.svg"},479:function(e,t,a){e.exports=a.p+"static/media/pencil.5fa26e5e.svg"},480:function(e,t,a){e.exports=a.p+"static/media/work-chart.d8145f68.svg"},484:function(e,t,a){e.exports=a.p+"static/media/no-hotlines.50051d5a.svg"},489:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAN5JREFUeJzt2LENwjAYROEDMREFLU0qRsoQYZtUNLQpMgk7QG8qS45ewO+T3FiRfTkpKf5EkiRJ6tIBundIcin2liQPIAtiSvIu1kQEORKX7okF0AFoFkAHoFkAHYBmAXQAmgXQAWgWQAegWQAdgNZ9AbUToSHJrcG91yTnYm9N8mxw9pwNJ0tjvic5e1tjzQt1/wlYAB2Adqp8fklyb3Dvlj/BpcEZm3MsvhcWQAegWQAdgGYBdACaBdABaBZAB6BZAB2AZgF0AFr3BdROhFqZk7yKvZ+Y5EiSJEl/4gNtTT/cFdm74gAAAABJRU5ErkJggg=="},499:function(e,t,a){e.exports=a.p+"static/media/no-openlines.50051d5a.svg"},500:function(e,t,a){e.exports=a.p+"static/media/create-openline.7fcce0f6.svg"},505:function(e,t,a){e.exports=a.p+"static/media/manage-broadcast.2eea7cab.svg"},510:function(e,t,a){e.exports=a.p+"static/media/create-help.3d559d4b.svg"},511:function(e,t,a){e.exports=a.p+"static/media/create-info.603eb5e9.svg"},523:function(e,t,a){e.exports=a(1066)},528:function(e,t,a){},530:function(e,t,a){},531:function(e,t,a){},538:function(e,t,a){},558:function(e,t){},560:function(e,t){},57:function(e,t,a){},593:function(e,t){},594:function(e,t){},70:function(e,t,a){e.exports=a.p+"static/media/dots-icon.aa302437.svg"},839:function(e,t){},86:function(e,t,a){e.exports=a.p+"static/media/thermometer.34d42075.svg"},87:function(e,t,a){e.exports=a.p+"static/media/Thumb.11938490.svg"},88:function(e,t,a){e.exports=a.p+"static/media/emoji.0d8c3e70.svg"},89:function(e,t,a){e.exports=a.p+"static/media/steps.677f415b.svg"},91:function(e,t,a){},935:function(e,t,a){}},[[523,1,2]]]);
//# sourceMappingURL=main.b6b4188b.chunk.js.map