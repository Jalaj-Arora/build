(this["webpackJsonplogin-app-reactjs"]=this["webpackJsonplogin-app-reactjs"]||[]).push([[0],{104:function(e,t,a){e.exports=a.p+"static/media/dots-icon.aa302437.svg"},115:function(e,t,a){e.exports={sm_textarea:"managePoll_sm_textarea__2gyc1",poll_info:"managePoll_poll_info__35K0P",circle_white:"managePoll_circle_white__1jSAt",select_md:"managePoll_select_md__30Qzr","ant-select-dropdown":"managePoll_ant-select-dropdown__38nnC"}},157:function(e,t,a){e.exports=a.p+"static/media/amcc-vector.042c9163.svg"},158:function(e,t,a){e.exports=a.p+"static/media/create-hotline.7fcce0f6.svg"},173:function(e,t,a){},174:function(e,t,a){},224:function(e,t,a){e.exports=a.p+"static/media/send.5a28702a.svg"},257:function(e,t,a){},339:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},371:function(e,t,a){},372:function(e,t,a){},375:function(e,t,a){e.exports=a.p+"static/media/anonymoose-logo.c7b270ba.svg"},376:function(e,t,a){e.exports=a.p+"static/media/logo.c7b270ba.svg"},377:function(e,t,a){e.exports=a.p+"static/media/expand-more.2d8e2c25.svg"},394:function(e,t,a){e.exports=a.p+"static/media/pencil.5fa26e5e.svg"},395:function(e,t,a){e.exports=a.p+"static/media/work-chart.d8145f68.svg"},399:function(e,t,a){e.exports=a.p+"static/media/no-hotlines.50051d5a.svg"},404:function(e,t,a){e.exports=a.p+"static/media/no-openlines.50051d5a.svg"},405:function(e,t,a){e.exports=a.p+"static/media/create-openline.7fcce0f6.svg"},411:function(e,t,a){e.exports=a.p+"static/media/manage-polls.648b5bd2.svg"},428:function(e,t,a){e.exports=a(832)},433:function(e,t,a){},435:function(e,t,a){},436:function(e,t,a){},463:function(e,t){},465:function(e,t){},498:function(e,t){},499:function(e,t){},564:function(e,t,a){},607:function(e,t,a){e.exports=a.p+"static/media/HotLine.8e399cf3.svg"},608:function(e,t,a){e.exports=a.p+"static/media/OpenLine.19ed48f2.svg"},609:function(e,t,a){e.exports=a.p+"static/media/Polls.797dc4b6.svg"},610:function(e,t,a){e.exports=a.p+"static/media/ManageEmp.b979556a.svg"},611:function(e,t,a){e.exports=a.p+"static/media/BroadcastMsg.b628c864.svg"},612:function(e,t,a){e.exports=a.p+"static/media/Help.1b17639f.svg"},613:function(e,t,a){e.exports=a.p+"static/media/Info.a71a0872.svg"},738:function(e,t){},794:function(e,t,a){},81:function(e,t,a){e.exports={no_sidebar:"manageEmp_no_sidebar__2IV_7",box_bordered:"manageEmp_box_bordered__1L9Kq",icon:"manageEmp_icon__2NaGI",box_bordered_active:"manageEmp_box_bordered_active__1hEvf"}},817:function(e,t,a){},832:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(37),s=a.n(r),c=(a(433),a(4)),i=(a(434),a(435),a(436),a(43)),o=a(19),m=a(55),u=a(11),d=a(12),p=a(14),h=a(13),g=a(15),f=function(e){return"".concat("AnonyMoose",".").concat(e)},E=function(e,t){return localStorage.setItem(f(e),t)},v=function(e){return localStorage.getItem(f(e))},b=function(e){return localStorage.removeItem(f(e))},y=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.component;return v("user")?l.a.createElement(e,this.props):l.a.createElement(m.a,{to:{pathname:"/login"}})}}]),t}(l.a.Component),O=a(848),N=a(835),_=a(423),S=a(836),j=a(834),C=a(375),w=a.n(C),k=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:w.a,alt:"AnonyMoose",className:"pr-4 pt-2 pt-lg-0 logo"}))},I=a(376),x=a.n(I),D=a(64),A=a.n(D),T=a(6),U=a(8),F=a.n(U),P="http://10.0.6.10:8000/api/V1/",M=a(42),L={headers:{Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},R=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"login",value:function(e,t,a){var n,l,r,s,c,i,o,m,u,d,p,h,g,f,v,b,y,O,N,_,S,j,C,w,k,I,x,D,U,R,Y,z,H,B,q;return A.a.async((function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,A.a.awrap(F.a.post(P+"authenticate/",{email:e,password:t,page:a},L));case 2:return(n=V.sent).data&&(O=n.data,N=M.AES.encrypt(null===(l=O.user_details)||void 0===l?void 0:l.first_name,"anonymoose").toString(),_=M.AES.encrypt(null===(r=O.user_details)||void 0===r?void 0:r.last_name,"anonymoose").toString(),S=M.AES.encrypt(null===(s=O.user_details)||void 0===s?void 0:s.department_id.toString(),"anonymoose").toString(),j=M.AES.encrypt(null===(c=O.user_details)||void 0===c?void 0:c.org_user_id.toString(),"anonymoose").toString(),C=M.AES.encrypt(null===(i=O.user_details)||void 0===i?void 0:i.end_date,"anonymoose").toString(),w=M.AES.encrypt(null===(o=O.user_details)||void 0===o?void 0:o.start_date,"anonymoose").toString(),k=M.AES.encrypt(null===(m=O.user_data)||void 0===m?void 0:m.email,"anonymoose").toString(),I=M.AES.encrypt(null===(u=O.user_data)||void 0===u?void 0:u.mobile_number,"anonymoose").toString(),x=M.AES.encrypt(null===(d=O.user_data)||void 0===d?void 0:d.organization_id.toString(),"anonymoose").toString(),D=M.AES.encrypt(null===(p=O.user_data)||void 0===p?void 0:p.user_id.toString(),"anonymoose").toString(),U=M.AES.encrypt(null===(h=O.user_data)||void 0===h?void 0:h.is_am_web_user.toString(),"anonymoose").toString(),R=M.AES.encrypt(null===(g=O.user_data)||void 0===g?void 0:g.is_amcc_user.toString(),"anonymoose").toString(),Y=M.AES.encrypt(null===(f=O.user_data)||void 0===f?void 0:f.is_org_cc_user.toString(),"anonymoose").toString(),z=M.AES.encrypt(null===(v=O.user_data)||void 0===v?void 0:v.is_idb_user.toString(),"anonymoose").toString(),H=M.AES.encrypt(null===(b=O.user_data)||void 0===b?void 0:b.is_seeded_user.toString(),"anonymoose").toString(),B=M.AES.encrypt(null===(y=O.user_data)||void 0===y?void 0:y.is_app_user.toString(),"anonymoose").toString(),q=Object(T.a)({},O,{user_data:Object(T.a)({},O.user_data,{email:k,mobile_number:I,organization_id:x,user_id:D,is_am_web_user:U,is_amcc_user:R,is_app_user:B,is_org_cc_user:Y,is_idb_user:z,is_seeded_user:H}),user_details:Object(T.a)({},O.user_details,{first_name:N,last_name:_,department_id:S,org_user_id:j,end_date:C,start_date:w})}),E("user",JSON.stringify(q)),E("current",M.AES.encrypt(JSON.stringify(t),"anonymoose").toString())),V.abrupt("return",n.data);case 5:case"end":return V.stop()}}))}},{key:"logout",value:function(){localStorage.clear(),window.location.reload()}}]),e}()),Y=function(e,t,a){return function(n){return a="admin@anonymoose.co"===e?"is_amcc_user":a,R.login(e,t,a).then((function(e){return n({type:"LOGIN_SUCCESS",payload:{user:e,current:t}}),Promise.resolve()}),(function(e){e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return n({type:"LOGIN_FAIL"}),Promise.reject()}))}},z=a(39),H=a(847),B=(a(564),a(422)),q=a(853),V=a(377),G=a.n(V),J=a(42),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleLogoutClick=a.handleLogoutClick.bind(Object(z.a)(a)),a.handleChangeUserRole=a.handleChangeUserRole.bind(Object(z.a)(a)),a.state={isLoggedIn:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"handleLogoutClick",value:function(){R.logout()}},{key:"handleChangeUserRole",value:function(e){"amweb"===e?window.location.href="/amweb/hotlinemessages":"amcc"===e?window.location.href="/amcc/manageorganizations":"amorgcc"===e&&(window.location.href="/orgcc/manageemployees")}},{key:"render",value:function(){var e=this,t=this.props.userRole,a=t.amWEBUser,n=t.amCCUser,r=t.amORGUser;n?E("userType",J.AES.encrypt("AM CC","anonymoose").toString()):r?E("userType",J.AES.encrypt("Org CC","anonymoose").toString()):a&&E("userType",J.AES.encrypt("AM WEB","anonymoose").toString());var s=v("userType"),c=s?J.AES.decrypt(s,"anonymoose").toString(J.enc.Utf8):"",i=this.props.user.user_data,m=i.email,u=i.is_am_web_user,d=i.is_amcc_user,p=i.is_org_cc_user,h=(i.is_app_user,i.is_idb_user,i.is_seeded_user,this.props.user.user_details),g=h.first_name+" "+h.last_name,f=g.charAt(0).toUpperCase()+g.slice(1),b=f.split(" "),y=b.shift().charAt(0)+b.pop().charAt(0);return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{"data-test":"userInfo",className:"test",placement:"bottom",content:l.a.createElement(q.b,{className:"u-info",size:"large",bordered:!0},l.a.createElement(q.b.Item,{className:" d-flex d-lg-none"},l.a.createElement("div",{className:"d-flex flex-column "},l.a.createElement("span",{className:"uname-top"},f),l.a.createElement("span",{className:"u-type"},c))),l.a.createElement(q.b.Item,null,l.a.createElement("div",{className:"email"},m,l.a.createElement("br",null),l.a.createElement("a",{href:"#"},"Edit Profile"))),r&&u?l.a.createElement(q.b.Item,{onClick:function(){return e.handleChangeUserRole("amweb")}},"AM WEB"):null,r&&d?l.a.createElement(q.b.Item,{onClick:function(){return e.handleChangeUserRole("amcc")}},"AM CC"):null,a&&p?l.a.createElement(q.b.Item,{onClick:function(){return e.handleChangeUserRole("amorgcc")}},"Org CC"):null,a&&d?l.a.createElement(q.b.Item,{onClick:function(){return e.handleChangeUserRole("amcc")}},"AM CC"):null,n&&u?l.a.createElement(q.b.Item,{onClick:function(){return e.handleChangeUserRole("amweb")}},"AM WEB"):null,n&&p?l.a.createElement(q.b.Item,{onClick:function(){return e.handleChangeUserRole("amorgcc")}},"Org CC"):null,l.a.createElement(o.b,{to:"/changepassword"},l.a.createElement(q.b.Item,null,"Change Password")),l.a.createElement(q.b.Item,{onClick:this.handleLogoutClick},"Sign Out")),trigger:"click"},l.a.createElement(H.a,{className:"mr-2"},y),l.a.createElement("span",{className:"d-none d-lg-flex flex-column"},l.a.createElement("span",{className:"uname-top"},f),l.a.createElement("span",{className:"u-type"},c)),l.a.createElement("span",{className:"expand-arrow"},l.a.createElement("img",{src:G.a,alt:"Expand Arrow",className:"pr-0 pr-md-4"}))))}}]),t}(l.a.Component);var W=Object(m.i)(Object(i.b)((function(e){var t=e.auth;return{isLoggedIn:t.isLoggedIn,user:t.user}}))(Q)),K=a(42);var $=Object(i.b)((function(e){var t=e.auth;return{isLoggedIn:t.isLoggedIn,user:t.user,current:t.current,message:e.message.message}}))((function(e){return Object(n.useEffect)((function(){var t=e.dispatch,a=v("userType"),n=a?K.AES.decrypt(a,"anonymoose").toString(K.enc.Utf8):"",l="";"AM CC"===n?l="is_amcc_user":"AM WEB"===n?l="is_am_web_user":"Org CC"===n&&(l="is_org_cc_user");var r=e.current.includes('"')?e.current.slice(1,-1):e.current;setInterval((function(){console.log("INTERVAL"),t(Y(e.user.user_data.email,r,l))}),6e5)})),l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{span:18,md:18,lg:12},l.a.createElement("img",{src:x.a,alt:"Anonymoose Logo",className:"pl-md-0 pr-0 pr-md-4 pt-0 pt-md-0 pt-lg-0 logo"})),l.a.createElement(j.a,{span:6,md:6,lg:12,className:"d-flex justify-content-end av-wrapper"},l.a.createElement(W,{userRole:e})))})),Z=a(101),X=a(854),ee=a(855),te=N.a.Sider,ae=(N.a.Header,N.a.Content,function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("employees")?t="4":this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")?t="2":this.props.data.location.pathname.includes("polls")&&(t="3")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?X.a:ee.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(te,{className:this.state.collapsed?"d-none d-lg-block w-md-100 sider-width":" d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(Z.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(Z.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(o.b,{to:"/orgcc/hotlinedirectory"},"Hotlines")),l.a.createElement(Z.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(o.b,{to:"/orgcc/openlinedirectory"},"Openlines")),l.a.createElement(Z.a.Item,{key:"3",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-polls"}))}," ",l.a.createElement(o.b,{to:"/orgcc/pollsdirectory"}," Polls")),l.a.createElement(Z.a.Item,{key:"4",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-manage-emp"}))}," ",l.a.createElement(o.b,{to:"/orgcc/manageemployees"},"Manage Employees")),l.a.createElement(Z.a.Item,{key:"5",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-broadcast"}))}," ","Broadcast Messages"),l.a.createElement(Z.a.Item,{key:"6",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-help"}))}," ","Help"),l.a.createElement(Z.a.Item,{key:"7",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-info"}))}," ","Info")),l.a.createElement("div",{className:"btm-div"},l.a.createElement("a",{href:"#",className:"px-2"},"Info"),l.a.createElement("a",{href:"#",className:"px-2"},"Help"))))}}]),t}(l.a.Component)),ne=(a(173),a(607),a(608),a(609),a(610),a(611),a(612),a(613),N.a.Sider),le=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?X.a:ee.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(ne,{className:this.state.collapsed?"d-none d-lg-block w-md-100 sider-width":" d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(Z.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},l.a.createElement(Z.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-manage-org"}))},l.a.createElement(o.b,{to:"/amcc/manageorganizations"},"Manage Organizations")))))}}]),t}(l.a.Component),re=function(e){var t=Object(m.g)(),a="/amcc/orgdetails/".concat(e.record.organization_id),n=function(){t.push(a)};return l.a.createElement(l.a.Fragment,null,e.orgName?l.a.createElement("a",{onClick:n},e.record.name):e.orgId?l.a.createElement("a",{onClick:n},e.record.identifier):l.a.createElement(l.a.Fragment,null," "))},se=a(840),ce=a(856),ie=(a(174),O.a.Search,l.a.createElement(ce.a,{style:{fontSize:16,color:"#1890ff"}}),function(e){var t=e.columns,a=e.data,n=e.rowKey;return l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(se.a,{pagination:{pageSize:10},rowKey:n,columns:t,dataSource:a,className:"cf"}))}),oe=a(58),me=function(e){var t=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{type:"primary"}," ",t))},ue=a(394),de=a.n(ue);function pe(){var e=JSON.parse(v("user"));return e&&e.user_data.tokens.access?"Bearer "+e.user_data.tokens.access:{}}var he=a(7),ge=a.n(he),fe=O.a.Search,Ee=(l.a.createElement(ce.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),ve=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","-"),l=n.split("-")[0],r=n.split("-")[1]+"-"+l+"-"+n.split("-")[2];if(new Date<new Date(r)){var s={name:e.name,identifier:e.identifier,organization_id:e.organization_id,start_date:e.start_date.replaceAll(" / ","-"),end_date:e.end_date.replaceAll(" / ","-"),status_id:"Active"===t?2:1},c={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.put(P+"saveOrganization/",s,c).then((function(){_.a.config({placement:"bottomLeft"}),_.a.open({description:"Status of ".concat(e.name," has been changed successfully.")}),a.props.statusOnClicked()}))}else _.a.config({placement:"bottomLeft"}),_.a.open({description:"Status of ".concat(e.name," can't be changed as the end date has been passed.")})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n,searchBy:e})},a.state={data:[],searchBy:"",filterData:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.organizations;t.forEach((function(e){e.start_date=e.start_date.replaceAll("-"," / "),e.end_date=e.end_date.replaceAll("-"," / ")})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.organizations!==e.organizations&&this.setState({data:e.organizations},(function(){t.onSearch(t.state.searchBy)}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t=[{title:"Organization Name ",dataIndex:"",key:"name",width:"22%",render:function(e){return{children:l.a.createElement(re,{record:e,orgName:!0}),props:{"data-title":"Organization Name"}}}},{title:"Organization Id",dataIndex:"",key:"identifier",width:"20%",render:function(e){return{children:l.a.createElement(re,{record:e,orgId:!0}),props:{"data-title":"Organization Id"}}}},{title:"Start Date ",dataIndex:"start_date",key:"start_date",width:"20%",render:function(e){return{children:e,props:{"data-title":"Start date"}}}},{title:"End Date",dataIndex:"end_date",key:"end_date",width:"20%",render:function(e){return{children:e,props:{"data-title":"End date"}}}},{title:"Status",dataIndex:"",key:"status_id",width:"10%",render:function(t){return{children:1===t.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag",onClick:function(){return e.statusClicked(t,"Active")}},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag",onClick:function(){return e.statusClicked(t,"InActive")}},"Inactive"),props:{"data-title":"Status"}}}},{title:"Actions",dataIndex:"",key:"",width:"10%",render:function(e){var t="/amcc/editorg/".concat(e.organization_id);return{children:l.a.createElement(o.b,{to:t},l.a.createElement("img",{src:de.a,alt:"Actions"})),props:{"data-title":"Actions"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(le,null),l.a.createElement(Ee,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Organizations ")),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(fe,{placeholder:"Search",onSearch:this.onSearch})))),l.a.createElement(j.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(o.b,{to:"/amcc/createorg"},l.a.createElement(me,{value:"Create Organization"}))))),l.a.createElement(ie,{key:"manageOrg",rowKey:"identifier",columns:t,data:this.state.filterData}))))))}}]),t}(l.a.Component),be=a(837),ye=a(395),Oe=a.n(ye),Ne=a(5),_e=a(32),Se=a(842),je=a(849),Ce=(a(86),a(843)),we=a(839),ke=a(851),Ie=a(109),xe=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],i=e.children,o=e.label,m=e.value,u=r||m&&0!==m.length?"label label-float":"label";return l.a.createElement("div",{className:"float-label",onBlur:function(){return s(!1)},onFocus:function(){return s(!0)}},i,l.a.createElement("label",{className:u},o))},De=a(857),Ae=function(e){var t=e.next,a=e.stepOneOrganizationInfo,r=e.handleStepOneOnChange,s=e.handleStepOneOnSelect,i=e.handleStepOneDatePickerChange,o=e.orgIdCount,m=e.orgNameCount,u=Ce.a.useForm(),d=Object(c.a)(u,1)[0],p=Object(n.useState)(!1),h=Object(c.a)(p,2),g=h[0],f=h[1],E=Object(n.useState)(""),v=Object(c.a)(E,2),b=v[0],y=v[1],N=we.a.RangePicker;return l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other",form:d},g&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Name",value:a.organizationName},l.a.createElement(Ce.a.Item,{className:"required",name:"organizationName"},l.a.createElement(O.a,{className:"input-control",id:"organizationName",htmlFor:"organizationName",defaultValue:a.organizationName,value:a.organizationName,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"checkOrganization/",{organization_name:a.organizationName},t).then((function(e){e.data&&y(e.data[0])}))}()},autoComplete:"off",maxLength:80}),"status: false"===b&&a.organizationName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.organizationName.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==b&&l.a.createElement(ke.a,{message:"Sorry! This organization already exists in the system. Please use a different name.",type:"error",showIcon:!0})),m&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Id",value:a.organizationId},l.a.createElement(Ce.a.Item,{className:"required",name:"organizationId",validateStatus:"success"},l.a.createElement(O.a,{className:"input-control",id:"organizationId",htmlFor:"organizationId",defaultValue:a.organizationId,value:a.organizationId,onChange:function(e){return r(e)},autoComplete:"off",maxLength:20})),o&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status",value:a.status1},l.a.createElement(Ce.a.Item,{className:"required",name:"status1"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control w-100 w-lg-100",value:a.status1,htmlFor:"status1",onSelect:function(e){return s(e,"status1")}},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Date",value:"date"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(N,{className:"w-100 ",name:"s1Date",value:a.s1Date,onChange:function(e){return i(e,"s1Date")},disabledDate:function(e){return e&&e<ge()().startOf("day")}})))))),l.a.createElement(Ce.a.Item,null,l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),a.organizationName&&a.organizationId&&a.status1&&a.s1Date?"status: false"===b&&(f(!1),t()):f(!0)}},"Next")))},Te=a(846),Ue=(a(87),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,show:!1},a.showModal=function(){a.setState({visible:!0})},a.showBothModals=function(){a.setState({visible:!0,show:!0})},a.handleOnOk=function(){a.setState({show:!1})},a.handleOk=function(){a.setState({visible:!1}),a.props.seededUser?a.props.viaEdit?a.props.handleDelete(a.props.user.email):a.props.handleDelete(a.props.user.userId):a.props.deleteOrg&&a.props.handleDelete(a.props.org)},a.handleCancel=function(){a.setState({visible:!1}),a.props.deleteOrg&&a.props.handleCancel()},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.deleteOrg&&this.showModal()}},{key:"deleteHotline",value:function(){var e=this.props.history,t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.delete(P+"hotline/"+this.props.hotlineId,t).then((function(){e.push("/orgcc/hotlinedirectory")})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.props.deleteOrg?l.a.createElement(l.a.Fragment,null):l.a.createElement(oe.a,{onClick:this.showBothModals},"Delete"),this.props.deleteOrg?l.a.createElement(Te.a,{visible:this.state.visible,onOk:this.handleCancel,onCancel:this.handleOk,centered:!0,width:700,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Cancel",cancelText:"Delete"},l.a.createElement("p",null,"You are about to Delete the Organization"," ",l.a.createElement("strong",null,this.props.org),". Deleting Organization would Delete all records associated with it. Are you sure you want to Delete Organization ",l.a.createElement("strong",null,this.props.org),"?")):!this.props.deleteOrg&&this.props.viaEdit&&this.props.seededUsers.length>1?l.a.createElement(Te.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete ",this.props.user.firstName,"?")):!this.props.viaEdit&&this.props.seededUser?l.a.createElement(Te.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete ",this.props.user.firstName,"?")):!this.props.deleteOrg&&this.props.viaEdit&&1===this.props.seededUsers.length?l.a.createElement(Te.a,{visible:this.state.show,onOk:this.handleOnOk,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"OK"},l.a.createElement("p",null,"There should be at least one seeded user.")):l.a.createElement(Te.a,{visible:this.state.show,onOk:this.handleOnOk,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"OK"},l.a.createElement("p",null,"Are you sure you want to delete this?")))}}]),t}(n.Component)),Fe=a(104),Pe=a.n(Fe),Me=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{placement:"bottom",content:(e=this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null," ",e.seededUser?e.viaEdit?l.a.createElement(oe.a,{onClick:function(){return e.handleEditUser(e.user.email)}},"Edit"):l.a.createElement(oe.a,{onClick:function(){return e.handleEditUser(e.user.userId)}},"Edit"):l.a.createElement(oe.a,null,"Edit")),l.a.createElement("li",null,e.seededUser?l.a.createElement(Ue,{user:e.user,handleDelete:e.handleDelete,seededUsers:e.seededUsers,seededUser:!0,viaEdit:e.viaEdit}):l.a.createElement(Ue,null))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:Pe.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),Le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={data:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.seededUsers;this.setState({data:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.seededUsers!==e.seededUsers&&e.seededUsers.length>0&&this.setState({data:e.seededUsers})}},{key:"render",value:function(){var e=this,t=[{title:"First Name",dataIndex:"firstName",key:"firstName",width:"22%",render:function(e){return{children:e,props:{"data-title":"First Name"}}}},{title:"Last Name",dataIndex:"lastName",key:"lastName",width:"22%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}}},{title:"Mobile",dataIndex:"mobile",key:"mobile",width:"22%",render:function(e){return{children:e.includes("+")?e:"+"+e,props:{"data-title":"Mobile"}}}},{title:"Email",dataIndex:"email",key:"email",width:"21%",render:function(e){return{children:e,props:{"data-title":"Email"}}}},{title:"Status",dataIndex:"status2",key:"status2",width:"10%",render:function(e){return{children:1===e||"1"===e?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(t){return l.a.createElement(Me,{handleEditUser:e.props.handleEditUser,handleDelete:e.props.handleDelete,user:t,seededUsers:e.props.seededUsers,seededUser:!0,viaEdit:e.props.viaEdit})}}];return l.a.createElement(S.a,{className:"content-center pt-0","data-test":"addSeededuser"},this.props.fromStepTwo?l.a.createElement(j.a,{className:"d-flex align-items-center justify-content-end"},l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:function(){return e.props.fromStepTwo?e.props.showAddSeededUserForm():e.props.addSeededUser()}},"Add Seeded User")):null,l.a.createElement(ie,{rowKey:"unique_identifier",columns:t,data:this.state.data}))}}]),t}(l.a.Component),Re=(a(256),a(156)),Ye=a.n(Re),ze=function(e){var t,a,r,s,i=e.next,o=e.prev,m=e.stepTwoOrganizationInfo,u=e.handleStepTwoOnChange,d=e.handleStepTwoOnSelect,p=e.handleMobile,h=e.handleStepTwoDatePickerChange,g=e.addUser,f=e.seededUsers,E=e.showAddUserForm,v=e.showAddSeededUserForm,b=e.showEditUserForm,y=e.showEditSeededUserForm,N=e.cancelAddUser,_=e.cancelEditUser,C=e.editUser,w=e.deleteUser,k=e.fNameCount,I=e.lNameCount,x=Object(n.useState)(!1),D=Object(c.a)(x,2),A=D[0],T=D[1],U=Object(n.useState)(!1),F=Object(c.a)(U,2),P=F[0],M=F[1],L=Object(n.useState)(!1),R=Object(c.a)(L,2),Y=R[0],z=R[1],H=Object(n.useState)(!1),B=Object(c.a)(H,2),q=B[0],V=B[1];Object(n.useEffect)((function(){(E||E)&&(T(!1),M(!1),z(!1),V(!1))}),[E,b]);var G=function(e){e.preventDefault(),o()},J=function(e){m.firstName&&m.lastName&&m.status2&&m.mobile&&m.s2Date&&m.email?(T(!1),P||Y||q||g(e)):T(!0)},Q=we.a.RangePicker;return 0===f.length||E||b?l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other"},A&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"First Name",value:m.firstName},l.a.createElement(Ce.a.Item,{name:"firstName",className:"required"},l.a.createElement(O.a,{id:"firstName",className:"input-control",defaultValue:m.firstName,htmlFor:"firstName",value:m.firstName,onChange:function(e){return u(e)},autoComplete:"off",maxLength:50})),k&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Last Name",value:m.lastName},l.a.createElement(Ce.a.Item,{name:"lastName",className:"required"},l.a.createElement(O.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(Ne.a)(t,"className","required"),Object(Ne.a)(t,"defaultValue",m.lastName),Object(Ne.a)(t,"value",m.lastName),Object(Ne.a)(t,"onChange",(function(e){return u(e)})),Object(Ne.a)(t,"autoComplete","off"),Object(Ne.a)(t,"maxLength",50),t))),I&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Email Id",value:m.email},l.a.createElement(Ce.a.Item,{name:"email",className:"required"},l.a.createElement(O.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(Ne.a)(a,"className","required"),Object(Ne.a)(a,"defaultValue",m.email),Object(Ne.a)(a,"value",m.email),Object(Ne.a)(a,"onChange",(function(e){return u(e)})),Object(Ne.a)(a,"onBlur",(function(e){return function(e){!/\S+@\S+\.\S+/.test(e.target.value)||e.target.value.length<6?M(!0):M(!1)}(e)})),Object(Ne.a)(a,"autoComplete","off"),a)),P&&l.a.createElement(ke.a,{message:"Please enter a valid email address.",type:"error",showIcon:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Date",value:"date"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(Q,(r={className:"new w-100",name:"s2Date"},Object(Ne.a)(r,"className","required"),Object(Ne.a)(r,"value",m.s2Date),Object(Ne.a)(r,"onChange",(function(e){return h(e,"s2Date")})),Object(Ne.a)(r,"disabledDate",(function(e){return e&&e<ge()().startOf("day")})),r))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status",value:m.status2},l.a.createElement(Ce.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,(s={placeholder:"Status",className:"input-control w-100 w-lg-50",value:m.status2,htmlFor:"status2"},Object(Ne.a)(s,"className","required"),Object(Ne.a)(s,"onSelect",(function(e){return d(e,"status2")})),s),l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(xe,{label:"Mobile",value:m.mobile},l.a.createElement(Ce.a.Item,{name:"mobile",className:"required"},l.a.createElement(Ye.a,{country:"in",id:"mobile",htmlFor:"mobile",value:m.mobile,onChange:p,onBlur:function(){m.mobile.length>10?z(!1):z(!0)},autoComplete:"off"}),Y&&l.a.createElement(ke.a,{message:"Please enter a valid mobile number.",type:"error",showIcon:!0})))))),l.a.createElement(Ce.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},E?l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:function(){return N()}},"Back"),l.a.createElement(oe.a,{type:"primary",onClick:function(){return J("viaAddUserButton")}},"Add User")):b?l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:function(){return _()}},"Back"),l.a.createElement(oe.a,{type:"primary",onClick:function(){var e;m.firstName&&m.lastName&&m.status2&&m.mobile&&m.s2Date&&m.email?(T(!1),P||Y||q||C(e)):T(!0)}},"Update")):null)),l.a.createElement(Ce.a.Item,null,E||b?null:l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:G},"Back"),E||b?null:l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(){return J("viaNext")}},"Next"))):l.a.createElement(l.a.Fragment,null,l.a.createElement(Le,{seededUsers:f,showAddSeededUserForm:v,fromStepTwo:!0,handleEditUser:function(e){y(e,"viaStepTwo")},handleDelete:function(e){w(e,"viaStepTwo")}}),l.a.createElement(Ce.a,null,l.a.createElement(Ce.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:G},"Back"),l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),i()}},"Next")))))},He=a(210),Be=function(e){var t,a=e.prev,r=e.loader,s=e.apiError,i=e.handleOk,o=e.handleCancel,m=e.stepOneOrganizationInfo,u=e.handleStepOneOnChange,d=e.handleStepOneOnSelect,p=e.handleStepOneDatePickerChange,h=e.createNewOrganization,g=e.seededUsers,f=e.showEditSeededUserForm,E=e.deleteUser,v=e.addSeededUserFromThirdStep,b=Ce.a.useForm(),y=Object(c.a)(b,1)[0],N=we.a.RangePicker,_=Object(n.useState)(!1),C=Object(c.a)(_,2),w=C[0],k=C[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"py-3 mb-0"},"Organization Details"),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(H.a,null,null===(t=m.organizationName)||void 0===t?void 0:t.charAt(0)),l.a.createElement("span",{className:"md-name"},m.organizationName)),l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other",form:y},w&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement(Te.a,{visible:s,onOk:i,onCancel:o,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"OK"}," ",l.a.createElement("p",null,"There is some difficulty while creating this organization.")," "),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Name",value:m.organizationName},l.a.createElement(Ce.a.Item,{className:"required",name:"organizationName"},l.a.createElement(O.a,{className:"input-control",htmlFor:"organizationName",id:"organizationName",defaultValue:m.organizationName,onChange:function(e){return u(e)},value:m.organizationName,autoComplete:"off",disabled:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Id",value:m.organizationId},l.a.createElement(Ce.a.Item,{className:"required",name:"organizationId",validateStatus:"success"},l.a.createElement(O.a,{className:"input-control",htmlFor:"organizationId",id:"organizationId",defaultValue:m.organizationId,onChange:function(e){return u(e)},value:m.organizationId,autoComplete:"off",disabled:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status",value:m.status1},l.a.createElement(Ce.a.Item,{className:"required",name:"status1"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{placeholder:"Status",className:"input-control w-100 w-lg-100",value:m.status1,htmlFor:"status1",onSelect:function(e){return d(e,"status1")},disabled:!0},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Select Date",value:"date"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(N,{className:"w-100 ",name:"s1Date",defaultValue:m.s1Date,value:m.s1Date,onChange:function(e){return p(e,"s1Date")},disabledDate:function(e){return e&&e<ge()().startOf("day")},disabled:!0})))))),l.a.createElement(be.a,{className:"w-100"}),l.a.createElement(He.a,{spinning:r,size:"large"},l.a.createElement(j.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Seeded Users Details "),l.a.createElement("div",null," ",l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:function(){return v()}},"Add Seeded User"))),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(Le,{seededUsers:g,handleEditUser:function(e){f(e,"viaStepThree")},handleDelete:function(e){E(e,"viaStepThree")},fromStepThree:!0}))),l.a.createElement(Ce.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:function(e){e.preventDefault(),a()}},"Back"),l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),g&&m.organizationName&&m.organizationId&&m.status1&&m.s1Date?(k(!1),h()):k(!0)}},"Create and Invite"))))))},qe=N.a.Content,Ve=Se.a.Step,Ge=[{title:"Organization Details",content:"First-content"},{title:"Seeded User Details",content:"Second-content"},{title:"Confirm Details",content:"Last-content"}],Je=function(){var e=Object(n.useState)(0),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),i=Object(c.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)({organizationName:"",organizationId:"",status1:"",s1Date:""}),E=Object(c.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)({firstName:"",lastName:"",userId:"",status2:"",email:"",s2Date:"",mobile:""}),O=Object(c.a)(y,2),_=O[0],C=O[1],w=Object(n.useState)([]),k=Object(c.a)(w,2),I=k[0],x=k[1],D=Object(n.useState)(!1),A=Object(c.a)(D,2),U=A[0],M=A[1],L=Object(n.useState)(!1),R=Object(c.a)(L,2),Y=R[0],z=R[1],H=Object(n.useState)(!1),B=Object(c.a)(H,2),q=B[0],V=B[1],G=Object(n.useState)(!1),J=Object(c.a)(G,2),Q=J[0],W=J[1],K=Object(n.useState)(!1),Z=Object(c.a)(K,2),X=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],se=function(){M(!1),z(!1),r(a+1)},ce=function(){M(!1),z(!1),r(a-1)},ie=function(e,t){var n=null===I||void 0===I?void 0:I.filter((function(t){return(null===t||void 0===t?void 0:t.userId)!==e}));x(n),0===n.length&&(C({firstName:"",lastName:"",userId:"",status2:"",email:"",s2Date:"",mobile:""}),"viaStepThree"===t&&r(a-1))},oe=function(){M(!0),ee(!1),re(!1),C({firstName:"",lastName:"",userId:"",status2:"",email:"",s2Date:"",mobile:""})},me=function(e,t){"viaStepThree"===t&&r(a-1),ee(!1),re(!1),z(!0);var n={};I.forEach((function(t){t.userId===e&&(n=t)})),C(n)},ue=function(e){"organizationId"===e.target.id&&20===e.target.value.length?W(!0):"organizationName"===e.target.id&&80===e.target.value.length?V(!0):(V(!1),W(!1)),b(Object(T.a)({},v,Object(Ne.a)({},e.target.id,e.target.value)))},de=function(e,t){b(Object(T.a)({},v,Object(Ne.a)({},t,e)))},he=function(e,t){b(Object(T.a)({},v,Object(Ne.a)({},t,e)))},fe=function(e){"firstName"===e.target.id&&50===e.target.value.length?ee(!0):"lastName"===e.target.id&&50===e.target.value.length?re(!0):(ee(!1),re(!1)),C(Object(T.a)({},_,Object(Ne.a)({},e.target.id,e.target.value)))},Ee=function(e,t){C(Object(T.a)({},_,Object(Ne.a)({},t,e)))},ve=function(e,t){C(Object(T.a)({},_,Object(Ne.a)({},t,e)))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(le,null),l.a.createElement(qe,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/amcc/manageorganizations"},l.a.createElement(je.a.Item,null,"Organizations")),l.a.createElement(je.a.Item,null,"Create Organization"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Organization")),l.a.createElement(Se.a,{className:"mt-2",current:a},Ge.map((function(e){return l.a.createElement(Ve,{key:e.title,title:e.title})}))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"steps-content org-form"},0==a?l.a.createElement(Ae,{next:se,stepOneOrganizationInfo:v,handleStepOneOnChange:ue,handleStepOneOnSelect:de,handleStepOneDatePickerChange:he,orgNameCount:q,orgIdCount:Q}):1==a?l.a.createElement(ze,{next:se,prev:ce,stepTwoOrganizationInfo:_,handleStepTwoOnChange:fe,handleStepTwoOnSelect:Ee,handleStepTwoDatePickerChange:ve,handleMobile:function(e){C(Object(T.a)({},_,{mobile:e}))},addUser:function(e){"viaNext"===e&&r(a+1);var t=Math.floor(100*Math.random())+1,n=Object(T.a)({},_,{userId:t});x([].concat(Object(_e.a)(I),[n])),M(!1)},editUser:function(){I.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(_)&&e.userId===_.userId){var t=I.indexOf(e),a=JSON.parse(JSON.stringify(I));a[t]=_,x(a)}})),z(!1)},deleteUser:ie,seededUsers:I,showAddUserForm:U,showAddSeededUserForm:oe,showEditUserForm:Y,showEditSeededUserForm:me,cancelAddUser:function(){M(!1)},cancelEditUser:function(){z(!1)},fNameCount:X,lNameCount:ne}):2==a?l.a.createElement(Be,{prev:ce,createNewOrganization:function(){u(!0);var e=pe(),t=[];I.map((function(e){var a={first_name:e.firstName,last_name:e.lastName,email:e.email,status_id:parseInt(e.status2),start_date:e.s2Date[0]?ge()(e.s2Date[0]).format("DD-MM-YYYY"):"",end_date:e.s2Date[1]?ge()(e.s2Date[1]).format("DD-MM-YYYY"):"",mobile_number:"+"+e.mobile,is_seeded_user:1};t.push(a)}));var a={organization:{name:v.organizationName,identifier:v.organizationId,status_id:parseInt(v.status1),start_date:v.s1Date[0]?ge()(v.s1Date[0]).format("DD-MM-YYYY"):"",end_date:v.s1Date[1]?ge()(v.s1Date[1]).format("DD-MM-YYYY"):""},seeded_users:t},n={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"saveOrganization/",a,n).then((function(){u(!1),window.location="/amcc/manageorganizations"})).catch((function(e){e.message.includes("500")&&g(!0)}))},stepOneOrganizationInfo:v,stepTwoOrganizationInfo:_,handleStepOneOnChange:ue,handleStepOneOnSelect:de,handleStepOneDatePickerChange:he,handleStepTwoOnChange:fe,handleStepTwoOnSelect:Ee,handleStepTwoDatePickerChange:ve,seededUsers:I,showEditUserForm:Y,deleteUser:ie,showEditSeededUserForm:me,addSeededUserFromThirdStep:function(){r(a-1),oe()},handleOk:function(){window.location="/amcc/manageorganizations"},handleCancel:function(){window.location="/amcc/manageorganizations"},loader:m,apiError:h}):l.a.createElement(l.a.Fragment,null)))))))))))},Qe=N.a.Content,We=function(){var e=l.a.useState(!1),t=Object(c.a)(e,2),a=t[0],n=t[1];return l.a.createElement(l.a.Fragment,null,!0===!a?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(le,null),l.a.createElement(Qe,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Manage Organizations")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Oe.a,alt:"Create Organization",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create a new Org Id for your client's organization"),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(be.a,{className:"mt-1"})),l.a.createElement(j.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(oe.a,{onClick:function(){n(!0)},type:"primary"},"Create Organization")))))))))):l.a.createElement(Je,null))},Ke=a(42),$e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},Ze=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"orgId",value:function(){var e=JSON.parse(v("user"));if(e&&e.user_data.organization_id){var t=Ke.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(Ke.enc.Utf8);return parseInt(t)}return{}}},{key:"getOrganizationData",value:function(){return F.a.get(P+"getOrganization/",$e)}},{key:"getEmployees",value:function(){var e=this.orgId();return F.a.get(P+"getEmployees/"+e+"/",$e)}},{key:"getHotlines",value:function(){return F.a.get(P+"hotline/",$e)}},{key:"getOpenlines",value:function(){return F.a.get(P+"openline/",$e)}},{key:"getPolls",value:function(){return F.a.get(P+"poll/",$e)}},{key:"getAssignHotlines",value:function(e){return F.a.get(P+"getHotlineAssignEmpl/"+e,$e)}}]),e}());var Xe=Object(i.b)((function(e){return{manageOrgData:e.manageOrg.manageOrgData}}))((function(e){var t,a=Object(n.useState)(!1),r=Object(c.a)(a,2),s=r[0],i=r[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return Ze.getOrganizationData().then((function(t){return e({type:"MANAGEORG_SUCCESS",payload:{manageOrgData:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"MANAGEORG_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[s]);return(null===(t=e.manageOrgData)||void 0===t?void 0:t.length)>0?l.a.createElement(ve,{organizations:e.manageOrgData,statusOnClicked:function(){i(!s)}}):l.a.createElement(We,null)})),et=function(){return function(e){return Ze.getEmployees().then((function(t){return e({type:"MANAGEEMP_SUCCESS",payload:{manageEmpData:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"MANAGEEMP_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}},tt=O.a.Search,at=(l.a.createElement(ce.a,{style:{fontSize:16,color:"#1890ff"}}),Ie.a.Option),nt=N.a.Content,lt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})};var n=[{title:"First Name",dataIndex:"firstname",key:"firstname",width:"22%",render:function(e){return{children:e,props:{"data-title":"First Name"}}}},{title:"Last Name",dataIndex:"lastname",key:"lastname",width:"22%",render:function(e){return{children:e,props:{"data-title":"Last Name"}}}},{title:"Mobile Number",dataIndex:"Mobile_Number",key:"Mobile_Number",width:"20%",render:function(e){return{children:e,props:{"data-title":"Mobile Number"}}}},{title:"Access",dataIndex:"Access",key:"Access",render:function(e){var t="",a=!1;for(var n in e)1==e[n]&&("am_web"==n&&(n="AM WEB",a=!0),"org_cc_user"==n&&(n="Org CC",a=!0),"app_user"==n&&(a||(n="APP")),0==t.length?t+=n:"app_user"!==n&&(t.includes("APP")?t=n:t+=", "+n));return{children:t,props:{"data-title":"Access"}}},width:"20%"},{title:"Status",dataIndex:"status",key:"status",width:"10%",render:function(){return{children:l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"),props:{"data-title":"Status"}}}},{title:"Actions",dataIndex:"Actions",key:"x",width:"10%",render:function(){return{children:l.a.createElement(Me,null),props:{"data-title":"Actions"}}}}];return a.state={columns:n,data:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(et())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,a=e.manageEmpData;this.setState({data:a},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:this.props}),l.a.createElement(nt,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Manage Employees")),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(tt,{placeholder:"Search",onSearch:this.onSearch})),l.a.createElement(j.a,{span:24,lg:9,className:"ml-0 ml-lg-4 mt-2 mt-lg-0"},l.a.createElement(Ie.a,{className:"w-100 w-md-75",defaultValue:"Permissions",disabled:!0},l.a.createElement(at,{value:"1",defaultValue:!0},"1"),l.a.createElement(at,{value:"2"},"2"))))),l.a.createElement(j.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(me,{value:"Add Employee"})))),l.a.createElement(ie,{rowKey:"unique_identifier",columns:this.state.columns,data:this.state.filterData}))))))}}]),t}(l.a.Component);var rt=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(lt),st=a(157),ct=a.n(st),it=(a(257),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){window.open("https://www.anonymoose.co/platformprivacypolicy.pdf","_blank")},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,"See",l.a.createElement(oe.a,{type:"link",className:"link pl-1",onClick:this.showModal},"Privacy Policy"),l.a.createElement(Te.a,{title:"Privacy Policy",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,className:"modal-lg privacy-txt",centered:!0},l.a.createElement(S.a,{className:"modal-icon py-4"},l.a.createElement("p",null,"THIS PRIVACY POLICY (\u201cPRIVACY POLICY\u201d) SETS FORTH HOW WE USE AND PROTECT THE PERSONAL INFORMATION COLLECTED WHILE USING OUR SERVICES. PLEASE READ THIS PRIVACY POLICY CAREFULLY. THIS PRIVACY POLICY IS APPLICABLE TO YOU (\u201cYOU\u201d, \u201cYOUR\u201d, \u201cUSER\u201d OR \u201cUSERS\u201d) IF YOU ARE USING, ACCESSING OUR SERVICES OR HAVE DOWNLOADED OR INSTALLED OUR PLATFORM. BY DOWNLOADING, CONTINUING TO USE OR ACCESSING THE PLATFORM OR THE SERVICES, YOU AGREE TO THE TERMS OF THIS PRIVACY POLICY. IF THE YOU DO NOT AGREE TO THIS PRIVACY POLICY, YOU MAY NOT USE, AVAIL OR ACCESS OUR SERVICES.",l.a.createElement("ol",{className:""},l.a.createElement("li",null,l.a.createElement("u",null,"Introduction"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"EarthenLamps Inc, registered in Delaware with principal office located at 12265 Viewoak Drive, Saratoga, CA 95070 (",l.a.createElement("b",null,"\u201cCompany\u201d, \u201cwe\u201d, \u201cus\u201d, \u201cour\u201d"),"), has developed a platform comprising of a mobile application, dashboard and control center under a name \u201cAnonyMoose\u201d (",l.a.createElement("b",null,"\u201cSaaS PlaCorm\u201d or \u201cPlaCorm\u201d"),")and offers services that will enable employees of an organization to provide feedback, ideas, suggesZons, and to report incidents relaZng to harassment or microaggressions, or any other concern, privately and discreetly, to such organizaZon\u2019s leadership, management and designated individuals or departments",l.a.createElement("b",null,"(\u201cServices\u201d)"),"."),l.a.createElement("li",{className:""},"We are committed to data privacy and have made this Privacy Policy to describe the procedures we adhere to for collecting, using, and disclosing the Personal Information (defined below). We recommend Users to read this Privacy Policy carefully so that Users understand our approach towards the use of their Personal Information."))),l.a.createElement("li",null,l.a.createElement("u",null,"What kinds of information do we collect?"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"To provide the Services, we require to process information about you. The type of information that we collect depends on how you use our platform."),l.a.createElement("li",null,l.a.createElement("b",null,"Personal Details:")," We may collect any personal information such as your name, contact number, email address, and designaZon, provided by your organization, or while you create and/or update your respecZve account and/or use of the Services. This information that can identify, or is capable of identifying a person, shall be referred to as ",l.a.createElement("b",null,"\u201cPersonal Information\u201d"),"."),l.a.createElement("li",null,l.a.createElement("b",null,"Device information:")," Whenever you access our Platform through Wi-Fi or the internet, we may also collect your browser name, usage, log related information, the type of electronic device, manufacturer, make, model, unique ID of the electronic device and other technical information about your means of connection to our Platform or Services, such as the operating system and other similar information. The device information will be used solely for the purpose of improving our Services and to provide You with better user experience."),l.a.createElement("li",null,"For the purposes of this Privacy Policy, such information in section 2.3 shall also be considered Personal Information."))),l.a.createElement("li",null,l.a.createElement("u",null,"How we use this information"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"We use the information (which include the Personal Information) provided by you or collected by us in the following cases: (i) to provide User with the Services and to assist the User in the event the User needs any additional support; (ii) for creation or development of business intelligence or data analytics in relation to the Services provided by the Company; (iii) to understand usage patterns of our Platform or the Services; (iv) to improve usability of our Services and for Services maintenance; (v) to maintain and manage account of the organization; (vi) to prevent fraud and abuse (vii) to enhance the security of our the Platform and/ or the Services; (viii) to ensure that our Platform or the Services are not used for illegal purposes ; (ix) for internal record keeping; and (x) to comply with our legal or statutory obligations."),l.a.createElement("li",null,"ANONYMIZED DATA: We will also use your Personal Information collected by us to create aggregate anonymized data. We ensure that such anonymized data doesn\u2019t directly identify you or your Personal Information shared with us. We may use this anonymized data for any purpose including but not limited to, research, understand usage patterns, analytical purposes, and to improve our Services. By agreeing to this Privacy Policy, you provide us the right to use your Personal Information to create anonymized data and use it for our business purposes."))),l.a.createElement("li",null,l.a.createElement("u",null,"How the information is shared"),l.a.createElement("p",{className:"pl-4"},"In the course of providing Services or access of the Platform to you, we may share your information, which may also include your Personal Information, with certain parties, in only the following cases. The Company does not share your Personal Information with any member within your organization/company/enterprise. Accordingly, you expressly give your free consent to us to disclose or share your Personal Information in the following cases:"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,l.a.createElement("b",null,"Administrators:")," We may provide access to your Personal information to any of our authorized administrators for internal technical purpose, who shall be under confidentiality obligations towards the same. For the sake of clarity, such administrators shall not be part of your organization."),l.a.createElement("li",null,l.a.createElement("b",null,"Service Providers:")," We may share User\u2019s Personal Information with the service providers, who are working with us, or may work with us, in connection with the operation of the Services and assisting us in improving the Platform. Examples include service providers who are providing technical infrastructure services, analyzing how our Platform is used, providing customer service, facilitating payments or conducting surveys."),l.a.createElement("li",null,l.a.createElement("b",null,"Merger or Acquisi7on:")," We may transfer User\u2019s Personal Information if we are acquired by/we acquire or merge with another company or transfer a part of our business, to a third party. Any third party or resultant entity that receives the User\u2019s Personal Information pursuant to a merger, demerger, amalgamation reconstruction, change in control or business transfer shall have the right to continue to use User\u2019s Personal Information and such new entity shall abide with this privacy policy."),l.a.createElement("li",null,l.a.createElement("b",null,"Legal and Regulatory Authorities:")," We may be required to disclose User\u2019s information including Personal Information due to legal or regulatory requirements. In such instances, we reserve the right to disclose User\u2019s Personal Information as required in order to comply with our legal obligations, including but not limited to complying with court orders, warrants, or discovery requests. We may also disclose User\u2019s Personal Information to (a) law enforcement officers or others; (b) to comply with a judicial proceeding, court order, or legal process served on us ; (c) to enforce or apply this Privacy Policy or our other policies or agreements; (d) respond to claims that any Personal Information violates the rights of third-parties; or (e) protect the rights, property, or personal safety of Company, or the general public."),l.a.createElement("li",null,"User agrees and acknowledges that we may not be required to inform User prior to or after disclosures made according to this section."))),l.a.createElement("li",null,l.a.createElement("u",null,"How long your information is retained"),l.a.createElement("ol",{className:"sub"},l.a.createElement("li",null,"We endeavor to collect only such Information including Personal Information that is necessary for the purposes indicated here. We may retain such information on a case-by-case determination depending on matters such as the nature of the information, why it is collected and processed, and relevant legal or operational retention needs. For example, we may retain such information to pursue legitimate business interests, conduct audits, comply with (and demonstrate compliance with) legal obligations, resolve disputes and enforce our agreements."),l.a.createElement("li",null,"We may retain your non- Personal Information even after you have stopped using our Platform or the Services for the sole purpose of providing better Services and improving usage pattern on the Platform."))),l.a.createElement("li",null,l.a.createElement("u",null," Access to your content on the PlaCorm:"),l.a.createElement("p",{className:"pl-4"},"While you use our Platform, you may provide certain information including but not limited to images, location detail, documents, text, audio clip, video clip, organization\u2019s policies and training material to us (\u201cUser Content\u201d). The Company ensures that the User Content remain private, integral and secure. The Company may access such User Content only to abide by its legal obligations as provided in section 4.4 of this Privacy Policy.")),l.a.createElement("li",null,l.a.createElement("u",null,"Our Security Measures:"),l.a.createElement("p",{className:"pl-4"},"User\u2019s Personal Information is stored on our database which is hosted on the AWS cloud. Although there are appropriate \ufb01rewalls and protections, we cannot warrant the security of any Personal Information transmitted as our systems are not hack proof. Data pilferage due to unauthorized hacking, virus attacks, technical issues is possible, and we take no liability or responsibility for it. Users are required to be careful to avoid \u2018phishing\u2019 scams, where someone may send User an e-mail that looks like it is from the Company asking for User\u2019s Personal Information.")),l.a.createElement("li",null,l.a.createElement("u",null,"Hyperlinks:"),l.a.createElement("p",{className:"pl-4"},"The Platform may from time to time contain hyperlinks to other websites or mobile applications. Such links are provided for convenience only and we take no responsibility for the content and maintenance of or privacy compliance of any linked website. Any hyperlink on our Platform to another website does not imply our endorsement, support, or sponsorship of the operator of that website nor of the information and/or services which it provides. The Company is not a party to any transaction between you and such website.")),l.a.createElement("li",null,l.a.createElement("u",null,"Limitation of Liability:"),l.a.createElement("p",{className:"pl-4"},"NEITHER PARTY SHALL BE LIABLE TO THE OTHER FOR ANY INDIRECT, CONSEQUENTIAL, INCIDENTAL, EXEMPLARY OR SPECIAL DAMAGES, LOSS OF PROFIT, BUSINESS HOWSOEVER CAUSED, EVEN IF THE OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. THE MAXIMUM LIABLITY OF THE COMPANY FOR DIRECT DAMAGE OR LOSS SHALL BE LIMITED TO AN AMOUNT OF USD 1000 (US DOLLARS ONE THOUSAND ONLY). THE FOREGOING LIMITATIONS OF LIABILITY SHALL APPLY NOTWITHSTANDING THE FAILURE OF ESSENTIAL PURPOSE OF ANY LIMITED WARRANTY OR REMEDY HEREIN.")),l.a.createElement("li",null,l.a.createElement("u",null,"Reservation of Rights:"),l.a.createElement("p",{className:"pl-4"},"All rights not expressly granted in this Privacy Policy are reserved by the Company. Nothing contained in this Privacy Policy shall be construed as conferring by implication, estoppels or otherwise, any license or right under any copyright, patent, trademark or other intellectual property right of Company or any other person or to User.")),l.a.createElement("li",null,l.a.createElement("u",null,"Governing Laws and Disputes:"),l.a.createElement("p",{className:"pl-4"},"This Privacy Policy shall in all respects be governed by and construed and enforced in accordance with the laws of Delaware and the courts in Delaware shall have an exclusive jurisdiction to adjudicate any subject matter under this Privacy Policy without any con\ufb02ict of laws. Any dispute or di\ufb00erence arising between you and the Company as to the e\ufb00ect, validity or interpretation or any other matter under this Privacy Policy or as to their rights, duties or liabilities hereunder shall be referred to arbitration in accordance with the rules of the International Chamber of Commerce to the exclusive jurisdiction to venue of the courts of Delaware.")),l.a.createElement("li",null,l.a.createElement("u",null,"Changes to This Policy:"),l.a.createElement("p",{className:"pl-4"},"We may update this Privacy Policy from time to time. Users are encouraged to check this Privacy Policy on a regular basis to be aware of the changes made to it. The Company shall not be liable for any claims arising out of non-intimation of such change in this Privacy Policy. This Privacy Policy was last modi\ufb01ed on"," ",l.a.createElement("b",null,l.a.createElement("span",{className:"border-bottom"}," ")," July, 2020."))),l.a.createElement("li",null,l.a.createElement("u",null,"Contact Us"),l.a.createElement("p",{className:"pl-4"},"If User has any questions, concerns or grievances regarding this Privacy Policy, User can email us at our grievance email-address"," ",l.a.createElement("a",{href:"mailto:info@anonymoose.co"},"info@anonymoose.co"))))))))}}]),t}(n.Component)),ot={wrapperCol:{span:24}},mt={wrapperCol:{span:24}},ut=a(42),dt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(z.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(z.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(z.a)(a)),a.state={email:"",password:"",page:"is_app_user",error:"false"},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch;t.history;a(Y(this.state.email,this.state.password,this.state.page)).then((function(){window.location.reload()})).catch((function(){e.setState({loading:!1,error:"true"})}))}},{key:"canSubmit",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=(t.message,!1),r=!1,s=!1,c=v("user");c||(n=!0,r=!0,s=!0);var i=JSON.parse(v("user"));c&&i&&"null"!=i.user_data&&(n="true"===ut.AES.decrypt(i.user_data.is_amcc_user,"anonymoose").toString(ut.enc.Utf8),r="true"===ut.AES.decrypt(i.user_data.is_org_cc_user,"anonymoose").toString(ut.enc.Utf8),s="true"===ut.AES.decrypt(i.user_data.is_am_web_user,"anonymoose").toString(ut.enc.Utf8));this.canSubmit();if(a){if(r)return l.a.createElement(m.a,{to:"/orgcc/manageemployees"});if(s)return l.a.createElement(m.a,{to:"/amweb/hotlinemessages"});if(n)return l.a.createElement(m.a,{to:"/amcc/manageorganizations"})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(k,null)),l.a.createElement(S.a,{className:"content-center mt-0 px-4"},l.a.createElement(j.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(j.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},"Control Center and Insights Dashboard")),l.a.createElement(S.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:ct.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(S.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},"Raising Voice Anonymously Made Easy"))),l.a.createElement(j.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},"true"==this.state.error&&l.a.createElement(ke.a,{message:"Invalid Login! Please try again",type:"error",showIcon:!0}),l.a.createElement(S.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Forgot Password"),l.a.createElement("p",{className:"mt-3 font-weight-bold"},"Enter your registered email address to request a password reset link.")),l.a.createElement(Ce.a,Object.assign({},ot,{onSubmit:this.handleLogin,ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(xe,{label:"Email"},l.a.createElement(Ce.a.Item,{name:"email",rules:[{required:!0,message:"Please enter your email!",type:"email"}]},l.a.createElement(O.a,{type:"Email",className:"input-control",placeholder:" ",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(Ce.a.Item,mt,l.a.createElement(oe.a,{type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4"},"REQUEST PASSWORD RESET LINK")),l.a.createElement("div",{className:"justify-content-center d-flex"},l.a.createElement(oe.a,{type:"link",className:"link"},"Back to ",l.a.createElement("b",{className:"pl-1"},"Sign In"))))))))}}]),t}(n.Component),pt={wrapperCol:{span:24}},ht={wrapperCol:{span:24}},gt=a(42),ft=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(z.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(z.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(z.a)(a)),a.state={email:"",password:"",page:"is_app_user",error:"false"},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch;t.history;a(Y(this.state.email,this.state.password,this.state.page)).then((function(){window.location.reload()})).catch((function(){e.setState({loading:!1,error:"true"})}))}},{key:"canSubmit",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=(t.message,!1),r=!1,s=!1,c=v("user");c||(n=!0,r=!0,s=!0);var i=JSON.parse(v("user"));c&&i&&"null"!=i.user_data&&(n="true"===gt.AES.decrypt(i.user_data.is_amcc_user,"anonymoose").toString(gt.enc.Utf8),r="true"===gt.AES.decrypt(i.user_data.is_org_cc_user,"anonymoose").toString(gt.enc.Utf8),s="true"===gt.AES.decrypt(i.user_data.is_am_web_user,"anonymoose").toString(gt.enc.Utf8));this.canSubmit();if(a){if(r)return l.a.createElement(m.a,{to:"/orgcc/manageemployees"});if(s)return l.a.createElement(m.a,{to:"/amweb/hotlinemessages"});if(n)return l.a.createElement(m.a,{to:"/amcc/manageorganizations"})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(k,null)),l.a.createElement(S.a,{className:"content-center mt-0 px-4"},l.a.createElement(j.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(j.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},"Control Center and Insights Dashboard")),l.a.createElement(S.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:ct.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(S.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},"Raising Voice Anonymously Made Easy"))),l.a.createElement(j.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},"true"==this.state.error&&l.a.createElement(ke.a,{message:"Invalid Login! Please try again",type:"error",showIcon:!0}),l.a.createElement(S.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Reset Password"),l.a.createElement("p",{className:"mt-3 font-weight-bold"},"Set a new password for your account.")),l.a.createElement(Ce.a,Object.assign({},pt,{onSubmit:this.handleLogin,ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(xe,{label:"Password"},l.a.createElement(Ce.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your password!"}]},l.a.createElement(O.a,{type:"password",className:"input-control",value:this.state.password,onChange:this.onChangePassword}))),l.a.createElement(xe,{label:"Confirm Password"},l.a.createElement(Ce.a.Item,{name:"confirmpassword",rules:[{required:!0,message:"Please confirm your password!"}]},l.a.createElement(O.a,{type:"password",className:"input-control",value:this.state.password,onChange:this.onChangePassword}))),l.a.createElement(Ce.a.Item,ht,l.a.createElement(oe.a,{type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4"},"RESET PASSWORD")))))))}}]),t}(n.Component),Et={wrapperCol:{span:24}},vt={wrapperCol:{span:24}},bt=a(42),yt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(z.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(z.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(z.a)(a)),a.state={email:"",password:"",page:"is_app_user",error:"false"},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(){var e=this;this.setState({loading:!0});var t=this.props,a=t.dispatch;t.history;a(Y(this.state.email,this.state.password,this.state.page)).then((function(){window.location.reload()})).catch((function(){e.setState({loading:!1,error:"true"})}))}},{key:"canSubmit",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=(t.message,!1),r=!1,s=!1,c=v("user");c||(n=!0,r=!0,s=!0);var i=JSON.parse(v("user"));c&&i&&"null"!=i.user_data&&(n="true"===bt.AES.decrypt(i.user_data.is_amcc_user,"anonymoose").toString(bt.enc.Utf8),r="true"===bt.AES.decrypt(i.user_data.is_org_cc_user,"anonymoose").toString(bt.enc.Utf8),s="true"===bt.AES.decrypt(i.user_data.is_am_web_user,"anonymoose").toString(bt.enc.Utf8));var o=this.canSubmit();if(a){if(r)return l.a.createElement(m.a,{to:"/orgcc/manageemployees"});if(s)return l.a.createElement(m.a,{to:"/amweb/hotlinemessages"});if(n)return l.a.createElement(m.a,{to:"/amcc/manageorganizations"})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"px-4 py-1 py-lg-3 header"},l.a.createElement(k,null)),l.a.createElement(S.a,{className:"content-center mt-0 px-4"},l.a.createElement(j.a,{sm:24,lg:12,className:"vector-area justify-content-center mt-1"},l.a.createElement(j.a,{span:24,className:"text-center"},l.a.createElement("h5",{className:"text-center primary-text"},"Control Center and Insights Dashboard")),l.a.createElement(S.a,{className:"justify-content-center mt-3"},l.a.createElement("img",{src:ct.a,alt:"Anonymoose",className:"pr-0 pr-lg-4"})),l.a.createElement(S.a,{className:"pt-3"},l.a.createElement("p",{className:"w-100 text-center text-wgt-md mb-1 d-none d-lg-block"},"Raising Voice Anonymously Made Easy"),l.a.createElement("p",{className:"text-center text-center subtext px-5 mb-0 d-none d-lg-block"},'Login to manage AnonyMoose eco-system. This includes employees eligible to use the app and/or components such as Hotlines, Openlines, Polls and Surveys, Broadcast Messages and access to different features of the "Insights Dashboard", through set of assignable permissions.'))),l.a.createElement(j.a,{lg:{span:12},md:{span:24},xs:{span:24},className:"d-flex justify-content-center mt-2"},l.a.createElement("div",{className:" col-md-24 col-lg-12 col-xl-10 login-box justify-content-center d-flex"},"true"==this.state.error&&l.a.createElement(ke.a,{message:"Invalid Login! Please try again",type:"error",showIcon:!0}),l.a.createElement(S.a,{className:"mb-4 d-none d-lg-block"},l.a.createElement("h2",null,"Sign In")),l.a.createElement(Ce.a,Object.assign({className:"floating-label"},Et,{onSubmit:this.handleLogin,ref:function(t){e.form=t},name:"basic",initialValues:{remember:!0}}),l.a.createElement(xe,{label:"Email",value:this.state.email},l.a.createElement(Ce.a.Item,{name:"email",rules:[{required:!0,message:"Please enter your email!",type:"email"}]},l.a.createElement(O.a,{type:"Email",className:"input-control",placeholder:" ",value:this.state.email,onChange:this.onChangeUsername}))),l.a.createElement(xe,{label:"Password",value:this.state.password},l.a.createElement(Ce.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your password!"}]},l.a.createElement(O.a,{type:"password",className:"input-control",value:this.state.password,onChange:this.onChangePassword}))),l.a.createElement("div",{className:"forgot-pwd"},l.a.createElement("a",{href:"#"},"Forgot Password")),l.a.createElement(Ce.a.Item,vt,l.a.createElement(oe.a,{disabled:!o,type:"primary",htmlType:"submit",className:"primary-btn-lg w-100 mt-4",onClick:function(){e.handleLogin()}},"SIGN IN")))))),l.a.createElement(S.a,{className:"footer-content position-fixed"},l.a.createElement(it,null)))}}]),t}(n.Component);var Ot=Object(i.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,message:e.message.message}}))(yt),Nt=N.a.Sider,_t=(N.a.Header,N.a.Content,function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")&&(t="2")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?X.a:ee.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(Nt,{className:this.state.collapsed?" d-lg-block w-md-100 sider-width":"d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(Z.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(Z.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-hotlines"}))}," ",l.a.createElement(o.b,{to:"/amweb/hotlinemessages"},"Hotlines Messages")),l.a.createElement(Z.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-polls"}))}," ",l.a.createElement(o.b,{to:"/amweb/openlinemessages"},"Openline Messages"))),l.a.createElement("div",{className:"btm-div"},l.a.createElement("a",{href:"/",className:"px-2",disabled:!0},"Info"),l.a.createElement("a",{href:"/",className:"px-2",disabled:!0},"Help"))))}}]),t}(l.a.Component)),St=N.a.Content,jt=a(42),Ct=function(e){var t=v("userType"),a=t?jt.AES.decrypt(t,"anonymoose").toString(jt.enc.Utf8):"",r=Object(n.useState)({currentPwd:"",newPwd:"",confirmPwd:""}),s=Object(c.a)(r,2),i=s[0],o=s[1],m=Object(n.useState)(!1),u=Object(c.a)(m,2),d=u[0],p=u[1],h=Object(n.useState)(!1),g=Object(c.a)(h,2),f=g[0],E=g[1],b=Object(n.useState)(!1),y=Object(c.a)(b,2),_=y[0],C=y[1];Object(n.useEffect)((function(){E(!1),C(!1)}),[]);var w=function(e){o(Object(T.a)({},i,Object(Ne.a)({},e.target.id,e.target.value)))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},"AM WEB"===a?l.a.createElement($,{amWEBUser:!0}):"AM CC"===a?l.a.createElement($,{amCCUser:!0}):"Org CC"===a?l.a.createElement($,{amORGUser:!0}):null),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,"AM WEB"===a?l.a.createElement(_t,{data:e}):"Org CC"===a?l.a.createElement(ae,{data:e}):"AM CC"===a?l.a.createElement(le,null):null,l.a.createElement(St,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Change Password")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(Te.a,{visible:d,onOk:function(){v("user")&&R.logout()},onCancel:function(){v("user")&&R.logout()},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"OK"},l.a.createElement("p",null,"Your password has been changed successfully. Please login again with your new password.")),l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(Ce.a,{className:"input-md floating-label w-100"},l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32},className:"d-block"},l.a.createElement(j.a,{span:8,className:"gutter-row"},f&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Old Password is wrong.",type:"error"})),l.a.createElement(xe,{label:"Current Password",value:i.currentPwd},l.a.createElement(Ce.a.Item,{name:"currentpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your current password!"}]},l.a.createElement(O.a.Password,{htmlFor:"currentpassword",id:"currentPwd",value:i.currentPwd,onChange:w})))),l.a.createElement(j.a,{span:8,className:"gutter-row"},l.a.createElement(xe,{label:"New Password",value:i.newPwd},l.a.createElement(Ce.a.Item,{name:"newpassword",className:"pwd required",rules:[{required:!0,message:"Please enter your new password!"}]},l.a.createElement(O.a.Password,{htmlFor:"newpassword",id:"newPwd",value:i.newPwd,onChange:w,onBlur:function(e){return function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?C(!1):C(!0)}(e)}})),_&&l.a.createElement(ke.a,{message:"Please enter a valid password.\r It should be atleast 8 characters long with atleast 1 each of Capital letter, Small letter, Numeric and Special character.",type:"error",showIcon:!0}))),l.a.createElement(j.a,{span:8,className:"gutter-row"},l.a.createElement(xe,{label:"Confirm Password",value:i.confirmPwd},l.a.createElement(Ce.a.Item,{name:"confirmpassword",className:"pwd confirpwd required",rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newpassword")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],dependencies:["newpassword"],hasFeedback:!0},l.a.createElement(O.a.Password,{htmlFor:"confirmpassword",id:"confirmPwd",value:i.confirmPwd,onChange:w})))))),l.a.createElement(Ce.a.Item,null,l.a.createElement("div",{className:"mt-5"},l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(){var e=pe(),t={old_password:i.currentPwd,new_password:i.newPwd,confirm_password:i.confirmPwd},a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};i.newPwd!==i.confirmPwd||_||F.a.put(P+"changepassword/",t,a).then((function(){E(!1),p(!0)})).catch((function(e){e.message.includes("400")&&E(!0)}))}},"Submit")))))))))))))},wt=(a(339),a(76)),kt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,iconContent:"",ImageId:""},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.addIcon(a.state.iconContent,a.state.ImageId)},a.handleCancel=function(){a.setState({visible:!1})},a.onSelectIcon=function(e){a.setState({iconContent:e.currentTarget.innerHTML,ImageId:e.currentTarget.id})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{type:"link",className:"link pl-0",onClick:this.showModal},l.a.createElement("span",{className:"icon icon-add-filled"}),"Add Icon"),l.a.createElement(Te.a,{className:"modal-icon",title:"Add Icon",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Add",cancelText:"Cancel"},l.a.createElement(S.a,{className:"py-4","data-test":"AddIcon"},l.a.createElement("div",{className:"1"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:1,onClick:this.onSelectIcon},l.a.createElement(wt.a,{title:"Sexual Harrasment"},l.a.createElement("span",{className:"icon icon-sexual-harassment-1"}))),l.a.createElement("div",{className:"2"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:2,onClick:this.onSelectIcon},l.a.createElement(wt.a,{title:"Violence"},l.a.createElement("span",{className:"icon icon-violence"}))),l.a.createElement("div",{className:"3"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:3,onClick:this.onSelectIcon},l.a.createElement(wt.a,{title:"Racism"},l.a.createElement("span",{className:"icon icon-racism"}))),l.a.createElement("div",{className:"4"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:4,onClick:this.onSelectIcon},l.a.createElement(wt.a,{title:"Cyber Bullying"},l.a.createElement("span",{className:"icon icon-cyber-bullying"}))),l.a.createElement("div",{className:"5"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:5,onClick:this.onSelectIcon},l.a.createElement(wt.a,{title:"Fight"},l.a.createElement("span",{className:"icon icon-fight"}))),l.a.createElement("div",{className:"6"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:6,onClick:this.onSelectIcon},l.a.createElement(wt.a,{title:"Discrimination"},l.a.createElement("span",{className:"icon icon-discrimination"}))),l.a.createElement("div",{className:"7"===this.state.ImageId?"col-3 col-lg-2 selected":"col-3 col-lg-2",id:7,onClick:this.onSelectIcon},l.a.createElement(wt.a,{title:"Slap"},l.a.createElement("span",{className:"icon icon-slap"}))))))}}]),t}(n.Component),It=a(75),xt=a.n(It),Dt=a(164),At=a.n(Dt),Tt=Ie.a.Option,Ut=function(e){var t=e.next,a=e.stepOneHotLineInfo,r=e.handleStepOneOnChange,s=e.handleStepOneOnSelect,i=e.handleStepOneDatePickerChange,o=e.addIcon,m=e.getIconText,u=Object(n.useState)({iconText:""}),d=Object(c.a)(u,2),p=(d[0],d[1],Object(n.useState)(!1)),h=Object(c.a)(p,2),g=h[0],f=h[1],E=Object(n.useState)(!0),v=Object(c.a)(E,2),b=(v[0],v[1]),y=Ce.a.useForm(),O=Object(c.a)(y,1)[0],N=Object(n.useState)(""),_=Object(c.a)(N,2),S=_[0],j=_[1],C=we.a.RangePicker;return l.a.createElement(Ce.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:O},g&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(xe,{label:"Directory Name",value:a.directoryName},l.a.createElement(Ce.a.Item,{className:"required",name:"directoryName",rules:[{required:!0,message:"Please enter directory name"}]},l.a.createElement(At.a,{showCount:!0,maxLength:80,value:a.directoryName,onChange:function(e){return r(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"checkhotline/",{hotline_name:a.directoryName},t).then((function(e){e.data&&j(e.data[0])}))}()},id:"directoryName",className:"input-control",htmlFor:"directoryName",autoComplete:"off"}),"status: false"===S&&a.directoryName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.directoryName.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==S&&l.a.createElement(ke.a,{message:"Sorry! This hotline already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(xe,{label:"Description",value:a.description},l.a.createElement(Ce.a.Item,{className:"required",name:"description",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(At.a,{className:"input-control",value:a.description,onChange:function(e){return r(e)},id:"description",htmlFor:"description",autoComplete:"off"})))),l.a.createElement(xe,{label:"Date",value:"sDate"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(C,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"sDate",value:a.sDate,onChange:function(e){return i(e,"sDate")},disabledDate:function(e){return e&&e<ge()().startOf("day")},rules:[{required:!0,message:"Please select start date"}]}))),l.a.createElement(xe,{label:"Status",value:a.status},l.a.createElement(Ce.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please select status"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control w-100 w-lg-50",value:a.status,htmlFor:"status",onSelect:function(e){return s(e,"status")}},l.a.createElement(Tt,{value:"5"},"Active"),l.a.createElement(Tt,{value:"4"},"Inactive"))))),l.a.createElement(Ce.a.Item,{className:""},l.a.createElement(Ce.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(kt,{"data-test":"addIconComponent",addIcon:o}),m(a.hotlineIconId)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},xt()(a.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:m(a.hotlineIconId)},m(a.hotlineIconId)))))))),l.a.createElement(Ce.a.Item,null,l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),a.directoryName&&a.directoryName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.description&&a.description.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&a.iconHtml&&a.status&&a.sDate?"status: false"==S&&(f(!1),b(!1),t()):f(!0)},"data-test":"stepOneNext"},"Next")))},Ft=a(185),Pt=function(e){var t=e.handleCheck,a=e.selectedRow,r=e.stepOneHotLineValues,s=e.permissions,i=e.getCheckValues,o=Object(n.useState)(!1),m=Object(c.a)(o,2),u=m[0],d=m[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{type:"primary",onClick:function(){return A.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}))}},"Assign"),l.a.createElement(Te.a,{className:"modal-checkbox",visible:u,onOk:function(){return d(!1),void i()},onCancel:function(){d(!1)},centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:"Cancel"},l.a.createElement("div",null,"Assign Permissions for ",l.a.createElement("b",null,r.directoryName)," ","Hotline",l.a.createElement("br",null)," ",l.a.createElement("span",{className:"font-wgt-md"}," ")," "),l.a.createElement("div",null,l.a.createElement(S.a,{className:"mt-2 mt-lg-5"},l.a.createElement(j.a,{span:6}),l.a.createElement(j.a,{span:14,className:"small text-center"},"Reply to Messages, Add Notes, Status & Urgency level")),a&&a.map((function(e){var a=s.find((function(t){return t.user_id===e.user_id}));return l.a.createElement(S.a,{className:"mt-3 d-flex justify-content-center"},l.a.createElement(j.a,{span:12},"".concat(e.firstname," ").concat(e.lastname)),l.a.createElement(j.a,{span:10},l.a.createElement(Ft.a,{checked:!(!a||1!==a.can_respond),disabled:!0,onChange:function(a){return t(e)}})))})))))},Mt=a(223),Lt=a.n(Mt),Rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.employeeData,n=a.filterIt(t,e);a.setState({filterData:n})},a.start=function(){a.setState({showAssigntoModal:!0})},a.stepTwoPrev=function(){a.props.prev()},a.stepTwoNext=function(){0!==a.props.stepTwoHotLine.chekedValues.length?a.props.next():a.setState({showAlert:!0})},a.state={employeeData:"",showAssigntoModal:"false",showAlert:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(et())}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.manageEmpData;e.manageEmpData!=a&&this.setState({employeeData:a},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.props.stepTwoHotLine.selectedRowKeys,onChange:this.props.handleStepTwoOnSelect},a=[{title:"First Name",dataIndex:"firstname",key:"firstname",width:"22%"},{title:"Last Name",dataIndex:"lastname",key:"lastname",width:"22%"},{title:"Mobile Number",dataIndex:"Mobile_Number",key:"Mobile_Number",width:"21%"},{title:"Access",dataIndex:"Access",render:function(e){var t="";for(var a in e)1==e[a]&&("am_web"==a&&(a="AM WEB"),"org_cc_user"==a&&(a="Org CC"),"app_user"==a&&(a="APP"),0==t.length?t+=a:t+=", "+a);return l.a.createElement("span",null,t)},width:"20%"},{title:"Status",dataIndex:"",key:"x",width:"10%",render:function(){return l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active")}}];return l.a.createElement("div",null,l.a.createElement(j.a,{"data-test":"createHotlineStepTwo",span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Lt.a,{placeholder:"Search User",onSearch:this.onSearch})))))),this.state.showAlert&&l.a.createElement(ke.a,{message:"Please select user(s) and assign required permission(s) using Assign button.",type:"error",showIcon:!0}),l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(se.a,{rowSelection:t,columns:a,dataSource:this.state.filterData,rowKey:"unique_identifier"})),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{className:"mr-4",type:"secondary",style:{margin:"0 8px"},onClick:function(){return e.stepTwoPrev()},"data-test":"steptwoPrev"},"Back"),l.a.createElement(oe.a,{className:"md",type:"primary",onClick:function(){return e.stepTwoNext()},"data-test":"steptwoNext"},"Next")))}}]),t}(l.a.Component);var Yt=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(Rt),zt=O.a.TextArea,Ht=function(e){var t,a=e.prev,n=e.createNewHotLine,r=e.stepOneHotLine,s=e.stepTwoHotLine,i=e.getIconText,o=Ce.a.useForm(),m=Object(c.a)(o,1)[0],u=s.selectedRows.map((function(e){return e.firstname+" "+e.lastname})),d=we.a.RangePicker;return l.a.createElement(Ce.a,{"data-test":"createHotlineStepThree",className:"input-md w-md-100 w-75",name:"validate_other",form:m},l.a.createElement(Ce.a.Item,{name:"directoryName"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt,{showCount:!0,disabled:!0,maxLength:80,value:r.directoryName,id:"directoryName",className:"input-control textarea-input",placeholder:"Directory Name",htmlFor:"directoryName"}))),l.a.createElement(Ce.a.Item,{name:"description"},l.a.createElement(l.a.Fragment,null,l.a.createElement(zt,{disabled:!0,className:"input-control textarea-md",value:r.description,id:"description",placeholder:"Description",htmlFor:"description"}))),l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(l.a.Fragment,null,l.a.createElement(d,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"sdate",value:r.sDate,rules:[{readOnly:!0,required:!0,message:"Please select start date"}],disabled:!0}))),l.a.createElement("div",{className:"d-block d-lg-flex"},l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(Ce.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control",placeholder:"Status",value:r.status,htmlFor:"status",disabled:!0},l.a.createElement(Ie.a.Option,{value:"5"},"Active"),l.a.createElement(Ie.a.Option,{value:"4"},"Inactive")," ")))),l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(Ce.a.Item,{name:"userNames"},l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{className:"input-control",placeholder:"Assigned to",htmlFor:"assigned to",id:u,disabled:!0,value:u.join(", ")}))))),l.a.createElement(Ce.a.Item,{className:"w-100 w-lg-50"},l.a.createElement(Ce.a.Item,{className:"upload-control"},l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail",href:"#",rel:""},xt()(r.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:"women safety"},i(r.hotlineIconId)))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,(t={type:"secondary",className:"mr-4"},Object(Ne.a)(t,"type","secondary"),Object(Ne.a)(t,"style",{margin:"0 8px"}),Object(Ne.a)(t,"htmlType","submit"),Object(Ne.a)(t,"onClick",(function(e){e.preventDefault(),a()})),Object(Ne.a)(t,"data-test","stepThreePrev"),t),"Back"),l.a.createElement(oe.a,{type:"primary",className:"md",htmlType:"submit",onClick:function(e){n()},"data-test":"stepThreeNext"},"Create")))},Bt=N.a.Content,qt=Se.a.Step,Vt=[{title:"Add Details",content:"First-content"},{title:"Assign Employee",content:"Second-content"},{title:"Create Directory",content:"Last-content"}],Gt=a(42),Jt=function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)({directoryName:"",description:"",status:"",sDate:"",tDate:"",hotlineIconId:"",iconHtml:""}),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)({selectedRows:"",selectedRowKeys:[],chekedValues:[]}),h=Object(c.a)(p,2),g=h[0],f=h[1],E=function(){s(r+1)},b=function(){s(r-1)},y=function(e){switch(e){case"1":return"Sexual Harassment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"hotlineCreation"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:e}),l.a.createElement(Bt,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/orgcc/hotlinedirectory"},l.a.createElement(je.a.Item,null,"Hotline Directory")),l.a.createElement(je.a.Item,null,"Create Hotline Directory"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Hotline Directory Entries")),l.a.createElement(Se.a,{className:"mt-2",current:r},Vt.map((function(e){return l.a.createElement(qt,{key:e.title,title:e.title})}))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"steps-content"},0==r?l.a.createElement(Ut,{next:E,stepOneHotLineInfo:u,handleStepOneOnChange:function(e){d(Object(T.a)({},u,Object(Ne.a)({},e.target.id,e.target.value)))},handleStepOneOnSelect:function(e,t){d(Object(T.a)({},u,Object(Ne.a)({},t,e)))},handleStepOneDatePickerChange:function(e,t){d(Object(T.a)({},u,Object(Ne.a)({},t,e)))},addIcon:function(e,t){d(Object(T.a)({},u,{hotlineIconId:t,iconHtml:e}))},getIconText:y,"data-test":"CreateHotlineStepOne"}):1==r?l.a.createElement(Yt,{next:E,prev:b,stepOneHotLine:u,stepTwoHotLine:g,handleStepTwoOnSelect:function(e,t){var a,n=[],l=JSON.parse(v("user")),r=t.filter((function(e){var t,a=e.user_id;return!(null===(t=n)||void 0===t?void 0:t.some((function(e){return e.user_id===a})))})).reduce((function(e,t){return e.push({user_id:t.user_id,can_respond:1,can_view_reports:0,created_by:parseInt(Gt.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Gt.enc.Utf8))}),e}),[]);n=null===(a=n)||void 0===a?void 0:a.concat(r),f(Object(T.a)({},g,{selectedRowKeys:e,selectedRows:t,chekedValues:n}))}}):2==r?l.a.createElement(Ht,{prev:b,createNewHotLine:function(){var e,t,a,n;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:e=JSON.parse(v("user")),t=pe(),a={create_hotline:{name:u.directoryName,help_text:u.description,start_date:u.sDate[0]?ge()(u.sDate[0]).format("DD-MM-YYYY"):"",end_date:u.sDate[1]?ge()(u.sDate[1]).format("DD-MM-YYYY"):"",status_id:u.status,hotline_icon_id:parseInt(u.hotlineIconId),created_by:parseInt(Gt.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Gt.enc.Utf8))},permissions:g.chekedValues},n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},F.a.post(P+"hotline/",a,n).then((function(){window.location="/orgcc/hotlinedirectory"}));case 5:case"end":return l.stop()}}))},stepOneHotLine:u,stepTwoHotLine:g,getIconText:y}):"")))))))))},Qt=(a(367),a(158)),Wt=a.n(Qt),Kt=N.a.Content,$t=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1];return l.a.createElement(l.a.Fragment,null,!0===!r?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:e.data}),l.a.createElement(Kt,{"data-test":"Directory",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Hotline Directory")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Wt.a,alt:"Create Hotline",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create Hotline entries and assign them to managers,",l.a.createElement("br",null),"head of departments or leadership."),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(be.a,{className:"mt-1"})),l.a.createElement(j.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(oe.a,{"data-test":"createHotline",onClick:function(){s(!0)},type:"primary"},"Create")))))))))):l.a.createElement(Jt,null))},Zt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"deleteHotline",value:function(){this.props.history;var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.delete(P+"hotline/"+this.props.hotlineId,e).then((function(){window.location="/orgcc/hotlinedirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Delete"),l.a.createElement(Te.a,{title:"Delete Hotline",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this hotline?")))}}]),t}(n.Component),Xt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(o.b,{to:{pathname:"/orgcc/edithotline",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/edithotline"},"Edit")," ")),l.a.createElement("li",null,l.a.createElement(Zt,{hotlineId:e.hotline_id,hotlineName:e.name}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:Pe.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),ea=function(e){var t=e.data,a=e.deleteRecord,r=e.handleCheck,s=Object(n.useState)(),i=Object(c.a)(s,2),o=i[0],m=i[1];Object(n.useEffect)((function(){u()}),[t]);var u=function(){m(t)},d=[{title:"Name",dataIndex:"first_name",key:"first_name",width:"30%"},{title:"Respond",dataIndex:"can_respond",key:"can_respond",width:"20%",editable:!0,render:function(e,t){return l.a.createElement(j.a,{span:12,className:"d-flex justify-content-end changeColor"},l.a.createElement(Ft.a,{value:"reports",checked:e,onChange:function(e){return r(t)},disabled:!0}))}},{title:"Action",dataIndex:"user_id",key:"user_id",width:"20%",render:function(e,t){return l.a.createElement("span",{onClick:function(e){!function(e,t){t.preventDefault(),a(e)}(t,e)},className:"uploaded-icon icon icon-close d-inline-flex justify-content-end align-items-center"})}}];return l.a.createElement("div",{className:"no-bordered-grid"},l.a.createElement(se.a,{className:"no-bg-table",rowClassName:function(){return"editable-row"},columns:d,dataSource:o,rowKey:"rowkey"}))},ta=a(838),aa=(a(368),function(e){var t=e.searchData,a=e.addAssignUser,r=e.data,s=Object(n.useState)(!1),i=Object(c.a)(s,2),o=i[0],m=i[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),p=d[0],h=d[1];return l.a.createElement(l.a.Fragment,null,o&&l.a.createElement(ke.a,{"data-test":"alert",message:"".concat(p," is already assigned for this hotline."),type:"error",showIcon:!0}),l.a.createElement(ta.a,{"data-test":"Searchuser",options:t,placeholder:"Search Employee",filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},onSelect:function(e,t){return function(e,t){r.filter((function(e){return e.user_id===t.user_id})).length>0?(m(!0),h(e)):a(e,t)}(e,t)},onChange:function(){return m(!1),void h("")}}))}),na=a(42),la=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,assignedHotLines:"",hotLineName:"",assignedEmp:""},a.showModal=function(){a.setState({visible:!0,employeeData:[],hotLineName:a.props.selectedRows.name,hotlineId:a.props.selectedRows.hotline_id}),(0,a.props.dispatch)(et()),a.getAssignedEmployee()},a.getAssignedEmployee=function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getHotlineAssignEmpl/"+a.props.selectedRows.hotline_id,e).then((function(e){a.setState({assignedHotLines:e.data})}))},a.handleOk=function(e){a.setState({visible:!1});var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"hotlineAssignEmpl/",a.state.assignedEmp,t).then((function(e){a.getAssignedEmployee(),a.setState({assignedEmp:""})})).catch((function(e){}))},a.handleCheck=function(e){var t=Object(_e.a)(a.state.assignedHotLines),n=t.findIndex((function(t){return t.user_id===e.user_id}));t[n]=Object(T.a)({},t[n],{can_respond:!e.can_respond}),a.setState({assignedHotLines:t});var l=Object(_e.a)(a.state.assignedEmp),r=l.findIndex((function(t){return t.user_id===e.user_id}));l[r]=Object(T.a)({},l[r],{can_respond:!e.can_respond}),a.setState({assignedEmp:l})},a.handleCancel=function(){a.setState({visible:!1})},a.deleteRecord=function(e){e.user_id;var t=a.state.assignedEmp&&a.state.assignedEmp.filter((function(t){return t.user_id!==e.user_id}));a.setState({assignedEmp:t});var n={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({user_id:e.user_id})};F.a.delete(P+"getHotlineAssignEmpl/"+e.hotline_id,n).then((function(){a.getAssignedEmployee()})).catch((function(e){}))},a.addUser=function(e,t){var n=JSON.parse(v("user")),l=a.state,r=l.assignedHotLines,s=l.assignedEmp,c={hotline_id:a.state.hotlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,first_name:t.value},i={hotline_id:a.state.hotlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,created_by:parseInt(na.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(na.enc.Utf8))};a.setState({assignedHotLines:[].concat(Object(_e.a)(r),[c]),assignedEmp:[].concat(Object(_e.a)(s),[i])})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props.manageEmpData,a=[];if(e.manageEmpData!=t){for(var n=0;n<t.length;n++)a.push({value:t[n].firstname.concat(" ",t[n].lastname),user_id:t[n].user_id});this.setState({employeeData:a})}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Show"),l.a.createElement(Te.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:"Cancel"},l.a.createElement("div",null,"Employees with permissions to ",this.state.hotLineName),l.a.createElement(S.a,{className:"mt-2 mt-lg-5 mb-3 thead-outer"},l.a.createElement(j.a,{span:10},"Reply to Messages, Add Notes, Status & Urgency level")),l.a.createElement(ea,{data:this.state.assignedHotLines,deleteRecord:this.deleteRecord,handleCheck:this.handleCheck}),l.a.createElement(S.a,{className:"mb-2 autocomplete"},l.a.createElement(j.a,{span:24},l.a.createElement(aa,{searchData:this.state.employeeData,addAssignUser:this.addUser,data:this.state.assignedHotLines}),l.a.createElement("small",null,"Hit enter to add")))))}}]),t}(n.Component);var ra=Object(i.b)((function(e){return{assignhotlines:e.assignedHotline.assignhotlines,manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(la),sa=a(42),ca=O.a.Search,ia=(l.a.createElement(ce.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),oa=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).statusClicked=function(e,t){var n=e.end_date.replaceAll(" / ","-"),l=n.split("-")[0],r=n.split("-")[1]+"-"+l+"-"+n.split("-")[2];if(new Date<new Date(r)){var s=JSON.parse(v("user")),c={help_text:e.help_text,hotline_icon_id:e.hotline_icon_id,hotline_id:e.hotline_id,name:e.name,start_date:e.start_date.replaceAll(" / ","-"),end_date:e.end_date.replaceAll(" / ","-"),status_id:"Active"===t?4:5,updated_by:parseInt(sa.AES.decrypt(s.user_details.org_user_id,"anonymoose").toString(sa.enc.Utf8))},i={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.put(P+"hotline/"+c.hotline_id,c,i).then((function(){_.a.config({placement:"bottomLeft"}),_.a.open({description:"Status of ".concat(e.name," has been changed successfully.")}),a.props.statusOnClicked()}))}else _.a.config({placement:"bottomLeft"}),_.a.open({description:"Status of ".concat(e.name," can't be changed as the end date has been passed.")})},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n,searchBy:e})},a.state={data:[],filterData:[],searchBy:""},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.hotlines;null===t||void 0===t||t.forEach((function(e){e.start_date=ge()(e.start_date).utc().local().format("DD / MM / YYYY"),e.end_date=ge()(e.end_date).utc().local().format("DD / MM / YYYY")})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a=this;this.props.hotlines!==e.hotlines&&(null===(t=e.hotlines)||void 0===t||t.forEach((function(e){e.start_date=ge()(e.start_date).utc().local().format("DD / MM / YYYY"),e.end_date=ge()(e.end_date).utc().local().format("DD / MM / YYYY")})),this.setState({data:e.hotlines},(function(){a.onSearch(a.state.searchBy)})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t=[{title:"Hotline Name",dataIndex:"name",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Hotline Name"}}}},{title:"Start Date",dataIndex:"start_date",key:"start_date",width:"22%",render:function(e){return{children:e,props:{"data-title":"Start Date"}}}},{title:"End Date",dataIndex:"end_date",key:"end_date",width:"21%",render:function(e){return{children:e,props:{"data-title":"End Date"}}}},{title:"Permissions",dataIndex:"",key:"x",width:"20%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement(ra,{selectedRows:e})),props:{"data-title":"Permissions"}}}},{title:"Status",dataIndex:"",key:"x",width:"10%",render:function(t){return{children:5===t.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag",onClick:function(){return e.statusClicked(t,"Active")}},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag",onClick:function(){return e.statusClicked(t,"InActive")}},"Inactive"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(Xt,{data:e}),props:{"data-title":"Action"}}}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(He.a,{spinning:this.props.loader,size:"large"},l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:this.props.data}),l.a.createElement(ia,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Hotline Directory")),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(ca,{placeholder:"Search",onSearch:this.onSearch})))),l.a.createElement(j.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(o.b,{to:"/orgcc/createhotline"},l.a.createElement(me,{value:"Create Hotline"}))))),l.a.createElement(ie,{rowKey:"hotline_id",columns:t,data:this.state.filterData})))))))}}]),t}(l.a.Component);var ma=Object(i.b)((function(e){return{hotlinesdata:e.hotlinedata.hotlinesdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(c.a)(i,2),m=o[0],u=o[1];Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return Ze.getHotlines().then((function(t){return e({type:"HOTLINE_SUCCESS",payload:{hotlinesdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"HOTLINE_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[r]),Object(n.useEffect)((function(){null===e.hotlinesdata?u(!0):null!==e.hotlinesdata&&u(!1)}),[e.hotlinesdata]);return m||null===e.hotlinesdata||0!==e.hotlinesdata.length?l.a.createElement(oa,{hotlines:e.hotlinesdata,statusOnClicked:function(){s(!r)},data:e,loader:m}):l.a.createElement($t,{data:e})})),ua=a(858),da=a(91),pa=a(399),ha=a.n(pa),ga=(a(369),a(844)),fa=a(850),Ea=a(424),va=function(e,t){return e.filter((function(e){return e.conversation_id.toLowerCase().includes(t.toLowerCase())||e.responder_conversation_name.toLowerCase().includes(t.toLowerCase())||e.hotline_name.toLowerCase().includes(t.toLowerCase())||e.message.toLowerCase().includes(t.toLowerCase())})).map((function(e){var a=e.conversation_id.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),n=e.responder_conversation_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),l=e.hotline_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),r=e.message.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));return Object(T.a)({},e,{conversation_id:a,responder_conversation_name:n,message:r,hotline:{name:l,hotline_id:e.hotline_id}})}))},ba=(a(794),a(63)),ya=a(42),Oa=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)([]),E=Object(c.a)(f,2),b=E[0],y=E[1],O=Object(n.useState)([]),N=Object(c.a)(O,2),_=N[0],C=N[1],w=Object(n.useState)([]),k=Object(c.a)(w,2),I=k[0],x=k[1],D=Object(n.useState)([]),A=Object(c.a)(D,2),U=A[0],M=A[1],L=Object(n.useState)([]),R=Object(c.a)(L,2),Y=R[0],z=R[1],H=Object(n.useState)([]),B=Object(c.a)(H,2),q=B[0],V=B[1],G=Object(n.useState)([]),J=Object(c.a)(G,2),Q=J[0],W=J[1],K=Object(n.useState)([]),$=Object(c.a)(K,2),Z=$[0],X=$[1],ee=Object(n.useState)([]),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)([]),re=Object(c.a)(le,2),se=re[0],ce=re[1];Object(n.useEffect)((function(){var e=pe(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getUserallHotlines/"+parseInt(ya.AES.decrypt(t.user_data.user_id,"anonymoose").toString(ya.enc.Utf8)),a).then((function(e){var t=[];e.data.map((function(e){return t.push({label:e.hotline_name,value:e.hotline_id})})),y(t)}))}),[]),Object(n.useEffect)((function(){void 0===e.removeFilter.type||e.visible||de(!1)}),[m,r,h]),Object(n.useEffect)((function(){if("urgencyLevel"===e.removeFilter.type){var t=Z.filter((function(t){return t.value!==e.removeFilter.value})),a=m.filter((function(t){return t!==e.removeFilter.value}));u(a),X(t)}if("urgencyHotline"===e.removeFilter.type){var n=ae.filter((function(t){return t.value!==e.removeFilter.value})),l=h.filter((function(t){return t!==e.removeFilter.value}));g(l),ne(n)}if("urgencyStatus"===e.removeFilter.type){var c=se.filter((function(t){return t.value!==e.removeFilter.value})),i=r.filter((function(t){return t!==e.removeFilter.value}));s(i),ce(c)}}),[e.removeFilter]);var ie=[{label:"Low",value:1},{label:"Medium",value:2},{label:"High",value:3}],me=[{label:"New",value:1},{label:"Open",value:2},{label:"Closed",value:3}],ue=b,de=function(t){var a=Object(T.a)({},r.length>0&&{status_id:r},{},m.length>0&&{urgency_level_id:m},{},h.length>0&&{hotline_id:h});M(r),C(m),x(h),V(ae),W(se),z(Z);var n=pe(),l=JSON.parse(v("user")),s=v("searchBy"),c={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},i=P+"hotlineResponderConversation/?user_id="+parseInt(ya.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(ya.enc.Utf8)),o=Object(T.a)({},a,{hotline_id:a.hotline_id&&a.hotline_id.toString(),status_id:a.status_id&&a.status_id.toString(),urgency_level_id:a.urgency_level_id&&a.urgency_level_id.toString()}),u=""===e.searchString?i+"&filter="+JSON.stringify(o):i+"&filter="+JSON.stringify(o)+"&search="+e.searchString,d=[];F.a.get(u,c).then((function(t){d=(null===s||void 0===s?void 0:s.length)>0?va(t.data,s):t.data,e.loadFilteredConversations(d,"apply",Z,se,ae)})),t&&e.hide()};return l.a.createElement("div",null,l.a.createElement(j.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(j.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(oe.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return function(){var t=pe(),a=JSON.parse(v("user")),n=v("searchBy"),l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r=P+"hotlineResponderConversation/?user_id="+parseInt(ya.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(ya.enc.Utf8)),c=[];F.a.get(r,l).then((function(t){c=(null===n||void 0===n?void 0:n.length)>0?va(t.data,n):t.data,e.loadFilteredConversations(c,"reset",[],[],[]),u([]),X([]),s([]),ce([]),ne([]),g([])})),e.hide()}()}},"Reset"))),l.a.createElement(be.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(j.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Urgency level")),l.a.createElement(j.a,{span:"24"},l.a.createElement(Ft.a.Group,{className:"d-flex flex-column flex-gap",name:"urgencyLevel",options:ie,value:m,onChange:function(e){var t=Z;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ie.find((function(t){return t.value===e})))})):t=[],X(t),u(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(j.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Status")),l.a.createElement(j.a,{span:"24"},l.a.createElement(Ft.a.Group,{className:"d-flex flex-column flex-gap",name:"status",value:r,options:me,onChange:function(e){var t=se;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(me.find((function(t){return t.value===e})))})):t=[],ce(t),s(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(j.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Hotline")),l.a.createElement(j.a,{span:"24"},l.a.createElement(Ft.a.Group,{className:"d-flex flex-column flex-gap",name:"hotline",options:ue,value:h,onChange:function(e){var t=ae;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ue.find((function(t){return t.value===e})))})):t=[],ne(t),g(e)}})))))),l.a.createElement(S.a,null,l.a.createElement(j.a,{span:"24",className:"btn-row actions"},l.a.createElement(oe.a,{type:"primary",className:"mr-2",onClick:function(){return de(!0)}},"Apply"),l.a.createElement(oe.a,{type:"secondary",onClick:function(t){u(_),s(U),g(I),X(Y),ce(Q),ne(q),e.hide()}},"Cancel")))))},Na=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{placement:"bottom",content:l.a.createElement(Oa,{hide:this.hide,searchString:this.props.searchString,removeFilter:this.props.removeFilter,loadFilteredConversations:this.props.loadFilteredConversations,visible:this.state.visible}),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"icon icon-filter"})))}}]),t}(l.a.Component),_a=a(224),Sa=a.n(_a),ja=a(42),Ca=O.a.TextArea,wa=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1});var e=pe(),t=JSON.parse(v("user")),n={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},l={note_text:a.state.noteText,conversation_id:a.props.convoId,created_by:parseInt(ja.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(ja.enc.Utf8))};F.a.post(P+"addNotes/",l,n).then((function(e){200===e.status&&(a.setState({noteText:""}),a.formRef.current.resetFields(),a.props.getNoteData(e.data.conversation_id))}))},a.handleCancel=function(){a.setState({visible:!1,noteText:""}),a.formRef.current.resetFields()},a.handleChange=function(e){a.setState({noteText:e.target.value})},a.formRef=l.a.createRef(),a.state={visible:!1,noteText:""},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0"},l.a.createElement("span",{className:"icon icon-add-filled"}),"Take a note.."),l.a.createElement(Te.a,{className:"note-modal",title:"Take a Note",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:500,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Add",cancelText:"Cancel"},l.a.createElement(S.a,{className:"pt-2","data-test":"NoteModal"},l.a.createElement(Ce.a,{className:"input-md w-100",name:"validate-other",ref:this.formRef},l.a.createElement(Ce.a.Item,{className:"mb-0",name:"send message"},l.a.createElement(Ca,{className:"input-control",placeholder:"Add note here...",htmlFor:"send message",value:this.state.noteText,onChange:function(t){return e.handleChange(t)}}))))))}}]),t}(l.a.Component),ka=ga.a.Paragraph,Ia=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={expand:!1,counter:0,notesData:[],conversationId:""},a.typoExpand=function(){a.setState({expand:!0,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a.typoClose=function(){a.setState({expand:!1,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"renderParagraph",value:function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:this.state.counter},l.a.createElement("span",{className:"note-user"},ge()(e.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A \u2022")," ",e.first_name," ",e.last_name),l.a.createElement(ka,{ellipsis:{rows:3,expandable:!0,symbol:"Show more",onExpand:this.typoExpand}},e.note_text))}},{key:"render",value:function(){var e=this;return this.props.addedNote.map((function(t){return l.a.createElement("div",{className:"show-less","data-test":"addedNotes"},e.renderParagraph(t),e.state.expand&&l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:e.typoClose},"Show less"))}))}}]),t}(n.Component),xa=(ga.a.Paragraph,function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChange=function(e){a.setState({rows:e})},a.state={rows:1,notes:[],conversationId:""},a.getNotes=a.getNotes.bind(Object(z.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({conversationId:this.props.conversation_id}),this.getNotes(this.props.conversation_id)}},{key:"getNotes",value:function(e){var t=this,a={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},params:{conversation_id:e}};F.a.get(P+"getNotes/",a).then((function(e){t.setState({notes:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.notes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class,"data-test":"Notes"},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Notes")),l.a.createElement(oe.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.notesClicked(t)}}))),l.a.createElement(be.a,{className:"my-2 w-100"}),l.a.createElement(j.a,{span:"24",className:"px-3"},l.a.createElement(wa,{convoId:this.props.conversation_id,getNoteData:this.getNotes}),l.a.createElement(S.a,{className:"added-notes"},l.a.createElement(Ia,{addedNote:t}))))))))}}]),t}(n.Component)),Da=a(852),Aa=[{id:1,name:"Updated the Status to"},{id:2,name:"Updated the Urgency level to"},{id:3,name:"Added new Note"},{id:4,name:"View Hotline Converations"}],Ta=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],Ua=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],Fa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={myclass:"",activity:[]},e.divclicked=e.divclicked.bind(Object(z.a)(e)),e}return Object(g.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAcitivity(this.props.conversation_id)}},{key:"getAcitivity",value:function(e){var t=this,a={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getconversationActivity/?conversation_id="+e,a).then((function(e){t.setState({activity:e.data})}))}},{key:"mapAuditLog",value:function(e){var t="";return Aa.map((function(a){a.id===e.audit_log_event_id&&(t=a.name,e.status_value&&Ta.map((function(a){e.status_value==a.id&&(t=t+" <b>"+a.name+"</b>")})),e.urgency_level_value&&Ua.map((function(a){e.urgency_level_value==a.id&&(t=t+" <b>"+a.name+"</b>")})))})),t}},{key:"render",value:function(){var e=this,t=this.state.activity;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Activity")),l.a.createElement(oe.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.activityClicked(t)}}))),l.a.createElement(be.a,{className:"my-2 w-100"}),l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(j.a,{span:"24",className:"px-3 pt-2"},l.a.createElement(Da.a,null,t.map((function(t){return l.a.createElement(Da.a.Item,null,l.a.createElement("span",{className:"note-user"},ge()(t.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A\u2022")," ",t.name),l.a.createElement("br",null),xt()(e.mapAuditLog(t)))}))))))))))}}]),t}(n.Component),Pa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={myclass:"",assigneEmp:[]},e.divclicked=e.divclicked.bind(Object(z.a)(e)),e}return Object(g.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAssigne(this.props.hotline_id)}},{key:"getAssigne",value:function(e){var t=this,a={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getHotlineAssignee/"+e,a).then((function(e){t.setState({assigneEmp:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.assigneEmp;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Assigned To")),l.a.createElement(oe.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.assigneClicked(t)}}))),l.a.createElement(be.a,{className:"my-2 w-100"}),l.a.createElement(j.a,{span:"24",className:"px-3 pt-2 assignees d-flex flex-column flex-gap"},t.map((function(e){return l.a.createElement(Ea.a,null,e["Assigned User_name"])}))))))))}}]),t}(n.Component),Ma=a(42),La=O.a.TextArea,Ra=Ie.a.Option,Ya=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],za=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],Ha=function(e){var t,a,r=e.conversation,s=e.urgencyLevel,i=e.status,o=e.onChangeUrgencyLevel,m=e.onChangeStatus,u=e.searchString,d=e.newState,p=e.setCounter,h=e.socket,g=e.chatdiv,f=Ce.a.useForm(),E=Object(c.a)(f,1)[0],b=Object(n.useState)([]),y=Object(c.a)(b,2),O=y[0],N=y[1],_=Object(n.useState)(""),C=Object(c.a)(_,2),w=C[0],k=C[1],I=Object(n.useState)({}),x=Object(c.a)(I,2),D=x[0],U=x[1],M=Object(n.useState)({noteDivClicked:!1,myClass:""}),L=Object(c.a)(M,2),R=L[0],Y=L[1],z=Object(n.useState)({activityDivClicked:!1,myClass:""}),H=Object(c.a)(z,2),B=H[0],q=H[1],V=Object(n.useState)({assigneDivClicked:!1,myClass:""}),G=Object(c.a)(V,2),J=G[0],Q=G[1],W=Object(n.useState)(!1),K=Object(c.a)(W,2),$=K[0],Z=K[1],X=Object(n.useState)(""),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){ae(u)}),[u,r.conversation_id]),Object(n.useEffect)((function(){ne(),re();var e=document.getElementById("activityId"),t=document.getElementById("noteId"),a=document.getElementById("assigneId");""!=J.myClass&&(Q({myClass:"",assigneDivClicked:!1}),a.classList.remove("selected")),""!=R.myClass&&(Y({myClass:"",noteDivClicked:!1}),t.classList.remove("selected")),""!=B.myClass&&(q({myClass:"",activityDivClicked:!1}),e.classList.remove("selected"))}),[r.conversation_id,d]),Object(n.useEffect)((function(){if(O.length>0)if(te.length>1){var e=0;O.map((function(t){return t.message.includes("</mark>")&&(e+=1),e}));var t=document.getElementsByTagName("mark")[e-1];t&&t.scrollIntoView(!1,{block:"end"})}else{var a=document.getElementsByClassName("hotline_message")[document.getElementsByClassName("hotline_message").length-1];a&&a.scrollIntoView(!1,{block:"end"})}}),[O,u]),Object(n.useEffect)((function(){var e=void 0!==D[r.conversation_id]?D[r.conversation_id]:"";k(e)}),[r.conversation_id]);var ne=function(){var e,t,a,n,l,s;return A.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:e=pe(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n="",n=r.conversation_id.includes("<mark")?null===(l=r.conversation_id)||void 0===l?void 0:l.toString().replace(/(<([^>]+)>)/gi,""):r.conversation_id,s={conversation_id:n,user_id:parseInt(Ma.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Ma.enc.Utf8))},F.a.post(P+"hotlineConvoMessages/",s,a).then((function(e){return A.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:N(e.data);case 1:case"end":return t.stop()}}))}));case 7:case"end":return c.stop()}}))},le=function(){var e,t=pe(),a="";r.conversation_id.includes("<mark")?a=null===(e=r.conversation_id)||void 0===e?void 0:e.toString().replace(/(<([^>]+)>)/gi,""):a=r.conversation_id;var n=JSON.parse(v("user"));if(w.length>0){var l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={user_id:parseInt(Ma.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Ma.enc.Utf8)),hotline_id:r.hotline_id,conversation_id:a,message:w,created_by:parseInt(Ma.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(Ma.enc.Utf8))};F.a.post(P+"receiveHotlineMessage/",s,l).then((function(e){201===e.status&&(1!==e.data.status_id&&3!==e.data.status_id||m(2,a),ae(""),p(e),k(""),U(Object(T.a)({},D,Object(Ne.a)({},a,""))),h.send(JSON.stringify(e.data)))}))}E.setFieldsValue({chatArea:""})},re=function(){N((function(e){var t,a,n=[];if(e&&e.length&&(null===(t=d.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=e[0].conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))){var l=e.filter((function(e){var t,a;return(null===(t=e.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=d.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))}));n=[].concat(Object(_e.a)(l),[d])}else n=Object(_e.a)(e);return n}))},se=function(e){var t=document.getElementById("noteId");da.isMobile&&Z(!0),""!=B.myClass&&q({myClass:"",activityDivClicked:!1}),""!=J.myClass&&Q({myClass:"",assigneDivClicked:!1}),""===R.myClass?(t.classList.add("selected"),Y({myClass:"rgt-panel",noteDivClicked:!0})):(t.classList.remove("selected"),Y({myClass:"",noteDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},ce=function(e){var t=document.getElementById("activityId");da.isMobile&&Z(!0),""!=R.myClass&&Y({myClass:"",noteDivClicked:!1}),""!=J.myClass&&Q({myClass:"",assigneDivClicked:!1}),""===B.myClass?(t.classList.add("selected"),q({myClass:"rgt-panel",activityDivClicked:!0})):(t.classList.remove("selected"),q({myClass:"",activityDivClicked:!1})),document.getElementById("noteId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},ie=function(e){var t=document.getElementById("assigneId");da.isMobile&&Z(!0),""!=R.myClass&&Y({myClass:"",noteDivClicked:!1}),""!=B.myClass&&q({myClass:"",activityDivClicked:!1}),""===J.myClass?(t.classList.add("selected"),Q({myClass:"rgt-panel",assigneDivClicked:!0})):(t.classList.remove("selected"),Q({myClass:"",assigneDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("noteId").classList.remove("selected")},oe=function(e){return{__html:e}};if(u){var me,ue,de,he,fe;if(r.responder_conversation_name.includes("</mark>"))r.responder_conversation_name=null===(ue=r.responder_conversation_name)||void 0===ue?void 0:ue.toString().replace(/(<([^>]+)>)/gi,""),r.responder_conversation_name=r.responder_conversation_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(r.hotline_name.includes("</mark>"))r.hotline_name=null===(de=r.hotline_name)||void 0===de?void 0:de.toString().replace(/(<([^>]+)>)/gi,""),r.hotline_name=r.hotline_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(null===(me=r.conversation_id)||void 0===me?void 0:me.toString().includes("</mark>"))r.conversation_id=null===(he=r.conversation_id)||void 0===he?void 0:he.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(fe=r.conversation_id)||void 0===fe?void 0:fe.toString().replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));O.map((function(e){var t;e.message.includes("</mark>")?(e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}))):(e.message=e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})));return Object(T.a)({},e,{message:e.message})}))}else{var Ee,ve,ye;r.responder_conversation_name=null===(Ee=r.responder_conversation_name)||void 0===Ee?void 0:Ee.toString().replace(/(<([^>]+)>)/gi,""),r.hotline_name=null===(ve=r.hotline_name)||void 0===ve?void 0:ve.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(ye=r.conversation_id)||void 0===ye?void 0:ye.toString().replace(/(<([^>]+)>)/gi,""),O.map((function(e){var t;return e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(?:\r\n|\r|\n)/g,"<br />"),Object(T.a)({},e,{message:e.message})}))}var Oe=O.length-r.unread_messages_count;return l.a.createElement(j.a,{span:24,lg:18,className:g?"chat-section d-lg-flex":"chat-section d-lg-flex d-none","data-test":"messages"},l.a.createElement(j.a,{span:24,className:"h-100"},l.a.createElement(S.a,{className:"top-filter-pan p-2 p-lg-4 d-flex align-items-center"},l.a.createElement(j.a,{span:24,lg:10},l.a.createElement("div",{className:""},l.a.createElement("h6",{dangerouslySetInnerHTML:oe(r.responder_conversation_name)}),l.a.createElement("p",{style:{margin:0,display:"inline",float:"left"},dangerouslySetInnerHTML:oe(r.hotline_name)}),"\xa0|\xa0",l.a.createElement("p",{style:{margin:0,display:"inline",float:"center"},dangerouslySetInnerHTML:oe(r.conversation_id)}))),l.a.createElement(j.a,{span:24,lg:14},l.a.createElement("div",{className:"d-flex justify-content-end pt-3 pt-sm-1 pt-md-0"},l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Urgency level"),l.a.createElement(Ie.a,{bordered:!1,value:s,onChange:function(e){var t;return o(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},za.map((function(e){return l.a.createElement(Ra,{value:e.id},e.name)})))),l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Status"),l.a.createElement(Ie.a,{bordered:!1,value:i,onChange:function(e){var t;return m(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},Ya.map((function(e){return 2!==i&&3!==i||1!==e.id?l.a.createElement(Ra,{value:e.id},e.name):l.a.createElement(Ra,{value:e.id,disabled:!0},e.name)})))),l.a.createElement("div",{className:"icon-row d-flex align-items-center"},l.a.createElement(j.a,{span:24,md:8},l.a.createElement("span",{id:"noteId",className:"icon icon-create",onClick:function(e){return se()}})),l.a.createElement(j.a,{span:24,md:8},l.a.createElement("span",{id:"activityId",className:"icon icon-activity",onClick:function(e){return ce()}})),l.a.createElement(j.a,{span:24,md:8},l.a.createElement("span",{id:"assigneId",className:"icon icon-assign",onClick:function(e){return ie()}})))))),l.a.createElement(S.a,{className:"row-hgt"},l.a.createElement("div",{className:R.noteDivClicked||B.activityDivClicked||J.assigneDivClicked?$?"w-75 d-none":"w-75":"w-100"},l.a.createElement("div",{className:"msg_main"},l.a.createElement(ba.Scrollbars,{autoHeightMax:450,universal:!0},l.a.createElement(j.a,{span:24,className:"msg-history p-4"},O.map((function(e,t){return l.a.createElement("div",null,Oe===t?l.a.createElement(be.a,{plain:!0},"Last Read"):null,l.a.createElement("div",{className:e.is_responder_message?"outgoing-msg hotline_message mb-3":"incoming-msg hotline_message mb-2"},l.a.createElement("div",{className:e.is_responder_message?"sent-msg":"received-msg"},l.a.createElement("p",{ellipsis:!0,dangerouslySetInnerHTML:oe(e.message)}),l.a.createElement("span",{className:"time-date"}," ",ge()(e.created_on).isSame(ge()(),"day")?ge()(e.created_on).utc().local().format("hh:mm A"):ge()(e.created_on).utc().local().format("MM:DD:YY | hh:mm A "),e.is_responder_message&&" | ".concat(e.first_name," ").concat(e.last_name)))))}))))),l.a.createElement(j.a,{span:24,className:R.noteDivClicked||B.activityDivClicked||J.assigneDivClicked?"send-msg w-75":"send-msg w-100"},l.a.createElement("div",{className:"type-msg"},l.a.createElement(Ce.a,{className:"input-md w-100",name:"validate-other",form:E},l.a.createElement(La,{className:"input-control",id:"chatArea",name:r.conversation_id,placeholder:"Replying as Hotline representative",onChange:function(e){return function(e){k(e.target.value),U(Object(T.a)({},D,Object(Ne.a)({},e.target.name,e.target.value)))}(e)},value:w,onKeyDown:function(e){if(e.altKey&&13===e.keyCode){var t=document.querySelector(".input-control");t.value=t.value+"\r\n"}e.altKey||13!==e.keyCode||(e.preventDefault(),le())},maxLength:1e4})),l.a.createElement("span",{className:"ml-3 send",onClick:function(){return le()}},l.a.createElement("img",{src:Sa.a,alt:"send message"}))))),l.a.createElement("div",{className:"w-25 d-flex justify-content-end width-sm-100"},R.noteDivClicked?l.a.createElement(xa,{class:R.myClass,conversation_id:null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),notesClicked:function(){return se()}}):null,B.activityDivClicked?l.a.createElement(Fa,{class:B.myClass,conversation_id:null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""),activityClicked:function(){return ce()}}):null,J.assigneDivClicked?l.a.createElement(Pa,{class:J.myClass,hotline_id:r.hotline_id,assigneClicked:function(){return ie()}}):null))))},Ba=a(42),qa=O.a.Search,Va=function(e){var t=Object(n.useRef)(""),a=function(a){var n=a.trim();t.current=n;var l=e.statusFilterData.map((function(e){return e=e.value})),r=Object(T.a)({},l.length>0&&{status_id:l},{},e.urgencyFilterData.length>0&&{urgency_level_id:e.urgencyFilterData.map((function(e){return e.value}))},{},e.hotlineFilterData.length>0&&{hotline_id:e.hotlineFilterData.map((function(e){return e.value}))}),s=Object(T.a)({},r,{hotline_id:r.hotline_id&&r.hotline_id.toString(),status_id:r.status_id&&r.status_id.toString(),urgency_level_id:r.urgency_level_id&&r.urgency_level_id.toString()}),c=pe(),i=JSON.parse(v("user")),o={headers:{Authorization:c,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},m=P+"hotlineResponderConversation/?user_id="+parseInt(Ba.AES.decrypt(i.user_details.org_user_id,"anonymoose").toString(Ba.enc.Utf8)),u=""===n?m+"&filter="+JSON.stringify(s):m+"&filter="+JSON.stringify(s)+"&search="+n.toString();F.a.get(u,o).then((function(a){e.setSearchString(t.current),E("searchBy",t.current);var n=[];n=t.current.length>0?va(a.data,t.current):a.data,e.setConversations(n)}))};return l.a.createElement(qa,{name:"search",id:"search",placeholder:"Search",onChange:function(e){return a(e.target.value)},onSearch:a,autoComplete:"off"})},Ga=ga.a.Paragraph,Ja=a(42),Qa=function(e){return l.a.createElement("div",{className:"mid-content p-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:6,className:e.showdiv?"message-section py-4 d-none":"message-section py-4"},l.a.createElement(j.a,{span:24,className:" d-flex justify-content-between px-3"},l.a.createElement("h6",null,"Conversations ",l.a.createElement(fa.a,{className:"pl-1",count:e.unreadCount})),l.a.createElement(Na,{searchString:e.searchString,removeFilter:e.removeFilter,loadFilteredConversations:e.loadFilteredConversations})),l.a.createElement(j.a,{span:24,className:"mt-4 px-3 d-block"},l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:150,thumbMinSize:30,universal:!0},l.a.createElement(l.a.Fragment,null,e.urgencyFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea.a,{visible:!0,key:a,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyLevel",t.value)},className:"mb-2"},"Urgency: ",l.a.createElement("span",null,t.label)))})),e.hotlineFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyHotline",t.value)},className:"mb-2",key:a},"Hotline: ",l.a.createElement("span",null,t.label," ")))})),e.statusFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyStatus",t.value)},className:"mb-2",key:a},"Status: ",l.a.createElement("span",null,t.label," ")))}))))),l.a.createElement(j.a,{span:24,className:"search-box mt-3 px-3"},l.a.createElement(Ce.a,{form:e.form},l.a.createElement(Ce.a.Item,{name:"search",id:"search"},l.a.createElement(Va,{statusFilterData:e.statusFilterData,urgencyFilterData:e.urgencyFilterData,hotlineFilterData:e.hotlineFilterData,setSearchString:e.setSearchString,setConversations:e.setConversations})))),l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(j.a,{span:24,className:" inbox-messages"},e.conversations.length>0?e.conversations.map((function(t){var a,n;return l.a.createElement("div",{className:(null===(a=e.conversation.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))?"msg-wrapper active":"msg-wrapper",onClick:function(){return e.onConversationClick(t)}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{ellipsis:!0,style:{fontWeight:"bold"},className:"w-75 pr-2 mb-1",dangerouslySetInnerHTML:e.createMarkup(t.responder_conversation_name)}),l.a.createElement("span",{className:"small"}," ",ge()(t.created_on).isSame(ge()(),"day")?ge()(t.created_on).utc().local().format("hh:mm"):ge()(t.created_on).utc().local().format("MM:DD:YY"))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(Ga,{ellipsis:!0,className:"font-weight-normal mb-1 sm para_wrapper"},l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.hotline_name)}),"\xa0 |\xa0",l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.conversation_id)})),l.a.createElement("span",{className:"small"}," ",l.a.createElement(fa.a,{count:t.unread_messages_count}))))})):l.a.createElement("div",{className:"msg-wrapper"},"No messages found")))),e.conversation?l.a.createElement(Ha,{conversation:e.conversation,urgencyLevel:e.urgencyLevel,status:e.status,onChangeUrgencyLevel:function(t,a){var n=pe(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(Ja.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Ja.enc.Utf8)),urgency_level_id:t};F.a.put(P+"hotlineConvoMessagesUrgencyLevel/ ",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setUrgencyLevel(t))}))},onChangeStatus:function(t,a){var n=pe(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(Ja.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Ja.enc.Utf8)),status_id:t};F.a.put(P+"hotlineConvoMessagesStatus/",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setStatus(t))}))},searchString:e.searchString,newState:e.newState,socket:e.socket,setCounter:e.setCounter,"data-test":"Messages",chatdiv:e.chatdiv}):l.a.createElement(j.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.NoHotlines,alt:"No Hotlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No Conversation Selected"),l.a.createElement("small",null,"Select a Conversation to view"))))},Wa=function(e){return l.a.createElement(j.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.CreateHotline,alt:"No Hotlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No conversations are initiated for the hotlines assigned to you"))},Ka=function(e){return l.a.createElement(j.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement(He.a,{size:"large",tip:"Loading...",spinning:e})))},$a=N.a.Content,Za=a(42),Xa=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)([]),y=Object(c.a)(f,2),O=y[0],_=y[1],j=Object(n.useState)([]),C=Object(c.a)(j,2),w=C[0],k=C[1],I=Object(n.useState)({}),x=Object(c.a)(I,2),D=x[0],A=x[1],U=Object(n.useState)(""),M=Object(c.a)(U,2),L=M[0],R=M[1],Y=Object(n.useState)(""),z=Object(c.a)(Y,2),H=z[0],B=z[1],q=Object(n.useState)(""),V=Object(c.a)(q,2),G=V[0],J=V[1],Q=Object(n.useState)(""),W=Object(c.a)(Q,2),K=W[0],Z=W[1],X=Object(n.useState)(null),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({}),le=Object(c.a)(ne,2),re=le[0],se=le[1],ce=Object(n.useState)(0),ie=Object(c.a)(ce,2),oe=ie[0],me=ie[1],ue=Object(n.useState)([]),de=Object(c.a)(ue,2),he=de[0],ge=de[1],fe=Object(n.useState)(!1),Ee=Object(c.a)(fe,2),ve=Ee[0],be=Ee[1],ye=Object(n.useState)(!1),Oe=Object(c.a)(ye,2),Ne=Oe[0],Se=Oe[1],je=Object(n.useRef)(null),we=Object(n.useRef)(!1),ke=Ce.a.useForm(),Ie=Object(c.a)(ke,1)[0],xe=Object(n.useState)(!0),De=Object(c.a)(xe,2),Ae=De[0],Te=De[1];Object(n.useEffect)((function(){ze(),Ue(),Re()}),[]),Object(n.useEffect)((function(){var e=v("searchBy")&&v("searchBy").toString(),t=[],a=[];null===he||void 0===he||he.map((function(e){var a=e.conversation_id,n="";n=(null===a||void 0===a?void 0:a.includes("</mark>"))?null===a||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""):a,t.push(n)})),a=t.includes(null===re||void 0===re?void 0:re.conversation_id)?he:[].concat(Object(_e.a)(he),[re]),ge(a),Le(re,a),(null===e||void 0===e?void 0:e.length)>0&&we.current&&(we.current=!1)}),[re,he]);var Ue=function(){var e=JSON.parse(v("user"));je.current=new WebSocket("ws://10.0.6.10:8000/ws/hotlineMessages/"+parseInt(Za.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(Za.enc.Utf8))+"/"),je.current.onopen=function(){ae(je.current),console.log("connected")},je.current.onmessage=function(e){console.log("WEBSOCKET Event Received!",e);var t=JSON.parse(e.data);se(t),Fe(t)},je.current.onclose=function(){console.log("WEBSOCKET Closed!")},je.current.onerror=function(e){console.log("WEBSOCKET Error!",e)}},Fe=function(e){var t=JSON.parse(v("user"));e.accessed_users.includes(parseInt(Za.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Za.enc.Utf8)))&&s((function(a){var n=v("ConvID")&&v("ConvID"),l=v("urgencyLevels")&&v("urgencyLevels").split(","),r=v("status")&&v("status").split(","),s=v("hotline")&&v("hotline").split(","),c=v("searchBy")&&v("searchBy").toString(),i=[];a.map((function(e){var t=e.conversation_id,a="";a=t.includes("</mark>")?t.toString().replace(/(<([^>]+)>)/gi,""):t,i.push(a)}));var o=e,m=a,u=!1,d=!1,p=!1,h=!1,g=[],f={urgency:"",status:"",hotline:"",searchBy:""};null!==l&&(null===l||void 0===l?void 0:l.length)>0&&(u=!0,f=Object(T.a)({},f,{urgency:l})),null!==r&&(null===r||void 0===r?void 0:r.length)>0&&(d=!0,f=Object(T.a)({},f,{status:r})),null!==s&&(null===s||void 0===s?void 0:s.length)>0&&(p=!0,f=Object(T.a)({},f,{hotline:s})),null!==c&&(null===c||void 0===c?void 0:c.length)>0&&(h=!0,f=Object(T.a)({},f,{searchBy:c})),(u||d||p||h)&&(m=Ye(f,e,m,i)),h&&(g=[e.conversation_id,e.responder_conversation_name,e.hotline_name,e.message].map((function(e){return e.toLowerCase().includes(c.toLowerCase())}))),h||u||d||p||i.includes(e.conversation_id)||(m=[].concat(Object(_e.a)(m),[e]),we.current=!0);var E=m.map((function(a){return a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by!==parseInt(Za.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Za.enc.Utf8))&&e.conversation_id!==n?(a.responder_conversation_name.includes("</mark>")&&(o=Object(T.a)({},o,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(o=Object(T.a)({},o,{conversation_id:a.conversation_id})),a.hotline_name.includes("</mark>")&&(o=Object(T.a)({},o,{hotline:{name:a.hotline_name}})),o=Object(T.a)({},o,{unread_messages_count:a.unread_messages_count+1})):a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by===parseInt(Za.AES.decrypt(t.user_data.user_id,"anonymoose").toString(Za.enc.Utf8))?(a.responder_conversation_name.includes("</mark>")&&(o=Object(T.a)({},o,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(o=Object(T.a)({},o,{conversation_id:a.conversation_id})),a.hotline_name.includes("</mark>")&&(o=Object(T.a)({},o,{hotline:{name:a.hotline_name}})),o):a}));u||d||p||h||Me(e,m,n);return u&&!l.includes(e.urgency_level_id.toString())?E:d&&!r.includes(e.status_id.toString())?E:p&&!s.includes(e.hotline_id.toString())?E:h&&!g.includes(!0)?E:Pe(E,e,o)}))},Pe=function(e,t,a){var n=0,l=e;return e.map((function(a){if((null===a||void 0===a?void 0:a.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===t||void 0===t?void 0:t.conversation_id))return n=e.indexOf(a)})),l.splice(n,1),[a].concat(Object(_e.a)(l))},Me=function(e,t,a){for(var n=JSON.parse(v("user")),l=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(Za.AES.decrypt(n.user_data.user_id,"anonymoose").toString(Za.enc.Utf8))&&e.conversation_id!==a})),r=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),s=0;s<l.length;s++){var c,i;(null===(c=r[0])||void 0===c?void 0:c.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===(i=l[s])||void 0===i?void 0:i.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))&&0===r[0].unread_messages_count&&me((function(e){return e+1}))}},Le=function(e,t){if(h.length>0||w.length>0||O.length>0||K.length>0)for(var a=JSON.parse(v("user")),n=null===t||void 0===t?void 0:t.filter((function(t){var n;return(null===t||void 0===t?void 0:null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(Za.AES.decrypt(a.user_data.user_id,"anonymoose").toString(Za.enc.Utf8))&&(null===e||void 0===e?void 0:e.conversation_id)!==L.conversation_id})),l=null===t||void 0===t?void 0:t.filter((function(t){var a;return(null===t||void 0===t?void 0:null===(a=t.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),r=0;r<n.length;r++){var s,c,i,o,m;if((null===(s=l[0])||void 0===s?void 0:null===(c=s.conversation_id)||void 0===c?void 0:c.toString().replace(/(<([^>]+)>)/gi,""))===(null===(i=n[r])||void 0===i?void 0:null===(o=i.conversation_id)||void 0===o?void 0:o.toString().replace(/(<([^>]+)>)/gi,""))&&0===(null===(m=l[0])||void 0===m?void 0:m.unread_messages_count)){we.current||me((function(e){return e+1}));var u=t.map((function(t){return t.conversation_id===(null===e||void 0===e?void 0:e.conversation_id)?Object(T.a)({},t,{unread_messages_count:t.unread_messages_count+1}):t}));ge(u)}}},Re=function(){b("urgencyLevels"),b("status"),b("hotline"),b("searchBy"),b("ConvID")},Ye=function(e,t,a,n){var l,r,s,c,i,o,m,u,d=[];if((null===(l=e.status)||void 0===l?void 0:l.includes(t.status_id.toString()))&&(null===(r=e.urgency)||void 0===r?void 0:r.includes(t.urgency_level_id.toString()))&&(null===(s=e.hotline)||void 0===s?void 0:s.includes(t.hotline_id.toString()))&&(null===(c=e.searchBy)||void 0===c?void 0:c.length)>0&&t.conversation_id.toLowerCase().includes(null===(i=e.searchBy)||void 0===i?void 0:i.toLowerCase())||t.responder_conversation_name.toLowerCase().includes(null===(o=e.searchBy)||void 0===o?void 0:o.toLowerCase())||t.hotline_name.toLowerCase().includes(null===(m=e.searchBy)||void 0===m?void 0:m.toLowerCase())||t.message.toLowerCase().includes(null===(u=e.searchBy)||void 0===u?void 0:u.toLowerCase())){var p,h=t.conversation_id.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),g=t.responder_conversation_name.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),f=t.hotline_name.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),E=t.message.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),v=Object(T.a)({},t,{conversation_id:h,responder_conversation_name:g,message:E,hotline:{name:f,hotline_id:t.hotline_id}});d=n.includes(null===(p=v.conversation_id)||void 0===p?void 0:p.toString().replace(/(<([^>]+)>)/gi,""))?a:[].concat(Object(_e.a)(a),[v])}else d=a;return d};var ze=function(){var e=pe(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=v("urgencyLevels")&&v("urgencyLevels").split(","),l=v("status")&&v("status").split(","),r=v("hotline")&&v("hotline").split(","),c=Object(T.a)({},n&&n.length>0&&{urgency_level_id:n},{},l&&l.length>0&&{status_id:l},{},r&&r.length>0&&{hotline_id:r}),i=P+"hotlineResponderConversation/?user_id="+parseInt(Za.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Za.enc.Utf8)),o=K.length>0&&0===h.length&&0===w.length&&0===O.length?i+"&search="+K:K.length>0&&(h.length>0||w.length>0||O.length>0)?i+"&filter="+JSON.stringify(c)+"&search="+K:0===K.length&&(h.length>0||w.length>0||O.length>0)?i+"&filter="+JSON.stringify(c):"";t&&(o.length>0?F.a.get(o,a).then((function(e){s(e.data)})):F.a.get(i,a).then((function(e){var t=0;u(e.data),s(e.data),Te(!1),ge(e.data);e.data.reduce((function(e,a,n){0!=a.unread_messages_count&&t++}),[]);me(t)})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amWEBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"hotlinemsg"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(_t,{amWEBUser:!0,data:e}),l.a.createElement($a,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},l.a.createElement("span",null,l.a.createElement(ua.a,{className:"d-inline-flex d-lg-none pr-3 back-arrow ",title:"Back to Messages",onClick:function(){return be(!1),void Se(!1)}})),"Hotline Messages")),Ae?l.a.createElement(Ka,{loader:Ae}):!Ae&&(null===m||void 0===m?void 0:m.length)>0?l.a.createElement(Qa,{conversation:L,conversations:r,chatdiv:Ne,urgencyLevel:H,status:G,searchString:K,newState:re,socket:te,setCounter:function(e){for(var t=e.data,a=0;a<r.length-1;a++)r[a].conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.data.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")&&(t=Object(T.a)({},t,{unread_messages_count:r[a].unread_messages_count}));t.unread_messages_count&&t.unread_messages_count>0&&oe>0&&me(oe-1)},NoHotlines:ha.a,createMarkup:function(e){return{__html:e}},setSearchString:Z,setConversations:s,onConversationClick:function(e){da.isMobile&&(be(!0),Se(!0));(s((function(t){return t.map((function(t){return t.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")?Object(T.a)({},e,{unread_messages_count:0}):t}))})),e.unread_messages_count>0&&oe>0)&&me(oe-1);E("ConvID",e.conversation_id),R(e),B(e.urgency_level_id),J(e.status_id)},removeFilter:D,removeFilterLevel:function(e,t){A({type:e,value:t})},statusFilterData:w,hotlineFilterData:O,urgencyFilterData:h,loadFilteredConversations:function(e,t,a,n,l){!function(e,t,a){var n,l,r;g(e),k(t),_(a),E("urgencyLevels",null===(n=Object.values(e))||void 0===n?void 0:n.map((function(e){return e.value}))),E("status",null===(l=Object.values(t))||void 0===l?void 0:l.map((function(e){return e.value}))),E("hotline",null===(r=Object.values(a))||void 0===r?void 0:r.map((function(e){return e.value})))}(a,n,l),s(e),"reset"===t&&Ie.setFieldsValue({search:""})},getConversations:ze,setStatus:J,setUrgencyLevel:B,unreadCount:oe,showdiv:ve}):l.a.createElement(Wa,{CreateHotline:Wt.a}))))))},en=(a(371),N.a.Sider),tn=(N.a.Header,N.a.Content,function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t="";return(null===(e=this.props.data)||void 0===e?void 0:e.location)&&(this.props.data.location.pathname.includes("hotline")?t="1":this.props.data.location.pathname.includes("openline")&&(t="2")),l.a.createElement(l.a.Fragment,null,l.a.createElement(this.state.collapsed?X.a:ee.a,{className:"trigger d-lg-none d-block",onClick:this.toggle}),l.a.createElement(en,{className:this.state.collapsed?" d-lg-block w-md-100 sider-width":"d-none d-lg-block w-md-100 sider-width",trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(Z.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[t]},l.a.createElement(Z.a.Item,{key:"1",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-openlines"}))}," ",l.a.createElement(o.b,{to:"/amweb/hotlinemessages"},"Hotline Messages")),l.a.createElement(Z.a.Item,{key:"2",icon:l.a.createElement("span",{className:"icon-circle"},l.a.createElement("span",{className:"icon icon-polls"}))}," ",l.a.createElement(o.b,{to:"/amweb/openlinemessages"},"Openline Messages"))),l.a.createElement("div",{className:"btm-div"},l.a.createElement("a",{href:"/",className:"px-2",disabled:!0},"Info"),l.a.createElement("a",{href:"/",className:"px-2",disabled:!0},"Help"))))}}]),t}(l.a.Component)),an=a(404),nn=a.n(an),ln=a(405),rn=a.n(ln),sn=function(e,t){return e.filter((function(e){return e.conversation_id.toLowerCase().includes(t.toLowerCase())||e.responder_conversation_name.toLowerCase().includes(t.toLowerCase())||e.openline_name.toLowerCase().includes(t.toLowerCase())||e.message.toLowerCase().includes(t.toLowerCase())})).map((function(e){var a=e.conversation_id.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),n=e.responder_conversation_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),l=e.openline_name.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),r=e.message.replace(new RegExp(t,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));return Object(T.a)({},e,{conversation_id:a,responder_conversation_name:n,message:r,openline:{name:l,openline_id:e.openline_id}})}))},cn=(a(817),a(42)),on=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)([]),E=Object(c.a)(f,2),b=E[0],y=E[1],O=Object(n.useState)([]),N=Object(c.a)(O,2),_=N[0],C=N[1],w=Object(n.useState)([]),k=Object(c.a)(w,2),I=k[0],x=k[1],D=Object(n.useState)([]),A=Object(c.a)(D,2),U=A[0],M=A[1],L=Object(n.useState)([]),R=Object(c.a)(L,2),Y=R[0],z=R[1],H=Object(n.useState)([]),B=Object(c.a)(H,2),q=B[0],V=B[1],G=Object(n.useState)([]),J=Object(c.a)(G,2),Q=J[0],W=J[1],K=Object(n.useState)([]),$=Object(c.a)(K,2),Z=$[0],X=$[1],ee=Object(n.useState)([]),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)([]),re=Object(c.a)(le,2),se=re[0],ce=re[1];Object(n.useEffect)((function(){var e=pe(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getUserAllOpenlines/"+parseInt(cn.AES.decrypt(t.user_data.user_id,"anonymoose").toString(cn.enc.Utf8)),a).then((function(e){var t=[];e.data.map((function(e){return t.push({label:e.openline.name,value:e.openline.openline_id})})),y(t)}))}),[]),Object(n.useEffect)((function(){void 0===e.removeFilter.type||e.visible||de(!1)}),[m,r,h]),Object(n.useEffect)((function(){if("urgencyLevel"===e.removeFilter.type){var t=Z.filter((function(t){return t.value!==e.removeFilter.value})),a=m.filter((function(t){return t!==e.removeFilter.value}));u(a),X(t)}if("urgencyOpenline"===e.removeFilter.type){var n=ae.filter((function(t){return t.value!==e.removeFilter.value})),l=h.filter((function(t){return t!==e.removeFilter.value}));g(l),ne(n)}if("urgencyStatus"===e.removeFilter.type){var c=se.filter((function(t){return t.value!==e.removeFilter.value})),i=r.filter((function(t){return t!==e.removeFilter.value}));s(i),ce(c)}}),[e.removeFilter]);var ie=[{label:"Low",value:1},{label:"Medium",value:2},{label:"High",value:3}],me=[{label:"New",value:1},{label:"Open",value:2},{label:"Closed",value:3}],ue=b,de=function(t){var a=Object(T.a)({},r.length>0&&{status_id:r},{},m.length>0&&{urgency_level_id:m},{},h.length>0&&{openline_id:h});M(r),C(m),x(h),V(ae),W(se),z(Z);var n=pe(),l=JSON.parse(v("user")),s=v("searchBy"),c={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},i=P+"openlineResponderConversation/?user_id="+parseInt(cn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(cn.enc.Utf8)),o=Object(T.a)({},a,{openline_id:a.openline_id&&a.openline_id.toString(),status_id:a.status_id&&a.status_id.toString(),urgency_level_id:a.urgency_level_id&&a.urgency_level_id.toString()}),u=""===e.searchString?i+"&filter="+JSON.stringify(o):i+"&filter="+JSON.stringify(o)+"&search="+e.searchString,d=[];F.a.get(u,c).then((function(t){d=(null===s||void 0===s?void 0:s.length)>0?sn(t.data,s):t.data,e.loadFilteredConversations(d,"apply",Z,se,ae)})),t&&e.hide()};return l.a.createElement("div",null,l.a.createElement(j.a,{span:24,style:{width:"325px"}},l.a.createElement("div",{className:""},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Filter")),l.a.createElement(j.a,{span:"12",className:"d-flex justify-content-end"},l.a.createElement(oe.a,{type:"link",className:"link pl-0 pt-0",onClick:function(){return function(){var t=pe(),a=JSON.parse(v("user")),n=v("searchBy"),l={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},r=P+"openlineResponderConversation/?user_id="+parseInt(cn.AES.decrypt(a.user_details.org_user_id,"anonymoose").toString(cn.enc.Utf8)),c=[];F.a.get(r,l).then((function(t){c=(null===n||void 0===n?void 0:n.length)>0?sn(t.data,n):t.data,e.loadFilteredConversations(c,"reset",[],[],[]),u([]),X([]),s([]),ce([]),ne([]),g([])})),e.hide()}()}},"Reset"))),l.a.createElement(be.a,{className:"mt-0 mb-1 w-100"}),l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(S.a,{className:"filter-wrapper align-items-center px-3 py-2"},l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(j.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Urgency level")),l.a.createElement(j.a,{span:"24"},l.a.createElement(Ft.a.Group,{className:"d-flex flex-column flex-gap",name:"urgencyLevel",options:ie,value:m,onChange:function(e){var t=Z;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ie.find((function(t){return t.value===e})))})):t=[],X(t),u(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(j.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Status")),l.a.createElement(j.a,{span:"24"},l.a.createElement(Ft.a.Group,{className:"d-flex flex-column flex-gap",name:"status",value:r,options:me,onChange:function(e){var t=se;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(me.find((function(t){return t.value===e})))})):t=[],ce(t),s(e)}}))),l.a.createElement("div",{className:"w-100 mb-4"},l.a.createElement(j.a,{span:"24",className:"filter-type mb-3"},l.a.createElement("h6",null,"Openline")),l.a.createElement(j.a,{span:"24"},l.a.createElement(Ft.a.Group,{className:"d-flex flex-column flex-gap",name:"openline",options:ue,value:h,onChange:function(e){var t=ae;e.length>0?e.map((function(e){t.find((function(t){return t.value===e}))?t=t.filter((function(t){return t.value===e})):t.push(ue.find((function(t){return t.value===e})))})):t=[],ne(t),g(e)}})))))),l.a.createElement(S.a,null,l.a.createElement(j.a,{span:"24",className:"btn-row actions"},l.a.createElement(oe.a,{type:"primary",className:"mr-2",onClick:function(){return de(!0)}},"Apply"),l.a.createElement(oe.a,{type:"secondary",onClick:function(t){u(_),s(U),g(I),X(Y),ce(Q),ne(q),e.hide()}},"Cancel")))))},mn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{placement:"bottom",content:l.a.createElement(on,{hide:this.hide,searchString:this.props.searchString,removeFilter:this.props.removeFilter,loadFilteredConversations:this.props.loadFilteredConversations,visible:this.state.visible}),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"icon icon-filter"})))}}]),t}(l.a.Component),un=ga.a.Paragraph,dn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={expand:!1,counter:0,notesData:[],conversationId:""},a.typoExpand=function(){a.setState({expand:!0,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a.typoClose=function(){a.setState({expand:!1,counter:a.state.expand?a.state.counter+1:a.state.counter+0})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"renderParagraph",value:function(e){return l.a.createElement("div",{className:"note-wrapper m-2",key:this.state.counter},l.a.createElement("span",{className:"note-user"},ge()(e.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A \u2022")," ",e.first_name," ",e.last_name),l.a.createElement(un,{ellipsis:{rows:3,expandable:!0,symbol:"Show more",onExpand:this.typoExpand}},e.note_text))}},{key:"render",value:function(){var e=this;return this.props.addedNote.map((function(t){return l.a.createElement("div",{className:"show-less","data-test":"addedNotes"},e.renderParagraph(t),e.state.expand&&l.a.createElement("a",{"data-test":"showLess",className:"d-flex justify-content-end",onClick:e.typoClose},"Show less"))}))}}]),t}(n.Component),pn=(ga.a.Paragraph,function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChange=function(e){a.setState({rows:e})},a.state={rows:1,notes:[],conversationId:""},a.getNotes=a.getNotes.bind(Object(z.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({conversationId:this.props.conversation_id}),this.getNotes(this.props.conversation_id)}},{key:"getNotes",value:function(e){var t=this,a={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},params:{conversation_id:e}};F.a.get(P+"getNotes/",a).then((function(e){t.setState({notes:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state.notes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class,"data-test":"Notes"},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Notes")),l.a.createElement(oe.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.notesClicked(t)}}))),l.a.createElement(be.a,{className:"my-2 w-100"}),l.a.createElement(j.a,{span:"24",className:"px-3"},l.a.createElement(wa,{convoId:this.props.conversation_id,getNoteData:this.getNotes}),l.a.createElement(S.a,{className:"added-notes"},l.a.createElement(dn,{addedNote:t}))))))))}}]),t}(n.Component)),hn=[{id:5,name:"Updated the Status to"},{id:6,name:"Updated the Urgency level to"},{id:7,name:"Added new Note"},{id:8,name:"View Openline Converations"}],gn=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],fn=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],En=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={myclass:"",activity:[]},e.divclicked=e.divclicked.bind(Object(z.a)(e)),e}return Object(g.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAcitivity(this.props.conversation_id)}},{key:"getAcitivity",value:function(e){var t=this,a={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getOpenlineConversationActivity/?conversation_id="+e,a).then((function(e){t.setState({activity:e.data})}))}},{key:"mapAuditLog",value:function(e){var t="";return hn.map((function(a){a.id===e.audit_log_event_id&&(t=a.name,e.status_value&&gn.map((function(a){e.status_value==a.id&&(t=t+" <b>"+a.name+"</b>")})),e.urgency_level_value&&fn.map((function(a){e.urgency_level_value==a.id&&(t=t+" <b>"+a.name+"</b>")})))})),t}},{key:"render",value:function(){var e=this,t=this.state.activity;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Activity")),l.a.createElement(oe.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.activityClicked(t)}}))),l.a.createElement(be.a,{className:"my-2 w-100"}),l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(j.a,{span:"24",className:"px-3 pt-2"},l.a.createElement(Da.a,null,t.map((function(t){return l.a.createElement(Da.a.Item,null,l.a.createElement("span",{className:"note-user"},ge()(t.created_on).utc().local().format("MM:DD:YY \u2022 hh:mm A\u2022")," ",t.name),l.a.createElement("br",null),xt()(e.mapAuditLog(t)))}))))))))))}}]),t}(n.Component),vn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={myclass:"",assigneEmp:[]},e.divclicked=e.divclicked.bind(Object(z.a)(e)),e}return Object(g.a)(t,e),Object(d.a)(t,[{key:"divclicked",value:function(){""===this.state.myclass?this.setState({myclass:"rgt-panel"}):this.setState({myclass:""})}},{key:"componentDidMount",value:function(){this.getAssigne(this.props.openline_id)}},{key:"getAssigne",value:function(e){var t=this,a={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getOpenlineAssignEmpl/"+e,a).then((function(e){var a=[];e.data.map((function(e){var t=e.user.first_name+" "+e.user.last_name;return a.push({"Assigned User_name":t}),a})),t.setState({assigneEmp:a})}))}},{key:"render",value:function(){var e=this,t=this.state.assigneEmp;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"rgt-panel",className:this.props.class},l.a.createElement("p",null,l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"filter-wrapper align-items-center justify-content-between px-3 pt-3"},l.a.createElement(j.a,{span:"12"},l.a.createElement("h6",null,"Assigned To")),l.a.createElement(oe.a,{onClick:this.showModal,type:"link",className:"link pl-0 pt-0 align-items-center d-flex"},l.a.createElement("span",{className:"icon icon-close small",onClick:function(t){return e.props.assigneClicked(t)}}))),l.a.createElement(be.a,{className:"my-2 w-100"}),l.a.createElement(j.a,{span:"24",className:"px-3 pt-2 assignees d-flex flex-column flex-gap"},t.map((function(e){return l.a.createElement(Ea.a,null,e["Assigned User_name"])}))))))))}}]),t}(n.Component),bn=O.a.TextArea,yn=[{id:1,name:"New"},{id:2,name:"Open"},{id:3,name:"Closed"}],On=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],Nn=a(42),_n=function(e){var t,a,r=e.conversation,s=e.urgencyLevel,i=e.status,o=e.onChangeUrgencyLevel,m=e.onChangeStatus,u=e.searchString,d=e.newState,p=e.setCounter,h=e.socket,g=e.chatdiv,f=Ce.a.useForm(),E=Object(c.a)(f,1)[0],b=Object(n.useState)([]),y=Object(c.a)(b,2),O=y[0],N=y[1],_=Object(n.useState)(""),C=Object(c.a)(_,2),w=C[0],k=C[1],I=Object(n.useState)({}),x=Object(c.a)(I,2),D=x[0],U=x[1],M=Object(n.useState)({noteDivClicked:!1,myClass:""}),L=Object(c.a)(M,2),R=L[0],Y=L[1],z=Object(n.useState)({activityDivClicked:!1,myClass:""}),H=Object(c.a)(z,2),B=H[0],q=H[1],V=Object(n.useState)({assigneDivClicked:!1,myClass:""}),G=Object(c.a)(V,2),J=G[0],Q=G[1],W=Object(n.useState)(!1),K=Object(c.a)(W,2),$=K[0],Z=K[1],X=Object(n.useState)(""),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){ae(u)}),[u,r.conversation_id]),Object(n.useEffect)((function(){ne(),re();var e=document.getElementById("activityId"),t=document.getElementById("noteId"),a=document.getElementById("assigneId");""!=J.myClass&&(Q({myClass:"",assigneDivClicked:!1}),a.classList.remove("selected")),""!=R.myClass&&(Y({myClass:"",noteDivClicked:!1}),t.classList.remove("selected")),""!=B.myClass&&(q({myClass:"",activityDivClicked:!1}),e.classList.remove("selected"))}),[r.conversation_id,d]),Object(n.useEffect)((function(){if(O.length>0)if(te.length>1){var e=0;O.map((function(t){return t.message.includes("</mark>")&&(e+=1),e}));var t=document.getElementsByTagName("mark")[e-1];t&&t.scrollIntoView(!1,{block:"end"})}else{var a=document.getElementsByClassName("openline_message")[document.getElementsByClassName("openline_message").length-1];a&&a.scrollIntoView(!1,{block:"end"})}}),[O,u]),Object(n.useEffect)((function(){var e=void 0!==D[r.conversation_id]?D[r.conversation_id]:"";k(e)}),[r.conversation_id]);var ne=function(){var e,t,a,n,l,s;return A.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:e=pe(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n="",n=r.conversation_id.includes("<mark")?null===(l=r.conversation_id)||void 0===l?void 0:l.toString().replace(/(<([^>]+)>)/gi,""):r.conversation_id,s={conversation_id:n,user_id:parseInt(Nn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Nn.enc.Utf8))},F.a.post(P+"openlineConvoMessages/",s,a).then((function(e){return A.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:N(e.data);case 1:case"end":return t.stop()}}))}));case 7:case"end":return c.stop()}}))},le=function(){var e=pe(),t=JSON.parse(v("user"));if(w){var a,n={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},l="";if(r.conversation_id.includes("<mark"))l=null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,"");else l=r.conversation_id;var s={user_id:parseInt(Nn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Nn.enc.Utf8)),openline_id:r.openline_id,conversation_id:l,message:w,created_by:parseInt(Nn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Nn.enc.Utf8))};F.a.post(P+"receiveOpenlineMessage/",s,n).then((function(e){201===e.status&&(1!==e.data.status_id&&3!==e.data.status_id||m(2,l),ae(""),p(e),k(""),U(Object(T.a)({},D,Object(Ne.a)({},l,""))),h.send(JSON.stringify(e.data)))}))}E.setFieldsValue({chatArea:""})},re=function(){N((function(e){var t,a,n=[];if(e&&e.length&&(null===(t=d.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=e[0].conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))){var l=e.filter((function(e){var t,a;return(null===(t=e.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))===(null===(a=d.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))}));n=[].concat(Object(_e.a)(l),[d])}else n=Object(_e.a)(e);return n}))},se=function(e){var t=document.getElementById("noteId");da.isMobile&&Z(!0),""!=B.myClass&&q({myClass:"",activityDivClicked:!1}),""!=J.myClass&&Q({myClass:"",assigneDivClicked:!1}),""===R.myClass?(t.classList.add("selected"),Y({myClass:"rgt-panel",noteDivClicked:!0})):(t.classList.remove("selected"),Y({myClass:"",noteDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},ce=function(e){var t=document.getElementById("activityId");da.isMobile&&Z(!0),""!=R.myClass&&Y({myClass:"",noteDivClicked:!1}),""!=J.myClass&&Q({myClass:"",assigneDivClicked:!1}),""===B.myClass?(t.classList.add("selected"),q({myClass:"rgt-panel",activityDivClicked:!0})):(t.classList.remove("selected"),q({myClass:"",activityDivClicked:!1})),document.getElementById("noteId").classList.remove("selected"),document.getElementById("assigneId").classList.remove("selected")},ie=function(e){var t=document.getElementById("assigneId");da.isMobile&&Z(!0),""!=R.myClass&&Y({myClass:"",noteDivClicked:!1}),""!=B.myClass&&q({myClass:"",activityDivClicked:!1}),""===J.myClass?(t.classList.add("selected"),Q({myClass:"rgt-panel",assigneDivClicked:!0})):(t.classList.remove("selected"),Q({myClass:"",assigneDivClicked:!1})),document.getElementById("activityId").classList.remove("selected"),document.getElementById("noteId").classList.remove("selected")},oe=function(e){return{__html:e}};if(u){var me,ue,de,he,fe;if(r.responder_conversation_name.includes("</mark>"))r.responder_conversation_name=null===(ue=r.responder_conversation_name)||void 0===ue?void 0:ue.toString().replace(/(<([^>]+)>)/gi,""),r.responder_conversation_name=r.responder_conversation_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(r.openline_name.includes("</mark>"))r.openline_name=null===(de=r.openline_name)||void 0===de?void 0:de.toString().replace(/(<([^>]+)>)/gi,""),r.openline_name=r.openline_name.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));if(null===(me=r.conversation_id)||void 0===me?void 0:me.toString().includes("</mark>"))r.conversation_id=null===(he=r.conversation_id)||void 0===he?void 0:he.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(fe=r.conversation_id)||void 0===fe?void 0:fe.toString().replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}));O.map((function(e){var t;e.message.includes("</mark>")?(e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")}))):(e.message=e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),e.message=e.message.replace(new RegExp(u,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})));return Object(T.a)({},e,{message:e.message})}))}else{var Ee,ve,ye;r.responder_conversation_name=null===(Ee=r.responder_conversation_name)||void 0===Ee?void 0:Ee.toString().replace(/(<([^>]+)>)/gi,""),r.openline_name=null===(ve=r.openline_name)||void 0===ve?void 0:ve.toString().replace(/(<([^>]+)>)/gi,""),r.conversation_id=null===(ye=r.conversation_id)||void 0===ye?void 0:ye.toString().replace(/(<([^>]+)>)/gi,""),O.map((function(e){var t;return e.message=null===(t=e.message)||void 0===t?void 0:t.toString().replace(/(?:\r\n|\r|\n)/g,"<br />"),Object(T.a)({},e,{message:e.message})}))}var Oe=O.length-r.unread_messages_count;return l.a.createElement(j.a,{span:24,lg:18,className:g?"chat-section d-lg-flex":"chat-section d-lg-flex d-none","data-test":"messages"},l.a.createElement(j.a,{span:24,className:"h-100"},l.a.createElement(S.a,{className:"top-filter-pan p-2 p-lg-4 d-flex align-items-center"},l.a.createElement(j.a,{span:24,lg:10},l.a.createElement("div",{className:""},l.a.createElement("h6",{dangerouslySetInnerHTML:oe(r.responder_conversation_name)}),l.a.createElement("p",{style:{margin:0,display:"inline",float:"left"},dangerouslySetInnerHTML:oe(r.openline_name)}),"\xa0|\xa0",l.a.createElement("p",{style:{margin:0,display:"inline",float:"center"},dangerouslySetInnerHTML:oe(r.conversation_id)}))),l.a.createElement(j.a,{span:24,lg:14},l.a.createElement("div",{className:"d-flex justify-content-end pt-3 pt-sm-1 pt-md-0"},l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Urgency level"),l.a.createElement(Ie.a,{bordered:!1,value:s,onChange:function(e){var t;return o(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},On.map((function(e){return l.a.createElement(Option,{value:e.id},e.name)})))),l.a.createElement("div",{className:"selection-panel pr-3"},l.a.createElement("label",null,"Status"),l.a.createElement(Ie.a,{bordered:!1,value:i,onChange:function(e){var t;return m(e,null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""))}},yn.map((function(e){return 2!==i&&3!==i||1!==e.id?l.a.createElement(Option,{value:e.id},e.name):l.a.createElement(Option,{value:e.id,disabled:!0},e.name)})))),l.a.createElement("div",{className:"icon-row d-flex align-items-center"},l.a.createElement(j.a,{span:24,md:8},l.a.createElement("span",{id:"noteId",className:"icon icon-create",onClick:function(e){return se()}})),l.a.createElement(j.a,{span:24,md:8},l.a.createElement("span",{id:"activityId",className:"icon icon-activity",onClick:function(e){return ce()}})),l.a.createElement(j.a,{span:24,md:8},l.a.createElement("span",{id:"assigneId",className:"icon icon-assign",onClick:function(e){return ie()}})))))),l.a.createElement(S.a,{className:"row-hgt"},l.a.createElement("div",{className:R.noteDivClicked||B.activityDivClicked||J.assigneDivClicked?$?"w-75 d-none":"w-75":"w-100"},l.a.createElement("div",{className:"msg_main"},l.a.createElement(ba.Scrollbars,{autoHeightMax:450,universal:!0},l.a.createElement(j.a,{span:24,className:"msg-history p-4"},O.map((function(e,t){return l.a.createElement("div",null,Oe===t?l.a.createElement(be.a,{plain:!0},"Last Read"):null,l.a.createElement("div",{className:e.is_responder_message?"outgoing-msg openline_message mb-3":"incoming-msg openline_message mb-2"},l.a.createElement("div",{className:e.is_responder_message?"sent-msg":"received-msg"},l.a.createElement("p",{ellipsis:!0,dangerouslySetInnerHTML:oe(e.message)}),l.a.createElement("span",{className:"time-date"}," ",ge()(e.created_on).isSame(ge()(),"day")?ge()(e.created_on).utc().local().format("hh:mm A"):ge()(e.created_on).utc().local().format("MM:DD:YY | hh:mm A "),e.is_responder_message&&" | ".concat(e.first_name," ").concat(e.last_name)))))}))))),l.a.createElement(j.a,{span:24,className:R.noteDivClicked||B.activityDivClicked||J.assigneDivClicked?"send-msg w-75":"send-msg w-100"},l.a.createElement("div",{className:"type-msg"},l.a.createElement(Ce.a,{className:"input-md w-100",name:"validate-other",form:E},l.a.createElement(bn,{className:"input-control",id:"chatArea",placeholder:"Replying as Openline representative",onChange:function(e){return function(e){k(e.target.value),U(Object(T.a)({},D,Object(Ne.a)({},e.target.name,e.target.value)))}(e)},value:w,onKeyDown:function(e){if(e.altKey&&13===e.keyCode){var t=document.querySelector(".input-control");t.value=t.value+"\r\n"}e.altKey||13!==e.keyCode||(e.preventDefault(),le())},maxLength:1e4})),l.a.createElement("span",{className:"ml-3 send",onClick:function(){return le()}},l.a.createElement("img",{src:Sa.a,alt:"send message"}))))),l.a.createElement("div",{className:"w-25 d-flex justify-content-end width-sm-100"},R.noteDivClicked?l.a.createElement(pn,{class:R.myClass,conversation_id:null===(t=r.conversation_id)||void 0===t?void 0:t.toString().replace(/(<([^>]+)>)/gi,""),notesClicked:function(){return se()}}):null,B.activityDivClicked?l.a.createElement(En,{class:B.myClass,conversation_id:null===(a=r.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""),activityClicked:function(){return ce()}}):null,J.assigneDivClicked?l.a.createElement(vn,{class:J.myClass,openline_id:r.openline_id,assigneClicked:function(){return ie()}}):null))))},Sn=a(42),jn=O.a.Search,Cn=function(e){var t=Object(n.useRef)(""),a=function(a){var n=a.trim();t.current=n;var l=e.statusFilterData.map((function(e){return e=e.value})),r=Object(T.a)({},l.length>0&&{status_id:l},{},e.urgencyFilterData.length>0&&{urgency_level_id:e.urgencyFilterData.map((function(e){return e.value}))},{},e.openlineFilterData.length>0&&{openline_id:e.openlineFilterData.map((function(e){return e.value}))}),s=Object(T.a)({},r,{openline_id:r.openline_id&&r.openline_id.toString(),status_id:r.status_id&&r.status_id.toString(),urgency_level_id:r.urgency_level_id&&r.urgency_level_id.toString()}),c=pe(),i=JSON.parse(v("user")),o={headers:{Authorization:c,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},m=P+"openlineResponderConversation/?user_id="+parseInt(Sn.AES.decrypt(i.user_details.org_user_id,"anonymoose").toString(Sn.enc.Utf8)),u=""===n?m+"&filter="+JSON.stringify(s):m+"&filter="+JSON.stringify(s)+"&search="+n.toString();F.a.get(u,o).then((function(a){e.setSearchString(t.current),E("searchBy",t.current);var n=[];n=t.current.length>0?sn(a.data,t.current):a.data,e.setConversations(n)}))};return l.a.createElement(jn,{name:"search",id:"search",placeholder:"Search",onChange:function(e){return a(e.target.value)},onSearch:a,autoComplete:"off"})},wn=ga.a.Paragraph,kn=a(42),In=function(e){return l.a.createElement("div",{className:"mid-content p-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:6,className:e.showdiv?"message-section py-4 d-none":"message-section py-4"},l.a.createElement(j.a,{span:24,className:" d-flex justify-content-between px-3"},l.a.createElement("h6",null,"Conversations ",l.a.createElement(fa.a,{className:"pl-1",count:e.unreadCount})),l.a.createElement(mn,{searchString:e.searchString,removeFilter:e.removeFilter,loadFilteredConversations:e.loadFilteredConversations})),l.a.createElement(j.a,{span:24,className:"mt-4 px-3 d-block"},l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:150,thumbMinSize:30,universal:!0},l.a.createElement(l.a.Fragment,null,e.urgencyFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea.a,{visible:!0,key:a,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyLevel",t.value)},className:"mb-2"},"Urgency: ",l.a.createElement("span",null,t.label)))})),e.openlineFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyOpenline",t.value)},className:"mb-2",key:a},"Openline: ",l.a.createElement("span",null,t.label," ")))})),e.statusFilterData.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea.a,{visible:!0,closable:!0,onClose:function(){return e.removeFilterLevel("urgencyStatus",t.value)},className:"mb-2",key:a},"Status: ",l.a.createElement("span",null,t.label," ")))}))))),l.a.createElement(j.a,{span:24,className:"search-box mt-3 px-3"},l.a.createElement(Ce.a,{form:e.form},l.a.createElement(Ce.a.Item,{name:"search",id:"search"},l.a.createElement(Cn,{statusFilterData:e.statusFilterData,urgencyFilterData:e.urgencyFilterData,openlineFilterData:e.openlineFilterData,setSearchString:e.setSearchString,setConversations:e.setConversations})))),l.a.createElement(ba.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:450,thumbMinSize:30,universal:!0},l.a.createElement(j.a,{span:24,className:" inbox-messages"},e.conversations.length>0?e.conversations.map((function(t){var a,n;return l.a.createElement("div",{className:(null===(a=e.conversation.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))?"msg-wrapper active":"msg-wrapper",onClick:function(){return e.onConversationClick(t)}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{ellipsis:!0,style:{fontWeight:"bold"},className:"w-75 pr-2 mb-1",dangerouslySetInnerHTML:e.createMarkup(t.responder_conversation_name)}),l.a.createElement("span",{className:"small"}," ",ge()(t.created_on).isSame(ge()(),"day")?ge()(t.created_on).utc().local().format("hh:mm"):ge()(t.created_on).utc().local().format("MM:DD:YY"))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(wn,{ellipsis:!0,className:"font-weight-normal mb-1 sm para_wrapper"},l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.openline_name)}),"\xa0 |\xa0",l.a.createElement("span",{className:"ellipsisText",dangerouslySetInnerHTML:e.createMarkup(t.conversation_id)})),l.a.createElement("span",{className:"small"}," ",l.a.createElement(fa.a,{count:t.unread_messages_count}))))})):l.a.createElement("div",{className:"msg-wrapper"},"No messages found")))),e.conversation?l.a.createElement(_n,{conversation:e.conversation,urgencyLevel:e.urgencyLevel,status:e.status,onChangeUrgencyLevel:function(t,a){var n=pe(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(kn.enc.Utf8)),urgency_level_id:t};F.a.put(P+"openlineConvoMessagesUrgencyLevel/ ",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setUrgencyLevel(t))}))},onChangeStatus:function(t,a){var n=pe(),l=JSON.parse(v("user")),r={headers:{Authorization:n,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},s={conversation_id:a,updated_by:parseInt(kn.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(kn.enc.Utf8)),status_id:t};F.a.put(P+"openlineConvoMessagesStatus/",s,r).then((function(a){200===a.status&&(e.getConversations(),e.setStatus(t))}))},searchString:e.searchString,newState:e.newState,socket:e.socket,setCounter:e.setCounter,"data-test":"Messages",chatdiv:e.chatdiv}):l.a.createElement(j.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.NoOpenlines,alt:"No Openlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No Conversation Selected"),l.a.createElement("small",null,"Select a Conversation to view"))))},xn=function(e){return l.a.createElement(j.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement("img",{src:e.CreateOpenline,alt:"No Openlines Selected",style:{opacity:"0.8"}})),l.a.createElement("h5",null,"No conversations are initiated for the openlines assigned to you"))},Dn=N.a.Content,An=a(42),Tn=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)(!0),p=Object(c.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)([]),y=Object(c.a)(f,2),O=y[0],_=y[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),k=w[0],I=w[1],x=Object(n.useState)([]),D=Object(c.a)(x,2),A=D[0],U=D[1],M=Object(n.useState)({}),L=Object(c.a)(M,2),R=L[0],Y=L[1],z=Object(n.useState)(""),H=Object(c.a)(z,2),B=H[0],q=H[1],V=Object(n.useState)(""),G=Object(c.a)(V,2),J=G[0],Q=G[1],W=Object(n.useState)(""),K=Object(c.a)(W,2),Z=K[0],X=K[1],ee=Object(n.useState)(""),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)(null),re=Object(c.a)(le,2),se=re[0],ce=re[1],ie=Object(n.useState)({}),oe=Object(c.a)(ie,2),me=oe[0],ue=oe[1],de=Object(n.useState)(0),he=Object(c.a)(de,2),ge=he[0],fe=he[1],Ee=Object(n.useState)([]),ve=Object(c.a)(Ee,2),be=ve[0],ye=ve[1],Oe=Object(n.useState)(!1),Ne=Object(c.a)(Oe,2),Se=Ne[0],je=Ne[1],we=Object(n.useState)(!1),ke=Object(c.a)(we,2),Ie=ke[0],xe=ke[1],De=Object(n.useRef)(null),Ae=Object(n.useRef)(!1),Te=Ce.a.useForm(),Ue=Object(c.a)(Te,1)[0];Object(n.useEffect)((function(){Be(),Fe(),Ye()}),[]),Object(n.useEffect)((function(){var e=v("searchBy")&&v("searchBy").toString(),t=[],a=[];null===be||void 0===be||be.map((function(e){var a=e.conversation_id,n="";n=(null===a||void 0===a?void 0:a.includes("</mark>"))?null===a||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""):a,t.push(n)})),a=t.includes(null===me||void 0===me?void 0:me.conversation_id)?be:[].concat(Object(_e.a)(be),[me]),ye(a),Re(me,a),(null===e||void 0===e?void 0:e.length)>0&&Ae.current&&(Ae.current=!1)}),[me,be]);var Fe=function(){var e=JSON.parse(v("user"));De.current=new WebSocket("ws://10.0.6.10:8000/ws/openlineMessages/"+parseInt(An.AES.decrypt(e.user_data.organization_id,"anonymoose").toString(An.enc.Utf8))+"/"),De.current.onopen=function(){ce(De.current),console.log("connected")},De.current.onmessage=function(e){console.log("WEBSOCKET Event Received!",e);var t=JSON.parse(e.data);ue(t),Pe(t)},De.current.onclose=function(){console.log("WEBSOCKET Closed!")},De.current.onerror=function(e){console.log("WEBSOCKET Error!",e)}},Pe=function(e){var t=JSON.parse(v("user"));e.accessed_users.includes(parseInt(An.AES.decrypt(t.user_data.user_id,"anonymoose").toString(An.enc.Utf8)))&&s((function(a){var n=v("ConvID")&&v("ConvID"),l=v("urgencyLevels")&&v("urgencyLevels").split(","),r=v("status")&&v("status").split(","),s=v("openline")&&v("openline").split(","),c=v("searchBy")&&v("searchBy").toString(),i=[];a.map((function(e){var t=e.conversation_id,a="";a=t.includes("</mark>")?t.toString().replace(/(<([^>]+)>)/gi,""):t,i.push(a)}));var o=e,m=a,u=!1,d=!1,p=!1,h=!1,g=[],f={urgency:"",status:"",openline:"",searchBy:""};null!==l&&(null===l||void 0===l?void 0:l.length)>0&&(u=!0,f=Object(T.a)({},f,{urgency:l})),null!==r&&(null===r||void 0===r?void 0:r.length)>0&&(d=!0,f=Object(T.a)({},f,{status:r})),null!==s&&(null===s||void 0===s?void 0:s.length)>0&&(p=!0,f=Object(T.a)({},f,{openline:s})),null!==c&&(null===c||void 0===c?void 0:c.length)>0&&(h=!0,f=Object(T.a)({},f,{searchBy:c})),(u||d||p||h)&&(m=ze(f,e,m,i)),h&&(g=[e.conversation_id,e.responder_conversation_name,e.openline_name,e.message].map((function(e){return e.toLowerCase().includes(c.toLowerCase())}))),h||u||d||p||i.includes(e.conversation_id)||(m=[].concat(Object(_e.a)(m),[e]),Ae.current=!0);var E=m.map((function(a){return a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by!==parseInt(An.AES.decrypt(t.user_data.user_id,"anonymoose").toString(An.enc.Utf8))&&e.conversation_id!==n?(a.responder_conversation_name.includes("</mark>")&&(o=Object(T.a)({},o,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(o=Object(T.a)({},o,{conversation_id:a.conversation_id})),a.openline_name.includes("</mark>")&&(o=Object(T.a)({},o,{openline:{name:a.openline_name}})),o=Object(T.a)({},o,{unread_messages_count:a.unread_messages_count+1})):a.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id&&e.created_by===parseInt(An.AES.decrypt(t.user_data.user_id,"anonymoose").toString(An.enc.Utf8))?(a.responder_conversation_name.includes("</mark>")&&(o=Object(T.a)({},o,{responder_conversation_name:a.responder_conversation_name})),a.conversation_id.includes("</mark>")&&(o=Object(T.a)({},o,{conversation_id:a.conversation_id})),a.openline_name.includes("</mark>")&&(o=Object(T.a)({},o,{openline:{name:a.openline_name}})),o):a}));u||d||p||h||Le(e,m,n);return u&&!l.includes(e.urgency_level_id.toString())?E:d&&!r.includes(e.status_id.toString())?E:p&&!s.includes(e.openline_id.toString())?E:h&&!g.includes(!0)?E:Me(E,e,o)}))},Me=function(e,t,a){var n=0,l=e;return e.map((function(a){if((null===a||void 0===a?void 0:a.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===t||void 0===t?void 0:t.conversation_id))return n=e.indexOf(a)})),l.splice(n,1),[a].concat(Object(_e.a)(l))},Le=function(e,t,a){for(var n=JSON.parse(v("user")),l=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(An.AES.decrypt(n.user_data.user_id,"anonymoose").toString(An.enc.Utf8))&&e.conversation_id!==a})),r=t.filter((function(t){return(null===t||void 0===t?void 0:t.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),s=0;s<l.length;s++){var c,i;(null===(c=r[0])||void 0===c?void 0:c.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))===(null===(i=l[s])||void 0===i?void 0:i.conversation_id.toString().replace(/(<([^>]+)>)/gi,""))&&0===r[0].unread_messages_count&&fe((function(e){return e+1}))}},Re=function(e,t){if(O.length>0||A.length>0||k.length>0||ae.length>0)for(var a=JSON.parse(v("user")),n=null===t||void 0===t?void 0:t.filter((function(t){var n;return(null===t||void 0===t?void 0:null===(n=t.conversation_id)||void 0===n?void 0:n.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)&&e.created_by!==parseInt(An.AES.decrypt(a.user_data.user_id,"anonymoose").toString(An.enc.Utf8))&&(null===e||void 0===e?void 0:e.conversation_id)!==B.conversation_id})),l=null===t||void 0===t?void 0:t.filter((function(t){var a;return(null===t||void 0===t?void 0:null===(a=t.conversation_id)||void 0===a?void 0:a.toString().replace(/(<([^>]+)>)/gi,""))===(null===e||void 0===e?void 0:e.conversation_id)})),r=0;r<n.length;r++){var s,c,i,o,m;if((null===(s=l[0])||void 0===s?void 0:null===(c=s.conversation_id)||void 0===c?void 0:c.toString().replace(/(<([^>]+)>)/gi,""))===(null===(i=n[r])||void 0===i?void 0:null===(o=i.conversation_id)||void 0===o?void 0:o.toString().replace(/(<([^>]+)>)/gi,""))&&0===(null===(m=l[0])||void 0===m?void 0:m.unread_messages_count)){Ae.current||fe((function(e){return e+1}));var u=t.map((function(t){return t.conversation_id===(null===e||void 0===e?void 0:e.conversation_id)?Object(T.a)({},t,{unread_messages_count:t.unread_messages_count+1}):t}));ye(u)}}},Ye=function(){b("urgencyLevels"),b("status"),b("openline"),b("searchBy"),b("ConvID")},ze=function(e,t,a,n){var l,r,s,c,i,o,m,u,d=[];if((null===(l=e.status)||void 0===l?void 0:l.includes(t.status_id.toString()))&&(null===(r=e.urgency)||void 0===r?void 0:r.includes(t.urgency_level_id.toString()))&&(null===(s=e.openline)||void 0===s?void 0:s.includes(t.openline_id.toString()))&&(null===(c=e.searchBy)||void 0===c?void 0:c.length)>0&&t.conversation_id.toLowerCase().includes(null===(i=e.searchBy)||void 0===i?void 0:i.toLowerCase())||t.responder_conversation_name.toLowerCase().includes(null===(o=e.searchBy)||void 0===o?void 0:o.toLowerCase())||t.openline_name.toLowerCase().includes(null===(m=e.searchBy)||void 0===m?void 0:m.toLowerCase())||t.message.toLowerCase().includes(null===(u=e.searchBy)||void 0===u?void 0:u.toLowerCase())){var p,h=t.conversation_id.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),g=t.responder_conversation_name.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),f=t.openline_name.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),E=t.message.replace(new RegExp(e.searchBy,"gi"),(function(e){return'<mark style="background: #2769AA; color: white;">'.concat(e,"</mark>")})),v=Object(T.a)({},t,{conversation_id:h,responder_conversation_name:g,message:E,openline:{name:f,openline_id:t.openline_id}});d=n.includes(null===(p=v.conversation_id)||void 0===p?void 0:p.toString().replace(/(<([^>]+)>)/gi,""))?a:[].concat(Object(_e.a)(a),[v])}else d=a;return d};var Be=function(){var e=pe(),t=JSON.parse(v("user")),a={headers:{Authorization:e,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n=v("urgencyLevels")&&v("urgencyLevels").split(","),l=v("status")&&v("status").split(","),r=v("openline")&&v("openline").split(","),c=Object(T.a)({},n&&n.length>0&&{urgency_level_id:n},{},l&&l.length>0&&{status_id:l},{},r&&r.length>0&&{openline_id:r}),i=P+"openlineResponderConversation/?user_id="+parseInt(An.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(An.enc.Utf8)),o=ae.length>0&&0===O.length&&0===A.length&&0===k.length?i+"&search="+ae:ae.length>0&&(O.length>0||A.length>0||k.length>0)?i+"&filter="+JSON.stringify(c)+"&search="+ae:0===ae.length&&(O.length>0||A.length>0||k.length>0)?i+"&filter="+JSON.stringify(c):"";t&&(o.length>0?F.a.get(o,a).then((function(e){s(e.data)})):F.a.get(i,a).then((function(e){var t=0;u(e.data),s(e.data),g(!1),ye(e.data);e.data.reduce((function(e,a,n){0!=a.unread_messages_count&&t++}),[]);fe(t)})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amWEBUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"openlinemsg"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(tn,{amWEBUser:!0,data:e}),l.a.createElement(Dn,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},l.a.createElement("span",null,l.a.createElement(ua.a,{className:"d-inline-flex d-lg-none pr-3 back-arrow ",title:"Back to Messages",onClick:function(){return je(!1),void xe(!1)}})),"Openline Messages")),h?l.a.createElement(j.a,{span:24,lg:18,className:"chat-section no-selected bg-white justify-content-center align-items-center d-none d-lg-flex"},l.a.createElement(S.a,{className:"justify-content-center my-3"},l.a.createElement(He.a,{size:"large",tip:"Loading...",spinning:h}))):!h&&(null===m||void 0===m?void 0:m.length)>0?l.a.createElement(In,{conversation:B,conversations:r,chatdiv:Ie,urgencyLevel:J,status:Z,searchString:ae,newState:me,socket:se,setCounter:function(e){for(var t=e.data,a=0;a<r.length-1;a++)r[a].conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.data.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")&&(t=Object(T.a)({},t,{unread_messages_count:r[a].unread_messages_count}));t.unread_messages_count&&t.unread_messages_count>0&&ge>0&&fe(ge-1)},NoOpenlines:nn.a,createMarkup:function(e){return{__html:e}},setSearchString:ne,setConversations:s,onConversationClick:function(e){da.isMobile&&(je(!0),xe(!0));(s((function(t){return t.map((function(t){return t.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")===e.conversation_id.toString().replace(/(<([^>]+)>)/gi,"")?Object(T.a)({},e,{unread_messages_count:0}):t}))})),e.unread_messages_count>0&&ge>0)&&fe(ge-1);E("ConvID",e.conversation_id),q(e),Q(e.urgency_level_id),X(e.status_id)},removeFilter:R,removeFilterLevel:function(e,t){Y({type:e,value:t})},statusFilterData:A,openlineFilterData:k,urgencyFilterData:O,loadFilteredConversations:function(e,t,a,n,l){!function(e,t,a){var n,l,r;_(e),U(t),I(a),E("urgencyLevels",null===(n=Object.values(e))||void 0===n?void 0:n.map((function(e){return e.value}))),E("status",null===(l=Object.values(t))||void 0===l?void 0:l.map((function(e){return e.value}))),E("openline",null===(r=Object.values(a))||void 0===r?void 0:r.map((function(e){return e.value})))}(a,n,l),s(e),"reset"===t&&Ue.setFieldsValue({search:""})},getConversations:Be,setStatus:X,setUrgencyLevel:Q,unreadCount:ge,showdiv:Se}):l.a.createElement(xn,{CreateOpenline:rn.a}))))))},Un=a(42),Fn=N.a.Content,Pn=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=v("userType"),t=e?Un.AES.decrypt(e,"anonymoose").toString(Un.enc.Utf8):"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},"AM WEB"===t?l.a.createElement($,{amWEBUser:!0}):"AM CC"===t?l.a.createElement($,{amCCUser:!0}):"Org CC"===t?l.a.createElement($,{amORGUser:!0}):null),l.a.createElement(S.a,{className:"content-center"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,"AM WEB"===t?l.a.createElement(_t,{data:this.props}):"Org CC"===t?l.a.createElement(ae,{data:this.props}):"AM CC"===t?l.a.createElement(le,null):null,l.a.createElement(Fn,{className:""},l.a.createElement(S.a,{className:"py-3",style:{justifyContent:"center"}},l.a.createElement("h1",{className:"mb-0"},"You don't have access rights! Please contact your administrator.")))))))}}]),t}(l.a.Component),Mn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.handleResetPasswordOk()},a.handleCancel=function(){a.setState({visible:!1}),a.props.handleResetPasswordCancel()},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{type:"link",className:"link pl-0 mt-4",onClick:this.showModal},l.a.createElement("span",null,"Reset password for this user")),l.a.createElement(Te.a,{title:"Reset Password",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Reset and Invite",cancelText:"Cancel"},l.a.createElement(Ce.a,{className:"input-md floating-label w-100"},l.a.createElement(j.a,{span:24,className:"gutter-row"},l.a.createElement("div",{className:"mb-4 subtext-md"},"Reset password for"," ",l.a.createElement("span",{className:"font-weight-md"},this.props.user)),l.a.createElement(xe,{label:"New Password",value:""},l.a.createElement(Ce.a.Item,{name:"newpwd",className:"pwd",rules:[{required:!0,message:"Please enter your new password!"}]},l.a.createElement(O.a.Password,(e={className:"input-control",htmlFor:"newpwd"},Object(Ne.a)(e,"className","required"),Object(Ne.a)(e,"value",""),e)))),l.a.createElement(xe,{label:"Confirm Password",value:""},l.a.createElement(Ce.a.Item,{name:"confirmpwd",className:"pwd",rules:[{required:!0,message:"Please enter your confirmed password!"}]},l.a.createElement(O.a.Password,(t={className:"input-control",htmlFor:"confirmpwd"},Object(Ne.a)(t,"className","required"),Object(Ne.a)(t,"value",""),t))))))))}}]),t}(n.Component),Ln=we.a.RangePicker,Rn=function(e){var t,a,n,r,s;return l.a.createElement(Te.a,{visible:!0,onOk:e.handleEditOk,onCancel:e.handleEditCancel,centered:!0,width:900,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Update",cancelText:"Cancel"},l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement("div",null,"Edit Seeded User"),l.a.createElement("br",null),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(H.a,null,e.seededUserName.charAt(0)),l.a.createElement("span",{className:"md-name"},e.seededUserName)),e.error&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"First Name",value:e.seededUserDetails.firstName},l.a.createElement(Ce.a.Item,{name:"firstName",className:"required"},l.a.createElement(O.a,{id:"firstName",className:"input-control",defaultValue:e.seededUserDetails.firstName,htmlFor:"firstName",value:e.seededUserDetails.firstName,onChange:function(t){return e.handleSeededUserOnChange(t)},autoComplete:"off",maxLength:50})),e.fNameCount&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Last Name",value:e.seededUserDetails.lastName},l.a.createElement(Ce.a.Item,{name:"lastName",className:"required"},l.a.createElement(O.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(Ne.a)(t,"className","required"),Object(Ne.a)(t,"defaultValue",e.seededUserDetails.lastName),Object(Ne.a)(t,"value",e.seededUserDetails.lastName),Object(Ne.a)(t,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(Ne.a)(t,"autoComplete","off"),Object(Ne.a)(t,"maxLength",50),t))),e.lNameCount&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Email Id",value:e.seededUserDetails.email},l.a.createElement(Ce.a.Item,{name:"email",className:"required"},l.a.createElement(O.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(Ne.a)(a,"className","required"),Object(Ne.a)(a,"defaultValue",e.seededUserDetails.email),Object(Ne.a)(a,"value",e.seededUserDetails.email),Object(Ne.a)(a,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(Ne.a)(a,"onBlur",(function(t){return e.validateEmailAddress(t)})),Object(Ne.a)(a,"autoComplete","off"),Object(Ne.a)(a,"disabled",!0),a)),e.emailValidationError&&l.a.createElement(ke.a,{message:"Please enter a valid email address.",type:"error",showIcon:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Date",value:"date2"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(Ln,(n={className:"new w-100",name:"date2"},Object(Ne.a)(n,"className","required"),Object(Ne.a)(n,"value",e.seededUserDetails.date2),Object(Ne.a)(n,"onChange",(function(t){return e.handleSeededUserDatePickerChange(t,"date2")})),Object(Ne.a)(n,"disabledDate",e.disabledDate),n))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Mobile",value:e.seededUserDetails.mobile},l.a.createElement(Ce.a.Item,{name:"mobile",className:"required"},l.a.createElement(O.a,(r={className:"input-control",id:"mobile",htmlFor:"mobile"},Object(Ne.a)(r,"className","required"),Object(Ne.a)(r,"defaultValue",e.seededUserDetails.mobile),Object(Ne.a)(r,"value",e.seededUserDetails.mobile),Object(Ne.a)(r,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(Ne.a)(r,"onBlur",(function(t){return e.validateMobile(t)})),Object(Ne.a)(r,"autoComplete","off"),r)),e.mobileValidationError&&l.a.createElement(ke.a,{message:"Please enter a valid mobile number.",type:"error",showIcon:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status",value:e.seededUserDetails.status2},l.a.createElement(Ce.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,(s={className:"input-control w-100 w-lg-50",value:e.seededUserDetails.status2,htmlFor:"status2"},Object(Ne.a)(s,"className","required"),Object(Ne.a)(s,"onSelect",(function(t){return e.handleSeededUserOnSelect(t,"status2")})),s),l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive"))))))))),l.a.createElement(Mn,{user:e.seededUserDetails.firstName,handleResetPasswordOk:e.handleResetPasswordOk,handleResetPasswordCancel:e.handleResetPasswordCancel}))},Yn=we.a.RangePicker,zn=function(e){var t,a,n,r;return l.a.createElement(Te.a,{visible:!0,onOk:e.handleAddSeededUser,onCancel:e.handleAddSeededUserCancel,centered:!0,width:1200,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Add",cancelText:"Cancel"},l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other"},e.error&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement("div",null,"Add New Seeded User"),l.a.createElement("br",null),l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"First Name",value:e.seededUserDetails.firstName},l.a.createElement(Ce.a.Item,{name:"firstName",className:"required"},l.a.createElement(O.a,{id:"firstName",className:"input-control",defaultValue:e.seededUserDetails.firstName,htmlFor:"firstName",value:e.seededUserDetails.firstName,onChange:function(t){return e.handleSeededUserOnChange(t)},autoComplete:"off",maxLength:50})),e.fNameCount&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Last Name",value:e.seededUserDetails.lastName},l.a.createElement(Ce.a.Item,{name:"lastName",className:"required"},l.a.createElement(O.a,(t={className:"input-control",id:"lastName",htmlFor:"lastName"},Object(Ne.a)(t,"className","required"),Object(Ne.a)(t,"defaultValue",e.seededUserDetails.lastName),Object(Ne.a)(t,"value",e.seededUserDetails.lastName),Object(Ne.a)(t,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(Ne.a)(t,"autoComplete","off"),Object(Ne.a)(t,"maxLength",50),t))),e.lNameCount&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Email Id",value:e.seededUserDetails.email},l.a.createElement(Ce.a.Item,{name:"email",className:"required"},l.a.createElement(O.a,(a={className:"input-control",id:"email",htmlFor:"email"},Object(Ne.a)(a,"className","required"),Object(Ne.a)(a,"defaultValue",e.seededUserDetails.email),Object(Ne.a)(a,"value",e.seededUserDetails.email),Object(Ne.a)(a,"onChange",(function(t){return e.handleSeededUserOnChange(t)})),Object(Ne.a)(a,"onBlur",(function(t){return e.validateEmailAddress(t)})),Object(Ne.a)(a,"autoComplete","off"),a)),e.emailValidationError&&l.a.createElement(ke.a,{message:"Please enter a valid email address.",type:"error",showIcon:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Date",value:"date2"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(Yn,(n={className:"new w-100",name:"date2"},Object(Ne.a)(n,"className","required"),Object(Ne.a)(n,"value",e.seededUserDetails.date2),Object(Ne.a)(n,"onChange",(function(t){return e.handleSeededUserDatePickerChange(t,"date2")})),Object(Ne.a)(n,"disabledDate",e.disabledDate),n))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(xe,{label:"Mobile",value:e.seededUserDetails.mobile},l.a.createElement(Ce.a.Item,{name:"mobile",className:"required"},l.a.createElement(Ye.a,{country:"in",id:"mobile",htmlFor:"mobile",value:e.seededUserDetails.mobile,onChange:e.handleMobile,onBlur:e.validateMobile,autoComplete:"off"}),e.mobileValidationError&&l.a.createElement(ke.a,{message:"Please enter a valid mobile number.",type:"error",showIcon:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status",value:e.seededUserDetails.status2},l.a.createElement(Ce.a.Item,{className:"required",name:"status2"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,(r={className:"input-control w-100 w-lg-50",value:e.seededUserDetails.status2,htmlFor:"status2"},Object(Ne.a)(r,"className","required"),Object(Ne.a)(r,"onSelect",(function(t){return e.handleSeededUserOnSelect(t,"status2")})),r),l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive"))))))))))},Hn=N.a.Content,Bn=function(e){var t,a=Object(m.g)(),r=Object(n.useState)(!1),s=Object(c.a)(r,2),i=s[0],o=s[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),p=d[0],h=d[1],g=Object(n.useState)(!1),f=Object(c.a)(g,2),E=f[0],v=f[1],b=Object(n.useState)(!1),y=Object(c.a)(b,2),C=y[0],w=y[1],k=Object(n.useState)(!1),I=Object(c.a)(k,2),x=I[0],D=I[1],A=Object(n.useState)(!1),U=Object(c.a)(A,2),M=U[0],L=U[1],R=Object(n.useState)(""),Y=Object(c.a)(R,2),z=Y[0],B=Y[1],q=Object(n.useState)(""),V=Object(c.a)(q,2),G=V[0],J=V[1],Q=Object(n.useState)({firstName:"",lastName:"",status2:"",email:"",date2:"",mobile:""}),W=Object(c.a)(Q,2),K=W[0],Z=W[1],X=Object(n.useState)(!1),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(c.a)(ne,2),se=re[0],ce=re[1],ie=Object(n.useState)({name:"",identifier:"",org_id:"",status:"",date1:""}),me=Object(c.a)(ie,2),ue=me[0],de=me[1],he=Object(n.useState)([]),fe=Object(c.a)(he,2),Ee=fe[0],ve=fe[1],be=_.a.useNotification(),ye=Object(c.a)(be,2),Oe=ye[0],Se=ye[1],je=Ce.a.useForm(),ke=Object(c.a)(je,1)[0],De=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id;Object(n.useEffect)((function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getOrganization/".concat(De,"/"),e).then((function(e){var t=null===e||void 0===e?void 0:e.data;de({name:t.organization.name,identifier:t.organization.identifier,status:t.organization.status_id.toString(),date1:[ge()(t.organization.start_date,"YYYY-MM-DD"),ge()(t.organization.end_date,"YYYY-MM-DD")]}),ke.setFieldsValue({name:t.organization.name,identifier:t.organization.identifier});var a=[];t.seeded_user.map((function(e){e.soft_delete||(a=[].concat(Object(_e.a)(a),[{firstName:e.first_name,lastName:e.last_name,status2:e.status_id.toString(),email:e.email,date2:[ge()(e.start_date,"YYYY-MM-DD"),ge()(e.end_date,"YYYY-MM-DD")],mobile:e.mobile_number}]))})),ve(a)}))}),[]);var Ae=function(){Ee.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(K)&&e.email===K.email){var t=Ee.indexOf(e),a=JSON.parse(JSON.stringify(Ee));a[t]=K,ve(a)}})),Re()},Te=function(e){"firstName"===e.target.id&&50===e.target.value.length?D(!0):"lastName"===e.target.id&&50===e.target.value.length?L(!0):(D(!1),L(!1)),Z(Object(T.a)({},K,Object(Ne.a)({},e.target.id,e.target.value)))},Ue=function(e,t){Z(Object(T.a)({},K,Object(Ne.a)({},t,e)))},Fe=function(e,t){Z(Object(T.a)({},K,Object(Ne.a)({},t,e)))},Pe=function(e){/\S+@\S+\.\S+/.test(e.target.value)?h(!1):h(!0)},Me=function(e){K.mobile.length>10||/^\+\d$/.test(e.target.value)?v(!1):v(!0)},Re=function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={first_name:K.firstName,last_name:K.lastName,email:G,mobile_number:K.mobile,status_id:parseInt(K.status2),start_date:K.date2[0]?ge()(K.date2[0]).format("DD-MM-YYYY"):"",end_date:K.date2[1]?ge()(K.date2[1]).format("DD-MM-YYYY"):"",organization_id:parseInt(De)};F.a.put(P+"seededUser/",t,e).then((function(){Oe.info({description:"Details for ".concat(z," have been changed successfully."),placement:"bottomLeft"}),ae(!1)}))},Ye=function(e){return e&&e<ge()().startOf("day")},ze=function(){Z({firstName:"",lastName:"",status2:"",email:"",date2:"",mobile:""}),o(!1),D(!1),L(!1),ce(!0)},He=we.a.RangePicker;return l.a.createElement(l.a.Fragment,null,Se,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(le,null),l.a.createElement(Hn,null,l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Organization Details")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(j.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Organization Details "),l.a.createElement("div",null,l.a.createElement(oe.a,{type:"link",className:"link pl-0 btn-link-primary ml-3",onClick:function(){return function(){var e="/amcc/editorg/".concat(De);a.push(e,"viaOrgDetails")}()}},l.a.createElement("span",{className:"icon icon-pencil"}),l.a.createElement("span",{className:"pl-2 d-none d-block-md"},"Edit Details")))),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(H.a,null,ue.name.charAt(0)),l.a.createElement("span",{className:"md-name"},ue.name)),l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other",onFinish:function(e){},form:ke},l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Name",value:ue.name},l.a.createElement(Ce.a.Item,{className:"required",name:"name",id:"name",rules:[{required:!0,message:"Please enter organization name "}]},l.a.createElement(O.a,{className:"input-control",id:"name",name:"name",htmlFor:"organization name",defaultValue:ue.name,value:ue.name,disabled:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Id",value:ue.identifier},l.a.createElement(Ce.a.Item,{className:"required",name:"identifier",id:"identifier",validateStatus:"success",rules:[{required:!0,message:"Please enter organization id "}]},l.a.createElement(O.a,{className:"input-control",id:"identifier",name:"identifier",htmlFor:"organization name",defaultValue:ue.identifier,value:ue.identifier,disabled:!0})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status",value:ue.status},l.a.createElement(Ce.a.Item,{className:"required",name:"status1",rules:[{required:!0,message:"Please enter status "}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control w-100 w-lg-100",value:ue.status,htmlFor:"status",onSelect:function(e){return handleOrganizationOnSelect(e,"status")},disabled:!0},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Select Date",value:"date1"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(He,{className:"w-100 ",name:"date1",value:ue.date1,disabled:!0})))))))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement(S.a,{className:"w-100"},l.a.createElement(j.a,{span:24,md:12},l.a.createElement("h6",{className:"py-3 mb-0"},"Seeded Users Details ")),l.a.createElement(j.a,{span:24,md:12,className:"d-flex justify-content-left justify-content-md-end align-items-center my-3 my-md-0"},l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:function(){return ze()}},"Add Seeded User")))),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},Ee.length>0?l.a.createElement(Le,{seededUsers:Ee,handleEditUser:function(e){ae(!0),o(!1),D(!1),L(!1),h(!1),v(!1);var t={};Ee.forEach((function(a){a.email===e&&(t=a)})),Z(t),B(t.firstName),J(t.email)},handleDelete:function(e){var t=null===Ee||void 0===Ee?void 0:Ee.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e})),a="";Ee.map((function(t){e===t.email&&(a=t.firstName)})),ve(t);var n={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.delete(P+"seededUser/".concat(e),n).then((function(){Oe.info({description:"".concat(a," has been deleted successfully."),placement:"bottomLeft"})}))},addSeededUser:ze,viaEdit:!0,orgDetails:!0,seededUser:!0}):l.a.createElement(j.a,{span:24,lg:18},l.a.createElement(S.a,{className:"justify-content-center"},"No Seeded User")),te?l.a.createElement(Rn,{error:i,handleEditOk:function(){K.firstName&&K.lastName&&K.status2&&K.mobile&&K.date2&&K.email?(o(!1),p||E||Ae()):o(!0)},handleEditCancel:function(){ae(!1)},seededUsers:Ee,fNameCount:x,lNameCount:M,seededUserName:z,seededUserDetails:K,disabledDate:Ye,handleSeededUserOnChange:Te,handleSeededUserDatePickerChange:Fe,handleSeededUserOnSelect:Ue,validateEmailAddress:Pe,emailValidationError:p,validateMobile:Me,mobileValidationError:E,handleResetPasswordOk:function(){},handleResetPasswordCancel:function(){}}):se?l.a.createElement(zn,{error:i,handleAddSeededUser:function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={email:K.email,mobile_number:"+"+K.mobile,is_seeded_user:1,first_name:K.firstName,last_name:K.lastName,start_date:K.date2[0]?ge()(K.date2[0]).format("DD-MM-YYYY"):"",end_date:K.date2[1]?ge()(K.date2[1]).format("DD-MM-YYYY"):"",status_id:parseInt(K.status2),organization_id:parseInt(De)},a={seeded_users:[t]},n=[].concat(Object(_e.a)(Ee),[{firstName:t.first_name,lastName:t.last_name,status2:t.status_id.toString(),email:t.email,date2:[ge()(t.start_date,"YYYY-MM-DD"),ge()(t.end_date,"YYYY-MM-DD")],mobile:t.mobile_number}]);K.firstName&&K.lastName&&K.status2&&K.mobile&&K.date2&&K.email?(o(!1),p||E||C||(ve(n),F.a.post(P+"seededUser/",a,e).then((function(e){Oe.info({description:"".concat(K.firstName," has been added successfully."),placement:"bottomLeft"}),ce(!1)})))):o(!0)},handleAddSeededUserCancel:function(){ce(!1)},seededUsers:Ee,fNameCount:x,lNameCount:M,seededUserDetails:K,disabledDate:Ye,handleSeededUserOnChange:Te,handleSeededUserDatePickerChange:Fe,handleMobile:function(e){Z(Object(T.a)({},K,{mobile:e}))},handleSeededUserOnSelect:Ue,validateEmailAddress:Pe,emailValidationError:p,validateMobile:Me,mobileValidationError:E,validatePassword:function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?w(!1):w(!0)},passwordValidationError:C}):l.a.createElement(l.a.Fragment,null))))))))))},qn=N.a.Content,Vn=function(e){var t,a,r,s=_.a.useNotification(),i=Object(c.a)(s,2),o=i[0],u=i[1],d=Object(m.g)(),p=Ce.a.useForm(),h=Object(c.a)(p,1)[0],g=null===(t=e.computedMatch)||void 0===t?void 0:t.params.id,f=Object(n.useState)(!1),E=Object(c.a)(f,2),v=E[0],b=E[1],y=Object(n.useState)(!1),C=Object(c.a)(y,2),w=C[0],k=C[1],I=Object(n.useState)(!1),x=Object(c.a)(I,2),D=x[0],A=x[1],U=Object(n.useState)(!1),M=Object(c.a)(U,2),L=M[0],R=M[1],Y=Object(n.useState)(!1),z=Object(c.a)(Y,2),B=z[0],q=z[1],V=Object(n.useState)(""),G=Object(c.a)(V,2),J=G[0],Q=G[1],W=Object(n.useState)(""),K=Object(c.a)(W,2),Z=K[0],X=K[1],ee=Object(n.useState)(""),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(""),se=Object(c.a)(re,2),ce=se[0],ie=se[1],me=Object(n.useState)({name:"",identifier:"",org_id:"",status:"",date1:""}),ue=Object(c.a)(me,2),de=ue[0],he=ue[1],fe=Object(n.useState)({firstName:"",lastName:"",status2:"",email:"",date2:"",mobile:""}),Ee=Object(c.a)(fe,2),ve=Ee[0],be=Ee[1],ye=Object(n.useState)([]),Oe=Object(c.a)(ye,2),Se=Oe[0],je=Oe[1],Ae=Object(n.useState)(!1),Te=Object(c.a)(Ae,2),Fe=Te[0],Pe=Te[1],Me=Object(n.useState)(!1),Re=Object(c.a)(Me,2),Ye=Re[0],ze=Re[1],He=Object(n.useState)(!1),Be=Object(c.a)(He,2),qe=Be[0],Ve=Be[1],Ge=Object(n.useState)(!1),Je=Object(c.a)(Ge,2),Qe=Je[0],We=Je[1],Ke=Object(n.useState)(!1),$e=Object(c.a)(Ke,2),Ze=$e[0],Xe=$e[1],et=Object(n.useState)(!1),tt=Object(c.a)(et,2),at=tt[0],nt=tt[1],lt=Object(n.useState)(!1),rt=Object(c.a)(lt,2),st=rt[0],ct=rt[1],it=Object(n.useState)(""),ot=Object(c.a)(it,2),mt=ot[0],ut=ot[1];Object(n.useEffect)((function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getOrganization/".concat(g,"/"),e).then((function(e){var t=null===e||void 0===e?void 0:e.data;he({name:t.organization.name,identifier:t.organization.identifier,status:t.organization.status_id.toString(),date1:[ge()(t.organization.start_date,"YYYY-MM-DD"),ge()(t.organization.end_date,"YYYY-MM-DD")]}),X(t.organization.name),ut(t.organization.status_id.toString()),h.setFieldsValue({name:t.organization.name,identifier:t.organization.identifier});var a=[];t.seeded_user.map((function(e){e.soft_delete||(a=[].concat(Object(_e.a)(a),[{firstName:e.first_name,lastName:e.last_name,status2:e.status_id.toString(),email:e.email,date2:[ge()(e.start_date,"YYYY-MM-DD"),ge()(e.end_date,"YYYY-MM-DD")],mobile:e.mobile_number}]))})),je(a)}))}),[]);var dt=function(){Se.forEach((function(e){if(JSON.stringify(e)!==JSON.stringify(ve)&&e.email===ve.email){var t=Se.indexOf(e),a=JSON.parse(JSON.stringify(Se));a[t]=ve,je(a)}})),bt()},pt=function(e){"identifier"===e.target.id&&20===e.target.value.length?Xe(!0):"name"===e.target.id&&80===e.target.value.length?We(!0):(We(!1),Xe(!1)),he(Object(T.a)({},de,Object(Ne.a)({},e.target.id,e.target.value)))},ht=function(e){"firstName"===e.target.id&&50===e.target.value.length?nt(!0):"lastName"===e.target.id&&50===e.target.value.length?ct(!0):(nt(!1),ct(!1)),be(Object(T.a)({},ve,Object(Ne.a)({},e.target.id,e.target.value)))},gt=function(e,t){be(Object(T.a)({},ve,Object(Ne.a)({},t,e)))},ft=function(e,t){be(Object(T.a)({},ve,Object(Ne.a)({},t,e)))},Et=function(e){/\S+@\S+\.\S+/.test(e.target.value)?A(!1):A(!0)},vt=function(e){ve.mobile.length>10||/^\+\d$/.test(e.target.value)?R(!1):R(!0)},bt=function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={first_name:ve.firstName,last_name:ve.lastName,email:ce,mobile_number:ve.mobile,status_id:parseInt(ve.status2),start_date:ve.date2[0]?ge()(ve.date2[0]).format("DD-MM-YYYY"):"",end_date:ve.date2[1]?ge()(ve.date2[1]).format("DD-MM-YYYY"):"",organization_id:parseInt(g)};F.a.put(P+"seededUser/",t,e).then((function(){o.info({description:"Details for ".concat(ae," have been changed successfully."),placement:"bottomLeft"}),Pe(!1)}))},yt=function(e){return e&&e<ge()().startOf("day")},Ot=function(){be({firstName:"",lastName:"",status2:"",email:"",date2:"",mobile:""}),k(!1),nt(!1),ct(!1),ze(!0)},Nt=we.a.RangePicker;return l.a.createElement(l.a.Fragment,null,u,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(le,null),l.a.createElement(qn,null,l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Organization")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(j.a,{span:24,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Edit Organization"),l.a.createElement("div",null,l.a.createElement(oe.a,{type:"link",className:"link pl-0 btn-link-primary ml-3 deleteOrg",onClick:function(){Ve(!0)}},l.a.createElement("span",{className:"icon icon-delete"}),l.a.createElement("span",{className:"d-none d-md-inline-flex deleteOrg"},"Delete")),qe?l.a.createElement(Ue,{org:Z,handleDelete:function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.delete(P+"deleteOrganization/".concat(g,"/"),e).then((function(){window.location="/amcc/manageorganizations"}))},handleCancel:function(){Ve(!1)},deleteOrg:!0}):l.a.createElement(l.a.Fragment,null))),l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(H.a,null,Z.charAt(0)),l.a.createElement("span",{className:"md-name"},Z)),l.a.createElement(Ce.a,{className:"input-md floating-label w-100",form:h},v&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Name",value:de.name},l.a.createElement(Ce.a.Item,{className:"required edit-input",name:"name",id:"name"},l.a.createElement(O.a,(a={className:"input-control",id:"name",name:"name"},Object(Ne.a)(a,"className","required"),Object(Ne.a)(a,"defaultValue",de.name),Object(Ne.a)(a,"value",de.name),Object(Ne.a)(a,"onChange",(function(e){return pt(e)})),Object(Ne.a)(a,"onBlur",(function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==Z?F.a.post(P+"checkOrganization/",{organization_name:de.name},t).then((function(e){e.data&&Q(e.data[0])})):Q(!1)}(e)})),Object(Ne.a)(a,"htmlFor","name"),Object(Ne.a)(a,"autoComplete","off"),Object(Ne.a)(a,"maxLength",80),a)),"status: false"===J&&de.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&de.name.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==J&&l.a.createElement(ke.a,{message:"Sorry! This organization already exists in the system. Please use a different name.",type:"error",showIcon:!0})),Qe&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Organization Id",value:de.identifier},l.a.createElement(Ce.a.Item,{className:"required edit-input",name:"identifier",id:"identifier"},l.a.createElement(O.a,(r={className:"input-control edit-input",name:"identifier",id:"identifier",htmlFor:"identifier"},Object(Ne.a)(r,"className","required"),Object(Ne.a)(r,"defaultValue",de.identifier),Object(Ne.a)(r,"value",de.identifier),Object(Ne.a)(r,"onChange",(function(e){return pt(e)})),Object(Ne.a)(r,"autoComplete","off"),Object(Ne.a)(r,"maxLength",20),r))),Ze&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Max Characters limit reached.",type:"error"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status",value:de.status},l.a.createElement(Ce.a.Item,{className:"required edit-input",name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control w-100 w-lg-100",value:de.status,htmlFor:"status",onSelect:function(e){return function(e,t){he(Object(T.a)({},de,Object(Ne.a)({},t,e)))}(e,"status")}},l.a.createElement(Option,{value:"1"},"Active"),l.a.createElement(Option,{value:"2"},"Inactive")))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Date",value:"date1"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(Nt,{className:"w-100 ",name:"date1",value:de.date1,onChange:function(e){return function(e,t){he(Object(T.a)({},de,Object(Ne.a)({},t,e)))}(e,"date1")},disabledDate:yt})))))),l.a.createElement(Ce.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={organization_id:g,name:de.name,identifier:de.identifier,start_date:de.date1[0]?ge()(de.date1[0]).format("DD-MM-YYYY"):"",end_date:de.date1[1]?ge()(de.date1[1]).format("DD-MM-YYYY"):"",status_id:parseInt(de.status)},a=ge()(de.date1[1]).format("MM-DD-YYYY");if(de.status!==mt)if(new Date<new Date(a))de.name&&de.identifier?"status: false"!==J&&de.name!==Z||(b(!1),F.a.put(P+"saveOrganization/",t,e).then((function(){window.location="/amcc/manageorganizations"}))):b(!0);else{o.info({description:"Status can't be changed as the end date has been passed.",placement:"bottomLeft"})}else de.name&&de.identifier?(b(!1),F.a.put(P+"saveOrganization/",t,e).then((function(){window.location="/amcc/manageorganizations"}))):b(!0)}},"Update"),l.a.createElement(oe.a,{className:"ml-4",type:"secondary",onClick:function(){if(e.location.state){var t="/amcc/orgdetails/".concat(g);d.push(t)}else window.location="/amcc/manageorganizations"}},"Cancel"))))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,md:12,className:"d-flex justify-content-between align-items-center"},l.a.createElement("h6",{className:"py-3 mb-0"},"Edit Seeded Users ")),l.a.createElement(j.a,{span:24,md:12,className:"d-flex justify-content-left justify-content-md-end align-items-center my-3 my-md-0"},l.a.createElement(oe.a,{className:"mr-4",type:"secondary",onClick:function(){return Ot()}},"Add Seeded User")),Se.length>0?l.a.createElement(Le,{seededUsers:Se,handleEditUser:function(e){Pe(!0),k(!1),nt(!1),ct(!1),A(!1),R(!1);var t={};Se.forEach((function(a){a.email===e&&(t=a)})),be(t),ne(t.firstName),ie(t.email)},handleDelete:function(e){var t=null===Se||void 0===Se?void 0:Se.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e})),a="";Se.map((function(t){e===t.email&&(a=t.firstName)})),je(t);var n={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.delete(P+"seededUser/".concat(e),n).then((function(){o.info({description:"".concat(a," has been deleted successfully."),placement:"bottomLeft"})}))},addSeededUser:Ot,viaEdit:!0,seededUser:!0}):l.a.createElement(j.a,{span:24,lg:18},l.a.createElement(S.a,{className:"justify-content-center"},"No Seeded User")),Fe?l.a.createElement(Rn,{error:w,handleEditOk:function(){ve.firstName&&ve.lastName&&ve.status2&&ve.mobile&&ve.date2&&ve.email?(k(!1),D||L||dt()):k(!0)},handleEditCancel:function(){Pe(!1)},seededUsers:Se,seededUserName:ae,fNameCount:at,lNameCount:st,seededUserDetails:ve,disabledDate:yt,handleSeededUserOnChange:ht,handleSeededUserDatePickerChange:ft,handleSeededUserOnSelect:gt,validateEmailAddress:Et,emailValidationError:D,validateMobile:vt,mobileValidationError:L,handleResetPasswordOk:function(){},handleResetPasswordCancel:function(){}}):Ye?l.a.createElement(zn,{error:w,handleAddSeededUser:function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},t={email:ve.email,mobile_number:"+"+ve.mobile,is_seeded_user:1,first_name:ve.firstName,last_name:ve.lastName,start_date:ve.date2[0]?ge()(ve.date2[0]).format("DD-MM-YYYY"):"",end_date:ve.date2[1]?ge()(ve.date2[1]).format("DD-MM-YYYY"):"",status_id:parseInt(ve.status2),organization_id:parseInt(g)},a={seeded_users:[t]},n=[].concat(Object(_e.a)(Se),[{firstName:t.first_name,lastName:t.last_name,status2:t.status_id.toString(),email:t.email,date2:[ge()(t.start_date,"YYYY-MM-DD"),ge()(t.end_date,"YYYY-MM-DD")],mobile:t.mobile_number}]);ve.firstName&&ve.lastName&&ve.status2&&ve.mobile&&ve.date2&&ve.email?(k(!1),D||L||B||(je(n),F.a.post(P+"seededUser/",a,e).then((function(e){o.info({description:"".concat(ve.firstName," has been added successfully."),placement:"bottomLeft"}),ze(!1)})))):k(!0)},handleAddSeededUserCancel:function(){ze(!1)},seededUsers:Se,fNameCount:at,lNameCount:st,seededUserDetails:ve,disabledDate:yt,handleSeededUserOnChange:ht,handleSeededUserDatePickerChange:ft,handleMobile:function(e){be(Object(T.a)({},ve,{mobile:e}))},handleSeededUserOnSelect:gt,validateEmailAddress:Et,emailValidationError:D,validatePassword:function(e){/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,}$/.test(e.target.value)?q(!1):q(!0)},passwordValidationError:B,validateMobile:vt,mobileValidationError:L}):l.a.createElement(l.a.Fragment,null))))))))},Gn=N.a.Content,Jn=function(){var e=we.a.RangePicker;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amCCUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(le,null),l.a.createElement(Gn,null,l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Profile")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"avatar-wrapper pt-2 pb-4"},l.a.createElement(H.a,null,"W"),l.a.createElement("span",{className:"md-name"},"Alan Charles")),l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"",onFinish:function(e){}},l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"User Name"},l.a.createElement(Ce.a.Item,{className:"required",name:"organization name",rules:[{required:!0,message:"Please enter user name "}]},l.a.createElement(O.a,{className:"input-control",htmlFor:"user name"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"User Id"},l.a.createElement(Ce.a.Item,{className:"required",name:"user id",validateStatus:"success",rules:[{required:!0,message:"Please enter user id "}]},l.a.createElement(O.a,{className:"input-control",htmlFor:"user name"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Email Id"},l.a.createElement(Ce.a.Item,{className:"required",name:"email id",rules:[{required:!0,message:"Please enter email id ",type:"email"}]},l.a.createElement(O.a,{className:"input-control",htmlFor:"email id"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status"},l.a.createElement(Ce.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please enter status "}]},l.a.createElement(O.a,{className:"input-control",htmlFor:"status"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Select Date"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required"},l.a.createElement(e,{className:"w-100 "})))))),l.a.createElement(Ce.a.Item,null,l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{type:"primary",htmlType:"submit"},"Update"),l.a.createElement(oe.a,{className:"ml-4",type:"secondary"},"Cancel"))))))))))))},Qn=a(42),Wn=O.a.TextArea,Kn=(Ie.a.Option,N.a.Content),$n=function(e){var t=Object(n.useState)({end_date:"",help_text:"",hotline_icon_id:"",hotline_id:"",name:"",start_date:"",status_id:""}),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(""),o=Object(c.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),g=h[0],f=h[1],E=Object(n.useState)(""),b=Object(c.a)(E,2),y=b[0],O=b[1],j=_.a.useNotification(),C=Object(c.a)(j,2),w=C[0],k=C[1],I=Object(n.useState)(!1),x=Object(c.a)(I,2),D=x[0],A=x[1],U=Object(n.useState)(!0),M=Object(c.a)(U,2),L=(M[0],M[1],Ce.a.useForm()),R=Object(c.a)(L,1)[0],Y=Object(m.h)(),z=function(e){switch(e){case"1":return"Sexual Harassment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}};Object(n.useEffect)((function(){var e=ge()(Y.state.start_date,"DD / MM / YYYY").format("YYYY-MM-DD"),t=ge()(Y.state.end_date,"DD / MM / YYYY").format("YYYY-MM-DD"),a=[ge()(e,"YYYY/MM/DD"),ge()(t,"YYYY/MM/DD")];s({end_date:"",help_text:Y.state.help_text,hotline_icon_id:Y.state.hotline_icon_id,hotline_id:Y.state.hotline_id,name:Y.state.name,start_date:a,status_id:Y.state.status_id.toString()}),d(Y.state.status_id.toString());var n=function(e){switch(e){case"1":return'<span class="icon icon-sexual-harassment-1 ant-tooltip-open"></span>';case"2":return'<span class="icon icon-violence ant-tooltip-open"></span>';case"3":return'<span class="icon icon-racism ant-tooltip-open"></span>';case"4":return'<span class="icon icon-cyber-bullying ant-tooltip-open"></span>';case"5":return'<span class="icon icon-fight ant-tooltip-open"></span>';case"6":return'<span class="icon icon-discrimination ant-tooltip-open"></span>';case"7":return'<span class="icon icon-slap ant-tooltip-open"></span>';default:return""}}(Y.state.hotline_icon_id.toString());f(n),R.setFieldsValue({name:Y.state.name,help_text:Y.state.help_text})}),[]);var H=function(e){s(Object(T.a)({},r,Object(Ne.a)({},e.target.id,e.target.value)))},B=function(e){var t=pe(),a=r.hotline_id;delete r.hotline_id;var n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.put(P+"hotline/"+a,e,n).then((function(e){if(200===e.status){w.info({description:"Hotline details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/hotlinedirectory"}}))},q=we.a.RangePicker;return l.a.createElement(l.a.Fragment,null,k,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:e}),l.a.createElement(Kn,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Edit Hotline")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(Ce.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:R},D&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(xe,{label:"Directory Name",value:r.name},l.a.createElement(Ce.a.Item,{className:"required",name:"name",id:"name",rules:[{required:!0,message:"Please enter directory name"}]},l.a.createElement(Wn,{showCount:!0,maxLength:80,value:r.name,onChange:function(e){return H(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==Y.state.name?F.a.post(P+"checkhotline/",{hotline_name:e.target.value},t).then((function(e){e.data&&O(e.data[0])})):O(!1)}(e)},id:"name",name:"name",className:"input-control textarea-input",htmlFor:"name",autoComplete:"off"}),"status: false"==y&&r.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.name.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==y&&l.a.createElement(ke.a,{message:"Sorry! This hotline already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(xe,{label:"Description",value:r.help_text},l.a.createElement(Ce.a.Item,{className:"required",name:"help_text",id:"help_text",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(Wn,{className:"input-control textarea-input",value:r.help_text,onChange:function(e){return H(e)},id:"help_text",name:"help_text",htmlFor:"help_text",autoComplete:"off"})))),l.a.createElement(xe,{label:"Date",value:"start_date"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(q,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"start_date",disabledDate:function(e){return e&&e<ge()().startOf("day")},value:r.start_date,onChange:function(e){return function(e,t){s(Object(T.a)({},r,Object(Ne.a)({},t,e)))}(e,"start_date")},rules:[{required:!0,message:"Please select start date"}]}))),l.a.createElement(xe,{label:"Status",value:r.status_id},l.a.createElement(Ce.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please select status"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control w-100 w-lg-50",value:r.status_id,htmlFor:"status",onSelect:function(e){return function(e,t){s(Object(T.a)({},r,Object(Ne.a)({},t,e)))}(e,"status_id")}},l.a.createElement(Ie.a.Option,{value:"5"},"Active"),l.a.createElement(Ie.a.Option,{value:"4"},"Inactive"))))),l.a.createElement(Ce.a.Item,{className:""},l.a.createElement(Ce.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(kt,{"data-test":"addIconComponent",addIcon:function(e,t){s(Object(T.a)({},r,{hotline_icon_id:t})),f(e)}}),z(r.hotline_icon_id.toString())&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},xt()(g)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:z(r.hotline_icon_id.toString())},z(r.hotline_icon_id.toString())))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){if(r.name&&r.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.help_text&&r.help_text.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.status_id&&r.hotline_icon_id&&r.start_date){A(!1),e.preventDefault();var t=JSON.parse(v("user")),a=ge()(r.start_date[1]).format("MM-DD-YYYY"),n={end_date:ge()(r.start_date[1]).format("DD-MM-YYYY"),help_text:r.help_text,hotline_icon_id:r.hotline_icon_id,hotline_id:r.hotline_id,name:r.name,start_date:ge()(r.start_date[0]).format("DD-MM-YYYY"),status_id:parseInt(r.status_id),updated_by:parseInt(Qn.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Qn.enc.Utf8))};if("status: false"==y||r.name===Y.state.name)if(u!==r.status_id)if(new Date<new Date(a))B(n);else{w.info({description:"Status can't be changed as the end date has been passed.",placement:"bottomLeft"})}else B(n)}else A(!0)},"data-test":"stepOneNext",style:{margin:"0 8px"}},"Update"),l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){window.location="/orgcc/hotlinedirectory"},"data-test":"stepOneNext"},"Cancel")))))))))},Zn=a(81),Xn=a.n(Zn),el=N.a.Content,tl=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(el,{className:"w-100 ml-0 ".concat(Xn.a.no_sidebar)},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Add Employee"),l.a.createElement("div",{className:"d-block w-100 pl-3 pl-lg-0 pt-1"},l.a.createElement("small",null,"Please create all employees for your organization who are eligible to use the app. You can either integrate with existing system, import through CSV or add each employee manually."))),l.a.createElement("div",{className:"mid-content mt-0 mt-md-4 no-bg px-3 px-md-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,className:"mt-5"},l.a.createElement(S.a,{className:"d-flex justify-content-center",gutter:{xs:8,sm:32,md:32,lg:100}},l.a.createElement(j.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement("div",{className:"d-flex flex-column ".concat(Xn.a.box_bordered," ").concat(Xn.a.box_bordered_active)},l.a.createElement("span",{className:"icon-integrate ".concat(Xn.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Integrate with existing system"))),l.a.createElement(j.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement("div",{className:"d-flex flex-column ".concat(Xn.a.box_bordered)},l.a.createElement("span",{className:"icon-csv ".concat(Xn.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Import through CSV"))),l.a.createElement(j.a,{className:"gutter-row",span:24,md:8,xl:7},l.a.createElement("div",{className:"d-flex flex-column ".concat(Xn.a.box_bordered)},l.a.createElement("span",{className:"icon-add-user ".concat(Xn.a.icon)}),l.a.createElement("div",{className:"font-weight-bold text-center"},"Create manually")))))))))))))},al=a(841),nl=a(425),ll=al.a.Dragger,rl={name:"file",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?nl.b.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&nl.b.error("".concat(e.file.name," file upload failed."))}},sl=function(){return l.a.createElement(ll,rl,l.a.createElement("p",{className:"ant-upload-drag-icon"},l.a.createElement("span",{className:"icon icon-upload"})),l.a.createElement("p",{className:"ant-upload-text"},"Drop files to upload or Browse"))},cl=N.a.Content,il=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(cl,{className:"w-100 ml-0 ".concat(Xn.a.no_sidebar)},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/addemployee"},l.a.createElement(je.a.Item,null,"Add Employee")),l.a.createElement(je.a.Item,null,"Import CSV file"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Import CSV file ")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(j.a,{span:20,className:"mt-3 dragdrop"},l.a.createElement(sl,null)),l.a.createElement(j.a,{span:24,className:"justify-content-center d-flex mt-5"},l.a.createElement(oe.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-download-icon"}),"Download Sample File"))),l.a.createElement("div",{className:"mt-3 btn-row"},l.a.createElement(oe.a,Object(Ne.a)({type:"secondary",className:"mr-4 mb-4"},"type","secondary"),"Cancel"),l.a.createElement(oe.a,{type:"primary",className:"md"},"Upload")))))))))},ol=N.a.Content,ml=we.a.RangePicker,ul=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ol,{className:"w-100 ml-0 ".concat(Xn.a.no_sidebar)},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/addemployee"},l.a.createElement(je.a.Item,null,"Add Employee")),l.a.createElement(je.a.Item,null,"Create Manually"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Manually")),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,{className:"d-flex justify-content-center align-items-center"},l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:""},l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{gutter:{xs:8,sm:16,md:24,lg:32}},l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"First Name"},l.a.createElement(Ce.a.Item,{className:"required",name:"fname",rules:[{required:!0,message:"Please enter your first name"}]},l.a.createElement(O.a,{className:"input-control",id:"fname",htmlFor:"fname"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Last Name"},l.a.createElement(Ce.a.Item,{className:"required",name:"lname",validateStatus:"success",rules:[{required:!0,message:"Please enter your last name"}]},l.a.createElement(O.a,{className:"input-control",id:"lname",htmlFor:"lname"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Email id"},l.a.createElement(Ce.a.Item,{className:"required",name:"emailid",validateStatus:"success",rules:[{required:!0,message:"Please enter your email id"}]},l.a.createElement(O.a,{type:"email",className:"input-control",id:"emailid",htmlFor:"emailid"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row phone-field"},l.a.createElement(xe,{label:"Mobile Number"},l.a.createElement(Ce.a.Item,{className:"required",name:"mobile",validateStatus:"success",rules:[{required:!0,message:"Please enter your mobile number"}]},l.a.createElement(Ye.a,{country:"us"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Employee id"},l.a.createElement(Ce.a.Item,{className:"required",name:"empid",validateStatus:"success",rules:[{required:!0,message:"Please enter your employee id"}]},l.a.createElement(O.a,{className:"input-control",id:"empid",htmlFor:"empid"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Department"},l.a.createElement(Ce.a.Item,{className:"required",name:"department",rules:[{required:!0,message:"Please enter your department"}]},l.a.createElement(Ie.a,{className:"input-control w-100"},l.a.createElement(Option,{value:"1"},"dept1"),l.a.createElement(Option,{value:"0"},"dept2"))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Status"},l.a.createElement(Ce.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please enter status"}]},l.a.createElement(Ie.a,{className:"input-control w-100"},l.a.createElement(Option,{value:"1"},"1"),l.a.createElement(Option,{value:"0"},"2"))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Select Date"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper required",rules:[{required:!0,message:"Please select start and end date"}]},l.a.createElement(ml,{className:"w-100 ",name:"s1Date"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"Make Super User"},l.a.createElement(Ce.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please select user type"}]},l.a.createElement(Ie.a,{className:"input-control w-100"},l.a.createElement(Option,{value:"1"},"Make Super User"),l.a.createElement(Option,{value:"0"},"Make User"))))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"F1"},l.a.createElement(Ce.a.Item,{name:"f1"},l.a.createElement(O.a,{className:"input-control",htmlFor:"f1"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"F2"},l.a.createElement(Ce.a.Item,{name:"f2"},l.a.createElement(O.a,{className:"input-control",htmlFor:"f3"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"F3"},l.a.createElement(Ce.a.Item,{name:"f3"},l.a.createElement(O.a,{className:"input-control",htmlFor:"f3"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"F4"},l.a.createElement(Ce.a.Item,{name:"f4"},l.a.createElement(O.a,{className:"input-control",htmlFor:"f4"})))),l.a.createElement(j.a,{span:24,md:8,className:"gutter-row"},l.a.createElement(xe,{label:"F5"},l.a.createElement(Ce.a.Item,{name:"f5"},l.a.createElement(O.a,{className:"input-control",htmlFor:"f5"})))))),l.a.createElement(Ce.a.Item,null,l.a.createElement(oe.a,{type:"primary",htmlType:"submit"},"Save")))))))))))},dl=a(115),pl=a.n(dl),hl=a(411),gl=a.n(hl),fl=a(845),El=function(e){var t=e.file,a=e.handleStepOneUpload,n=e.handleBeforeUpload,r=e.handleOnRemove;return l.a.createElement(l.a.Fragment,null,l.a.createElement(al.a,{listType:"picture",fileList:t,onChange:function(e){return a(e,"pollDocument")},beforeUpload:function(e){return n(e,"pollDocument")},onRemove:function(e){return r(e,"pollImageValidation")},className:"upload-list-inline c-upload",accept:"image/png, image/jpeg, image/gif, application/pdf, .doc, .csv, .pptx, application/vnd.ms-excel, .csv "},l.a.createElement(oe.a,{type:"link",className:"link pl-0"},l.a.createElement("span",{className:"icon icon-upload pr-2"})," Document Or Image")))},vl=a(106),bl=a.n(vl),yl=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={tags:[],inputVisible:!1,inputValue:"",editInputIndex:-1,editInputValue:""},a.handleClose=function(e){var t=a.state.tags.filter((function(t){return t!==e}));a.props.setSingleChoiceResponse(t),a.setState({tags:t})},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue,t=a.state.tags;e&&-1===t.indexOf(e)&&(t=[].concat(Object(_e.a)(t),[e])),console.log(t),a.setState({tags:t,inputVisible:!1,inputValue:""}),a.props.setSingleChoiceResponse(t)},a.handleEditInputChange=function(e){a.setState({editInputValue:e.target.value})},a.handleEditInputConfirm=function(){a.setState((function(e){var t=e.tags,a=e.editInputIndex,n=e.editInputValue,l=Object(_e.a)(t);return l[a]=n,{tags:l,editInputIndex:-1,editInputValue:""}})),console.log("th",a.state.tags)},a.saveInputRef=function(e){a.input=e},a.saveEditInputRef=function(e){a.editInput=e},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pollResponse;this.setState({tags:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tags,n=t.inputVisible,r=t.inputValue,s=t.editInputIndex,c=t.editInputValue;return l.a.createElement(l.a.Fragment,null,a.map((function(t,a){if(s===a)return l.a.createElement(O.a,{ref:e.saveEditInputRef,key:t,size:"small",className:"tag-input",value:c,onChange:e.handleEditInputChange,onBlur:e.handleEditInputConfirm,onPressEnter:e.handleEditInputConfirm});var n=t.length>20,r=l.a.createElement(Ea.a,{className:"edit-tag",key:t,closable:!0,onClose:function(){return e.handleClose(t)}},l.a.createElement("span",{onDoubleClick:function(n){console.log("in if"),e.setState({editInputIndex:a,editInputValue:t},(function(){e.editInput.focus()})),n.preventDefault()}},n?"".concat(t.slice(0,20),"..."):t));return n?l.a.createElement(wt.a,{title:t,key:t},r):r})),n&&l.a.createElement(O.a,{ref:this.saveInputRef,type:"text",size:"small",className:"tag-input",value:r,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),l.a.createElement(j.a,{span:12,className:"mb-4"},!n&&l.a.createElement(Ea.a,{onClick:this.showInput,className:"mt-3"},l.a.createElement(oe.a,{type:"link",className:"link pl-0",onClick:this.showModal},l.a.createElement("span",{className:"icon icon-add-filled"}),"Add Option"))))}}]),t}(n.Component),Ol=a(229),Nl=we.a.RangePicker;var _l="",Sl=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.onPublish()},a.handleCancel=function(){a.setState({visible:!1})},a.state={visible:!1},a.range=a.range.bind(Object(z.a)(a)),a.disabledDateTime=a.disabledDateTime.bind(Object(z.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"disabledDate",value:function(e){return e&&e<ge()().startOf("day")}},{key:"range",value:function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a}},{key:"disabledDateTime",value:function(e,t){var a=this;if("start"===t){if(_l=e,ge()(e).isSame(ge()(),"day")){var n=ge()();return{disabledHours:function(){return a.range(0,n.hour())},disabledMinutes:function(){return a.range(0,n.minutes())},disabledSeconds:function(){return a.range(0,n.seconds())}}}}else if("end"===t){if(ge()(e).isSame(ge()(),"day")){n=ge()();return{disabledHours:function(){return a.range(0,n.hour())},disabledMinutes:function(){return a.range(0,n.minutes())},disabledSeconds:function(){return a.range(0,n.seconds())}}}if(ge()(e).isSame(ge()(_l))){n=ge()(_l);return{disabledHours:function(){return a.range(0,n.hour())},disabledMinutes:function(){return a.range(0,n.minutes())},disabledSeconds:function(){return a.range(0,n.seconds())}}}}}},{key:"onChange",value:function(e){console.log(e),this.props.handlePollDatePickerChange(e,"pollStartDateTime")}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{type:"primary",className:"md mr-4",onClick:this.showModal},"Schedule"),l.a.createElement(Te.a,{title:"Publish Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Publish",cancelText:"Cancel"},l.a.createElement(Ce.a,{className:"input-md floating-label w-100"},l.a.createElement(j.a,{span:24,className:"gutter-row"},l.a.createElement("div",{className:"mb-4 subtext-md"},"Select Date and Time to publish the",l.a.createElement("span",{className:"pr-1 pr-1 font-weight-md6"}," "," ",this.props.pollData.pollName),"Poll"),l.a.createElement(xe,{label:"Select date and time",value:this.props.pollData.pollStartDateTime},l.a.createElement(Ce.a.Item,{name:"date",rules:[{required:!0,message:"Please select date"}]},l.a.createElement(Nl,Object(Ne.a)({value:this.props.pollData.pollStartDateTime,disabledDate:this.disabledDate,disabledTime:this.disabledDateTime,onChange:function(t){return e.onChange(t)},showTime:!0,format:"YYYY/MM/DD HH:mm:ss",className:"w-100",name:"date"},"className","required"))))))))}}]),t}(n.Component),jl=a(859),Cl=a(127),wl=a.n(Cl),kl=function(e){return wl()(e).format("HH:mm:ss")},Il={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){console.log("Example 3: new value is ".concat(e))}};O.a.TextArea;var xl=N.a.Content,Dl=a(42),Al=function(e){var t,a=e.poll,r=e.setPollsDate,s=e.backtoEdit,i=e.isImage,u=Object(n.useState)(!1),d=Object(c.a)(u,2),p=(d[0],d[1],Object(n.useState)(!1)),h=Object(c.a)(p,2),g=h[0],f=h[1],E=(Object(m.g)(),_.a.useNotification()),b=Object(c.a)(E,2),y=b[0],O=b[1];return Object(n.useEffect)((function(){console.log("polls",a)}),[]),l.a.createElement(l.a.Fragment,null,O,l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0}),l.a.createElement(xl,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(je.a.Item,null,"Manage Polls")),l.a.createElement(o.c,{to:"/createpoll"},l.a.createElement(je.a.Item,null,"Create Poll")),l.a.createElement(je.a.Item,null,"Preview Poll"))),l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},"Preview Poll"),l.a.createElement(j.a,{span:24,lg:18,className:"d-flex align-items-center justify-content-end"})),l.a.createElement(He.a,{spinning:g,size:"large"},l.a.createElement(j.a,{span:24,className:"mb-3 px-3 ".concat(pl.a.poll_info)},l.a.createElement("h6",null,a.pollName,l.a.createElement(wt.a,{placement:"top",title:a.pollHelpText},l.a.createElement("span",{className:"pl-2 icon icon-info-circle"})))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},a.pollQuestion),l.a.createElement(S.a,{className:"preview-que",disabled:!0},l.a.createElement("div",{className:"d-flex flex-column flex-gap chk-opt"},"1"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(Ol.a,null,e)})):"2"===a.pollQuestionType?a.pollResponse.map((function(e){return l.a.createElement(Ft.a,null,e)})):"3"===a.pollQuestionType?l.a.createElement(bl.a,Object.assign({},Il,{value:a.pollRatingResponse,disabled:!0})):null)),l.a.createElement(S.a,{className:"mt-2"},l.a.createElement("div",{class:"ant-upload-list-item"},l.a.createElement("div",{class:"ant-upload-list-item-info"},l.a.createElement("span",{class:"ant-upload-span"},l.a.createElement("div",{class:"ant-upload-text-icon"},l.a.createElement(jl.a,null)),l.a.createElement("span",{class:"ant-upload-list-item-name",title:"add-user-doc"},a.pollDocument&&a.pollDocument[0]?l.a.createElement("a",{href:a.pollDocument[0].base64,download:a.pollDocument[0].originFileObj.name},a.pollDocument[0].originFileObj.name):null),l.a.createElement("span",{class:"ant-upload-list-item-card-actions"},l.a.createElement("button",{type:"button",class:"ant-btn"}))))))))),l.a.createElement("div",{className:"mt-5 px-3"},l.a.createElement(oe.a,(t={type:"secondary"},Object(Ne.a)(t,"type","secondary"),Object(Ne.a)(t,"htmlType","submit"),Object(Ne.a)(t,"className","mr-4"),Object(Ne.a)(t,"onClick",(function(){s(a)})),t),"Back"),l.a.createElement(Sl,{pollData:a,handlePollDatePickerChange:function(e,t){r(e,t)},onPublish:function(){var e=JSON.parse(v("user")),t=pe();f(!0);var n=[],l={};a.pollResponse.map((function(e){n.push({option_text:e})})),l=i?{create_poll:{title:a.pollName,help_text:a.pollHelpText,image:a.pollDocument&&a.pollDocument[0]?a.pollDocument[0].base64:"",show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,poll_question_type:parseInt(a.pollQuestionType),question:a.pollQuestion,start_date:a.pollStartDateTime[0],start_time:kl(a.pollStartDateTime[0]),end_date:a.pollStartDateTime[1],end_time:kl(a.pollStartDateTime[1]),created_by:e.user_details.org_user_id},option:n}:{create_poll:{title:a.pollName,help_text:a.pollHelpText,document:a.pollDocument&&a.pollDocument[0]?a.pollDocument[0].base64:"",show_result_to_users:a.showResult?1:0,poll_result_chart_type:a.pollChartType?parseInt(a.pollChartType):2,poll_question_type:parseInt(a.pollQuestionType),question:a.pollQuestion,start_date:a.pollStartDateTime[0],start_time:kl(a.pollStartDateTime[0]),end_date:a.pollStartDateTime[1],end_time:kl(a.pollStartDateTime[1]),created_by:parseInt(Dl.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Dl.enc.Utf8))},option:n},console.log("data=========",l);var r={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"poll/",l,r).then((function(){f(!1),y.info({description:"Poll has been created successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"})).catch((function(e){f(!1)}))}}))))))))))},Tl={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){console.log("Example 3: new value is ".concat(e))}},Ul=O.a.TextArea,Fl=N.a.Content,Pl=function(){var e,t,a,r=Object(m.g)(),s=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:"",showResult:!1,pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingResponse:0,pollStartDateTime:"",pollEndDateTime:"",pollStartTime:"",pollEndTime:"",pollResponse:[],pollImageValidation:!0}),i=Object(c.a)(s,2),u=i[0],d=i[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),g=h[0],f=h[1],E=Object(n.useState)(!1),v=Object(c.a)(E,2),b=v[0],y=v[1],_=Object(n.useState)(!1),C=Object(c.a)(_,2),w=C[0],k=C[1],I=Object(n.useState)(!1),x=Object(c.a)(I,2),D=x[0],A=x[1],U=Object(n.useState)(!0),M=Object(c.a)(U,2),L=M[0],R=M[1],Y=Object(n.useState)(!1),z=Object(c.a)(Y,2),H=z[0],B=z[1],q=Ce.a.useForm(),V=Object(c.a)(q,1)[0],G=function(e){d(Object(T.a)({},u,Object(Ne.a)({},e.target.id,e.target.value)))},J=function(e,t){"3"===e&&"pollQuestionType"===t?function(e){showResult&&"3"===e&&"4"!=u.pollChartType&&A(!0)}(e):A(!1),d(Object(T.a)({},u,Object(Ne.a)({},t,e)))},Q=function(e){d(Object(T.a)({},u,Object(Ne.a)({},"pollResponse",e)))},W=function(e){B(!!("image/jpeg"===e||"image/png"===e||"image/gif"===e))};return l.a.createElement(l.a.Fragment,null,w?l.a.createElement(Al,{poll:u,setPollsDate:function(e,t){d(Object(T.a)({},u,Object(Ne.a)({},t,e)))},backtoEdit:function(e){k(!1),d(Object(T.a)({},u,{pollName:e.pollName,pollHelpText:e.pollHelpText,pollDocument:e.pollDocument,showResult:e.showResult,pollChartType:e.pollChartType,pollQuestion:e.pollQuestion,pollQuestionType:e.pollQuestionType,pollRatingResponse:e.pollRatingResponse,pollStartDateTime:e.pollStartDateTime,pollEndDateTime:e.pollEndDateTime,pollResponse:e.pollResponse})),V.setFieldsValue({pollHelpText:e.pollHelpText,pollQuestion:e.pollQuestion})},isImage:H}):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0}),l.a.createElement(Fl,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(je.a.Item,null,"Manage Polls")),l.a.createElement(je.a.Item,null,"Create Poll"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Poll")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other",form:V},b&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*) or upload vaild image or document",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(xe,{label:"Poll Title",value:u.pollName},l.a.createElement(Ul,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:u.pollName,id:"pollName",onChange:function(e){return G(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"checkpoll/",{title:e.target.value},t).then((function(e){e.data&&f(e.data[0])}))}(e)},autoComplete:"off",className:"required ".concat(pl.a.sm_textarea)}),"status: false"===g&&u.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.pollName.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==g&&l.a.createElement(ke.a,{message:"Sorry! This Poll title already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(j.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(xe,{label:"Help Text",value:u.pollHelpText},l.a.createElement(Ce.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(O.a,{className:"input-control",htmlFor:"helptext",id:"pollHelpText",name:"pollHelpText",value:u.pollHelpText,autoComplete:"off",maxLength:500,onChange:function(e){return G(e)}})))),l.a.createElement(j.a,{span:24,className:"gutter-row mt-3"},l.a.createElement("h6",null,"Upload"),l.a.createElement(Ce.a.Item,{name:"help text",className:"upload-list"},l.a.createElement(El,{file:u.pollDocument,handleStepOneUpload:function(e,t){"removed"===e.file.status&&R(!0);var a=e.fileList.slice(-1);W(e.file.type),console.log(e,"....",t),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),console.log("fileList",a),d(Object(T.a)({},u,Object(Ne.a)({},t,a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;s?R(!0):(R(!1),nl.b.error("".concat(e.name," is not a supported format file type.")));var c="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,i="application/pdf"===e.type||a||n||l||r,o=e.size/1024/1024<5,m=e.size/1024/1024<10;return c&&(!o&&c?(R(!1),nl.b.error("Image must smaller than 5MB!")):R(!0)),i&&(!m&&i?(R(!1),nl.b.error("Document must smaller than 10MB!")):R(!0)),s&&o||m},handleOnRemove:function(e,t){console.log("test",t,e),d(Object(T.a)({},u,{pollImageValidation:!0}))}}))))),l.a.createElement(j.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{className:"align-items-center d-flex"},l.a.createElement(j.a,{span:24,md:8,lg:8,xl:6},l.a.createElement(Ce.a.Item,{name:"showresult",label:"Show result to users ",className:"mb-0"},l.a.createElement(fl.a,{id:"showResult",checked:u.showResult,onChange:function(e,t){return function(e,t){d(Object(T.a)({},u,Object(Ne.a)({},t.target.id,e)))}(e,t)}}))),u.showResult?l.a.createElement(j.a,{span:24,lg:6},l.a.createElement(xe,{label:"Display final results as",value:u.pollChartType},l.a.createElement(Ce.a.Item,{className:"required mb-0",name:"result"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,(e={className:"input-control",htmlFor:"result"},Object(Ne.a)(e,"className","required"),Object(Ne.a)(e,"value",u.pollChartType),Object(Ne.a)(e,"onSelect",(function(e){return J(e,"pollChartType")})),e),l.a.createElement(Ie.a.Option,{value:"1"},"Pie Chart"),l.a.createElement(Ie.a.Option,{value:"3"},"Bar Chart"),l.a.createElement(Ie.a.Option,{value:"4"},"Star Format"))))),D&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please select the chat type as star",type:"error",showIcon:!0}))):l.a.createElement(j.a,null))))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"d-block"},l.a.createElement(j.a,{span:24,md:6,className:"gutter-row"},l.a.createElement(xe,{label:"Question Type",value:u.pollQuestionType},l.a.createElement(Ce.a.Item,{className:"required",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,(t={className:"",htmlFor:"questiontype"},Object(Ne.a)(t,"className","required"),Object(Ne.a)(t,"id","pollQuestionType"),Object(Ne.a)(t,"value",u.pollQuestionType),Object(Ne.a)(t,"onSelect",(function(e){return J(e,"pollQuestionType")})),t),l.a.createElement(Ie.a.Option,{value:"1"},"Single Choice"),l.a.createElement(Ie.a.Option,{value:"2"},"Multiple Choice"),l.a.createElement(Ie.a.Option,{value:"3"},"Star Rating")))))),l.a.createElement(j.a,{span:24,className:"mt-4"},"3"===u.pollQuestionType?l.a.createElement(bl.a,Object.assign({},Tl,{value:u.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return J(e,"pollRatingResponse")},classNames:"mt-3"})):"1"===u.pollQuestionType?l.a.createElement("div",null,l.a.createElement(yl,{setSingleChoiceResponse:Q,pollResponse:u.pollResponse})):"2"===u.pollQuestionType?l.a.createElement(yl,{pollResponse:u.pollResponse,setSingleChoiceResponse:Q}):null),l.a.createElement(j.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(xe,{label:"Question",value:u.pollQuestion},l.a.createElement(Ce.a.Item,{className:"required",name:"pollQuestion",id:"pollQuestion",validateStatus:"success"},l.a.createElement(O.a,{className:"input-control",htmlFor:"pollQuestion",id:"pollQuestion",name:"pollQuestion",defaultValue:u.pollQuestion,value:u.pollQuestion,autoComplete:"off",maxLength:500,onChange:function(e){return G(e)}})))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(oe.a,{type:"primary",className:"md mr-4",onClick:function(e){console.log(u.pollImageValidation),e.preventDefault(),L&&u.pollName&&u.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.pollHelpText&&u.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.pollQuestionType&&u.pollQuestionType.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.pollQuestion?u.showResult?u.pollChartType?(y(!1),k(!0)):(y(!0),k(!1)):(y(!1),k(!0)):(y(!0),k(!1))}},"Preview"),l.a.createElement(oe.a,(a={type:"secondary"},Object(Ne.a)(a,"type","secondary"),Object(Ne.a)(a,"htmlType","submit"),Object(Ne.a)(a,"onClick",(function(){r.push("/orgcc/pollsdirectory")})),a),"Cancel"))))))))))))},Ml=N.a.Content,Ll=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1];return l.a.createElement(l.a.Fragment,null,a?l.a.createElement(Pl,null):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0}),l.a.createElement(Ml,{"data-test":"Polls",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Manage Polls")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:gl.a,alt:"Create Hotline",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create polls and publish them for all employees from here"),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(be.a,{className:"mt-1"})),l.a.createElement(j.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(oe.a,{"data-test":"createHotline",onClick:function(){r(!0)},type:"primary"},"Create Poll")))))))))))},Rl=(a(372),we.a.RangePicker);var Yl="",zl=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),console.log("finall,=",a.state.startDate);var e={poll_id:a.props.pollsData.poll_id,pollName:a.props.pollsData.title};a.props.extendPollDate(e,a.state.startDate)},a.handleCancel=function(){a.setState({visible:!1})},a.state={visible:!1,startDate:[]},a.range=a.range.bind(Object(z.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props);var e=ge()(this.props.pollsData.start_date+" "+this.props.pollsData.start_time),t=ge()(e).utcOffset("+05:30").format("YYYY/MM/DD HH:mm:ss"),a=ge()(this.props.pollsData.end_date+" "+this.props.pollsData.end_time).utcOffset("+05:30").format("YYYY/MM/DD HH:mm:ss"),n=[ge()(t),ge()(a)];console.log("in comopf",n),this.setState({startDate:n})}},{key:"onChange",value:function(e){console.log("on change ",e),this.setState({startDate:e})}},{key:"disabledDate",value:function(e){return e&&e<ge()().startOf("day")}},{key:"range",value:function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a}},{key:"disabledDateTime",value:function(e,t){var a=this;if("start"===t){if(Yl=e,ge()(e).isSame(ge()(),"day")){var n=ge()();return{disabledHours:function(){return a.range(0,n.hour())},disabledMinutes:function(){return a.range(0,n.minutes())},disabledSeconds:function(){return a.range(0,n.seconds())}}}}else if("end"===t){if(ge()(e).isSame(ge()(),"day")){n=ge()();return{disabledHours:function(){return a.range(0,n.hour())},disabledMinutes:function(){return a.range(0,n.minutes())},disabledSeconds:function(){return a.range(0,n.seconds())}}}if(ge()(e).isSame(ge()(Yl))){n=ge()(Yl);return{disabledHours:function(){return a.range(0,n.hour())},disabledMinutes:function(){return a.range(0,n.minutes())},disabledSeconds:function(){return a.range(0,n.seconds())}}}}}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Extend End Date"),l.a.createElement(Te.a,{title:"Extend End Date",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:520,okButtonProps:{children:"Custom OK"},cancelButtonProps:{className:"ant-btn-secondary",children:"Custom cancel"},okText:"Extend Date",cancelText:"Cancel"},l.a.createElement(Ce.a,{className:"input-md floating-label w-100"},l.a.createElement(j.a,{span:24,className:"gutter-row"},l.a.createElement("div",{className:"mb-4 subtext-md font-weight-md6"},"Select Date and Time to ",l.a.createElement("span",{className:"pr-1"}," extend the"),this.props.pollsData.title," ","Poll"),l.a.createElement(xe,{label:"Select date and time",value:this.props.pollsData.start_date},l.a.createElement(Ce.a.Item,{name:"date",rules:[{required:!0,message:"Please select date"}]},l.a.createElement(Rl,Object(Ne.a)({value:this.state.startDate,disabledDate:this.disabledDate,disabledTime:this.disabledDateTime,onChange:function(t){return e.onChange(t)},showTime:!0,format:"YYYY/MM/DD HH:mm:ss",className:"w-100",name:"date"},"className","required")),console.log(this.state.startDate)))))))}}]),t}(n.Component),Hl=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{placement:"bottom",content:(e=this.props.data,t=this.props.extendPollDate,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(o.b,{to:{pathname:"/orgcc/editpoll",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editpoll"},"Edit")," ")),e.show_result_to_users?l.a.createElement(o.b,{to:{pathname:"/orgcc/pollresponse",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/pollresponse"},"Show Intrim Result")," ")," "):null,l.a.createElement("li",null,l.a.createElement(zl,{extendPollDate:t,pollsData:e}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:Pe.a,alt:"DotIcon",className:"pr-4"}))));var e,t}}]),t}(l.a.Component),Bl=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.state.visible&&this.hide()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{placement:"bottom",content:(this.props,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null," ",l.a.createElement("a",{href:"/orgcc/createpoll"},"Create New")," "),l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/existingpolls"},"Choose from existing")," ")))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement(oe.a,{type:"primary"},"Create Poll")))}}]),t}(l.a.Component),ql=O.a.Search,Vl=(l.a.createElement(ce.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),Gl=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).extendPollDate=function(e,t){JSON.parse(v("user"));var a={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},n={start_date:t[0],end_date:t[1]};F.a.put(P+"extendEndDate/"+e.poll_id+"/",n,a).then((function(){_.a.config({placement:"bottomLeft"}),_.a.open({description:"".concat(e.pollName," date has been extended successfully.")}),window.location="/orgcc/pollsdirectory"}))},a.onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})};var n=[{title:"",dataIndex:"",key:"name",width:"5%",render:function(e){return{children:e.image||e.document?l.a.createElement(jl.a,null):null,props:{"data-title":""}}}},{title:"Poll Name",dataIndex:"title",key:"name",width:"22%",render:function(e,t){return{children:l.a.createElement(o.b,{to:{pathname:"/orgcc/editpoll",state:t}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editpoll"},e)," ")),props:{"data-title":"Poll Name"}}}},{title:"Start Date & Time",dataIndex:"start_date",key:"start_date",width:"22%",render:function(e,t){return{children:ge()(e+" "+t.start_time).format("MM/DD/YYYY HH:mm"),props:{"data-title":"Start Date & Time"}}}},{title:"End Date & Time",dataIndex:"end_date",key:"end_date",width:"21%",render:function(e,t){return{children:ge()(e+" "+t.end_time,"MM/DD/YYYY HH:mm:ss").format("MM/DD/YYYY HH:mm"),props:{"data-title":"End Date & Time"}}}},{title:"Status",dataIndex:"",key:"x",width:"10%",render:function(e){return{children:1===e.status_id?l.a.createElement("div",{className:"secondary-tag-rounded tag"},"In active"):2===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},"Active"):3===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},"Scheduled"):l.a.createElement("div",{className:"primary-tag-rounded tag"},"completed"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(Hl,{extendPollDate:a.extendPollDate,data:e}),props:{"data-title":"Action"}}}}];return a.state={columns:n,data:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.polls;null===t||void 0===t||t.forEach((function(e){e.start_date=ge()(e.start_date,"DD-MM-YYYY").utc().local().format("MM/DD/YYYY"),e.end_date=ge()(e.end_date,"DD-MM-YYYY").utc().local().format("MM/DD/YYYY")})),console.log(t),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this.props.polls;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:this.props.data}),l.a.createElement(Vl,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Manage Polls")),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(ql,{placeholder:"Search",onSearch:this.onSearch})))),l.a.createElement(j.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(Bl,{polls:e})))),l.a.createElement(ie,{rowKey:"poll_id",columns:this.state.columns,data:this.state.filterData}))))))}}]),t}(l.a.Component),Jl=function(){return function(e){return Ze.getPolls().then((function(t){return e({type:"POLL_SUCCESS",payload:{pollsdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"POLL_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}};var Ql=Object(i.b)((function(e){return{pollsdata:e.poll.pollsdata}}))((function(e){return Object(n.useEffect)((function(){(0,e.dispatch)(Jl())}),[]),e.pollsdata.length>0?l.a.createElement(Gl,{polls:e.pollsdata,data:e}):l.a.createElement(Ll,{data:e})})),Wl={size:30,count:5,isHalf:!1,value:3,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){console.log("Example 3: new value is ".concat(e))}};O.a.TextArea;var Kl=N.a.Content,$l=function(){var e=Object(m.h)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0}),l.a.createElement(Kl,null,l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(je.a.Item,null,"Polls")),l.a.createElement(je.a.Item,null,"Poll Results"))),l.a.createElement(S.a,{className:"py-3 justify-content-between"},l.a.createElement("h1",{className:"mb-0"},e.state.title),l.a.createElement(j.a,{span:24,md:24,lg:12,xl:15,className:"d-flex align-items-center justify-content-start justify-content-lg-end px-3 px-lg-0 my-4 my-lg-0"},l.a.createElement("span",{className:"pr-3"},"Total audience : 2300"),l.a.createElement(oe.a,{type:"primary",className:"md"},"Download")),l.a.createElement(j.a,{span:24,className:"d-flex align-items-center justify-content-end"})),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("p",{className:"font-weight-md6"},e.state.question),l.a.createElement("span",{className:"font-weight-md6 pt-3 d-flex"},"1846 Responses"),l.a.createElement(S.a,{className:"preview-que mt-3"},l.a.createElement(j.a,{span:24,className:"d-flex align-items-center font-weight-md6"},l.a.createElement("span",null,l.a.createElement(bl.a,Wl)),l.a.createElement("span",{className:"pl-5"},"30%")),l.a.createElement(j.a,{span:24,className:"d-flex align-items-center font-weight-md6"},l.a.createElement("span",null,l.a.createElement(bl.a,Wl)),l.a.createElement("span",{className:"pl-5"},"20%"))))))))))))},Zl={size:40,count:5,isHalf:!1,value:0,color:"#B4B4B4",activeColor:"#EA5042",onChange:function(e){console.log("Example 3: new value is ".concat(e))}},Xl=O.a.TextArea,er=N.a.Content,tr=a(42),ar=function(){var e,t,a,r,s=Object(m.g)(),i=Object(n.useState)({pollName:"",pollHelpText:"",pollDocument:"",showResult:!1,pollChartType:"",pollQuestion:"",pollQuestionType:"",pollRatingResponse:0,pollStartDateTime:"",pollEndDateTime:"",pollStartTime:"",pollEndTime:"",pollResponse:[],pollId:"",status_id:""}),o=Object(c.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),g=h[0],f=h[1],E=Object(n.useState)(!1),b=Object(c.a)(E,2),y=b[0],C=b[1],w=Object(n.useState)(!1),k=Object(c.a)(w,2),I=k[0],x=k[1],D=Object(n.useState)(!0),A=Object(c.a)(D,2),U=A[0],M=A[1],L=Object(n.useState)(!1),R=Object(c.a)(L,2),Y=R[0],z=R[1],H=Ce.a.useForm(),B=Object(c.a)(H,1)[0],q=Object(m.h)(),V=_.a.useNotification(),G=Object(c.a)(V,2),J=G[0],Q=G[1];Object(n.useEffect)((function(){console.log(q.state);var e=ge()(q.state.start_date+" "+q.state.start_time),t=ge()(e).utcOffset("+05:30").format("YYYY/MM/DD HH:mm:ss"),a=ge()(q.state.end_date+" "+q.state.end_time).utcOffset("+05:30").format("YYYY/MM/DD HH:mm:ss"),n=[ge()(t),ge()(a)];console.log("in comopf",n),d(Object(T.a)({},u,{pollId:q.state.poll_id,pollName:q.state.title,pollHelpText:q.state.help_text,pollDocument:"",showResult:q.state.show_result_to_users,pollChartType:q.state.poll_result_chart_type.toString(),pollQuestion:q.state.question,pollQuestionType:q.state.poll_question_type.toString(),pollRatingResponse:"",pollStartDateTime:n,pollEndDateTime:q.state.end_date,pollStartTime:q.state.start_time,pollEndTime:q.state.end_time,status_id:q.state.status_id,pollResponse:q.state.option_text})),console.log(q.state.question),B.setFieldsValue({pollHelpText:q.state.help_text,pollQuestion:q.state.question})}),[]);var W=function(){var e=JSON.parse(v("user")),t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};console.log("pollEndDateTime",u.pollEndDateTime);var a=[];u.pollResponse.map((function(e){a.push({option_text:e})}));var n={};n=Y?{update_poll:{title:u.pollName,help_text:u.pollHelpText,image:u.pollDocument&&u.pollDocument[0]?u.pollDocument[0].base64:"",show_result_to_users:u.showResult?1:0,poll_result_chart_type:u.pollChartType?parseInt(u.pollChartType):2,poll_question_type:parseInt(u.pollQuestionType),question:u.pollQuestion,start_date:u.pollStartDateTime[0],start_time:u.pollStartTime,end_date:u.pollStartDateTime[1],end_time:u.pollEndTime,status_id:u.status_id,created_by:parseInt(tr.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(tr.enc.Utf8))},option:a}:{update_poll:{title:u.pollName,help_text:u.pollHelpText,document:u.pollDocument&&u.pollDocument[0]?u.pollDocument[0].base64:"",show_result_to_users:u.showResult?1:0,poll_result_chart_type:u.pollChartType?parseInt(u.pollChartType):2,poll_question_type:parseInt(u.pollQuestionType),question:u.pollQuestion,start_date:u.pollStartDateTime[0],start_time:u.pollStartTime,end_date:u.pollStartDateTime[1],end_time:u.pollEndTime,status_id:u.status_id,created_by:parseInt(tr.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(tr.enc.Utf8))},option:a},F.a.put(P+"poll/"+u.pollId+"/",n,t).then((function(){J.info({description:"Poll details have been changed successfully.",placement:"bottomLeft"}),window.location="/orgcc/pollsdirectory"}))},K=function(e){d(Object(T.a)({},u,Object(Ne.a)({},e.target.id,e.target.value)))},Z=function(e,t){"3"===e&&"pollQuestionType"===t?function(e){showResult&&"3"===e&&"4"!=u.pollChartType&&x(!0)}(e):x(!1),d(Object(T.a)({},u,Object(Ne.a)({},t,e)))},X=function(e){d(Object(T.a)({},u,Object(Ne.a)({},"pollResponse",e)))},ee=function(e){z(!!("image/jpeg"===e||"image/png"===e||"image/gif"===e))};return l.a.createElement(l.a.Fragment,null,Q,l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0}),l.a.createElement(er,null,l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Edit Poll")),l.a.createElement("div",{className:"mid-content"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other",initialValues:{remember:!0},form:B},y&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(xe,{label:"Poll Title",value:u.pollName},l.a.createElement(Xl,{showCount:!0,maxLength:50,htmlFor:"polltitle",value:u.pollName,id:"pollName",onChange:function(e){return K(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==q.state.title&&F.a.post(P+"checkpoll/",{title:e.target.value},t).then((function(e){e.data&&f(e.data[0])}))}(e)},autoComplete:"off",className:"required ".concat(pl.a.sm_textarea)}),"status: false"===g&&u.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.pollName.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==g&&l.a.createElement(ke.a,{message:"Sorry! This Poll title already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(j.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(xe,{label:"Help Text",value:u.pollHelpText},l.a.createElement(Ce.a.Item,{className:"required",name:"pollHelpText",id:"pollHelpText",validateStatus:"success"},l.a.createElement(O.a,{className:"input-control",htmlFor:"helptext",id:"pollHelpText",name:"pollHelpText",value:u.pollHelpText,autoComplete:"off",maxLength:500,onChange:function(e){return K(e)}})))),l.a.createElement(j.a,{span:24,className:"gutter-row mt-3"},l.a.createElement("h6",null,"Upload"),l.a.createElement(Ce.a.Item,{name:"help text",className:"upload-list"},l.a.createElement(El,{file:u.pollDocument,handleStepOneUpload:function(e,t){var a=e.fileList.slice(-1);ee(e.file.type),console.log(e,"....",t),a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),d(Object(T.a)({},u,Object(Ne.a)({},t,a)))},handleBeforeUpload:function(e,t){var a=e.name.includes(".xls"),n=e.name.includes(".pptx"),l=e.name.includes(".doc"),r=e.name.includes(".csv"),s="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type||"application/pdf"===e.type||a||n||l||r;s?M(!1):(M(!0),nl.b.error("".concat(e.name," is not a supported format file type.")));var c="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,i="application/pdf"===e.type||a||n||l||r,o=e.size/1024/1024<5,m=e.size/1024/1024<10;return c&&(!o&&c?(M(!1),nl.b.error("Image must smaller than 5MB!")):M(!0)),i&&(!m&&i?(M(!1),nl.b.error("Document must smaller than 10MB!")):M(!0)),s&&o||m},handleOnRemove:function(e,t){console.log("test",t,e),d(Object(T.a)({},u,{pollImageValidation:!0}))}}))))),l.a.createElement(j.a,{span:24,className:"gutter-row"},l.a.createElement(S.a,{className:"align-items-center d-flex"},l.a.createElement(j.a,{span:24,md:8,lg:8,xl:6},l.a.createElement(Ce.a.Item,{name:"showresult",label:"Show result to users ",className:"mb-0"},l.a.createElement(fl.a,{id:"showResult",checked:u.showResult,onChange:function(e,t){return function(e,t){d(Object(T.a)({},u,Object(Ne.a)({},t.target.id,e)))}(e,t)}}))),u.showResult?l.a.createElement(j.a,{span:24,lg:6},l.a.createElement(xe,{label:"Display final results as",value:u.pollChartType},l.a.createElement(Ce.a.Item,{className:"required mb-0",name:"result"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,(e={className:"input-control",htmlFor:"result"},Object(Ne.a)(e,"className","required"),Object(Ne.a)(e,"value","2"===u.pollChartType?"":u.pollChartType),Object(Ne.a)(e,"onSelect",(function(e){return Z(e,"pollChartType")})),e),l.a.createElement(Ie.a.Option,{value:"1"},"Pie Chart"),l.a.createElement(Ie.a.Option,{value:"3"},"Bar Chart"),l.a.createElement(Ie.a.Option,{value:"4"},"Star Format"))))),I&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please select the chat type as star",type:"error",showIcon:!0}))):l.a.createElement(j.a,null))))))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement(Ce.a,{className:"input-md floating-label w-100",name:"validate_other"},l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"d-block"},l.a.createElement(j.a,{span:24,md:6,className:"gutter-row"},l.a.createElement(xe,{label:"Question Type",value:u.pollQuestionType},l.a.createElement(Ce.a.Item,{className:"required",name:"questiontype"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,(t={className:"",htmlFor:"questiontype"},Object(Ne.a)(t,"className","required"),Object(Ne.a)(t,"id","pollQuestionType"),Object(Ne.a)(t,"value",u.pollQuestionType),Object(Ne.a)(t,"onSelect",(function(e){return Z(e,"pollQuestionType")})),t),l.a.createElement(Ie.a.Option,{value:"1"},"Single Choice"),l.a.createElement(Ie.a.Option,{value:"2"},"Multiple Choice"),l.a.createElement(Ie.a.Option,{value:"3"},"Star Rating")))))),l.a.createElement(j.a,{span:24,className:"mt-4"},"3"===u.pollQuestionType?l.a.createElement(bl.a,Object.assign({},Zl,{value:u.pollRatingResponse,name:"pollRatingResponse",onChange:function(e){return Z(e,"pollRatingResponse")},classNames:"mt-3"})):"1"===u.pollQuestionType?l.a.createElement("div",null,l.a.createElement(yl,{setSingleChoiceResponse:X,pollResponse:u.pollResponse})):"2"===u.pollQuestionType?l.a.createElement(yl,{pollResponse:u.pollResponse,setSingleChoiceResponse:X}):null),l.a.createElement(j.a,{span:24,md:18,className:"gutter-row"},l.a.createElement(xe,{label:"Question",value:u.pollQuestion},l.a.createElement(Ce.a.Item,{className:"required edit-input",name:"pollQuestion",id:"pollQuestion"},l.a.createElement(O.a,(a={className:"input-control edit-input",name:"pollQuestion",id:"pollQuestion",htmlFor:"pollQuestion"},Object(Ne.a)(a,"className","required"),Object(Ne.a)(a,"defaultValue",u.pollQuestion),Object(Ne.a)(a,"value",u.pollQuestion),Object(Ne.a)(a,"onChange",(function(e){return K(e)})),Object(Ne.a)(a,"autoComplete","off"),Object(Ne.a)(a,"maxLength",500),a))))))),l.a.createElement("div",{className:"mt-5"},l.a.createElement(oe.a,{type:"primary",className:"md mr-4",onClick:function(e){e.preventDefault(),U&&u.pollName&&u.pollName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.pollHelpText&&u.pollHelpText.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.pollQuestionType&&u.pollQuestion&&u.pollQuestion.replace(/^\s*/,"").replace(/\s*$/,"").length>0?u.showResult?u.pollChartType?(C(!1),W()):C(!0):(C(!1),W()):C(!0)}},"Update"),l.a.createElement(oe.a,(r={type:"secondary"},Object(Ne.a)(r,"type","secondary"),Object(Ne.a)(r,"htmlType","submit"),Object(Ne.a)(r,"onClick",(function(){s.push("/orgcc/pollsdirectory")})),r),"Cancel")))))))))))))},nr=O.a.Search,lr=N.a.Content,rr=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})};return a.state={columns:[{title:"Poll Name",dataIndex:"title",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Poll Name"}}}}],data:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Jl())}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.pollsdata;console.log(this.props.pollsdata),console.log(e.pollsdata),e.pollsdata!==a&&this.setState({data:a},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:this.props}),l.a.createElement(lr,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/orgcc/pollsdirectory"},l.a.createElement(je.a.Item,null,"Manage Polls")),l.a.createElement(o.c,{to:"/createpoll"},l.a.createElement(je.a.Item,null,"Create Poll")),l.a.createElement(je.a.Item,null,"OOTB Polls"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Out Of The Box (OOTB) Polls")),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(nr,{placeholder:"Search",onSearch:this.onSearch})))))),l.a.createElement("div",{className:"mid-content"},l.a.createElement(ie,{rowKey:"hotline_id",columns:this.state.columns,data:this.state.filterData})))))))}}]),t}(l.a.Component);var sr=Object(i.b)((function(e){return{pollsdata:e.poll.pollsdata}}))(rr),cr=a(860),ir=Ie.a.Option,or=function(e){var t=e.next,a=e.imageError,r=e.stepOneOpenLineInfo,s=e.handleStepOneOnChange,i=e.handleStepOneOnSelect,o=e.handleStepOneUpload,m=(e.handleStepOnePreview,e.handleBeforeUpload),u=e.handleStepOneDatePickerChange,d=(e.addIcon,e.getIconText),p=Object(n.useState)({iconText:""}),h=Object(c.a)(p,2),g=(h[0],h[1],Object(n.useState)(!1)),f=Object(c.a)(g,2),E=f[0],v=f[1],b=Object(n.useState)(!0),y=Object(c.a)(b,2),O=(y[0],y[1]),N=Ce.a.useForm(),_=Object(c.a)(N,1)[0],S=Object(n.useState)(""),j=Object(c.a)(S,2),C=j[0],w=j[1],k=we.a.RangePicker;return l.a.createElement(Ce.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:_},E&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(xe,{label:"Openeline Name",value:r.openelineName},l.a.createElement(Ce.a.Item,{className:"required",name:"openelineName",rules:[{required:!0,message:"Please enter directory name"}],autoComplete:"off"},l.a.createElement(At.a,{showCount:!0,maxLength:80,value:r.openelineName,onChange:function(e){return s(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"checkOpenline/",{openline_name:r.openelineName},t).then((function(e){e.data&&w(e.data[0])}))}()},id:"openelineName",className:"input-control",htmlFor:"openelineName",autoComplete:"off"}),"status: false"==C&&r.openelineName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.openelineName.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==C&&l.a.createElement(ke.a,{message:"Sorry! This openline already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(xe,{label:"Description",value:r.description},l.a.createElement(Ce.a.Item,{className:"required",name:"description",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(At.a,{className:"input-control",value:r.description,onChange:function(e){return s(e)},id:"description",htmlFor:"description",autoComplete:"off"})))),l.a.createElement(xe,{label:"Date",value:"sDate"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(k,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"sDate",value:r.sDate,onChange:function(e){return u(e,"sDate")},disabledDate:function(e){return e&&e<ge()().startOf("day")},rules:[{required:!0,message:"Please select start date"}]}))),l.a.createElement(xe,{label:"Status",value:r.status},l.a.createElement(Ce.a.Item,{className:"required",name:"status",rules:[{required:!0,message:"Please select status"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control w-100 w-lg-50",value:r.status,htmlFor:"status",onSelect:function(e){return i(e,"status")}},l.a.createElement(ir,{value:"5"},"Active"),l.a.createElement(ir,{value:"4"},"Inactive"))))),l.a.createElement(Ce.a.Item,{className:""},l.a.createElement(Ce.a.Item,{className:"upload-control required",name:"upload",valuePropName:"fileList"},l.a.createElement(al.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",fileList:r.file,beforeUpload:function(e){return m(e)},onChange:function(e){return o(e,"file")}},0===r.file.length&&l.a.createElement(oe.a,{icon:l.a.createElement(cr.a,null)},"Upload Image")),d(r.hotlineIconId)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},xt()(r.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:d(r.hotlineIconId)},d(r.hotlineIconId)))))))),a&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please upload an image.",type:"error",showIcon:!0})),l.a.createElement(Ce.a.Item,null,l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){e.preventDefault(),r.openelineName&&r.openelineName.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.description&&r.description.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&r.file&&r.file.length>0&&r.status&&r.sDate?a||"status: false"!=C||(v(!1),O(!1),t()):v(!0)},"data-test":"stepOneNext"},"Next")))},mr=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.employeeData,n=a.filterIt(t,e);a.setState({filterData:n})},a.start=function(){a.setState({showAssigntoModal:!0})},a.stepTwoPrev=function(){a.props.prev()},a.stepTwoNext=function(){0!==a.props.stepTwoOpenLine.chekedValues.length?a.props.next():a.setState({showAlert:!0})},a.state={employeeData:"",showAssigntoModal:"false",showAlert:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(et())}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.manageEmpData;e.manageEmpData!=a&&this.setState({employeeData:a},(function(){t.onSearch("")}))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.props.stepTwoOpenLine.selectedRowKeys,onChange:this.props.handleStepTwoOnSelect},a=[{title:"First Name",dataIndex:"firstname",key:"firstname",width:"22%"},{title:"Last Name",dataIndex:"lastname",key:"lastname",width:"22%"},{title:"Mobile Number",dataIndex:"Mobile_Number",key:"Mobile_Number",width:"21%"},{title:"Access",dataIndex:"Access",render:function(e){var t="";for(var a in e)1==e[a]&&("am_web"==a&&(a="AM WEB"),"org_cc_user"==a&&(a="Org CC"),"app_user"==a&&(a="APP"),0==t.length?t+=a:t+=", "+a);return l.a.createElement("span",null,t)},width:"20%"},{title:"Status",dataIndex:"",key:"x",width:"10%",render:function(){return l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active")}}];return l.a.createElement("div",null,l.a.createElement(j.a,{"data-test":"createHotlineStepTwo",span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(Lt.a,{placeholder:"Search User",onSearch:this.onSearch})))))),this.state.showAlert&&l.a.createElement(ke.a,{message:"Please select user(s) and assign required permission(s) using Assign button.",type:"error",showIcon:!0}),l.a.createElement("div",{id:"no-more-tables"},l.a.createElement(se.a,{rowSelection:t,columns:a,dataSource:this.state.filterData,rowKey:"unique_identifier"})),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{className:"mr-4",type:"secondary",style:{margin:"0 8px"},onClick:function(){return e.stepTwoPrev()},"data-test":"steptwoPrev"},"Back"),l.a.createElement(oe.a,{className:"md",type:"primary",onClick:function(){return e.stepTwoNext()},"data-test":"steptwoNext"},"Next")))}}]),t}(l.a.Component);var ur=Object(i.b)((function(e){return{manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(mr),dr=O.a.TextArea,pr=function(e){var t,a=e.prev,n=e.createNewHotLine,r=e.stepOneOpenLine,s=e.stepTwoOpenLine,i=(e.getIconText,Ce.a.useForm()),o=Object(c.a)(i,1)[0],m=s.selectedRows.map((function(e){return e.firstname+" "+e.lastname})),u=we.a.RangePicker;return l.a.createElement(Ce.a,{"data-test":"createHotlineStepThree",className:"input-md w-md-100 w-75",name:"validate_other",form:o},l.a.createElement(Ce.a.Item,{name:"openelineName"},l.a.createElement(l.a.Fragment,null,l.a.createElement(dr,{showCount:!0,disabled:!0,maxLength:80,value:r.openelineName,id:"openelineName",className:"input-control textarea-input",placeholder:"Openline Name",htmlFor:"openelineName"}))),l.a.createElement(Ce.a.Item,{name:"description"},l.a.createElement(l.a.Fragment,null,l.a.createElement(dr,{disabled:!0,className:"input-control textarea-md",value:r.description,id:"description",placeholder:"Description",htmlFor:"description"}))),l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(l.a.Fragment,null,l.a.createElement(u,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5",name:"sdate",value:r.sDate,rules:[{readOnly:!0,required:!0,message:"Please select start date"}],disabled:!0}))),l.a.createElement("div",{className:"d-block d-lg-flex"},l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(Ce.a.Item,{name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{className:"input-control",placeholder:"Status",value:r.status,htmlFor:"status",disabled:!0},l.a.createElement(Ie.a.Option,{value:"5"},"Active"),l.a.createElement(Ie.a.Option,{value:"4"},"Inactive")," ")))),l.a.createElement("div",{className:"w-100 w-lg-50 mr-0 mr-lg-5"},l.a.createElement(Ce.a.Item,{name:"userNames"},l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{className:"input-control",placeholder:"Assigned to",htmlFor:"assigned to",id:m,disabled:!0,value:m.join(", ")}))))),l.a.createElement(Ce.a.Item,{className:"w-100 w-lg-50"},l.a.createElement(Ce.a.Item,{className:"upload-control"},l.a.createElement(al.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",disabled:!0,fileList:r.file}))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,(t={type:"secondary",className:"mr-4"},Object(Ne.a)(t,"type","secondary"),Object(Ne.a)(t,"style",{margin:"0 8px"}),Object(Ne.a)(t,"htmlType","submit"),Object(Ne.a)(t,"onClick",(function(e){e.preventDefault(),a()})),Object(Ne.a)(t,"data-test","stepThreePrev"),t),"Back"),l.a.createElement(oe.a,{type:"primary",className:"md",htmlType:"submit",onClick:function(e){n()},"data-test":"stepThreeNext"},"Create")))},hr=N.a.Content,gr=Se.a.Step,fr=[{title:"Add Details",content:"First-content"},{title:"Assign Employee",content:"Second-content"},{title:"Review Details",content:"Last-content"}],Er=a(42),vr=function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)({openelineName:"",description:"",status:"",sDate:"",tDate:"",hotlineIconId:"",file:""}),h=Object(c.a)(p,2),g=h[0],f=h[1],E=Object(n.useState)({selectedRows:"",selectedRowKeys:[],chekedValues:[]}),b=Object(c.a)(E,2),y=b[0],O=b[1],_=function(){s(r+1)},C=function(){s(r-1)},w=function(e){switch(e){case"1":return"Sexual Harassment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"hotlineCreation"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:e}),l.a.createElement(hr,{className:""},l.a.createElement(S.a,{className:"pt-3"},l.a.createElement(je.a,{separator:">"},l.a.createElement(o.c,{to:"/orgcc/openlinedirectory"},l.a.createElement(je.a.Item,null,"Openline Directory")),l.a.createElement(je.a.Item,null,"Create Openline Directory"))),l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Create Openline Directory Entries")),l.a.createElement(Se.a,{className:"mt-2",current:r},fr.map((function(e){return l.a.createElement(gr,{key:e.title,title:e.title})}))),l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"steps-content"},0==r?l.a.createElement(or,{next:_,imageError:u,stepOneOpenLineInfo:g,handleStepOneOnChange:function(e){f(Object(T.a)({},g,Object(Ne.a)({},e.target.id,e.target.value)))},handleStepOneOnSelect:function(e,t){f(Object(T.a)({},g,Object(Ne.a)({},t,e)))},handleStepOneUpload:function(e,t){var a=e.fileList.slice(-1);a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),f(Object(T.a)({},g,Object(Ne.a)({},t,a)))},handleBeforeUpload:function(e){return e.type.includes("image")?(d(!1),e.type):(d(!0),nl.b.error("The file that you attemped to upload ".concat(e.name," is not supported")),!1)},handleStepOnePreview:function(e){},handleStepOneDatePickerChange:function(e,t){f(Object(T.a)({},g,Object(Ne.a)({},t,e)))},addIcon:function(e,t){f(Object(T.a)({},g,{hotlineIconId:t,iconHtml:e}))},getIconText:w,"data-test":"CreateHotlineStepOne"}):1==r?l.a.createElement(ur,{next:_,prev:C,stepOneHotLine:g,stepTwoOpenLine:y,handleStepTwoOnSelect:function(e,t){var a,n=[],l=JSON.parse(v("user")),r=t.filter((function(e){var t,a=e.user_id;return!(null===(t=n)||void 0===t?void 0:t.some((function(e){return e.user_id===a})))})).reduce((function(e,t){return e.push({user_id:t.user_id,can_respond:1,can_view_reports:0,created_by:parseInt(Er.AES.decrypt(l.user_details.org_user_id,"anonymoose").toString(Er.enc.Utf8))}),e}),[]);n=null===(a=n)||void 0===a?void 0:a.concat(r),O(Object(T.a)({},y,{selectedRowKeys:e,selectedRows:t,chekedValues:n}))}}):2==r?l.a.createElement(pr,{prev:C,createNewHotLine:function(){var e,t,a,n;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:e=JSON.parse(v("user")),t=pe(),a={create_openline:{name:g.openelineName,help_text:g.description,openline_image:g.file[0].base64,start_date:g.sDate[0]?ge()(g.sDate[0]).format("DD-MM-YYYY"):"",end_date:g.sDate[1]?ge()(g.sDate[1]).format("DD-MM-YYYY"):"",created_by:parseInt(Er.AES.decrypt(e.user_details.org_user_id,"anonymoose").toString(Er.enc.Utf8))},permissions:y.chekedValues},n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}},F.a.post(P+"openline/",a,n).then((function(){window.location="/orgcc/openlinedirectory"}));case 5:case"end":return l.stop()}}))},stepOneOpenLine:g,stepTwoOpenLine:y,getIconText:w}):"")))))))))},br=N.a.Content,yr=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1];return l.a.createElement(l.a.Fragment,null,!0===!r?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:e.data}),l.a.createElement(br,{"data-test":"Directory",className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",{className:"mb-0"},"Openline Directory")),l.a.createElement("div",{className:"mid-content d-flex justify-content-center align-items-center"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24},l.a.createElement("div",{className:"c-vector-area"},l.a.createElement("img",{src:Wt.a,alt:"Create Hotline",className:"pr-4"})),l.a.createElement("p",{className:"text-center pt-3"},"Create Hotline entries and assign them to managers,",l.a.createElement("br",null),"head of departments or leadership."),l.a.createElement(S.a,{className:"d-flex justify-content-center"},l.a.createElement(be.a,{className:"mt-1"})),l.a.createElement(j.a,{span:24,className:"d-flex align-items-center justify-content-center"},l.a.createElement(oe.a,{"data-test":"createHotline",onClick:function(){s(!0)},type:"primary"},"Create")))))))))):l.a.createElement(vr,null))},Or=function(e){var t=e.data,a=e.deleteRecord,r=e.handleCheck,s=Object(n.useState)(),i=Object(c.a)(s,2),o=i[0],m=i[1];Object(n.useEffect)((function(){u()}),[t]);var u=function(){m(t)},d=[{title:"Name",dataIndex:"first_name",key:"first_name",width:"30%",render:function(e,t){return{children:t.user.first_name,props:{"data-title":"Name"}}}},{title:"Respond",dataIndex:"can_respond",key:"can_respond",width:"20%",editable:!0,render:function(e,t){return l.a.createElement(j.a,{span:12,className:"d-flex justify-content-end changeColor"},l.a.createElement(Ft.a,{value:"reports",checked:e,onChange:function(e){return r(t)},disabled:!0}))}},{title:"Action",dataIndex:"user_id",key:"user_id",width:"20%",render:function(e,t){return l.a.createElement("span",{onClick:function(e){!function(e,t){t.preventDefault(),a(e)}(t,e)},className:"uploaded-icon icon icon-close d-inline-flex justify-content-end align-items-center"})}}];return l.a.createElement("div",{className:"no-bordered-grid"},l.a.createElement(se.a,{className:"no-bg-table",rowClassName:function(){return"editable-row"},columns:d,dataSource:o,rowKey:"rowkey"}))},Nr=function(e){var t=e.searchData,a=e.addAssignUser,r=e.data,s=Object(n.useState)(!1),i=Object(c.a)(s,2),o=i[0],m=i[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),p=d[0],h=d[1];return l.a.createElement(l.a.Fragment,null,o&&l.a.createElement(ke.a,{"data-test":"alert",message:"".concat(p," is already assigned for this openline."),type:"error",showIcon:!0}),l.a.createElement(ta.a,{"data-test":"Searchuser",options:t,placeholder:"Search Employee",filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},onSelect:function(e,t){return function(e,t){r.filter((function(e){return e.user.user_id===t.user_id})).length>0?(m(!0),h(e)):a(e,t)}(e,t)},onChange:function(){return m(!1),void h("")}}))},_r=a(42),Sr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1,assignedOpenLines:"",hotLineName:"",assignedEmp:""},a.showModal=function(){a.setState({visible:!0,employeeData:[],hotLineName:a.props.selectedRows.name,openlineId:a.props.selectedRows.openline_id}),(0,a.props.dispatch)(et()),a.getAssignedEmployee()},a.getAssignedEmployee=function(){var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.get(P+"getOpenlineAssignEmpl/"+a.props.selectedRows.openline_id,e).then((function(e){a.setState({assignedOpenLines:e.data})}))},a.handleOk=function(e){a.setState({visible:!1});var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.post(P+"openlineAssignEmpl/",a.state.assignedEmp,t).then((function(e){a.getAssignedEmployee(),a.setState({assignedEmp:""})})).catch((function(e){}))},a.handleCheck=function(e){var t=Object(_e.a)(a.state.assignedOpenLines),n=t.findIndex((function(t){return t.user_id===e.user_id}));t[n]=Object(T.a)({},t[n],{can_respond:!e.can_respond}),a.setState({assignedOpenLines:t});var l=Object(_e.a)(a.state.assignedEmp),r=l.findIndex((function(t){return t.user_id===e.user_id}));l[r]=Object(T.a)({},l[r],{can_respond:!e.can_respond}),a.setState({assignedEmp:l})},a.handleCancel=function(){a.setState({visible:!1})},a.deleteRecord=function(e){e.user.user_id;var t=a.state.assignedEmp&&a.state.assignedEmp.filter((function(t){return t.user_id!==e.user.user_id}));a.setState({assignedEmp:t});var n={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({user_id:e.user.user_id})};F.a.delete(P+"getOpenlineAssignEmpl/"+e.openline.openline_id,n).then((function(){a.getAssignedEmployee()})).catch((function(e){}))},a.addUser=function(e,t){var n=JSON.parse(v("user")),l=a.state,r=l.assignedOpenLines,s=l.assignedEmp,c={user:{user_id:parseInt(t.user_id),first_name:t.value},openline:{openline_id:a.state.openlineId},can_respond:!0,can_view_reports:!1},i={openline_id:a.state.openlineId,user_id:parseInt(t.user_id),can_respond:!0,can_view_reports:!1,created_by:parseInt(_r.AES.decrypt(n.user_details.org_user_id,"anonymoose").toString(_r.enc.Utf8))};a.setState({assignedOpenLines:[].concat(Object(_e.a)(r),[c]),assignedEmp:[].concat(Object(_e.a)(s),[i])})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props.manageEmpData,a=[];if(e.manageEmpData!=t){for(var n=0;n<t.length;n++)a.push({value:t[n].firstname.concat(" ",t[n].lastname),user_id:t[n].user_id});this.setState({employeeData:a})}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Show"),l.a.createElement(Te.a,{className:"modal-checkbox",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:590,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel",className:"ant-btn-secondary"},okText:"Done",cancelText:"Cancel"},l.a.createElement("div",null,"Employees with permissions to ",this.state.hotLineName),l.a.createElement(S.a,{className:"mt-2 mt-lg-5 mb-3 thead-outer"},l.a.createElement(j.a,{span:10},"Reply to Messages, Add Notes, Status & Urgency level")),l.a.createElement(Or,{data:this.state.assignedOpenLines,deleteRecord:this.deleteRecord,handleCheck:this.handleCheck}),l.a.createElement(S.a,{className:"mb-2 autocomplete"},l.a.createElement(j.a,{span:24},l.a.createElement(Nr,{searchData:this.state.employeeData,addAssignUser:this.addUser,data:this.state.assignedOpenLines}),l.a.createElement("small",null,"Hit enter to add")))))}}]),t}(n.Component);var jr=Object(i.b)((function(e){return{assignhotlines:e.assignedHotline.assignhotlines,manageEmpData:e.manageEmp.manageEmpData,message:e.message.message}}))(Sr),Cr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.deleteHotline()},a.handleCancel=function(){a.setState({visible:!1})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"deleteHotline",value:function(){this.props.history;var e={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.delete(P+"openline/"+this.props.openlineId,e).then((function(){window.location="/orgcc/openlinedirectory"})).catch((function(e){}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:this.showModal},"Delete"),l.a.createElement(Te.a,{title:"Delete Openline",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,centered:!0,width:370,okButtonProps:{children:"Custom OK"},cancelButtonProps:{children:"Custom cancel"},okText:"Yes",cancelText:"No"},l.a.createElement("p",null,"Are you sure you want to delete this Openline?")))}}]),t}(n.Component),wr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.hide=function(){a.setState({visible:!1})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{placement:"bottom",content:(e=this.props.data,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(o.b,{to:{pathname:"/orgcc/editopenline",state:e}},l.a.createElement("li",null,l.a.createElement("a",{href:"/orgcc/editopenline"},"Edit")," ")),l.a.createElement("li",null,l.a.createElement(Cr,{openlineId:e.openline_id}))))),trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},l.a.createElement("span",{className:"ico-grid-dots"},l.a.createElement("img",{src:Pe.a,alt:"DotIcon",className:"pr-4"}))));var e}}]),t}(l.a.Component),kr=O.a.Search,Ir=(l.a.createElement(ce.a,{style:{fontSize:16,color:"#1890ff"}}),N.a.Content),xr=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(e){var t=a.state.data,n=a.filterIt(t,e);a.setState({filterData:n})};var n=[{title:"Openline Name",dataIndex:"name",key:"name",width:"22%",render:function(e){return{children:e,props:{"data-title":"Openline Name"}}}},{title:"Start Date",dataIndex:"start_date",key:"start_date",width:"22%",render:function(e){return{children:e,props:{"data-title":"Start Date"}}}},{title:"End Date",dataIndex:"end_date",key:"end_date",width:"21%",render:function(e){return{children:e,props:{"data-title":"End Date"}}}},{title:"Permissions",dataIndex:"",key:"x",width:"20%",render:function(e){return{children:l.a.createElement("div",null,l.a.createElement(jr,{selectedRows:e})),props:{"data-title":"Permissions"}}}},{title:"Status",dataIndex:"",key:"x",width:"10%",render:function(e){return{children:5===e.status_id?l.a.createElement("div",{className:"primary-tag-rounded tag"},l.a.createElement("span",{className:"circle mr-1"}),"Active"):l.a.createElement("div",{className:"secondary-tag-rounded tag"},"Inactive"),props:{"data-title":"Status"}}}},{title:"",dataIndex:"",key:"x",width:"5%",render:function(e){return{children:l.a.createElement(wr,{data:e}),props:{"data-title":"Action"}}}}];return a.state={columns:n,data:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.openlines;null===t||void 0===t||t.forEach((function(e){e.start_date=ge()(e.start_date).utc().local().format("MM / DD / YYYY"),e.end_date=ge()(e.end_date).utc().local().format("MM / DD / YYYY")})),this.setState({data:t},(function(){e.onSearch("")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a=this;this.props.openlines!==e.openlines&&(null===(t=e.openlines)||void 0===t||t.forEach((function(e){e.start_date=ge()(e.start_date).utc().local().format("MM / DD / YYYY"),e.end_date=ge()(e.end_date).utc().local().format("MM / DD / YYYY")})),this.setState({data:e.openlines},(function(){a.onSearch("")})))}},{key:"filterIt",value:function(e,t){return t&&""!==t&&null!==t?e.filter((function(e){return Object.keys(e).some((function(a){if("string"===typeof e[a])return e[a].toUpperCase().includes(t.toUpperCase())}))})):e}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(He.a,{spinning:this.props.loader,size:"large"},l.a.createElement(S.a,{className:"content-center pt-0"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:this.props.data}),l.a.createElement(Ir,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Openline Directory")),l.a.createElement(j.a,{span:24},l.a.createElement(S.a,{className:"pt-1 pb-3 px-3 px-lg-0 sm-direction-reverse"},l.a.createElement(j.a,{span:24,lg:18,className:"search-row mt-2 mt-lg-0"},l.a.createElement(S.a,null,l.a.createElement(j.a,{span:24,lg:9,className:"search-box"},l.a.createElement(kr,{placeholder:"Search",onSearch:this.onSearch})))),l.a.createElement(j.a,{span:24,lg:6,className:"d-flex align-items-center justify-content-end"},l.a.createElement(o.b,{to:"/orgcc/createopenline"},l.a.createElement(me,{value:"Create Openline"}))))),l.a.createElement(ie,{rowKey:"openline_id",columns:this.state.columns,data:this.state.filterData})))))))}}]),t}(l.a.Component);var Dr=Object(i.b)((function(e){return{openlinesdata:e.openline.openlinesdata}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){(0,e.dispatch)((function(e){return Ze.getOpenlines().then((function(t){return e({type:"OPENLINE_SUCCESS",payload:{openlinesdata:t.data}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"OPENLINE_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))}))}),[]),Object(n.useEffect)((function(){null===e.openlinesdata?s(!0):null!==e.openlinesdata&&s(!1)}),[e.openlinesdata]),r||null===e.openlinesdata||0!==e.openlinesdata.length?l.a.createElement(xr,{openlines:e.openlinesdata,data:e,loader:r}):l.a.createElement(yr,{data:e})})),Ar=a(42),Tr=O.a.TextArea,Ur=(Ie.a.Option,N.a.Content),Fr=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)({end_date:"",help_text:"",openline_id:"",name:"",start_date:"",openline_image:"",status_id:"",iconHtml:""}),o=Object(c.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),g=h[0],f=h[1],E=Ce.a.useForm(),b=Object(c.a)(E,1)[0],y=Object(n.useState)(""),O=Object(c.a)(y,2),_=O[0],j=O[1],C=Object(m.h)();Object(n.useEffect)((function(){var e=ge()(C.state.start_date).format("YYYY-MM-DD"),t=ge()(C.state.end_date).format("YYYY-MM-DD"),a=[ge()(e,"YYYY/MM/DD"),ge()(t,"YYYY/MM/DD")];d({end_date:"",help_text:C.state.help_text,openline_id:C.state.openline_id,name:C.state.name,start_date:a,openline_image:C.state.openline_image,status_id:C.state.status_id.toString()}),b.setFieldsValue({name:C.state.name,help_text:C.state.help_text})}),[]);var w=function(e){d(Object(T.a)({},u,Object(Ne.a)({},e.target.id,e.target.value)))},k=function(e){var t=pe(),a=u.openline_id;delete u.hotline_id;var n={headers:{Authorization:t,Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};F.a.put(P+"openline/"+a+"/",e,n).then((function(e){200===e.status&&(s(!0),window.location="/orgcc/openlinedirectory")}))},I=function(e){switch(e){case"1":return"Sexual Harassment";case"2":return"Violence";case"3":return"Racism";case"4":return"Cyber Bullying";case"5":return"Fight";case"6":return"Discrimination";case"7":return"Slap";default:return""}},x=we.a.RangePicker;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{className:"inner-header"},l.a.createElement($,{amORGUser:!0})),l.a.createElement(S.a,{className:"content-center pt-0","data-test":"manageEmp"},l.a.createElement(N.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{amORGUser:!0,data:e}),l.a.createElement(Ur,{className:""},l.a.createElement(S.a,{className:"py-3"},l.a.createElement("h1",null,"Edit Openline")),l.a.createElement(He.a,{spinning:r,size:"large"},l.a.createElement("div",{className:"mid-content mt-4"},l.a.createElement(Ce.a,{"data-test":"createHotlineStepOne",className:"input-md w-md-100 w-75 floating-label",name:"validate_other",form:b},g&&l.a.createElement(Ce.a.Item,null,l.a.createElement(ke.a,{message:"Please fill the fields marked with asterisk(*)",type:"error",showIcon:!0})),l.a.createElement(xe,{label:"Directory Name",value:u.name},l.a.createElement(Ce.a.Item,{className:"required",name:"name",id:"name",rules:[{required:!0,message:"Please enter directory name"}]},l.a.createElement(Tr,{showCount:!0,maxLength:80,value:u.name,onChange:function(e){return w(e)},onBlur:function(e){return function(e){var t={headers:{Authorization:pe(),Accept:"application/json, text/plain","Content-Type":"application/json;charset=UTF-8"}};e.target.value!==C.state.name?F.a.post(P+"checkOpenline/",{openline_name:e.target.value},t).then((function(e){e.data&&j(e.data[0])})):j(!1)}(e)},name:"name",id:"name",className:"input-control textarea-input",htmlFor:"name",autoComplete:"off"}),"status: false"==_&&u.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.name.length>0&&l.a.createElement(De.a,{className:"successCheck",twoToneColor:"#52c41a"}),"status: true"==_&&l.a.createElement(ke.a,{message:"Sorry! This openline already exists in the system. Please use a different name.",type:"error",showIcon:!0}))),l.a.createElement(xe,{label:"Description",value:u.help_text},l.a.createElement(Ce.a.Item,{className:"required",name:"help_text",id:"help_text",rules:[{required:!0,message:"Please enter description"}]},l.a.createElement(l.a.Fragment,null,l.a.createElement(Tr,{className:"input-control textarea-input",value:u.help_text,onChange:function(e){return w(e)},name:"help_text",id:"help_text",htmlFor:"help_text",autoComplete:"off"})))),l.a.createElement(xe,{label:"Date",value:"start_date"},l.a.createElement(Ce.a.Item,{className:"input-control datepicker-wrapper"},l.a.createElement(x,{className:"datepicker w-100 w-lg-50 mr-0 mr-lg-5 required",name:"start_date",value:u.start_date,disabledDate:function(e){return e&&e<ge()().startOf("day")},onChange:function(e){return function(e,t){d(Object(T.a)({},u,Object(Ne.a)({},t,e)))}(e,"start_date")},rules:[{required:!0,message:"Please select start date"}]}))),l.a.createElement(xe,{label:"Status",value:u.status_id},l.a.createElement(Ce.a.Item,{className:"required",name:"status"},l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{placeholder:"Status",className:"input-control w-100 w-lg-50",value:u.status_id,htmlFor:"status",onSelect:function(e){return function(e,t){d(Object(T.a)({},u,Object(Ne.a)({},t,e)))}(e,"status_id")}},l.a.createElement(Ie.a.Option,{value:"5"},"Active"),l.a.createElement(Ie.a.Option,{value:"4"},"Inactive"))))),l.a.createElement(Ce.a.Item,{className:""},l.a.createElement(Ce.a.Item,{className:"upload-control",name:"upload",valuePropName:"fileList"},l.a.createElement(al.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",defaultFileList:[{status:"done",url:u.openline_image}],onChange:function(e){return function(e,t){var a=e.fileList.slice(-1);a.forEach((function(e,t){var a=new FileReader;a.onload=function(t){e.base64=t.target.result},a.readAsDataURL(e.originFileObj)})),d(Object(T.a)({},u,Object(Ne.a)({},t,a)))}(e,"openline_image")}},0===u.openline_image.length&&l.a.createElement(oe.a,{icon:l.a.createElement(cr.a,null)},"Upload Image")),I(u.openline_id)&&l.a.createElement("div",{className:"ant-upload-list ant-upload-list-picture"},l.a.createElement("div",{className:"ant-upload-list-item ant-upload-list-item-list-type-picture"},l.a.createElement("div",{className:"ant-upload-list-item-info d-inline-flex w-100"},l.a.createElement("span",{className:"d-inline-flex align-items-center"},l.a.createElement("a",{className:"ant-upload-list-item-thumbnail"},ReactHtmlParser(u.iconHtml)),l.a.createElement("span",{className:"ant-upload-list-item-name ant-upload-list-item-name-icon-count-1",title:I(u.openline_id)},I(u.openline_id)))))))),l.a.createElement("div",{className:"steps-action mt-5"},l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){if(s(!0),u.name&&u.name.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.help_text&&u.help_text.replace(/^\s*/,"").replace(/\s*$/,"").length>0&&u.openline_image&&u.status_id&&u.start_date){f(!1),e.preventDefault();var t=JSON.parse(v("user"));!function(e,t,a){var n=document.createElement("CANVAS"),l=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,l.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e}(C.state.openline_image,(function(e){var a={end_date:ge()(u.start_date[1]).format("DD-MM-YYYY"),help_text:u.help_text,openline_id:u.openline_id,openline_image:e,name:u.name,start_date:ge()(u.start_date[0]).format("DD-MM-YYYY"),status_id:parseInt(u.status_id),updated_by:parseInt(Ar.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Ar.enc.Utf8)),created_by:parseInt(Ar.AES.decrypt(t.user_details.org_user_id,"anonymoose").toString(Ar.enc.Utf8))};"status: false"!=_&&u.name!==C.state.name||k(a)}))}else f(!1)},"data-test":"stepOneNext",style:{margin:"0 8px"}},"Update"),l.a.createElement(oe.a,{type:"primary",htmlType:"submit",onClick:function(e){window.location="/orgcc/openlinedirectory"},"data-test":"stepOneNext"},"Cancel"))))))))))},Pr=a(42);var Mr,Lr,Rr,Yr,zr,Hr,Br,qr,Vr,Gr,Jr=function(e){var t=v("user"),a=JSON.parse(v("user")),n=!1,r=!1,s=!1;t||(n=!0,r=!0,s=!0),t&&a&&"null"!=a.user_data&&(n="true"===Pr.AES.decrypt(a.user_data.is_amcc_user,"anonymoose").toString(Pr.enc.Utf8),r="true"===Pr.AES.decrypt(a.user_data.is_org_cc_user,"anonymoose").toString(Pr.enc.Utf8),s="true"===Pr.AES.decrypt(a.user_data.is_am_web_user,"anonymoose").toString(Pr.enc.Utf8));var c=window.location.pathname;return l.a.createElement(o.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/editprofile",component:Jn}),l.a.createElement(m.b,{path:"/addemployee",component:tl}),l.a.createElement(m.b,{path:"/importfile",component:il}),l.a.createElement(m.b,{path:"/createmanually",component:ul}),l.a.createElement(y,{path:"/changepassword",component:Ct}),l.a.createElement(m.b,{exact:!0,path:"/login",component:Ot}),l.a.createElement(m.b,{path:"/forgotpassword",component:dt}),l.a.createElement(m.b,{path:"/resetpassword",component:ft}),!r||"/orgcc/createhotline"!==c&&"/orgcc/edithotline"!==c&&"/orgcc/editopenline"!==c&&"/orgcc/manageemployees"!==c&&"/orgcc/assignhotline"!==c&&"/orgcc/hotlinedirectory"!==c&&"/orgcc/createopenline"!==c&&"/orgcc/openlinedirectory"!==c&&"/orgcc/pollsdirectory"!==c&&"/orgcc/createpoll"!==c&&"/orgcc/previewpoll"!==c&&"/orgcc/pollresponse"!==c&&"/orgcc/existingpolls"!==c&&"/"!==c&&"/login"!==c?!s||"/amweb/hotlinemessages"!==c&&"/login"!==c&&"/"!==c&&"/amweb/openlinemessages"!==c?n&&("/amcc/manageorganizations"===c||"/amcc/createorg"===c||"/"===c||c.includes("/amcc/editorg")||c.includes("/amcc/orgdetails")||"/login"===c)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(m.d,null,l.a.createElement(y,{exact:!0,path:"/amcc/orgdetails/:id",amcc:!0,component:Bn}),l.a.createElement(y,{exact:!0,path:"/amcc/manageorganizations",amcc:!0,component:Xe}),l.a.createElement(y,{exact:!0,path:"/amcc/createorg",amcc:!0,component:Je}),l.a.createElement(y,{exact:!0,path:"/amcc/editorg/:id",amcc:!0,component:Vn}))," "):t&&l.a.createElement(m.b,{component:Pn}):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(m.d,null,l.a.createElement(y,{exact:!0,path:"/amweb/hotlinemessages",amweb:!0,component:Xa}),l.a.createElement(y,{exact:!0,path:"/amweb/openlinemessages",amweb:!0,component:Tn}))):l.a.createElement(m.d,null,l.a.createElement(y,{exact:!0,path:"/orgcc/createhotline",amorg:!0,component:Jt}),l.a.createElement(y,{exact:!0,path:"/orgcc/manageemployees",amorg:!0,component:rt}),l.a.createElement(y,{exact:!0,path:"/orgcc/assignhotline",amorg:!0,component:Pt}),l.a.createElement(y,{exact:!0,path:"/orgcc/hotlinedirectory",amorg:!0,component:ma}),l.a.createElement(y,{exact:!0,path:"/orgcc/edithotline",amorg:!0,component:$n}),l.a.createElement(y,{exact:!0,path:"/orgcc/createopenline",amorg:!0,component:vr}),l.a.createElement(y,{exact:!0,path:"/orgcc/openlinedirectory",amorg:!0,component:Dr}),l.a.createElement(y,{exact:!0,path:"/orgcc/editopenline",amorg:!0,component:Fr}),l.a.createElement(y,{exact:!0,path:"/orgcc/pollsdirectory",amorg:!0,component:Ql}),l.a.createElement(y,{exact:!0,path:"/orgcc/previewpoll",amorg:!0,component:Al}),l.a.createElement(y,{exact:!0,path:"/orgcc/createpoll",amorg:!0,component:Pl}),l.a.createElement(y,{exact:!0,path:"/orgcc/pollresponse",amorg:!0,component:$l}),l.a.createElement(y,{exact:!0,path:"/orgcc/editpoll",amorg:!0,component:ar}),l.a.createElement(y,{exact:!0,path:"/orgcc/existingpolls",amorg:!0,component:sr}))))},Qr=a(116),Wr=a(412),Kr=a(413),$r=a(42),Zr="",Xr=v("current");Zr=Xr?$r.AES.decrypt(Xr,"anonymoose"):"";var es=JSON.parse(v("user")),ts=es?$r.AES.decrypt(null===es||void 0===es?void 0:null===(Mr=es.user_details)||void 0===Mr?void 0:Mr.first_name,"anonymoose").toString($r.enc.Utf8):"",as=es?$r.AES.decrypt(null===es||void 0===es?void 0:null===(Lr=es.user_details)||void 0===Lr?void 0:Lr.last_name,"anonymoose").toString($r.enc.Utf8):"",ns=es?$r.AES.decrypt(null===es||void 0===es?void 0:null===(Rr=es.user_data)||void 0===Rr?void 0:Rr.email,"anonymoose").toString($r.enc.Utf8):"",ls=es?$r.AES.decrypt(null===es||void 0===es?void 0:null===(Yr=es.user_data)||void 0===Yr?void 0:Yr.mobile_number,"anonymoose").toString($r.enc.Utf8):"",rs=!!es&&"true"===$r.AES.decrypt(null===(zr=es.user_data)||void 0===zr?void 0:zr.is_am_web_user,"anonymoose").toString($r.enc.Utf8),ss=!!es&&"true"===$r.AES.decrypt(null===(Hr=es.user_data)||void 0===Hr?void 0:Hr.is_amcc_user,"anonymoose").toString($r.enc.Utf8),cs=!!es&&"true"===$r.AES.decrypt(null===(Br=es.user_data)||void 0===Br?void 0:Br.is_org_cc_user,"anonymoose").toString($r.enc.Utf8),is=!!es&&"true"===$r.AES.decrypt(null===(qr=es.user_data)||void 0===qr?void 0:qr.is_idb_user,"anonymoose").toString($r.enc.Utf8),os=!!es&&"true"===$r.AES.decrypt(null===(Vr=es.user_data)||void 0===Vr?void 0:Vr.is_seeded_user,"anonymoose").toString($r.enc.Utf8),ms=!!es&&"true"===$r.AES.decrypt(null===(Gr=es.user_data)||void 0===Gr?void 0:Gr.is_app_user,"anonymoose").toString($r.enc.Utf8),us=Object(T.a)({},es,{user_data:Object(T.a)({},null===es||void 0===es?void 0:es.user_data,{email:ns,mobile_number:ls,is_am_web_user:rs,is_amcc_user:ss,is_app_user:ms,is_org_cc_user:cs,is_idb_user:is,is_seeded_user:os}),user_details:Object(T.a)({},null===es||void 0===es?void 0:es.user_details,{first_name:ts,last_name:as})}),ds=Zr.toString($r.enc.Utf8),ps=es?{isLoggedIn:!0,user:us,current:ds.replaceAll('^"+|"+$',"")}:{isLoggedIn:!1,user:null,current:null},hs={},gs={manageOrgData:[]},fs={manageEmpData:[]},Es={hotlinesdata:null,assignhotlinedata:[]},vs={assignhotlinedata:[]},bs={openlinesdata:null},ys={pollsdata:[]},Os=Object(Qr.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ps,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOGIN_SUCCESS":return Object(T.a)({},e,{isLoggedIn:!0,user:n.user,current:n.current});case"LOGIN_FAIL":case"LOGOUT":return Object(T.a)({},e,{isLoggedIn:!1,user:null,current:null});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hs,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_MESSAGE":return{message:n};case"CLEAR_MESSAGE":return{message:""};default:return e}},manageOrg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gs,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MANAGEORG_SUCCESS":return Object(T.a)({},e,{manageOrgData:n.manageOrgData});case"MANAGEORG_FAIL":return Object(T.a)({},e,{manageOrgData:[]});default:return e}},manageEmp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fs,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MANAGEEMP_SUCCESS":return Object(T.a)({},e,{manageEmpData:n.manageEmpData});case"MANAGEEMP_FAIL":return Object(T.a)({},e,{manageEmpData:[]});default:return e}},hotlinedata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Es,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HOTLINE_SUCCESS":return Object(T.a)({},e,{hotlinesdata:n.hotlinesdata});case"HOTLINE_FAIL":return Object(T.a)({},e,{hotlinesdata:[]});case"HOTLINE_SUCCESS":return Object(T.a)({},e,{assignhotlinedata:n.assignhotlinedata});case"HOTLINE_FAIL":return Object(T.a)({},e,{assignhotlinedata:[]});default:return e}},assignedHotline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vs,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"HOTLINE_SUCCESS":return Object(T.a)({},e,{assignhotlinedata:n.assignhotlinedata});case"HOTLINE_FAIL":return Object(T.a)({},e,{assignhotlinedata:[]});default:return e}},openline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bs,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"OPENLINE_SUCCESS":return Object(T.a)({},e,{openlinesdata:n.openlinesdata});case"OPENLINE_FAIL":return Object(T.a)({},e,{openlinesdata:[]});default:return e}},poll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ys,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"POLL_SUCCESS":return Object(T.a)({},e,{pollsdata:n.pollsdata});case"POLL_FAIL":return Object(T.a)({},e,{pollsdata:[]});default:return e}}}),Ns=[Kr.a],_s=Object(Qr.createStore)(Os,Object(Wr.composeWithDevTools)(Qr.applyMiddleware.apply(void 0,Ns))),Ss=a(414);var js=function(){var e=null,t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),m=Object(c.a)(o,2),u=m[0],d=m[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),g=h[0],f=h[1];return l.a.createElement(i.a,{store:_s},l.a.createElement(Ss.a,{ref:function(t){e=t},element:document,onIdle:function(t){v("user")&&(g?(s(!1),d(!0)):(s(!0),e.reset(),f(!0)))},onAction:function(e){f(!1)},onActive:function(e){f(!1)},debounce:250,timeout:g?6e4:12e5}),l.a.createElement("div",{className:"App"},l.a.createElement("div",null,l.a.createElement("div",{className:"content"},l.a.createElement(Te.a,{visible:r,onOk:function(){s(!1)},onCancel:function(){s(!1)},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Ok"},l.a.createElement("p",null,"You are about to log out. Click Ok to keep yourself logged in.")),l.a.createElement(Te.a,{visible:u,onOk:function(){v("user")&&R.logout()},onCancel:function(){v("user")&&R.logout()},centered:!0,width:350,okButtonProps:{children:"Custom OK"},cancelButtonProps:{style:{display:"none"}},okText:"Ok"},l.a.createElement("p",null,"You are logged out. Click Ok to log in again.")),l.a.createElement(Jr,null)))))};s.a.render(l.a.createElement(js,null),document.getElementById("root"))},86:function(e,t,a){},87:function(e,t,a){}},[[428,1,2]]]);
//# sourceMappingURL=main.a0824334.chunk.js.map